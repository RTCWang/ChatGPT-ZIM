!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r,o=t();for(r in o)("object"==typeof exports?exports:e)[r]=o[r]}}("undefined"!=typeof self?self:this,(function(){return function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=48)}([function(e,t){e.exports=o;var r=null;try{r=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function o(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function n(e){return!0===(e&&e.__isLong__)}Object.defineProperty(o.prototype,"__isLong__",{value:!0}),o.isLong=n;var i={},s={};function a(e,t){var r,o,n;return t?(n=0<=(e>>>=0)&&e<256)&&(o=s[e])?o:(r=c(e,(0|e)<0?-1:0,!0),n&&(s[e]=r),r):(n=-128<=(e|=0)&&e<128)&&(o=i[e])?o:(r=c(e,e<0?-1:0,!1),n&&(i[e]=r),r)}function u(e,t){if(isNaN(e))return t?y:_;if(t){if(e<0)return y;if(f<=e)return M}else{if(e<=-g)return I;if(g<=e+1)return k}return e<0?u(-e,t).neg():c(e%d|0,e/d|0,t)}function c(e,t,r){return new o(e,t,r)}o.fromInt=a,o.fromNumber=u,o.fromBits=c;var l=Math.pow;function p(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return _;if(t="number"==typeof t?(r=t,!1):!!t,(r=r||10)<2||36<r)throw RangeError("radix");var o;if(0<(o=e.indexOf("-")))throw Error("interior hyphen");if(0===o)return p(e.substring(1),t,r).neg();for(var n=u(l(r,8)),i=_,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+a),r);i=a<8?(a=u(l(r,a)),i.mul(a).add(u(c))):(i=i.mul(n)).add(u(c))}return i.unsigned=t,i}function h(e,t){return"number"==typeof e?u(e,t):"string"==typeof e?p(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}o.fromString=p,o.fromValue=h;var d=4294967296,f=d*d,g=f/2,m=a(1<<24),_=a(0),y=(o.ZERO=_,a(0,!0)),b=(o.UZERO=y,a(1)),v=(o.ONE=b,a(1,!0)),w=(o.UONE=v,a(-1)),k=(o.NEG_ONE=w,c(-1,2147483647,!1)),M=(o.MAX_VALUE=k,c(-1,-1,!0)),I=(o.MAX_UNSIGNED_VALUE=M,c(0,-2147483648,!1));(e=(o.MIN_VALUE=I,o.prototype)).toInt=function(){return this.unsigned?this.low>>>0:this.low},e.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},e.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";var t,r;if(this.isNegative())return this.eq(I)?(r=u(e),r=(t=this.div(r)).mul(r).sub(this),t.toString(e)+r.toInt().toString(e)):"-"+this.neg().toString(e);for(var o=u(l(e,6),this.unsigned),n=this,i="";;){var s=n.div(o),a=(n.sub(s.mul(o)).toInt()>>>0).toString(e);if((n=s).isZero())return a+i;for(;a.length<6;)a="0"+a;i=""+a+i}},e.getHighBits=function(){return this.high},e.getHighBitsUnsigned=function(){return this.high>>>0},e.getLowBits=function(){return this.low},e.getLowBitsUnsigned=function(){return this.low>>>0},e.getNumBitsAbs=function(){if(this.isNegative())return this.eq(I)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;0<t&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},e.isZero=function(){return 0===this.high&&0===this.low},e.eqz=e.isZero,e.isNegative=function(){return!this.unsigned&&this.high<0},e.isPositive=function(){return this.unsigned||0<=this.high},e.isOdd=function(){return 1==(1&this.low)},e.isEven=function(){return 0==(1&this.low)},e.equals=function(e){return n(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},e.eq=e.equals,e.notEquals=function(e){return!this.eq(e)},e.neq=e.notEquals,e.ne=e.notEquals,e.lessThan=function(e){return this.comp(e)<0},e.lt=e.lessThan,e.lessThanOrEqual=function(e){return this.comp(e)<=0},e.lte=e.lessThanOrEqual,e.le=e.lessThanOrEqual,e.greaterThan=function(e){return 0<this.comp(e)},e.gt=e.greaterThan,e.greaterThanOrEqual=function(e){return 0<=this.comp(e)},e.gte=e.greaterThanOrEqual,e.ge=e.greaterThanOrEqual,e.compare=function(e){if(n(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},e.comp=e.compare,e.negate=function(){return!this.unsigned&&this.eq(I)?I:this.not().add(b)},e.neg=e.negate,e.add=function(e){n(e)||(e=h(e));var t=this.high>>>16,r=65535&this.high,o=this.low>>>16,i=65535&this.low,s=e.high>>>16,a=65535&e.high,u=e.low>>>16,l=0,p=0,d=0,f=0;return p+=(d=d+((f+=i+(65535&e.low))>>>16)+(o+u))>>>16,c((d&=65535)<<16|(f&=65535),((l+=(p+=r+a)>>>16)+(t+s)&65535)<<16|(p&=65535),this.unsigned)},e.subtract=function(e){return n(e)||(e=h(e)),this.add(e.neg())},e.sub=e.subtract,e.multiply=function(e){if(this.isZero())return _;if(n(e)||(e=h(e)),r)return c(r.mul(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned);if(e.isZero())return _;if(this.eq(I))return e.isOdd()?I:_;if(e.eq(I))return this.isOdd()?I:_;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return u(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,o=65535&this.high,i=this.low>>>16,s=65535&this.low,a=e.high>>>16,l=65535&e.high,p=e.low>>>16,d=0,f=0,g=0,y=(y=0)+((f=f+((g+=s*(e=65535&e.low))>>>16)+i*e)>>>16)+((f=(65535&f)+s*p)>>>16);return c((f&=65535)<<16|(g&=65535),((d+=(y+=o*e)>>>16)+((y=(65535&y)+i*p)>>>16)+((y=(65535&y)+s*l)>>>16)+(t*e+o*p+i*l+s*a)&65535)<<16|(y&=65535),this.unsigned)},e.mul=e.multiply,e.divide=function(e){if((e=n(e)?e:h(e)).isZero())throw Error("division by zero");var t,o,i;if(r)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?r.div_u:r.div_s)(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:_;if(this.unsigned){if((e=e.unsigned?e:e.toUnsigned()).gt(this))return y;if(e.gt(this.shru(1)))return v;o=y}else{if(this.eq(I))return e.eq(b)||e.eq(w)?I:e.eq(I)?b:(i=this.shr(1).div(e).shl(1)).eq(_)?e.isNegative()?b:w:(t=this.sub(e.mul(i)),i.add(t.div(e)));if(e.eq(I))return this.unsigned?y:_;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=_}for(t=this;t.gte(e);){i=Math.max(1,Math.floor(t.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(i)/Math.LN2),a=s<=48?1:l(2,s-48),p=u(i),d=p.mul(e);d.isNegative()||d.gt(t);)d=(p=u(i-=a,this.unsigned)).mul(e);p.isZero()&&(p=b),o=o.add(p),t=t.sub(d)}return o},e.div=e.divide,e.modulo=function(e){return n(e)||(e=h(e)),r?c((this.unsigned?r.rem_u:r.rem_s)(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},e.mod=e.modulo,e.rem=e.modulo,e.not=function(){return c(~this.low,~this.high,this.unsigned)},e.and=function(e){return n(e)||(e=h(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},e.or=function(e){return n(e)||(e=h(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},e.xor=function(e){return n(e)||(e=h(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},e.shiftLeft=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},e.shl=e.shiftLeft,e.shiftRight=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},e.shr=e.shiftRight,e.shiftRightUnsigned=function(e){var t;return n(e)&&(e=e.toInt()),0==(e&=63)?this:(t=this.high,e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned))},e.shru=e.shiftRightUnsigned,e.shr_u=e.shiftRightUnsigned,e.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},e.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},e.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},e.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},e.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},o.fromBytes=function(e,t,r){return r?o.fromBytesLE(e,t):o.fromBytesBE(e,t)},o.fromBytesLE=function(e,t){return new o(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},o.fromBytesBE=function(e,t){return new o(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},function(e,t,r){"use strict";r.r(t),r.d(t,"version",(function(){return o})),r.d(t,"VERSION",(function(){return n})),r.d(t,"atob",(function(){return A})),r.d(t,"atobPolyfill",(function(){return R})),r.d(t,"btoa",(function(){return m})),r.d(t,"btoaPolyfill",(function(){return g})),r.d(t,"fromBase64",(function(){return T})),r.d(t,"toBase64",(function(){return M})),r.d(t,"utob",(function(){return w})),r.d(t,"encode",(function(){return M})),r.d(t,"encodeURI",(function(){return I})),r.d(t,"encodeURL",(function(){return I})),r.d(t,"btou",(function(){return C})),r.d(t,"decode",(function(){return T})),r.d(t,"isValid",(function(){return q})),r.d(t,"fromUint8Array",(function(){return y})),r.d(t,"toUint8Array",(function(){return E})),r.d(t,"extendString",(function(){return B})),r.d(t,"extendUint8Array",(function(){return G})),r.d(t,"extendBuiltins",(function(){return N})),r.d(t,"Base64",(function(){return j}));const o="3.7.2",n=o;r="function"==typeof atob,t="function"==typeof btoa;var i="function"==typeof Buffer;const s="function"==typeof TextDecoder?new TextDecoder:void 0,a="function"==typeof TextEncoder?new TextEncoder:void 0,u=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),c=(e=>{let t={};return e.forEach((e,r)=>t[e]=r),t})(u),l=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,p=String.fromCharCode.bind(String),h="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(e,t=(e=>e))=>new Uint8Array(Array.prototype.slice.call(e,0).map(t)),d=e=>e.replace(/=/g,"").replace(/[+\/]/g,e=>"+"==e?"-":"_"),f=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),g=e=>{let t,r,o,n,i="";var s=e.length%3;for(let s=0;s<e.length;){if(255<(r=e.charCodeAt(s++))||255<(o=e.charCodeAt(s++))||255<(n=e.charCodeAt(s++)))throw new TypeError("invalid character found");t=r<<16|o<<8|n,i+=u[t>>18&63]+u[t>>12&63]+u[t>>6&63]+u[63&t]}return s?i.slice(0,s-3)+"===".substring(s):i},m=t?e=>btoa(e):i?e=>Buffer.from(e,"binary").toString("base64"):g,_=i?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let r=0,o=e.length;r<o;r+=4096)t.push(p.apply(null,e.subarray(r,r+4096)));return m(t.join(""))},y=(e,t=!1)=>t?d(_(e)):_(e),b=e=>{var t;return e.length<2?(t=e.charCodeAt(0))<128?e:t<2048?p(192|t>>>6)+p(128|63&t):p(224|t>>>12&15)+p(128|t>>>6&63)+p(128|63&t):(t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320),p(240|t>>>18&7)+p(128|t>>>12&63)+p(128|t>>>6&63)+p(128|63&t))},v=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,w=e=>e.replace(v,b),k=i?e=>Buffer.from(e,"utf8").toString("base64"):a?e=>_(a.encode(e)):e=>m(w(e)),M=(e,t=!1)=>t?d(k(e)):k(e),I=e=>M(e,!0),S=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,D=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return p(55296+(t>>>10))+p(56320+(1023&t));case 3:return p((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return p((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},C=e=>e.replace(S,D),R=e=>{if(e=e.replace(/\s+/g,""),!l.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,r,o,n="";for(let i=0;i<e.length;)t=c[e.charAt(i++)]<<18|c[e.charAt(i++)]<<12|(r=c[e.charAt(i++)])<<6|(o=c[e.charAt(i++)]),n+=64===r?p(t>>16&255):64===o?p(t>>16&255,t>>8&255):p(t>>16&255,t>>8&255,255&t);return n},A=r?e=>atob(f(e)):i?e=>Buffer.from(e,"base64").toString("binary"):R,O=i?e=>h(Buffer.from(e,"base64")):e=>h(A(e),e=>e.charCodeAt(0)),E=e=>O(P(e)),x=i?e=>Buffer.from(e,"base64").toString("utf8"):s?e=>s.decode(O(e)):e=>C(A(e)),P=e=>f(e.replace(/[-_]/g,e=>"-"==e?"+":"/")),T=e=>x(P(e)),q=e=>"string"==typeof e&&(e=e.replace(/\s+/g,"").replace(/={0,2}$/,""),!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)),L=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),B=function(){var e=(e,t)=>Object.defineProperty(String.prototype,e,L(t));e("fromBase64",(function(){return T(this)})),e("toBase64",(function(e){return M(this,e)})),e("toBase64URI",(function(){return M(this,!0)})),e("toBase64URL",(function(){return M(this,!0)})),e("toUint8Array",(function(){return E(this)}))},G=function(){var e=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,L(t));e("toBase64",(function(e){return y(this,e)})),e("toBase64URI",(function(){return y(this,!0)})),e("toBase64URL",(function(){return y(this,!0)}))},N=()=>{B(),G()},j={version:o,VERSION:n,atob:A,atobPolyfill:R,btoa:m,btoaPolyfill:g,fromBase64:T,toBase64:M,encode:M,encodeURI:I,encodeURL:I,utob:w,btou:C,decode:T,isValid:q,fromUint8Array:y,toUint8Array:E,extendString:B,extendUint8Array:G,extendBuiltins:N}},function(e,t,r){(function(t){e.exports=function(e){var o;if("undefined"!=typeof window&&window.crypto&&(o=window.crypto),"undefined"!=typeof self&&self.crypto&&(o=self.crypto),!(o=!(o=!(o="undefined"!=typeof globalThis&&globalThis.crypto?globalThis.crypto:o)&&"undefined"!=typeof window&&window.msCrypto?window.msCrypto:o)&&void 0!==t&&t.crypto?t.crypto:o))try{o=r(20)}catch(s){}var n=Object.create||function(e){return i.prototype=e,e=new i,i.prototype=null,e};function i(){}var s={},a=s.lib={},u=a.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=a.WordArray=u.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||p).stringify(this)},concat:function(e){var t=this.words,r=e.words,o=this.sigBytes,n=e.sigBytes;if(this.clamp(),o%4)for(var i=0;i<n;i++){var s=r[i>>>2]>>>24-i%4*8&255;t[o+i>>>2]|=s<<24-(o+i)%4*8}else for(var a=0;a<n;a+=4)t[o+a>>>2]=r[a>>>2];return this.sigBytes+=n,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=u.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(function(){if(o){if("function"==typeof o.getRandomValues)try{return o.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof o.randomBytes)try{return o.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")}());return new c.init(t,e)}}),l=s.enc={},p=l.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,o=[],n=0;n<r;n++){var i=t[n>>>2]>>>24-n%4*8&255;o.push((i>>>4).toString(16)),o.push((15&i).toString(16))}return o.join("")},parse:function(e){for(var t=e.length,r=[],o=0;o<t;o+=2)r[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new c.init(r,t/2)}},h=l.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,o=[],n=0;n<r;n++){var i=t[n>>>2]>>>24-n%4*8&255;o.push(String.fromCharCode(i))}return o.join("")},parse:function(e){for(var t=e.length,r=[],o=0;o<t;o++)r[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new c.init(r,t)}},d=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},f=a.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r,o=this._data,n=o.words,i=o.sigBytes,s=this.blockSize,a=i/(4*s),u=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s;t=e.min(4*u,i);if(u){for(var l=0;l<u;l+=s)this._doProcessBlock(n,l);r=n.splice(0,u),o.sigBytes-=t}return new c.init(r,t)},clone:function(){var e=u.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),g=(a.Hasher=f.extend({cfg:u.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new g.HMAC.init(e,r).finalize(t)}}}),s.algo={});return s}(Math)}).call(this,r(4))},function(e,t,r){"use strict";e.exports=r(25)},function(e,t){var r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";(function(e){var o=t;function n(e,t,r){for(var o=Object.keys(t),n=0;n<o.length;++n)void 0!==e[o[n]]&&r||(e[o[n]]=t[o[n]]);return e}function i(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&n(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}o.asPromise=r(26),o.base64=r(27),o.EventEmitter=r(28),o.float=r(29),o.inquire=r(30),o.utf8=r(31),o.pool=r(32),o.LongBits=r(33),o.isNode=Boolean(void 0!==e&&e&&e.process&&e.process.versions&&e.process.versions.node),o.global=o.isNode&&e||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,o.emptyArray=Object.freeze?Object.freeze([]):[],o.emptyObject=Object.freeze?Object.freeze({}):{},o.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},o.isString=function(e){return"string"==typeof e||e instanceof String},o.isObject=function(e){return e&&"object"==typeof e},o.isset=o.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||0<(Array.isArray(r)?r:Object.keys(r)).length)},o.Buffer=function(){try{var e=o.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),o._Buffer_from=null,o._Buffer_allocUnsafe=null,o.newBuffer=function(e){return"number"==typeof e?o.Buffer?o._Buffer_allocUnsafe(e):new o.Array(e):o.Buffer?o._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},o.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,o.Long=o.global.dcodeIO&&o.global.dcodeIO.Long||o.global.Long||o.inquire("long"),o.key2Re=/^true|false|0|1$/,o.key32Re=/^-?(?:0|[1-9][0-9]*)$/,o.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,o.longToHash=function(e){return e?o.LongBits.from(e).toHash():o.LongBits.zeroHash},o.longFromHash=function(e,t){return e=o.LongBits.fromHash(e),o.Long?o.Long.fromBits(e.lo,e.hi,t):e.toNumber(Boolean(t))},o.merge=n,o.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},o.newError=i,o.ProtocolError=i("ProtocolError"),o.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;-1<r;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},o.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},o.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},o._configure=function(){var e=o.Buffer;e?(o._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},o._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):o._Buffer_from=o._Buffer_allocUnsafe=null}}).call(this,r(4))},function(e,t,r){e.exports=function(e){for(var t=Math,r=e,o=r.lib,n=o.WordArray,i=o.Hasher,s=r.algo,a=[],u=0;u<64;u++)a[u]=4294967296*t.abs(t.sin(u+1))|0;var c=s.MD5=i.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var o=t+r,n=e[o];e[o]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var i=this._hash.words,s=e[t+0],u=e[t+1],c=e[t+2],f=e[t+3],g=e[t+4],m=e[t+5],_=e[t+6],y=e[t+7],b=e[t+8],v=e[t+9],w=e[t+10],k=e[t+11],M=e[t+12],I=e[t+13],S=e[t+14],D=e[t+15],C=i[0],R=i[1],A=i[2],O=i[3];C=l(C,R,A,O,s,7,a[0]),O=l(O,C,R,A,u,12,a[1]),A=l(A,O,C,R,c,17,a[2]),R=l(R,A,O,C,f,22,a[3]),C=l(C,R,A,O,g,7,a[4]),O=l(O,C,R,A,m,12,a[5]),A=l(A,O,C,R,_,17,a[6]),R=l(R,A,O,C,y,22,a[7]),C=l(C,R,A,O,b,7,a[8]),O=l(O,C,R,A,v,12,a[9]),A=l(A,O,C,R,w,17,a[10]),R=l(R,A,O,C,k,22,a[11]),C=l(C,R,A,O,M,7,a[12]),O=l(O,C,R,A,I,12,a[13]),A=l(A,O,C,R,S,17,a[14]),C=p(C,R=l(R,A,O,C,D,22,a[15]),A,O,u,5,a[16]),O=p(O,C,R,A,_,9,a[17]),A=p(A,O,C,R,k,14,a[18]),R=p(R,A,O,C,s,20,a[19]),C=p(C,R,A,O,m,5,a[20]),O=p(O,C,R,A,w,9,a[21]),A=p(A,O,C,R,D,14,a[22]),R=p(R,A,O,C,g,20,a[23]),C=p(C,R,A,O,v,5,a[24]),O=p(O,C,R,A,S,9,a[25]),A=p(A,O,C,R,f,14,a[26]),R=p(R,A,O,C,b,20,a[27]),C=p(C,R,A,O,I,5,a[28]),O=p(O,C,R,A,c,9,a[29]),A=p(A,O,C,R,y,14,a[30]),C=h(C,R=p(R,A,O,C,M,20,a[31]),A,O,m,4,a[32]),O=h(O,C,R,A,b,11,a[33]),A=h(A,O,C,R,k,16,a[34]),R=h(R,A,O,C,S,23,a[35]),C=h(C,R,A,O,u,4,a[36]),O=h(O,C,R,A,g,11,a[37]),A=h(A,O,C,R,y,16,a[38]),R=h(R,A,O,C,w,23,a[39]),C=h(C,R,A,O,I,4,a[40]),O=h(O,C,R,A,s,11,a[41]),A=h(A,O,C,R,f,16,a[42]),R=h(R,A,O,C,_,23,a[43]),C=h(C,R,A,O,v,4,a[44]),O=h(O,C,R,A,M,11,a[45]),A=h(A,O,C,R,D,16,a[46]),C=d(C,R=h(R,A,O,C,c,23,a[47]),A,O,s,6,a[48]),O=d(O,C,R,A,y,10,a[49]),A=d(A,O,C,R,S,15,a[50]),R=d(R,A,O,C,m,21,a[51]),C=d(C,R,A,O,M,6,a[52]),O=d(O,C,R,A,f,10,a[53]),A=d(A,O,C,R,w,15,a[54]),R=d(R,A,O,C,u,21,a[55]),C=d(C,R,A,O,b,6,a[56]),O=d(O,C,R,A,D,10,a[57]),A=d(A,O,C,R,_,15,a[58]),R=d(R,A,O,C,I,21,a[59]),C=d(C,R,A,O,g,6,a[60]),O=d(O,C,R,A,k,10,a[61]),A=d(A,O,C,R,c,15,a[62]),R=d(R,A,O,C,v,21,a[63]),i[0]=i[0]+C|0,i[1]=i[1]+R|0,i[2]=i[2]+A|0,i[3]=i[3]+O|0},_doFinalize:function(){var e=this._data,r=e.words,o=8*this._nDataBytes,n=8*e.sigBytes;r[n>>>5]|=128<<24-n%32;var i=t.floor(o/4294967296),s=o;r[15+(n+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),r[14+(n+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),e.sigBytes=4*(r.length+1),this._process();for(var a=this._hash,u=a.words,c=0;c<4;c++){var l=u[c];u[c]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return a},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,r,o,n,i,s){var a=e+(t&r|~t&o)+n+s;return(a<<i|a>>>32-i)+t}function p(e,t,r,o,n,i,s){var a=e+(t&o|r&~o)+n+s;return(a<<i|a>>>32-i)+t}function h(e,t,r,o,n,i,s){var a=e+(t^r^o)+n+s;return(a<<i|a>>>32-i)+t}function d(e,t,r,o,n,i,s){var a=e+(r^(t|~o))+n+s;return(a<<i|a>>>32-i)+t}return r.MD5=i._createHelper(c),r.HmacMD5=i._createHmacHelper(c),e.MD5}(r(2))},function(e,t,r){e.exports=function(e){for(var t=e,r=t.lib.BlockCipher,o=t.algo,n=[],i=[],s=[],a=[],u=[],c=[],l=[],p=[],h=[],d=[],f=[],g=0;g<256;g++)f[g]=g<128?g<<1:g<<1^283;var m=0,_=0;for(g=0;g<256;g++){var y=_^_<<1^_<<2^_<<3^_<<4;y=y>>>8^255&y^99,n[m]=y,i[y]=m;var b=f[m],v=f[b],w=f[v],k=257*f[y]^16843008*y;s[m]=k<<24|k>>>8,a[m]=k<<16|k>>>16,u[m]=k<<8|k>>>24,c[m]=k;k=16843009*w^65537*v^257*b^16843008*m;l[y]=k<<24|k>>>8,p[y]=k<<16|k>>>16,h[y]=k<<8|k>>>24,d[y]=k,m?(m=b^f[f[f[w^b]]],_^=f[f[_]]):m=_=1}var M=[0,1,2,4,8,16,32,64,128,27,54],I=o.AES=r.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,o=4*((this._nRounds=r+6)+1),i=this._keySchedule=[],s=0;s<o;s++)s<r?i[s]=t[s]:(c=i[s-1],s%r?r>6&&s%r==4&&(c=n[c>>>24]<<24|n[c>>>16&255]<<16|n[c>>>8&255]<<8|n[255&c]):(c=n[(c=c<<8|c>>>24)>>>24]<<24|n[c>>>16&255]<<16|n[c>>>8&255]<<8|n[255&c],c^=M[s/r|0]<<24),i[s]=i[s-r]^c);for(var a=this._invKeySchedule=[],u=0;u<o;u++){s=o-u;if(u%4)var c=i[s];else c=i[s-4];a[u]=u<4||s<=4?c:l[n[c>>>24]]^p[n[c>>>16&255]]^h[n[c>>>8&255]]^d[n[255&c]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,a,u,c,n)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,l,p,h,d,i);r=e[t+1];e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,o,n,i,s,a){for(var u=this._nRounds,c=e[t]^r[0],l=e[t+1]^r[1],p=e[t+2]^r[2],h=e[t+3]^r[3],d=4,f=1;f<u;f++){var g=o[c>>>24]^n[l>>>16&255]^i[p>>>8&255]^s[255&h]^r[d++],m=o[l>>>24]^n[p>>>16&255]^i[h>>>8&255]^s[255&c]^r[d++],_=o[p>>>24]^n[h>>>16&255]^i[c>>>8&255]^s[255&l]^r[d++],y=o[h>>>24]^n[c>>>16&255]^i[l>>>8&255]^s[255&p]^r[d++];c=g,l=m,p=_,h=y}g=(a[c>>>24]<<24|a[l>>>16&255]<<16|a[p>>>8&255]<<8|a[255&h])^r[d++],m=(a[l>>>24]<<24|a[p>>>16&255]<<16|a[h>>>8&255]<<8|a[255&c])^r[d++],_=(a[p>>>24]<<24|a[h>>>16&255]<<16|a[c>>>8&255]<<8|a[255&l])^r[d++],y=(a[h>>>24]<<24|a[c>>>16&255]<<16|a[l>>>8&255]<<8|a[255&p])^r[d++];e[t]=g,e[t+1]=m,e[t+2]=_,e[t+3]=y},keySize:8});return t.AES=r._createHelper(I),e.AES}(r(2),(r(21),r(6),r(11),r(24)))},function(e,t,r){e.exports=r(2).enc.Hex},function(e,t,r){e.exports=r(2).enc.Utf8},function(e,t,r){e.exports=function(e){"use strict";var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function r(e,t){var r=e[0],o=e[1],n=e[2],i=e[3];o=((o+=((n=((n+=((i=((i+=((r=((r+=(o&n|~o&i)+t[0]-680876936|0)<<7|r>>>25)+o|0)&o|~r&n)+t[1]-389564586|0)<<12|i>>>20)+r|0)&r|~i&o)+t[2]+606105819|0)<<17|n>>>15)+i|0)&i|~n&r)+t[3]-1044525330|0)<<22|o>>>10)+n|0,o=((o+=((n=((n+=((i=((i+=((r=((r+=(o&n|~o&i)+t[4]-176418897|0)<<7|r>>>25)+o|0)&o|~r&n)+t[5]+1200080426|0)<<12|i>>>20)+r|0)&r|~i&o)+t[6]-1473231341|0)<<17|n>>>15)+i|0)&i|~n&r)+t[7]-45705983|0)<<22|o>>>10)+n|0,o=((o+=((n=((n+=((i=((i+=((r=((r+=(o&n|~o&i)+t[8]+1770035416|0)<<7|r>>>25)+o|0)&o|~r&n)+t[9]-1958414417|0)<<12|i>>>20)+r|0)&r|~i&o)+t[10]-42063|0)<<17|n>>>15)+i|0)&i|~n&r)+t[11]-1990404162|0)<<22|o>>>10)+n|0,o=((o+=((n=((n+=((i=((i+=((r=((r+=(o&n|~o&i)+t[12]+1804603682|0)<<7|r>>>25)+o|0)&o|~r&n)+t[13]-40341101|0)<<12|i>>>20)+r|0)&r|~i&o)+t[14]-1502002290|0)<<17|n>>>15)+i|0)&i|~n&r)+t[15]+1236535329|0)<<22|o>>>10)+n|0,o=((o+=((n=((n+=((i=((i+=((r=((r+=(o&i|n&~i)+t[1]-165796510|0)<<5|r>>>27)+o|0)&n|o&~n)+t[6]-1069501632|0)<<9|i>>>23)+r|0)&o|r&~o)+t[11]+643717713|0)<<14|n>>>18)+i|0)&r|i&~r)+t[0]-373897302|0)<<20|o>>>12)+n|0,o=((o+=((n=((n+=((i=((i+=((r=((r+=(o&i|n&~i)+t[5]-701558691|0)<<5|r>>>27)+o|0)&n|o&~n)+t[10]+38016083|0)<<9|i>>>23)+r|0)&o|r&~o)+t[15]-660478335|0)<<14|n>>>18)+i|0)&r|i&~r)+t[4]-405537848|0)<<20|o>>>12)+n|0,o=((o+=((n=((n+=((i=((i+=((r=((r+=(o&i|n&~i)+t[9]+568446438|0)<<5|r>>>27)+o|0)&n|o&~n)+t[14]-1019803690|0)<<9|i>>>23)+r|0)&o|r&~o)+t[3]-187363961|0)<<14|n>>>18)+i|0)&r|i&~r)+t[8]+1163531501|0)<<20|o>>>12)+n|0,o=((o+=((n=((n+=((i=((i+=((r=((r+=(o&i|n&~i)+t[13]-1444681467|0)<<5|r>>>27)+o|0)&n|o&~n)+t[2]-51403784|0)<<9|i>>>23)+r|0)&o|r&~o)+t[7]+1735328473|0)<<14|n>>>18)+i|0)&r|i&~r)+t[12]-1926607734|0)<<20|o>>>12)+n|0,o=((o+=((n=((n+=((i=((i+=((r=((r+=(o^n^i)+t[5]-378558|0)<<4|r>>>28)+o|0)^o^n)+t[8]-2022574463|0)<<11|i>>>21)+r|0)^r^o)+t[11]+1839030562|0)<<16|n>>>16)+i|0)^i^r)+t[14]-35309556|0)<<23|o>>>9)+n|0,o=((o+=((n=((n+=((i=((i+=((r=((r+=(o^n^i)+t[1]-1530992060|0)<<4|r>>>28)+o|0)^o^n)+t[4]+1272893353|0)<<11|i>>>21)+r|0)^r^o)+t[7]-155497632|0)<<16|n>>>16)+i|0)^i^r)+t[10]-1094730640|0)<<23|o>>>9)+n|0,o=((o+=((n=((n+=((i=((i+=((r=((r+=(o^n^i)+t[13]+681279174|0)<<4|r>>>28)+o|0)^o^n)+t[0]-358537222|0)<<11|i>>>21)+r|0)^r^o)+t[3]-722521979|0)<<16|n>>>16)+i|0)^i^r)+t[6]+76029189|0)<<23|o>>>9)+n|0,o=((o+=((n=((n+=((i=((i+=((r=((r+=(o^n^i)+t[9]-640364487|0)<<4|r>>>28)+o|0)^o^n)+t[12]-421815835|0)<<11|i>>>21)+r|0)^r^o)+t[15]+530742520|0)<<16|n>>>16)+i|0)^i^r)+t[2]-995338651|0)<<23|o>>>9)+n|0,o=((o+=((i=((i+=(o^((r=((r+=(n^(o|~i))+t[0]-198630844|0)<<6|r>>>26)+o|0)|~n))+t[7]+1126891415|0)<<10|i>>>22)+r|0)^((n=((n+=(r^(i|~o))+t[14]-1416354905|0)<<15|n>>>17)+i|0)|~r))+t[5]-57434055|0)<<21|o>>>11)+n|0,o=((o+=((i=((i+=(o^((r=((r+=(n^(o|~i))+t[12]+1700485571|0)<<6|r>>>26)+o|0)|~n))+t[3]-1894986606|0)<<10|i>>>22)+r|0)^((n=((n+=(r^(i|~o))+t[10]-1051523|0)<<15|n>>>17)+i|0)|~r))+t[1]-2054922799|0)<<21|o>>>11)+n|0,o=((o+=((i=((i+=(o^((r=((r+=(n^(o|~i))+t[8]+1873313359|0)<<6|r>>>26)+o|0)|~n))+t[15]-30611744|0)<<10|i>>>22)+r|0)^((n=((n+=(r^(i|~o))+t[6]-1560198380|0)<<15|n>>>17)+i|0)|~r))+t[13]+1309151649|0)<<21|o>>>11)+n|0,o=((o+=((i=((i+=(o^((r=((r+=(n^(o|~i))+t[4]-145523070|0)<<6|r>>>26)+o|0)|~n))+t[11]-1120210379|0)<<10|i>>>22)+r|0)^((n=((n+=(r^(i|~o))+t[2]+718787259|0)<<15|n>>>17)+i|0)|~r))+t[9]-343485551|0)<<21|o>>>11)+n|0,e[0]=r+e[0]|0,e[1]=o+e[1]|0,e[2]=n+e[2]|0,e[3]=i+e[3]|0}function o(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}function n(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return r}function i(e){var t,n,i,s,a,u,c=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=c;t+=64)r(l,o(e.substring(t-64,t)));for(n=(e=e.substring(t-64)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(r(l,i),t=0;t<16;t+=1)i[t]=0;return s=(s=8*c).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),u=parseInt(s[1],16)||0,i[14]=a,i[15]=u,r(l,i),l}function s(e){var r,o="";for(r=0;r<4;r+=1)o+=t[e>>8*r+4&15]+t[e>>8*r&15];return o}function a(e){var t;for(t=0;t<e.length;t+=1)e[t]=s(e[t]);return e.join("")}function u(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function c(e){var t,r=[],o=e.length;for(t=0;t<o-1;t+=2)r.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,r)}function l(){this.reset()}return"5d41402abc4b2a76b9719d911017c592"!==a(i("hello"))&&function(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r},"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function e(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(t,r){var o,n,i,s,a=this.byteLength,u=e(t,a),c=a;return void 0!==r&&(c=e(r,a)),u>c?new ArrayBuffer(0):(o=c-u,n=new ArrayBuffer(o),i=new Uint8Array(n),s=new Uint8Array(this,u,o),i.set(s),n)}}(),l.prototype.append=function(e){return this.appendBinary(u(e)),this},l.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,n=this._buff.length;for(t=64;t<=n;t+=64)r(this._hash,o(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},l.prototype.end=function(e){var t,r,o=this._buff,n=o.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<n;t+=1)i[t>>2]|=o.charCodeAt(t)<<(t%4<<3);return this._finish(i,n),r=a(this._hash),e&&(r=c(r)),this.reset(),r},l.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},l.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},l.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},l.prototype._finish=function(e,t){var o,n,i,s=t;if(e[s>>2]|=128<<(s%4<<3),s>55)for(r(this._hash,e),s=0;s<16;s+=1)e[s]=0;o=(o=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),n=parseInt(o[2],16),i=parseInt(o[1],16)||0,e[14]=n,e[15]=i,r(this._hash,e)},l.hash=function(e,t){return l.hashBinary(u(e),t)},l.hashBinary=function(e,t){var r=a(i(e));return t?c(r):r},(l.ArrayBuffer=function(){this.reset()}).prototype.append=function(e){var t,o=function(e,t,r){var o=new Uint8Array(e.byteLength+t.byteLength);return o.set(new Uint8Array(e)),o.set(new Uint8Array(t),e.byteLength),r?o:o.buffer}(this._buff.buffer,e,!0),i=o.length;for(this._length+=e.byteLength,t=64;t<=i;t+=64)r(this._hash,n(o.subarray(t-64,t)));return this._buff=t-64<i?new Uint8Array(o.buffer.slice(t-64)):new Uint8Array(0),this},l.ArrayBuffer.prototype.end=function(e){var t,r,o=this._buff,n=o.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<n;t+=1)i[t>>2]|=o[t]<<(t%4<<3);return this._finish(i,n),r=a(this._hash),e&&(r=c(r)),this.reset(),r},l.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.ArrayBuffer.prototype.getState=function(){var e=l.prototype.getState.call(this);return e.buff=function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}(e.buff),e},l.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){var r,o=e.length,n=new ArrayBuffer(o),i=new Uint8Array(n);for(r=0;r<o;r+=1)i[r]=e.charCodeAt(r);return t?i:n}(e.buff,!0),l.prototype.setState.call(this,e)},l.ArrayBuffer.prototype.destroy=l.prototype.destroy,l.ArrayBuffer.prototype._finish=l.prototype._finish,l.ArrayBuffer.hash=function(e,t){var o=function(e){var t,o,i,s,a,u,c=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=c;t+=64)r(l,n(e.subarray(t-64,t)));for(o=(e=t-64<c?e.subarray(t-64):new Uint8Array(0)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<o;t+=1)i[t>>2]|=e[t]<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(r(l,i),t=0;t<16;t+=1)i[t]=0;return s=(s=8*c).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),u=parseInt(s[1],16)||0,i[14]=a,i[15]=u,r(l,i),l}(new Uint8Array(e)),i=a(o);return t?c(i):i},l}()},function(e,t,r){var o,n,i,s,a;e.exports=(e=r(2),r(22),r(23),o=(i=(r=e).lib).Base,n=i.WordArray,s=(i=r.algo).MD5,a=i.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:s,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r,o=this.cfg,i=o.hasher.create(),s=n.create(),a=s.words,u=o.keySize,c=o.iterations;a.length<u;){r&&i.update(r),r=i.update(e).finalize(t),i.reset();for(var l=1;l<c;l++)r=i.finalize(r),i.reset();s.concat(r)}return s.sigBytes=4*u,s}}),r.EvpKDF=function(e,t,r){return a.create(r).compute(e,t)},e.EvpKDF)},function(e,t,r){"use strict";e.exports=p;var o,n=r(5),i=n.LongBits,s=n.base64,a=n.utf8;function u(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function c(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function p(){this.len=0,this.head=new u(c,0,0),this.tail=this.head,this.states=null}function h(){return n.Buffer?function(){return(p.create=function(){return new o})()}:function(){return new p}}function d(e,t,r){t[r]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;127<e.lo;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function m(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}p.create=h(),p.alloc=function(e){return new n.Array(e)},n.Array!==Array&&(p.alloc=n.pool(p.alloc,n.Array.prototype.subarray)),p.prototype._push=function(e,t,r){return this.tail=this.tail.next=new u(e,t,r),this.len+=t,this},(f.prototype=Object.create(u.prototype)).fn=function(e,t,r){for(;127<e;)t[r++]=127&e|128,e>>>=7;t[r]=e},p.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},p.prototype.int32=function(e){return e<0?this._push(g,10,i.fromNumber(e)):this.uint32(e)},p.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},p.prototype.int64=p.prototype.uint64=function(e){return e=i.from(e),this._push(g,e.length(),e)},p.prototype.sint64=function(e){return e=i.from(e).zzEncode(),this._push(g,e.length(),e)},p.prototype.bool=function(e){return this._push(d,1,e?1:0)},p.prototype.sfixed32=p.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},p.prototype.sfixed64=p.prototype.fixed64=function(e){return e=i.from(e),this._push(m,4,e.lo)._push(m,4,e.hi)},p.prototype.float=function(e){return this._push(n.float.writeFloatLE,4,e)},p.prototype.double=function(e){return this._push(n.float.writeDoubleLE,8,e)};var _=n.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var o=0;o<e.length;++o)t[r+o]=e[o]};p.prototype.bytes=function(e){var t,r=e.length>>>0;return r?(n.isString(e)&&(t=p.alloc(r=s.length(e)),s.decode(e,t,0),e=t),this.uint32(r)._push(_,r,e)):this._push(d,1,0)},p.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(d,1,0)},p.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new u(c,0,0),this.len=0,this},p.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new u(c,0,0),this.len=0),this},p.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},p.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},p._configure=function(e){o=e,p.create=h(),o._configure()}},function(e,t,r){"use strict";e.exports=u;var o,n=r(5),i=n.LongBits,s=n.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function u(e){this.buf=e,this.pos=0,this.len=e.length}function c(){return n.Buffer?function(e){return(u.create=function(e){return n.Buffer.isBuffer(e)?new o(e):p(e)})(e)}:p}var l,p="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new u(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new u(e);throw Error("illegal buffer")};function h(){var e=new i(0,0),t=0;if(!(4<this.len-this.pos)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,4<this.len-this.pos){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function d(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new i(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}u.create=c(),u.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,u.prototype.uint32=(l=4294967295,function(){if(l=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return l;if(l=(l|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return l;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return l}),u.prototype.int32=function(){return 0|this.uint32()},u.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},u.prototype.bool=function(){return 0!==this.uint32()},u.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return d(this.buf,this.pos+=4)},u.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|d(this.buf,this.pos+=4)},u.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},u.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},u.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},u.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},u.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},u.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},u._configure=function(e){o=e,u.create=c(),o._configure();var t=n.Long?"toLong":"toNumber";n.merge(u.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},function(e,t,r){(function(t){e.exports=function e(t,r,o){function n(s,a){if(!r[s]){if(!t[s]){if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}u=r[s]={exports:{}},t[s][0].call(u.exports,(function(e){return n(t[s][1][e]||e)}),u,u.exports,e,t,r,o)}return r[s].exports}for(var i=!1,s=0;s<o.length;s++)n(o[s]);return n}({1:[function(e,r,o){(function(e){"use strict";var t,o,n,i,s=e.MutationObserver||e.WebKitMutationObserver,a=s?(t=0,s=new s(c),o=e.document.createTextNode(""),s.observe(o,{characterData:!0}),function(){o.data=t=++t%2}):e.setImmediate||void 0===e.MessageChannel?"document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){c(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(c,0)}:((n=new e.MessageChannel).port1.onmessage=c,function(){n.port2.postMessage(0)}),u=[];function c(){i=!0;for(var e,t,r=u.length;r;){for(t=u,u=[],e=-1;++e<r;)t[e]();r=u.length}i=!1}r.exports=function(e){1!==u.push(e)||i||a()}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,r){"use strict";var o=e(1);function n(){}var i={},s=["REJECTED"],a=["FULFILLED"],u=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,e!==n&&d(this,e)}function l(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function p(e,t,r){o((function(){var o;try{o=t(r)}catch(o){return i.reject(e,o)}o===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,o)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function d(e,t){var r=!1;function o(t){r||(r=!0,i.reject(e,t))}function n(t){r||(r=!0,i.resolve(e,t))}var s=f((function(){t(n,o)}));"error"===s.status&&o(s.value)}function f(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}(t.exports=c).prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===s)return this;var r=new this.constructor(n);return this.state!==u?p(r,this.state===a?e:t,this.outcome):this.queue.push(new l(r,e,t)),r},l.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){p(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){i.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){p(this.promise,this.onRejected,e)},i.resolve=function(e,t){var r=f(h,t);if("error"===r.status)return i.reject(e,r.value);if(r=r.value)d(e,r);else{e.state=a,e.outcome=t;for(var o=-1,n=e.queue.length;++o<n;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=s,e.outcome=t;for(var r=-1,o=e.queue.length;++r<o;)e.queue[r].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:i.resolve(new this(n),e)},c.reject=function(e){var t=new this(n);return i.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,o=!1;if(!r)return this.resolve([]);for(var s=new Array(r),a=0,u=-1,c=new this(n);++u<r;)!function(e,n){t.resolve(e).then((function(e){s[n]=e,++a!==r||o||(o=!0,i.resolve(c,s))}),(function(e){o||(o=!0,i.reject(c,e))}))}(e[u],u);return c},c.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,o=!1;if(!r)return this.resolve([]);for(var s=-1,a=new this(n);++s<r;)!function(e){t.resolve(e).then((function(e){o||(o=!0,i.resolve(a,e))}),(function(e){o||(o=!0,i.reject(a,e))}))}(e[s]);return a}},{1:1}],3:[function(e,r,o){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,r){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function i(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(n){if("TypeError"!==n.name)throw n;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),o=0;o<e.length;o+=1)r.append(e[o]);return r.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var s=Promise;function a(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function u(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function c(e){return"string"!=typeof e?String(e):e}function l(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var p="local-forage-detect-blob-support",h=void 0,d={},f=Object.prototype.toString,g="readonly",m="readwrite";function _(e){return"boolean"==typeof h?s.resolve(h):(t=e,new s((function(e){var r=t.transaction(p,m),o=i([""]);r.objectStore(p).put(o,"key"),r.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},r.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);e(r||!t||43<=parseInt(t[1],10))}})).catch((function(){return!1})).then((function(e){return h=e})));var t}function y(e){e=d[e.name];var t={};t.promise=new s((function(e,r){t.resolve=e,t.reject=r})),e.deferredOperations.push(t),e.dbReady?e.dbReady=e.dbReady.then((function(){return t.promise})):e.dbReady=t.promise}function b(e){(e=d[e.name].deferredOperations.pop())&&(e.resolve(),e.promise)}function v(e,t){if(e=d[e.name].deferredOperations.pop())return e.reject(t),e.promise}function w(e,t){return new s((function(r,o){if(d[e.name]=d[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return r(e.db);y(e),e.db.close()}var i=[e.name],s=(t&&i.push(e.version),n.open.apply(n,i));t&&(s.onupgradeneeded=function(t){var r=s.result;try{r.createObjectStore(e.storeName),t.oldVersion<=1&&r.createObjectStore(p)}catch(t){if("ConstraintError"!==t.name)throw t}}),s.onerror=function(e){e.preventDefault(),o(s.error)},s.onsuccess=function(){var t=s.result;t.onversionchange=function(e){e.target.close()},r(t),b(e)}}))}function k(e){return w(e,!1)}function M(e){return w(e,!0)}function I(e){if(!e.db)return 1;var t=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version;return r&&(e.version,e.version=e.db.version),(o||t)&&(t&&(r=e.db.version+1)>e.version&&(e.version=r),1)}function S(e){return i([function(e){for(var t=e.length,r=new ArrayBuffer(t),o=new Uint8Array(r),n=0;n<t;n++)o[n]=e.charCodeAt(n);return r}(atob(e.data))],{type:e.type})}function D(e){return e&&e.__local_forage_encoded_blob}function C(e){var t=this,r=t._initReady().then((function(){var e=d[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return u(r,e,e),r}function R(e,t,r,o){void 0===o&&(o=1);try{var n=e.db.transaction(e.storeName,t);r(null,n)}catch(n){if(0<o&&(!e.db||"InvalidStateError"===n.name||"NotFoundError"===n.name))return s.resolve().then((function(){if(!e.db||"NotFoundError"===n.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),M(e)})).then((function(){return function(e){y(e);for(var t=d[e.name],r=t.forages,o=0;o<r.length;o++){var n=r[o];n._dbInfo.db&&(n._dbInfo.db.close(),n._dbInfo.db=null)}return e.db=null,k(e).then((function(t){return e.db=t,I(e)?M(e):t})).then((function(o){e.db=t.db=o;for(var n=0;n<r.length;n++)r[n]._dbInfo.db=o})).catch((function(t){throw v(e,t),t}))}(e).then((function(){R(e,t,r,o-1)}))})).catch(r);r(n)}}e={_driver:"asyncStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var o in e)r[o]=e[o];var n=d[r.name],i=(n||(n={forages:[],db:null,dbReady:null,deferredOperations:[]},d[r.name]=n),n.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=C),[]);function a(){return s.resolve()}for(var u=0;u<n.forages.length;u++){var c=n.forages[u];c!==t&&i.push(c._initReady().catch(a))}var l=n.forages.slice(0);return s.all(i).then((function(){return r.db=n.db,k(r)})).then((function(e){return r.db=e,I(r,t._defaultConfig.version)?M(r):e})).then((function(e){r.db=n.db=e,t._dbInfo=r;for(var o=0;o<l.length;o++){var i=l[o];i!==t&&(i._dbInfo.db=r.db,i._dbInfo.version=r.version)}}))},_support:function(){try{if(!n||!n.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var r=this,o=new s((function(t,o){r.ready().then((function(){R(r._dbInfo,g,(function(n,i){if(n)return o(n);try{var s=i.objectStore(r._dbInfo.storeName).openCursor(),a=1;s.onsuccess=function(){var r,o=s.result;o?(D(r=o.value)&&(r=S(r)),void 0!==(r=e(r,o.key,a++))?t(r):o.continue()):t()},s.onerror=function(){o(s.error)}}catch(n){o(n)}}))})).catch(o)}));return a(o,t),o},getItem:function(e,t){var r=this,o=(e=c(e),new s((function(t,o){r.ready().then((function(){R(r._dbInfo,g,(function(n,i){if(n)return o(n);try{var s=i.objectStore(r._dbInfo.storeName).get(e);s.onsuccess=function(){var e=s.result;D(e=void 0===e?null:e)&&(e=S(e)),t(e)},s.onerror=function(){o(s.error)}}catch(n){o(n)}}))})).catch(o)})));return a(o,t),o},setItem:function(e,t,r){var o=this,n=(e=c(e),new s((function(r,n){var i;o.ready().then((function(){return i=o._dbInfo,"[object Blob]"===f.call(t)?_(i.db).then((function(e){return e?t:(r=t,new s((function(e,t){var o=new FileReader;o.onerror=t,o.onloadend=function(t){t=btoa(t.target.result||""),e({__local_forage_encoded_blob:!0,data:t,type:r.type})},o.readAsBinaryString(r)})));var r})):t})).then((function(t){R(o._dbInfo,m,(function(i,s){if(i)return n(i);try{var a=s.objectStore(o._dbInfo.storeName),u=(null===t&&(t=void 0),a.put(t,e));s.oncomplete=function(){r(t=void 0===t?null:t)},s.onabort=s.onerror=function(){var e=u.error||u.transaction.error;n(e)}}catch(i){n(i)}}))})).catch(n)})));return a(n,r),n},removeItem:function(e,t){var r=this,o=(e=c(e),new s((function(t,o){r.ready().then((function(){R(r._dbInfo,m,(function(n,i){if(n)return o(n);try{var s=i.objectStore(r._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){o(s.error)},i.onabort=function(){var e=s.error||s.transaction.error;o(e)}}catch(n){o(n)}}))})).catch(o)})));return a(o,t),o},clear:function(e){var t=this,r=new s((function(e,r){t.ready().then((function(){R(t._dbInfo,m,(function(o,n){if(o)return r(o);try{var i=n.objectStore(t._dbInfo.storeName).clear();n.oncomplete=function(){e()},n.onabort=n.onerror=function(){var e=i.error||i.transaction.error;r(e)}}catch(o){r(o)}}))})).catch(r)}));return a(r,e),r},length:function(e){var t=this,r=new s((function(e,r){t.ready().then((function(){R(t._dbInfo,g,(function(o,n){if(o)return r(o);try{var i=n.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){r(i.error)}}catch(o){r(o)}}))})).catch(r)}));return a(r,e),r},key:function(e,t){var r=this,o=new s((function(t,o){e<0?t(null):r.ready().then((function(){R(r._dbInfo,g,(function(n,i){if(n)return o(n);try{var s=i.objectStore(r._dbInfo.storeName),a=!1,u=s.openKeyCursor();u.onsuccess=function(){var r=u.result;r?0===e||a?t(r.key):(a=!0,r.advance(e)):t(null)},u.onerror=function(){o(u.error)}}catch(n){o(n)}}))})).catch(o)}));return a(o,t),o},keys:function(e){var t=this,r=new s((function(e,r){t.ready().then((function(){R(t._dbInfo,g,(function(o,n){if(o)return r(o);try{var i=n.objectStore(t._dbInfo.storeName).openKeyCursor(),s=[];i.onsuccess=function(){var t=i.result;t?(s.push(t.key),t.continue()):e(s)},i.onerror=function(){r(i.error)}}catch(o){r(o)}}))})).catch(r)}));return a(r,e),r},dropInstance:function(e,t){t=l.apply(this,arguments);var r=this.config();return(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName),a(r=e.name?(r=e.name===r.name&&this._dbInfo.db?s.resolve(this._dbInfo.db):k(e).then((function(t){var r=d[e.name],o=r.forages;r.db=t;for(var n=0;n<o.length;n++)o[n]._dbInfo.db=t;return t})),e.storeName?r.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var r=t.version+1,o=(y(e),d[e.name]),i=o.forages;t.close();for(var a=0;a<i.length;a++){var u=i[a];u._dbInfo.db=null,u._dbInfo.version=r}return new s((function(t,o){var i=n.open(e.name,r);i.onerror=function(e){i.result.close(),o(e)},i.onupgradeneeded=function(){i.result.deleteObjectStore(e.storeName)},i.onsuccess=function(){var e=i.result;e.close(),t(e)}})).then((function(e){o.db=e;for(var t=0;t<i.length;t++){var r=i[t];r._dbInfo.db=e,b(r._dbInfo)}})).catch((function(t){throw(v(e,t)||s.resolve()).catch((function(){})),t}))}})):r.then((function(t){y(e);var r=d[e.name],o=r.forages;t.close();for(var i=0;i<o.length;i++)o[i]._dbInfo.db=null;return new s((function(t,r){var o=n.deleteDatabase(e.name);o.onerror=function(){var e=o.result;e&&e.close(),r(o.error)},o.onblocked=function(){},o.onsuccess=function(){var e=o.result;e&&e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<o.length;t++)b(o[t]._dbInfo)})).catch((function(t){throw(v(e,t)||s.resolve()).catch((function(){})),t}))}))):s.reject("Invalid arguments"),t),r}};var A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O=/^~~local_forage_type~([^~]+)~/,E="__lfsc__:",x=E.length,P="arbf",T="blob",q=x+P.length,L=Object.prototype.toString;function B(e){for(var t,r,o,n,i=.75*e.length,s=e.length,a=0,u=(i=("="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--),new ArrayBuffer(i)),new Uint8Array(i)),c=0;c<s;c+=4)t=A.indexOf(e[c]),r=A.indexOf(e[c+1]),o=A.indexOf(e[c+2]),n=A.indexOf(e[c+3]),u[a++]=t<<2|r>>4,u[a++]=(15&r)<<4|o>>2,u[a++]=(3&o)<<6|63&n;return i}function G(e){for(var t=new Uint8Array(e),r="",o=0;o<t.length;o+=3)r=(r=(r=(r+=A[t[o]>>2])+A[(3&t[o])<<4|t[o+1]>>4])+A[(15&t[o+1])<<2|t[o+2]>>6])+A[63&t[o+2]];return t.length%3==2?r=r.substring(0,r.length-1)+"=":t.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var N={serialize:function(e,t){var r="";if(e&&(r=L.call(e)),e&&("[object ArrayBuffer]"===r||e.buffer&&"[object ArrayBuffer]"===L.call(e.buffer))){var o,n=E;e instanceof ArrayBuffer?(o=e,n+=P):(o=e.buffer,"[object Int8Array]"===r?n+="si08":"[object Uint8Array]"===r?n+="ui08":"[object Uint8ClampedArray]"===r?n+="uic8":"[object Int16Array]"===r?n+="si16":"[object Uint16Array]"===r?n+="ur16":"[object Int32Array]"===r?n+="si32":"[object Uint32Array]"===r?n+="ui32":"[object Float32Array]"===r?n+="fl32":"[object Float64Array]"===r?n+="fl64":t(new Error("Failed to get type for BinaryArray"))),t(n+G(o))}else if("[object Blob]"===r)(n=new FileReader).onload=function(){var r="~~local_forage_type~"+e.type+"~"+G(this.result);t(E+T+r)},n.readAsArrayBuffer(e);else try{t(JSON.stringify(e))}catch(r){t(null,r)}},deserialize:function(e){if(e.substring(0,x)!==E)return JSON.parse(e);var t,r=e.substring(q),o=e.substring(x,q),n=(o===T&&O.test(r)&&(t=(e=r.match(O))[1],r=r.substring(e[0].length)),B(r));switch(o){case P:return n;case T:return i([n],{type:t});case"si08":return new Int8Array(n);case"ui08":return new Uint8Array(n);case"uic8":return new Uint8ClampedArray(n);case"si16":return new Int16Array(n);case"ur16":return new Uint16Array(n);case"si32":return new Int32Array(n);case"ui32":return new Uint32Array(n);case"fl32":return new Float32Array(n);case"fl64":return new Float64Array(n);default:throw new Error("Unkown type: "+o)}},stringToBuffer:B,bufferToString:G};function j(e,t,r,o){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,o)}function U(e,t,r,o,n,i){e.executeSql(r,o,n,(function(e,s){s.code===s.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,a){a.rows.length?i(e,s):j(e,t,(function(){e.executeSql(r,o,n,i)}),i)}),i):i(e,s)}),i)}function z(e,t,r,o){var n=this,i=(e=c(e),new s((function(i,s){n.ready().then((function(){var a=t=void 0===t?null:t,u=n._dbInfo;u.serializer.serialize(t,(function(t,c){c?s(c):u.db.transaction((function(r){U(r,u,"INSERT OR REPLACE INTO "+u.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){i(a)}),(function(e,t){s(t)}))}),(function(t){t.code===t.QUOTA_ERR&&(0<o?i(z.apply(n,[e,a,r,o-1])):s(t))}))}))})).catch(s)})));return a(i,r),i}var F={_driver:"webSQLStorage",_initStorage:function(e){var t=this,r={db:null};if(e)for(var o in e)r[o]="string"!=typeof e[o]?e[o].toString():e[o];var n=new s((function(e,o){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(e){return o(e)}r.db.transaction((function(n){j(n,r,(function(){t._dbInfo=r,e()}),(function(e,t){o(t)}))}),o)}));return r.serializer=N,n},_support:"function"==typeof openDatabase,iterate:function(e,t){var r=this,o=new s((function(t,o){r.ready().then((function(){var n=r._dbInfo;n.db.transaction((function(r){U(r,n,"SELECT * FROM "+n.storeName,[],(function(r,o){for(var i=o.rows,s=i.length,a=0;a<s;a++){var u=i.item(a),c=(c=u.value)&&n.serializer.deserialize(c);if(void 0!==(c=e(c,u.key,a+1)))return void t(c)}t()}),(function(e,t){o(t)}))}))})).catch(o)}));return a(o,t),o},getItem:function(e,t){var r=this,o=(e=c(e),new s((function(t,o){r.ready().then((function(){var n=r._dbInfo;n.db.transaction((function(r){U(r,n,"SELECT * FROM "+n.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,r){r=(r=r.rows.length?r.rows.item(0).value:null)&&n.serializer.deserialize(r),t(r)}),(function(e,t){o(t)}))}))})).catch(o)})));return a(o,t),o},setItem:function(e,t,r){return z.apply(this,[e,t,r,1])},removeItem:function(e,t){var r=this,o=(e=c(e),new s((function(t,o){r.ready().then((function(){var n=r._dbInfo;n.db.transaction((function(r){U(r,n,"DELETE FROM "+n.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){o(t)}))}))})).catch(o)})));return a(o,t),o},clear:function(e){var t=this,r=new s((function(e,r){t.ready().then((function(){var o=t._dbInfo;o.db.transaction((function(t){U(t,o,"DELETE FROM "+o.storeName,[],(function(){e()}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,e),r},length:function(e){var t=this,r=new s((function(e,r){t.ready().then((function(){var o=t._dbInfo;o.db.transaction((function(t){U(t,o,"SELECT COUNT(key) as c FROM "+o.storeName,[],(function(t,r){r=r.rows.item(0).c,e(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,e),r},key:function(e,t){var r=this,o=new s((function(t,o){r.ready().then((function(){var n=r._dbInfo;n.db.transaction((function(r){U(r,n,"SELECT key FROM "+n.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,r){r=r.rows.length?r.rows.item(0).key:null,t(r)}),(function(e,t){o(t)}))}))})).catch(o)}));return a(o,t),o},keys:function(e){var t=this,r=new s((function(e,r){t.ready().then((function(){var o=t._dbInfo;o.db.transaction((function(t){U(t,o,"SELECT key FROM "+o.storeName,[],(function(t,r){for(var o=[],n=0;n<r.rows.length;n++)o.push(r.rows.item(n).key);e(o)}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,e),r},dropInstance:function(e,t){t=l.apply(this,arguments);var r=this.config(),o=((e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName),this),n=e.name?new s((function(t){var n,i=e.name===r.name?o._dbInfo.db:openDatabase(e.name,"","",0);e.storeName?t({db:i,storeNames:[e.storeName]}):t((n=i,new s((function(e,t){n.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(t,r){for(var o=[],i=0;i<r.rows.length;i++)o.push(r.rows.item(i).name);e({db:n,storeNames:o})}),(function(e,r){t(r)}))}),(function(e){t(e)}))}))))})).then((function(e){return new s((function(t,r){e.db.transaction((function(o){for(var n=[],i=0,a=e.storeNames.length;i<a;i++)n.push(function(e){return new s((function(t,r){o.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){r(t)}))}))}(e.storeNames[i]));s.all(n).then((function(){t()})).catch((function(e){r(e)}))}),(function(e){r(e)}))}))})):s.reject("Invalid arguments");return a(n,t),n}};function H(e,t){var r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}function K(e,t){for(var r,o,n=e.length,i=0;i<n;){if((r=e[i])===(o=t)||"number"==typeof r&&"number"==typeof o&&isNaN(r)&&isNaN(o))return 1;i++}}var V={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var r in e)t[r]=e[r];return t.keyPrefix=H(e,this._defaultConfig),!function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),0}catch(e){return 1}}()||0<localStorage.length?((this._dbInfo=t).serializer=N,s.resolve()):s.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var r=this,o=r.ready().then((function(){for(var t=r._dbInfo,o=t.keyPrefix,n=o.length,i=localStorage.length,s=1,a=0;a<i;a++){var u=localStorage.key(a);if(0===u.indexOf(o)){var c=(c=localStorage.getItem(u))&&t.serializer.deserialize(c);if(void 0!==(c=e(c,u.substring(n),s++)))return c}}}));return a(o,t),o},getItem:function(e,t){var r=this,o=(e=c(e),r.ready().then((function(){var t=r._dbInfo,o=localStorage.getItem(t.keyPrefix+e);return o&&t.serializer.deserialize(o)})));return a(o,t),o},setItem:function(e,t,r){var o=this,n=(e=c(e),o.ready().then((function(){var r=t=void 0===t?null:t;return new s((function(n,i){var s=o._dbInfo;s.serializer.serialize(t,(function(t,o){if(o)i(o);else try{localStorage.setItem(s.keyPrefix+e,t),n(r)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||i(t),i(t)}}))}))})));return a(n,r),n},removeItem:function(e,t){var r=this,o=(e=c(e),r.ready().then((function(){var t=r._dbInfo;localStorage.removeItem(t.keyPrefix+e)})));return a(o,t),o},clear:function(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,r=localStorage.length-1;0<=r;r--){var o=localStorage.key(r);0===o.indexOf(e)&&localStorage.removeItem(o)}}));return a(r,e),r},length:function(e){var t=this.keys().then((function(e){return e.length}));return a(t,e),t},key:function(e,t){var r=this,o=r.ready().then((function(){var t,o=r._dbInfo;try{t=localStorage.key(e)}catch(o){t=null}return t&&t.substring(o.keyPrefix.length)}));return a(o,t),o},keys:function(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo,r=localStorage.length,o=[],n=0;n<r;n++){var i=localStorage.key(n);0===i.indexOf(e.keyPrefix)&&o.push(i.substring(e.keyPrefix.length))}return o}));return a(r,e),r},dropInstance:function(e,t){t=l.apply(this,arguments),(e="function"!=typeof e&&e||{}).name||(o=this.config(),e.name=e.name||o.name,e.storeName=e.storeName||o.storeName);var r=this,o=e.name?new s((function(t){e.storeName?t(H(e,r._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;0<=t;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}})):s.reject("Invalid arguments");return a(o,t),o}},Z=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},W={},Q={},J={INDEXEDDB:e,WEBSQL:F,LOCALSTORAGE:V},Y=(e=[J.INDEXEDDB._driver,J.WEBSQL._driver,J.LOCALSTORAGE._driver],["dropInstance"]),X=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Y),$={description:"",driver:e.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ee(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];if(r)for(var o in r)r.hasOwnProperty(o)&&(Z(r[o])?e[o]=r[o].slice():e[o]=r[o])}return e}function te(e){var t,r,o;if(!(this instanceof te))throw new TypeError("Cannot call a class as a function");for(t in J)J.hasOwnProperty(t)&&(o=(r=J[t])._driver,this[t]=o,W[o]||this.defineDriver(r));this._defaultConfig=ee({},$),this._config=ee({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}te.prototype.config=function(e){if("object"!==(void 0===e?"undefined":o(e)))return"string"==typeof e?this._config[e]:this._config;if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)},te.prototype.defineDriver=function(e,t,r){var o=new s((function(t,r){try{var o=e._driver,n=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void r(n);for(var i=X.concat("_initStorage"),u=0,c=i.length;u<c;u++){var l=i[u];if((!K(Y,l)||e[l])&&"function"!=typeof e[l])return void r(n)}for(var p=0,h=Y.length;p<h;p++){var d=Y[p];e[d]||(e[d]=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver");return a(t=s.reject(t),arguments[arguments.length-1]),t}}(d))}var f=function(r){W[o],W[o]=e,Q[o]=r,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(f,r):f(!!e._support):f(!0)}catch(n){r(n)}}));return u(o,t,r),o},te.prototype.driver=function(){return this._driver||null},te.prototype.getDriver=function(e,t,r){return u(e=W[e]?s.resolve(W[e]):s.reject(new Error("Driver not found.")),t,r),e},te.prototype.getSerializer=function(e){var t=s.resolve(N);return u(t,e),t},te.prototype.ready=function(e){var t=this,r=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return u(r,e,e),r},te.prototype.setDriver=function(e,t,r){var o=this,n=(Z(e)||(e=[e]),this._getSupportedDrivers(e));function i(){o._config.driver=o.driver()}function a(e){return o._extend(e),i(),o._ready=o._initStorage(o._config),o._ready}return e=null!==this._driverSet?this._driverSet.catch((function(){return s.resolve()})):s.resolve(),this._driverSet=e.then((function(){var e=n[0];return o._dbInfo=null,o._ready=null,o.getDriver(e).then((function(e){o._driver=e._driver,i(),o._wrapLibraryMethodsWithReady(),o._initDriver=function(e){return function(){var t=0;return function r(){for(;t<e.length;){var n=e[t];return t++,o._dbInfo=null,o._ready=null,o.getDriver(n).then(a).catch(r)}i();var u=new Error("No available storage method found.");return o._driverSet=s.reject(u),o._driverSet}()}}(n)}))})).catch((function(){i();var e=new Error("No available storage method found.");return o._driverSet=s.reject(e),o._driverSet})),u(this._driverSet,t,r),this._driverSet},te.prototype.supports=function(e){return!!Q[e]},te.prototype._extend=function(e){ee(this,e)},te.prototype._getSupportedDrivers=function(e){for(var t=[],r=0,o=e.length;r<o;r++){var n=e[r];this.supports(n)&&t.push(n)}return t},te.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=X.length;e<t;e++)!function(e,t){e[t]=function(){var r=arguments;return e.ready().then((function(){return e[t].apply(e,r)}))}}(this,X[e])},te.prototype.createInstance=function(e){return new te(e)},F=new te,t.exports=F},{3:3}]},{},[4])(4)}).call(this,r(4))},function(e,t,r){"use strict";(function(e){var o=r(40),n=r(41),i=r(42);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(e=null===e?new u(t):e).length=t,e}function u(e,t,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,r);if("number"!=typeof e)return c(this,e,t,r);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return p(this,e)}function c(e,t,r,o){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer){var n=e,s=t,c=r;if(s.byteLength,c<0||s.byteLength<c)throw new RangeError("'offset' is out of bounds");if(s.byteLength<c+(o||0))throw new RangeError("'length' is out of bounds");return s=void 0===c&&void 0===o?new Uint8Array(s):void 0===o?new Uint8Array(s,c):new Uint8Array(s,c,o),u.TYPED_ARRAY_SUPPORT?(n=s).__proto__=u.prototype:n=h(n,s),n}if("string"!=typeof t){if(c=e,o=t,u.isBuffer(o))return 0===(c=a(c,s=0|d(o.length))).length||o.copy(c,0,0,s),c;if(o){if("undefined"!=typeof ArrayBuffer&&o.buffer instanceof ArrayBuffer||"length"in o)return"number"!=typeof o.length||function(e){return e!=e}(o.length)?a(c,0):h(c,o);if("Buffer"===o.type&&i(o.data))return h(c,o.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}if(n=e,o=t,e=r,!u.isEncoding(e="string"==typeof e&&""!==e?e:"utf8"))throw new TypeError('"encoding" must be a valid string encoding');return(o=(n=a(n,t=0|f(o,e))).write(o,e))!==t?n.slice(0,o):n}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function p(e,t){if(l(t),e=a(e,t<0?0:0|d(t)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function h(e,t){var r=t.length<0?0:0|d(t.length);e=a(e,r);for(var o=0;o<r;o+=1)e[o]=255&t[o];return e}function d(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function f(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;var r=(e="string"!=typeof e?""+e:e).length;if(0===r)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return E(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return x(e).length;default:if(o)return E(e).length;t=(""+t).toLowerCase(),o=!0}}function g(e,t,r){var n,i=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var s=t,a=r,u=this.length;(!a||a<0||u<a)&&(a=u);for(var c="",l=s=!s||s<0?0:s;l<a;++l)c+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(this[l]);return c;case"utf8":case"utf-8":return w(this,t,r);case"ascii":u=t;var p=r,h="";p=Math.min(this.length,p);for(var d=u;d<p;++d)h+=String.fromCharCode(127&this[d]);return h;case"latin1":case"binary":s=t;var f=r,g="";f=Math.min(this.length,f);for(var m=s;m<f;++m)g+=String.fromCharCode(this[m]);return g;case"base64":return _=this,n=r,0===(y=t)&&n===_.length?o.fromByteArray(_):o.fromByteArray(_.slice(y,n));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var _=t,y=r,b=this.slice(_,y),v="",k=0;k<b.length;k+=2)v+=String.fromCharCode(b[k]+256*b[k+1]);return v;default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function m(e,t,r){var o=e[t];e[t]=e[r],e[r]=o}function _(e,t,r,o,n){if(0===e.length)return-1;if("string"==typeof r?(o=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,(r=(r=isNaN(r)?n?0:e.length-1:r)<0?e.length+r:r)>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof t&&(t=u.from(t,o)),u.isBuffer(t))return 0===t.length?-1:y(e,t,r,o,n);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(n?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,r):y(e,[t],r,o,n);throw new TypeError("val must be string, number or Buffer")}function y(e,t,r,o,n){var i=1,s=e.length,a=t.length;if(void 0!==o&&("ucs2"===(o=String(o).toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(e.length<2||t.length<2)return-1;s/=i=2,a/=2,r/=2}function u(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(n)for(var c=-1,l=r;l<s;l++)if(u(e,l)===u(t,-1===c?0:l-c)){if(l-(c=-1===c?l:c)+1===a)return c*i}else-1!==c&&(l-=l-c),c=-1;else for(l=r=s<r+a?s-a:r;0<=l;l--){for(var p=!0,h=0;h<a;h++)if(u(e,l+h)!==u(t,h)){p=!1;break}if(p)return l}return-1}function b(e,t,r,o){return P(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,o)}function v(e,t,r,o){return P(function(e,t){for(var r,o,n=[],i=0;i<e.length&&!((t-=2)<0);++i)r=(o=e.charCodeAt(i))>>8,o%=256,n.push(o),n.push(r);return n}(t,e.length-r),e,r,o)}function w(e,t,r){r=Math.min(e.length,r);for(var o=[],n=t;n<r;){var i,s,a,u,c=e[n],l=null,p=239<c?4:223<c?3:191<c?2:1;if(n+p<=r)switch(p){case 1:c<128&&(l=c);break;case 2:128==(192&(i=e[n+1]))&&127<(u=(31&c)<<6|63&i)&&(l=u);break;case 3:i=e[n+1],s=e[n+2],128==(192&i)&&128==(192&s)&&2047<(u=(15&c)<<12|(63&i)<<6|63&s)&&(u<55296||57343<u)&&(l=u);break;case 4:i=e[n+1],s=e[n+2],a=e[n+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&a)&&u<1114112&&(l=u)}null===l?(l=65533,p=1):65535<l&&(l-=65536,o.push(l>>>10&1023|55296),l=56320|1023&l),o.push(l),n+=p}var h=o,d=h.length;if(d<=k)return String.fromCharCode.apply(String,h);for(var f="",g=0;g<d;)f+=String.fromCharCode.apply(String,h.slice(g,g+=k));return f}t.Buffer=u,t.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,r){return c(null,e,t,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,r){return o=null,t=t,r=r,l(e=e),e<=0||void 0===t?a(o,e):"string"==typeof r?a(o,e).fill(t,r):a(o,e).fill(t);var o},u.allocUnsafe=function(e){return p(null,e)},u.allocUnsafeSlow=function(e){return p(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,o=t.length,n=0,i=Math.min(r,o);n<i;++n)if(e[n]!==t[n]){r=e[n],o=t[n];break}return r<o?-1:o<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);if(void 0===t)for(n=t=0;n<e.length;++n)t+=e[n].length;for(var r=u.allocUnsafe(t),o=0,n=0;n<e.length;++n){var s=e[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,o),o+=s.length}return r},u.byteLength=f,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?w(this,0,e):g.apply(this,arguments)},u.prototype.equals=function(e){if(u.isBuffer(e))return this===e||0===u.compare(this,e);throw new TypeError("Argument must be a Buffer")},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,r,o,n){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=e?e.length:0),void 0===o&&(o=0),void 0===n&&(n=this.length),(t=void 0===t?0:t)<0||r>e.length||o<0||n>this.length)throw new RangeError("out of range index");if(n<=o&&r<=t)return 0;if(n<=o)return-1;if(r<=t)return 1;if(this===e)return 0;for(var i=(n>>>=0)-(o>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(i,s),c=this.slice(o,n),l=e.slice(t,r),p=0;p<a;++p)if(c[p]!==l[p]){i=c[p],s=l[p];break}return i<s?-1:s<i?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return _(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return _(this,e,t,r,!1)},u.prototype.write=function(e,t,r,o){if(void 0===t)o="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)o=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===o&&(o="utf8")):(o=r,r=void 0)}var n=this.length-t;if((void 0===r||n<r)&&(r=n),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");o=o||"utf8";for(var i,s,a,u=!1;;)switch(o){case"hex":var c=e,l=t,p=r,h=(l=Number(l)||0,this.length-l);if((!p||h<(p=Number(p)))&&(p=h),(h=c.length)%2!=0)throw new TypeError("Invalid hex string");h/2<p&&(p=h/2);for(var d=0;d<p;++d){var f=parseInt(c.substr(2*d,2),16);if(isNaN(f))return d;this[l+d]=f}return d;case"utf8":case"utf-8":return h=t,a=r,P(E(e,(s=this).length-h),s,h,a);case"ascii":return b(this,e,t,r);case"latin1":case"binary":return b(this,e,t,r);case"base64":return s=this,a=t,i=r,P(x(e),s,a,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,e,t,r);default:if(u)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),u=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var k=4096;function M(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,r,o,n,i){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(n<t||t<i)throw new RangeError('"value" argument is out of bounds');if(r+o>e.length)throw new RangeError("Index out of range")}function S(e,t,r,o){t<0&&(t=65535+t+1);for(var n=0,i=Math.min(e.length-r,2);n<i;++n)e[r+n]=(t&255<<8*(o?n:1-n))>>>8*(o?n:1-n)}function D(e,t,r,o){t<0&&(t=4294967295+t+1);for(var n=0,i=Math.min(e.length-r,4);n<i;++n)e[r+n]=t>>>8*(o?n:3-n)&255}function C(e,t,r,o){if(r+o>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function R(e,t,r,o,i){return i||C(e,0,r,4),n.write(e,t,r,o,23,4),r+4}function A(e,t,r,o,i){return i||C(e,0,r,8),n.write(e,t,r,o,52,8),r+8}u.prototype.slice=function(e,t){var r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else for(var o=t-e,n=new u(o,void 0),i=0;i<o;++i)n[i]=this[i+e];return n},u.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||M(e,t,this.length);for(var o=this[e],n=1,i=0;++i<t&&(n*=256);)o+=this[e+i]*n;return o},u.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||M(e,t,this.length);for(var o=this[e+--t],n=1;0<t&&(n*=256);)o+=this[e+--t]*n;return o},u.prototype.readUInt8=function(e,t){return t||M(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||M(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||M(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||M(e,t,this.length);for(var o=this[e],n=1,i=0;++i<t&&(n*=256);)o+=this[e+i]*n;return(n*=128)<=o&&(o-=Math.pow(2,8*t)),o},u.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||M(e,t,this.length);for(var o=t,n=1,i=this[e+--o];0<o&&(n*=256);)i+=this[e+--o]*n;return(n*=128)<=i&&(i-=Math.pow(2,8*t)),i},u.prototype.readInt8=function(e,t){return t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){return t||M(e,2,this.length),32768&(t=this[e]|this[e+1]<<8)?4294901760|t:t},u.prototype.readInt16BE=function(e,t){return t||M(e,2,this.length),32768&(t=this[e+1]|this[e]<<8)?4294901760|t:t},u.prototype.readInt32LE=function(e,t){return t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||M(e,4,this.length),n.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||M(e,4,this.length),n.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||M(e,8,this.length),n.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||M(e,8,this.length),n.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,r,o){e=+e,t|=0,r|=0,o||I(this,e,t,r,Math.pow(2,8*r)-1,0);var n=1,i=0;for(this[t]=255&e;++i<r&&(n*=256);)this[t+i]=e/n&255;return t+r},u.prototype.writeUIntBE=function(e,t,r,o){e=+e,t|=0,r|=0,o||I(this,e,t,r,Math.pow(2,8*r)-1,0);var n=r-1,i=1;for(this[t+n]=255&e;0<=--n&&(i*=256);)this[t+n]=e/i&255;return t+r},u.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):S(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):S(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,r,o){e=+e,t|=0,o||I(this,e,t,r,(o=Math.pow(2,8*r-1))-1,-o);var n=0,i=1,s=0;for(this[t]=255&e;++n<r&&(i*=256);)e<0&&0===s&&0!==this[t+n-1]&&(s=1),this[t+n]=(e/i>>0)-s&255;return t+r},u.prototype.writeIntBE=function(e,t,r,o){e=+e,t|=0,o||I(this,e,t,r,(o=Math.pow(2,8*r-1))-1,-o);var n=r-1,i=1,s=0;for(this[t+n]=255&e;0<=--n&&(i*=256);)e<0&&0===s&&0!==this[t+n+1]&&(s=1),this[t+n]=(e/i>>0)-s&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&(e=e<0?255+e+1:e),t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):S(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):S(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,r){return R(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return R(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return A(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return A(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,o){if(r=r||0,o||0===o||(o=this.length),t>=e.length&&(t=e.length),(o=0<o&&o<r?r:o)===r)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length);var n,i=(o=e.length-t<o-r?e.length-t+r:o)-r;if(this===e&&r<t&&t<o)for(n=i-1;0<=n;--n)e[n+t]=this[n+r];else if(i<1e3||!u.TYPED_ARRAY_SUPPORT)for(n=0;n<i;++n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},u.prototype.fill=function(e,t,r,o){if("string"==typeof e){var n;if("string"==typeof t?(o=t,t=0,r=this.length):"string"==typeof r&&(o=r,r=this.length),1!==e.length||(n=e.charCodeAt(0))<256&&(e=n),void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!u.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(a=t;a<r;++a)this[a]=e;else for(var i=u.isBuffer(e)?e:E(new u(e,o).toString()),s=i.length,a=0;a<r-t;++a)this[a+t]=i[a%s];return this};var O=/[^+\/0-9A-Za-z-_]/g;function E(e,t){t=t||1/0;for(var r,o=e.length,n=null,i=[],s=0;s<o;++s){if(55295<(r=e.charCodeAt(s))&&r<57344){if(!n){if(56319<r){-1<(t-=3)&&i.push(239,191,189);continue}if(s+1===o){-1<(t-=3)&&i.push(239,191,189);continue}n=r;continue}if(r<56320){-1<(t-=3)&&i.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&-1<(t-=3)&&i.push(239,191,189);if(n=null,r<128){if(--t<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function x(e){return o.toByteArray(function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(O,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function P(e,t,r,o){for(var n=0;n<o&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}}).call(this,r(4))},function(e,t){var r,o;e=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}try{r="function"==typeof setTimeout?setTimeout:n}catch(e){r=n}try{o="function"==typeof clearTimeout?clearTimeout:i}catch(e){o=i}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===n||!r)&&setTimeout)return(r=setTimeout)(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}var a,u=[],c=!1,l=-1;function p(){c&&a&&(c=!1,a.length?u=a.concat(u):l=-1,u.length&&h())}function h(){if(!c){for(var e=s(p),t=(c=!0,u.length);t;){for(a=u,u=[];++l<t;)a&&a[l].run();l=-1,t=u.length}a=null,c=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===i||!o)&&clearTimeout)return(o=clearTimeout)(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function f(){}e.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new d(e,t)),1!==u.length||c||s(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=f,e.addListener=f,e.once=f,e.off=f,e.removeListener=f,e.removeAllListeners=f,e.emit=f,e.prependListener=f,e.prependOnceListener=f,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(e,t,r){var o;e.exports=(o=r(2),function(){var e,t;"function"==typeof ArrayBuffer&&(e=o.lib.WordArray,t=e.init,(e.init=function(e){if((e=(e=e instanceof ArrayBuffer?new Uint8Array(e):e)instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e)instanceof Uint8Array){for(var r=e.byteLength,o=[],n=0;n<r;n++)o[n>>>2]|=e[n]<<24-n%4*8;t.call(this,o,r)}else t.apply(this,arguments)}).prototype=e)}(),o.lib.WordArray)},function(e,t,r){function o(e){if(u[e])return u[e].exports;var t=u[e]={i:e,l:!1,exports:{}};return a[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var n,i,s,a,u;e.exports=(n=r(14),i=r(1),s=r(39),a=[function(e,t){e.exports=n},,function(e,t,r){e.exports=function(e){for(var t=Math,r=e,o=(i=r.lib).WordArray,n=i.Hasher,i=r.algo,s=[],a=0;a<64;a++)s[a]=4294967296*t.abs(t.sin(a+1))|0;function u(e,t,r,o,n,i,s){return((e=e+(t&r|~t&o)+n+s)<<i|e>>>32-i)+t}function c(e,t,r,o,n,i,s){return((e=e+(t&o|r&~o)+n+s)<<i|e>>>32-i)+t}function l(e,t,r,o,n,i,s){return((e=e+(t^r^o)+n+s)<<i|e>>>32-i)+t}function p(e,t,r,o,n,i,s){return((e=e+(r^(t|~o))+n+s)<<i|e>>>32-i)+t}return i=i.MD5=n.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var o=t+r,n=e[o];e[o]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var i=this._hash.words,a=e[t+0],h=e[t+1],d=e[t+2],f=e[t+3],g=e[t+4],m=e[t+5],_=e[t+6],y=e[t+7],b=e[t+8],v=e[t+9],w=e[t+10],k=e[t+11],M=e[t+12],I=e[t+13],S=e[t+14],D=e[t+15],C=u(i[0],O=i[1],A=i[2],R=i[3],a,7,s[0]),R=u(R,C,O,A,h,12,s[1]),A=u(A,R,C,O,d,17,s[2]),O=u(O,A,R,C,f,22,s[3]);C=u(C,O,A,R,g,7,s[4]),R=u(R,C,O,A,m,12,s[5]),A=u(A,R,C,O,_,17,s[6]),O=u(O,A,R,C,y,22,s[7]),C=u(C,O,A,R,b,7,s[8]),R=u(R,C,O,A,v,12,s[9]),A=u(A,R,C,O,w,17,s[10]),O=u(O,A,R,C,k,22,s[11]),C=u(C,O,A,R,M,7,s[12]),R=u(R,C,O,A,I,12,s[13]),A=u(A,R,C,O,S,17,s[14]),C=c(C,O=u(O,A,R,C,D,22,s[15]),A,R,h,5,s[16]),R=c(R,C,O,A,_,9,s[17]),A=c(A,R,C,O,k,14,s[18]),O=c(O,A,R,C,a,20,s[19]),C=c(C,O,A,R,m,5,s[20]),R=c(R,C,O,A,w,9,s[21]),A=c(A,R,C,O,D,14,s[22]),O=c(O,A,R,C,g,20,s[23]),C=c(C,O,A,R,v,5,s[24]),R=c(R,C,O,A,S,9,s[25]),A=c(A,R,C,O,f,14,s[26]),O=c(O,A,R,C,b,20,s[27]),C=c(C,O,A,R,I,5,s[28]),R=c(R,C,O,A,d,9,s[29]),A=c(A,R,C,O,y,14,s[30]),C=l(C,O=c(O,A,R,C,M,20,s[31]),A,R,m,4,s[32]),R=l(R,C,O,A,b,11,s[33]),A=l(A,R,C,O,k,16,s[34]),O=l(O,A,R,C,S,23,s[35]),C=l(C,O,A,R,h,4,s[36]),R=l(R,C,O,A,g,11,s[37]),A=l(A,R,C,O,y,16,s[38]),O=l(O,A,R,C,w,23,s[39]),C=l(C,O,A,R,I,4,s[40]),R=l(R,C,O,A,a,11,s[41]),A=l(A,R,C,O,f,16,s[42]),O=l(O,A,R,C,_,23,s[43]),C=l(C,O,A,R,v,4,s[44]),R=l(R,C,O,A,M,11,s[45]),A=l(A,R,C,O,D,16,s[46]),C=p(C,O=l(O,A,R,C,d,23,s[47]),A,R,a,6,s[48]),R=p(R,C,O,A,y,10,s[49]),A=p(A,R,C,O,S,15,s[50]),O=p(O,A,R,C,m,21,s[51]),C=p(C,O,A,R,M,6,s[52]),R=p(R,C,O,A,f,10,s[53]),A=p(A,R,C,O,w,15,s[54]),O=p(O,A,R,C,h,21,s[55]),C=p(C,O,A,R,b,6,s[56]),R=p(R,C,O,A,D,10,s[57]),A=p(A,R,C,O,_,15,s[58]),O=p(O,A,R,C,I,21,s[59]),C=p(C,O,A,R,g,6,s[60]),R=p(R,C,O,A,k,10,s[61]),A=p(A,R,C,O,d,15,s[62]),O=p(O,A,R,C,v,21,s[63]),i[0]=i[0]+C|0,i[1]=i[1]+O|0,i[2]=i[2]+A|0,i[3]=i[3]+R|0},_doFinalize:function(){var e=this._data,r=e.words,o=8*this._nDataBytes,n=8*e.sigBytes,i=(r[n>>>5]|=128<<24-n%32,t.floor(o/4294967296));r[15+(64+n>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),r[14+(64+n>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.sigBytes=4*(r.length+1),this._process();for(var s=(i=this._hash).words,a=0;a<4;a++){var u=s[a];s[a]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return i},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),r.MD5=n._createHelper(i),r.HmacMD5=n._createHmacHelper(i),e.MD5}(r(6))},function(e,t){e.exports=i},function(e,t){e.exports=s},,function(e,t,r){(function(t){e.exports=function(e){var o;if("undefined"!=typeof window&&window.crypto&&(o=window.crypto),"undefined"!=typeof self&&self.crypto&&(o=self.crypto),!(o=!(o=!(o="undefined"!=typeof globalThis&&globalThis.crypto?globalThis.crypto:o)&&"undefined"!=typeof window&&window.msCrypto?window.msCrypto:o)&&void 0!==t&&t.crypto?t.crypto:o))try{o=r(8)}catch(s){}var n=Object.create||function(e){return i.prototype=e,e=new i,i.prototype=null,e};function i(){}var s={},a=s.lib={},u=a.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=a.WordArray=u.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||p).stringify(this)},concat:function(e){var t=this.words,r=e.words,o=this.sigBytes,n=e.sigBytes;if(this.clamp(),o%4)for(var i=0;i<n;i++){var s=r[i>>>2]>>>24-i%4*8&255;t[o+i>>>2]|=s<<24-(o+i)%4*8}else for(var a=0;a<n;a+=4)t[o+a>>>2]=r[a>>>2];return this.sigBytes+=n,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=u.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(function(){if(o){if("function"==typeof o.getRandomValues)try{return o.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof o.randomBytes)try{return o.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")}());return new c.init(t,e)}}),l=s.enc={},p=l.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,o=[],n=0;n<r;n++){var i=t[n>>>2]>>>24-n%4*8&255;o.push((i>>>4).toString(16)),o.push((15&i).toString(16))}return o.join("")},parse:function(e){for(var t=e.length,r=[],o=0;o<t;o+=2)r[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new c.init(r,t/2)}},h=l.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,o=[],n=0;n<r;n++){var i=t[n>>>2]>>>24-n%4*8&255;o.push(String.fromCharCode(i))}return o.join("")},parse:function(e){for(var t=e.length,r=[],o=0;o<t;o++)r[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new c.init(r,t)}},d=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},f=a.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r,o=this._data,n=o.words,i=o.sigBytes,s=this.blockSize,a=i/(4*s),u=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s;if(t=e.min(4*u,i),u){for(var l=0;l<u;l+=s)this._doProcessBlock(n,l);r=n.splice(0,u),o.sigBytes-=t}return new c.init(r,t)},clone:function(){var e=u.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),g=(a.Hasher=f.extend({cfg:u.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new g.HMAC.init(e,r).finalize(t)}}}),s.algo={});return s}(Math)}).call(this,r(7))},function(e,t){var r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t){},,function(e,t,r){"use strict";r.r(t),r.d(t,"ZegoLogger",(function(){return O})),t=r(2);var o,n=r.n(t),i=r(3),s=((t=o=o||{})[t.IE=0]="IE",t[t.FIREFOX=1]="FIREFOX",t[t.CHROME=2]="CHROME",t[t.SAFARI=3]="SAFARI",t[t.OPERA=4]="OPERA",t[t.WEIXIN=5]="WEIXIN",t[t.WEIXINMINI=6]="WEIXINMINI",t[t.UNKOWN=7]="UNKOWN",(o=m=m||{})[o.BROWSER=0]="BROWSER",o[o.WEIXINMINI=1]="WEIXINMINI",{DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100}),a=1,u=["00","01","02","03","04","05","06","07","08","09"],c={maxSize:5242880,maxFiles:3,dropPer:1},l={maxSize:2097152,maxFiles:3,dropPer:1},p=(h.getInstance=function(){return h.instance||(h.instance=new h).init(),h.instance},h.prototype.init=function(){},Object.defineProperty(h.prototype,"testEnvironment",{get:function(){return this._testEnvironment},set:function(e){this._testEnvironment=e},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"ENV",{get:function(){return this._ENV},set:function(e){this._ENV=e},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e},enumerable:!1,configurable:!0}),h.instance=new h,h);function h(){this._testEnvironment=!0,this._ENV=0,this._debug=!1}function d(e,t,r,o){return new(r=r||Promise)((function(n,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((o=o.apply(e,t||[])).next())}))}function f(e,t){var r,o,n,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var u=[s,a];if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,o&&(n=2&u[0]?o.return:u[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,u[1])).done)return n;switch(o=0,(u=n?[2&u[0],n.value]:u)[0]){case 0:case 1:n=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,o=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(n=0<(n=i.trys).length&&n[n.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!n||u[1]>n[0]&&u[1]<n[3])){i.label=u[1];break}if(6===u[0]&&i.label<n[1]){i.label=n[1],n=u;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(u);break}n[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(a){u=[6,a],o=0}finally{r=n=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}t=r(0);var g=r.n(t),m=r(4),_=r.n(m),y=(b.prototype.init=function(){return d(this,void 0,void 0,(function(){var e,t=this;return f(this,(function(r){switch(r.label){case 0:this.storeCommon=g.a.createInstance({name:"logger_common"}),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.storeCommon.getItem(this.product+"_logger")];case 2:return e=r.sent(),this.storeSize=e||0,[3,4];case 3:return r.sent(),[3,4];case 4:return this.store=g.a.createInstance({name:this.product+"_logger"}),0<this.storeBuffer.length&&this.storeBuffer.forEach((function(e){t.storeData(e)})),[2]}}))}))},b.prototype.setFileConfig=function(e){this.fileConfig=e},b.prototype.supportDrivers=function(){return{IndexedDB:g.a.supports(g.a.INDEXEDDB),webSQL:g.a.supports(g.a.WEBSQL),localStorage:g.a.supports(g.a.LOCALSTORAGE)}},b.prototype.setDataDroped=function(e){this.dataDropCallback=e},b.prototype.storeData=function(e){return d(this,void 0,void 0,(function(){var t;return f(this,(function(r){switch(r.label){case 0:if(!e)return[2,Promise.resolve()];if(!this.store)return this.storeBuffer.push(e),[2,Promise.resolve()];t=(t=(new Date).getTime())+"_"+a++,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.store.setItem(t,e)];case 2:return r.sent(),this.storeSize+=e.length+1,this.refreshStoreSize(),this.storeSize>=this.fileConfig.maxSize*this.fileConfig.maxFiles&&!this.droping&&this.dropData(),[3,4];case 3:return r.sent(),[3,4];case 4:return[2]}}))}))},b.prototype.readData=function(){return d(this,void 0,void 0,(function(){var e,t,r,o,n,i,s,a,u=this;return f(this,(function(c){switch(c.label){case 0:e=new _.a,t=e.folder("log"),r="",o=console.log,n="",s=i=0,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.store.iterate((function(e){n+=e+"\n",(i+=e.length+1)>u.fileConfig.maxSize&&(s++,n="",i=0),t&&t.file("".concat(u.product).concat(s,".txt"),n)}))];case 2:return c.sent(),r="ZegoLoggerSDK: Iteration has completed, ",[3,4];case 3:return c.sent(),[3,4];case 4:return c.trys.push([4,6,,7]),[4,e.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:9}})];case 5:return a=c.sent(),a=new Blob([a]),r+="size=".concat(a.size),o(r),[2,a];case 6:return c.sent(),[2,null];case 7:return[2]}}))}))},b.prototype.clearStore=function(){return d(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.store.clear()];case 1:return e.sent(),this.storeSize=0,this.refreshStoreSize(),[3,3];case 2:return e.sent(),[3,3];case 3:return[2]}}))}))},b.prototype.refreshStoreSize=function(){return d(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,this.storeCommon.setItem(this.product+"_logger",this.storeSize)];case 1:return e.sent(),[2]}}))}))},b.prototype.dropData=function(){return d(this,void 0,void 0,(function(){var e,t,r,o;return f(this,(function(n){switch(n.label){case 0:return n.trys.push([0,8,,9]),this.droping=!0,[4,this.store.keys()];case 1:e=n.sent(),r=t=0,n.label=2;case 2:return r<e.length?[4,this.store.getItem(e[r])]:[3,7];case 3:return(o=n.sent())?(t+=o.length+1)<this.fileConfig.maxSize*this.fileConfig.dropPer?[4,this.store.removeItem(e[r])]:[3,5]:[3,6];case 4:return n.sent(),this.storeSize-=o.length+1,this.refreshStoreSize(),[3,6];case 5:return this.droping=!1,this.dataDropCallback(),[3,7];case 6:return r++,[3,2];case 7:return[3,9];case 8:return n.sent(),[3,9];case 9:return[2]}}))}))},b.prototype.setUploadState=function(e){return d(this,void 0,void 0,(function(){return f(this,(function(t){switch(t.label){case 0:return this.storeCommon?[4,this.storeCommon.setItem("uploading",e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},b.prototype.getUploadState=function(){if(this.storeCommon)return this.storeCommon.getItem("uploading")},b);function b(e,t){this.product=e,this.fileConfig=t,this.storeBuffer=[],this.droping=!1,this.init()}function v(e,t,r,o){return new(r=r||Promise)((function(n,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((o=o.apply(e,t||[])).next())}))}function w(e,t){var r,o,n,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var u=[s,a];if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,o&&(n=2&u[0]?o.return:u[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,u[1])).done)return n;switch(o=0,(u=n?[2&u[0],n.value]:u)[0]){case 0:case 1:n=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,o=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(n=0<(n=i.trys).length&&n[n.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!n||u[1]>n[0]&&u[1]<n[3])){i.label=u[1];break}if(6===u[0]&&i.label<n[1]){i.label=n[1],n=u;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(u);break}n[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(a){u=[6,a],o=0}finally{r=n=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}M.prototype.init=function(){return v(this,void 0,void 0,(function(){var e,t;return w(this,(function(r){switch(r.label){case 0:this.basePath="".concat(wx.env.USER_DATA_PATH,"/logger"),this.fileManager=wx.getFileSystemManager(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.accessDir(this.basePath)];case 2:return r.sent(),[3,4];case 3:return r.sent(),[2];case 4:this.fileManager.readdir({dirPath:this.basePath,success:function(e){},fail:function(e){}}),e=0,r.label=5;case 5:if(!(e<this.fileConfig.maxFiles))return[3,10];t="".concat(this.basePath,"/").concat(this.product).concat(e,".txt"),r.label=6;case 6:return r.trys.push([6,8,,9]),[4,this.accessFile(t)];case 7:return r.sent()<this.fileConfig.maxSize?(this.filePath=t,this.curFile=e,[3,10]):[3,9];case 8:return r.sent(),[3,9];case 9:return e++,[3,5];case 10:return this.filePath,this.inited=!0,this.initCallback&&this.initCallback(),[2]}}))}))},M.prototype.storeData=function(e){return v(this,void 0,void 0,(function(){return w(this,(function(t){switch(t.label){case 0:try{this.fileManager.appendFileSync(this.filePath,e+"\n")}catch(t){}return[4,this.getFileSize(this.filePath)];case 1:return t.sent()>=this.fileConfig.maxSize?(this.curFile++,this.curFile>=this.fileConfig.maxFiles&&(this.curFile=0),this.filePath="".concat(this.basePath,"/").concat(this.product).concat(this.curFile,".txt"),[4,this.accessFile(this.filePath)]):[3,4];case 2:return t.sent()>=this.fileConfig.maxSize?(this.fileManager.unlinkSync(this.filePath),[4,this.accessFile(this.filePath)]):[3,4];case 3:t.sent(),t.label=4;case 4:return[2]}}))}))},M.prototype.getFileSize=function(e){return new Promise((function(t,r){wx.getFileSystemManager().getFileInfo({filePath:e,success:function(e){t(e.size)},fail:function(e){r(e)}})}))},M.prototype.accessDir=function(e){var t=wx.getFileSystemManager();return new Promise((function(r,o){t.access({path:e,success:function(e){r()},fail:function(n){t.mkdir({dirPath:e,success:function(e){r()},fail:function(e){o(e)}})}})}))},M.prototype.accessFile=function(e){var t=this,r=wx.getFileSystemManager();return new Promise((function(o,n){r.access({path:e,success:function(r){return v(t,void 0,void 0,(function(){var t;return w(this,(function(r){switch(r.label){case 0:return[4,this.getFileSize(e)];case 1:return t=r.sent(),o(t),[2]}}))}))},fail:function(t){r.writeFile({filePath:e,data:"",success:function(e){o(0)},fail:function(e){n(e)}})}})}))},M.prototype.delFile=function(e){var t=this;return new Promise((function(r,o){t.fileManager.unlink({filePath:e,success:function(e){r()},fail:function(e){o(e)}})}))};var k=M;function M(e,t,r){this.product=e,this.fileConfig=t,this.initCallback=r,this.basePath="",this.filePath="",this.curFile=0,this.inited=!1,this.init()}function I(e,t,r,o){return new(r=r||Promise)((function(n,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((o=o.apply(e,t||[])).next())}))}function S(e,t){var r,o,n,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var u=[s,a];if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,o&&(n=2&u[0]?o.return:u[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,u[1])).done)return n;switch(o=0,(u=n?[2&u[0],n.value]:u)[0]){case 0:case 1:n=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,o=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(n=0<(n=i.trys).length&&n[n.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!n||u[1]>n[0]&&u[1]<n[3])){i.label=u[1];break}if(6===u[0]&&i.label<n[1]){i.label=n[1],n=u;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(u);break}n[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(a){u=[6,a],o=0}finally{r=n=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}function D(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],o=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&o>=e.length?void 0:e)&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function C(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return s}var R={code:1001,msg:"upload fail"},A=function(){return(A=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},O=(E.prototype.init=function(e){return I(this,void 0,void 0,(function(){var t=this;return S(this,(function(r){return this.env%2==0?(this.fileConfig=A(A({},c),e),this.storeHandler=new y(this.product,this.fileConfig),this.storeHandler.setDataDroped((function(){t.headerInfo&&t.dumpData(t.headerInfo)}))):(this.fileConfig=A(A({},l),e),this.basePath="".concat(wx.env.USER_DATA_PATH,"/logger"),this.fileHandler=new k(this.product,this.fileConfig,(function(){t.bufferDump()}))),[2]}))}))},E.prototype.setLogLevel=function(e){return void 0!==(e=s[e])&&(this.logLevel=e,!0)},E.prototype.setRemoteLogLevel=function(e){return void 0!==(e=s[e])&&(this.logRemoteLevel=e,!0)},E.prototype.setDebugVerbose=function(e){this.stateCenter.debug=e},E.prototype.setHeaderInfo=function(e){this.headerInfo=e,!(this.env%2!=0||this.commonField&&"string"==typeof this.commonField.get("userID"))||this.env%2==1&&this.fileHandler&&!this.fileHandler.inited?this.tempBuffer.push(e):this.dumpData(e)},E.prototype.setLimitConfig=function(e){this.limitMs=e},E.prototype.setCommonField=function(e){return"[object Map]"===Object.prototype.toString.call(e)&&null!=e.get("userID")&&"string"==typeof e.get("userID")&&""!==e.get("userID")&&(this.commonField=e,this.bufferDump(),this.isUserIDExist=!0)},E.prototype.write=function(e,t,r,o){var n=s[t];if(void 0===n)return!1;if(e=this.logParams(e,t,r,o),this.logLevel!==s.DISABLE&&this.logLevel<=n&&("debug"==t||"report"==t?(0,console.debug)(e):"info"==t?(0,console.info)(e):"warn"==t?(0,console.warn)(e):"error"==t&&this.logError(e,o)),this.logRemoteLevel!==s.DISABLE&&this.logRemoteLevel<=n){if(this.uploading)return this.tempBuffer.push(e),!0;if(this.env%2==0&&(!this.commonField||"string"!=typeof this.commonField.get("userID")))return this.tempBuffer.push(e),!0;if(this.env%2==1&&this.fileHandler&&!this.fileHandler.inited)return this.tempBuffer.push(e),!0;this.dumpData(e)}return!0},E.prototype.writeLimit=function(e,t,r,o,n){return(!this.limitKeys[e]||(new Date).getTime()-this.limitKeys[e]>this.limitMs)&&(this.limitKeys[e]=(new Date).getTime(),this.write(t,r,o,n))},E.prototype.upload=function(e){var t=this;return this.uploading=!0,this.setUploadState(!0),new Promise((function(r,o){e.uploadURL||(t.setUploadState(!1),o({code:1001})),t.env%2!=0||t.isUserIDExist||(t.setUploadState(!1),o({code:1001})),t.env%2==0?t.uploadWeb(e).then((function(e){t.setUploadState(!1),r(e)})).catch((function(e){t.setUploadState(!1),o(e)})):t.uploadWechatMini(e).then((function(e){t.setUploadState(!1),r(e)})).catch((function(e){t.setUploadState(!1),o(e)}))}))},E.prototype.setConfig=function(e){this.fileConfig=A(A({},this.fileConfig),e),this.storeHandler.setFileConfig(this.fileConfig)},E.prototype.supportDrivers=function(){return this.storeHandler.supportDrivers()},E.prototype.setUploadState=function(e){this.env%2==0?this.storeHandler.setUploadState(e):wx.setStorageSync("uploading",!0)},E.prototype.getUploadState=function(){if(this.env%2==0)return this.storeHandler.getUploadState();try{return wx.getStorageSync("uploading")}catch(e){return!1}},E.prototype.uploadWeb=function(e){return I(this,void 0,void 0,(function(){var t=this;return S(this,(function(r){return[2,new Promise((function(r,o){return I(t,void 0,void 0,(function(){var t,n,i,s=this;return S(this,(function(a){switch(a.label){case 0:return[4,this.readData()];case 1:return null!==(t=a.sent())&&(n=(new Date).getTime(),(i=new FormData).append("logs",t),i.append("id_name",e.userID),i.append("appid",e.appID),i.append("timestamp",n+""),!e.token&&e.appSign&&i.append("litesign",this.generateLitesign(e.appID,n)),e.token&&i.append("token",e.token),i.append("deviceid",e.deviceID||""),i.append("product",e.product),i.append("req_sdk",e.token?"1":"0"),this.postFile(e.uploadURL||this.uploadURL,i).then((function(){return I(s,void 0,void 0,(function(){return S(this,(function(e){switch(e.label){case 0:return[4,this.storeHandler.clearStore()];case 1:return e.sent(),this.bufferDump(),this.uploading=!1,r({code:0}),[2]}}))}))})).catch((function(e){s.uploading=!1,o({code:e.code})}))),[2]}}))}))}))]}))}))},E.prototype.postFile=function(e,t){var r=this;return new Promise((function(o,n){var i=e,s=t;new Promise((function(e,t){var r=new XMLHttpRequest;r.open("post",i),r.onreadystatechange=function(){var o,n;4==r.readyState&&(200<=r.status&&r.status<300||304==r.status?(o=(n=JSON.parse(r.responseText)).code,n=n.message,(0===o?e:t)({code:o,msg:n})):t(R))},r.send(s)})).then((function(e){o()})).catch((function(o){r.postFailCount++,4==o.code&&r.postFailCount<3?r.postFile(e,t):n(o)}))}))},E.prototype.bufferDump=function(){var e,t,r=this.tempBuffer.shift();if(r){var o="";if(this.env%2==0&&this.commonField&&"string"==typeof this.commonField.get("userID")&&""!==this.commonField.get("userID")){var n=r.indexOf("]:");if(-1==n)o=r;else{var i="";try{for(var s=D(this.commonField),a=s.next();!a.done;a=s.next()){var u=C(a.value,2),c=(u[0],u[1]);i+="[".concat(c,"]")}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}o=r.slice(0,n+2)+i+r.slice(n+2)}}else this.env%2==1&&(o=r);this.dumpData(o),this.bufferDump()}},E.prototype.uploadWechatMini=function(e){return I(this,void 0,void 0,(function(){var t=this;return S(this,(function(r){return[2,new Promise((function(r,o){return I(t,void 0,void 0,(function(){var t,n,i,s=this;return S(this,(function(a){switch(a.label){case 0:t=function(t){var i,a,u;return S(this,(function(c){switch(c.label){case 0:return i="".concat(n.basePath,"/").concat(e.product).concat(t,".txt"),[4,n.fileHandler.accessFile(i)];case 1:return 0<c.sent()&&(a=(new Date).getTime(),u={id_name:e.userID,appid:e.appID,timestamp:a+"",product:e.product,req_sdk:e.token?"1":"0",deviceid:e.deviceID||""},!e.token&&e.appSign&&(u.litesign=n.generateLitesign(e.appID,a)),e.token&&(u.token=e.token),n.uploadFileWechat(e.uploadURL||n.uploadURL,i,u).then((function(){return I(s,void 0,void 0,(function(){return S(this,(function(e){switch(e.label){case 0:return[4,this.fileHandler.delFile(i)];case 1:return e.sent(),[4,this.fileHandler.accessFile(i)];case 2:return e.sent(),this.bufferDump(),this.uploading=!1,r({code:0}),[2]}}))}))})).catch((function(e){s.uploading=!1,o({code:e.code})}))),[2]}}))},n=this,i=0,a.label=1;case 1:return i<this.fileConfig.maxFiles?[5,t(i)]:[3,4];case 2:a.sent(),a.label=3;case 3:return i++,[3,1];case 4:return[2]}}))}))}))]}))}))},E.prototype.uploadFileWechat=function(e,t,r){var o=this;return new Promise((function(n,i){var s=e,a=t,u=r;new Promise((function(e,t){var r=(new Date).getTime();wx.uploadFile({url:s,filePath:a,name:"logs",formData:{id_name:u.userID,appid:u.appID,timestamp:r+"",token:u.token,deviceid:"",product:u.product,req_sdk:"1"},success:function(r){var o=r.data;if(200===r.statusCode&&o)try{var n=JSON.parse(o),i=n.code,s=n.message;(0===i?e:t)({code:i,msg:s})}catch(r){t(r)}else t({code:r.statusCode,msg:"upload fail"})},fail:function(e){t(R)}})})).then((function(e){n()})).catch((function(n){o.postFailCount++,4==n.code&&o.postFailCount<3?o.uploadFileWechat(e,t,r):i(n)}))}))},E.prototype.dumpData=function(e){return I(this,void 0,void 0,(function(){return S(this,(function(t){return this.env%2==0?this.writeDataStorage(e):this.writeFileWechat(e),[2]}))}))},E.prototype.readData=function(){return this.storeHandler.readData()},E.prototype.writeDataStorage=function(e){this.storeHandler.storeData(e)},E.prototype.writeFileWechat=function(e){this.fileHandler.storeData(e)},E.prototype.logParams=function(e,t,r,o){var n,i=new Date,s=(i=[u[i.getMonth()+1]||i.getMonth()+1,(u[i.getDate()]||i.getDate())+" ",(u[i.getHours()]||i.getHours())+":",(u[i.getMinutes()]||i.getMinutes())+":",u[i.getSeconds()]||i.getSeconds(),"."+i.getTime()%1e3].join(""),t=t.substr(0,1).toUpperCase(),"");if(this.env%2==0&&this.commonField){var a="";try{for(var c=D(this.commonField),l=c.next();!l.done;l=c.next()){var p=C(l.value,2),h=(p[0],p[1]);a+="[".concat(h,"]")}}catch(e){n={error:e}}finally{try{l&&!l.done&&(f=c.return)&&f.call(c)}finally{if(n)throw n.error}}s=a}var d="",f=(e.forEach((function(e){d+="[".concat(e,"]")})),"");return"function"==typeof(null==(n=null===window||void 0===window?void 0:window.performance)?void 0:n.now)&&(f="[".concat(window.performance.now().toFixed(1),"]")),"[".concat(i,"]").concat(f,"[").concat(t,"][").concat(r,"]").concat(d,":").concat(s).concat(o)},E.prototype.logError=function(e,t){(0,console.error)(e),this.env%2==0?this.stateCenter.debug&&window.alert(t):this.stateCenter.debug&&wx.showModal({title:"",content:t})},E.prototype.generateLitesign=function(e,t){return(t={ver:1,hash:"",nonce:t+"",expire:Math.floor(t/1e3)+3600}).hash=n()("".concat(e,"DPIV9g5X2zvTD4Zj").concat(t.nonce).concat(t.expire)).toString(),i.Base64.encode(JSON.stringify(t))},E);function E(e,t,r){this.env=e,this.product=t,this.logLevel=s.INFO,this.logRemoteLevel=0,this.isDebug=!0,this.logUploadTimer=null,this.logUploadInterval=1e4,this.logCache=[],this.logCacheSend=[],this.logCacheMax=100,this.existUserID=!1,this.tempBuffer=[],this.isUserIDExist=!1,this.uploadURL="http://106.14.207.58:8011/zglog/zip",this.uploading=!1,this.postFailCount=0,this.basePath="",this.filePath="",this.curFile=0,this.limitKeys={},this.limitMs=500,this.stateCenter=p.getInstance(),this.init(r)}}],u={},o.m=a,o.c=u,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=10))},function(e,t,r){function o(e){if(u[e])return u[e].exports;var t=u[e]={i:e,l:!1,exports:{}};return a[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var n,i,s,a,u;e.exports=(n=r(14),i=r(45),s=r(47),a=[function(e,t){e.exports=n},function(e,t){e.exports=i},,,,function(e,t){e.exports=s},,,,function(e,t,r){"use strict";r.r(t),r.d(t,"ZegoDataReportWeb",(function(){return Y})),r.d(t,"ZegoDataReport",(function(){return Q}));var o,n,i,s={importantLevel:0,reportSize:2e3,reportNum:20,bps:16e3,netTimeout:3},a=(t=102400,(C=o={})[C.BROWSER=0]="BROWSER",C[C.WEIXINMINI=1]="WEIXINMINI",(C=x=x||{})[C.IE=0]="IE",C[C.FIREFOX=1]="FIREFOX",C[C.CHROME=2]="CHROME",C[C.SAFARI=3]="SAFARI",C[C.OPERA=4]="OPERA",C[C.WEIXIN=5]="WEIXIN",C[C.WEIXINMINI=6]="WEIXINMINI",C[C.UNKOWN=7]="UNKOWN",(x=n={})[x.DISABLE=0]="DISABLE",x[x.WEBSOCKET=1]="WEBSOCKET",x[x.HTTPS=2]="HTTPS",i=1,u.prototype.isEmpty=function(){return 0==this.items.length},u.prototype.enqueue=function(e){this.items.push(e)},u.prototype.dequeue=function(){return this.isEmpty()?"Underflow":this.items.shift()},u.prototype.front=function(){return this.isEmpty()?"No elements in Queue":this.items[0]},u.prototype.size=function(){return this.items.length},u.prototype.clear=function(){this.items=[]},u);function u(){this.items=[],this.items=[]}var c={code:100001,msg:"network timeout"},l=(Object.defineProperty(p.prototype,"id",{get:function(){return this._id||null},set:function(e){this._id=e},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),p.prototype.hasNext=function(){return this.next&&this.next.id},p.prototype.hasPrev=function(){return this.prev&&this.prev.id},p);function p(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.next=null,this.prev=null,this._id=e,this._data=t}d.prototype.insertBefore=function(e,t){return(t=new l(this._idCounter,t)).next=e,t.prev=e.prev,e.prev&&(e.prev.next=t),e.prev=t,++this._idCounter,++this._numNodes,t},d.prototype.addLast=function(e){return this.insertBefore(this.end,e)},d.prototype.add=function(e){return this.addLast(e)},d.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},d.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},d.prototype.size=function(){return this._numNodes},d.prototype.getFromFirst=function(e){var t=0,r=this.start.next;if(0<=e)for(;t<e&&null!==r;)r=r.next,++t;else r=null;if(null===r)throw"Index out of bounds.";return r},d.prototype.get=function(e){return 0===e?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},d.prototype.remove=function(e){return e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),--this._numNodes,e},d.prototype.removeFirst=function(){return 0<this._numNodes&&this.start.next?this.remove(this.start.next):null},d.prototype.removeLast=function(){return 0<this._numNodes&&this.end.prev?this.remove(this.end.prev):null},d.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},d.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},d.prototype.find=function(e){for(var t=this.start,r=!1,o=null;t.hasNext()&&!r;)e(t=t.next)&&(o=t,r=!0);return o},d.prototype.map=function(e){for(var t=this.start,r=[];t.hasNext();)e(t=t.next)&&r.push(t);return r},d.prototype.push=function(e){return this.addLast(e)},d.prototype.unshift=function(e){0<this._numNodes?this.insertBefore(this.start.next,e):this.insertBefore(this.end,e)},d.prototype.pop=function(){return this.removeLast()},d.prototype.shift=function(){return this.removeFirst()};var h=d;function d(){this.start=new l,this.end=new l,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}g.prototype.init=function(){var e=this;this._websocket&&(this.readyState=0,this._websocket.onOpen((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onopen&&(e.onopen(t),e._websocket.onClose((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onclose&&e.onclose(t)})),e._websocket.onMessage((function(t){"function"==typeof e.onmessage&&e.onmessage(t)})))})),this._websocket.onError((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onerror&&e.onerror(t)})))},g.prototype.onopen=function(e){},g.prototype.onerror=function(e){},g.prototype.onclose=function(e){},g.prototype.onmessage=function(e){},g.prototype.send=function(e){this._websocket&&this._websocket.send({data:e})},g.prototype.close=function(){this._websocket&&this._websocket.close()};var f=g;function g(e,t){this.url=e,this.readyState=3,this._websocket=wx.connectSocket({url:e}),this.init()}var m=r(5),_=(y.prototype.createSocket=function(e){this.socket=new(this.ENV===o.BROWSER?WebSocket:f)(e),this.socket.binaryType="arraybuffer"},y.prototype.closeSocket=function(){this.socket&&(this.socket.onclose=null,this.socket.onerror=null,this.socket.close(),this.socket=null)},y.prototype.isDisConnect=function(){return!this.socket||1!==this.socket.readyState},y.prototype.sendMessage=function(e,t,r,o,n){return void 0===r&&(r=null),void 0===o&&(o=null),void 0===n&&(n={timeOut:6e3}),n={data:t={message_id:e.seq,s:JSON.stringify({speed_detail:t})},seq:e.seq,deleted:!1,sendTime:Date.parse(new Date+""),timeOut:n.timeOut,success:r,error:o},r=this.sendCommandList.push(n),this.sendCommandMap[n.seq]=r,this.socket&&"pb"!==this.pro&&(o=m.deflate(JSON.stringify(t),{to:"string"}),this.socket.send(0==this.ENV?o:o.buffer)),e.seq},y.prototype.checkSendMessageList=function(e){for(var t=e.getFirst();null!=t;)e.remove(t),t._data&&t._data.error&&setTimeout((function(){t&&t._data&&t._data.error&&t._data.error(c,t._data.data.message_id,t._data.data.s)}),0),t=e.getFirst()},y.prototype.checkMessageListTimeout=function(e,t){for(var r=e.getFirst(),o=Date.parse(new Date+""),n=0;!(null==r||r._data&&r._data.sendTime+r._data.timeOut>o||(r._data&&delete t[r._data.data.message_id],e.remove(r),r._data&&null==r._data.error||r._data&&r._data.sendTime+this.sendDataDropTimeout<o||r&&r._data&&r._data.error&&r._data.error(c,r._data.data.message_id,r._data.data.s),++n>=this.sendDataCheckOnceCount));)r=e.getFirst()},y.prototype.startCheck=function(){var e=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout((function(){e.startCheck()}),this.sendDataCheckInterval)},y.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),clearTimeout(this.sendDataCheckTimer)},y.prototype.openHandler=function(e){var t=this;this.socket&&(this.socket.onopen=function(r){t.responseHandler(),e(r)})},y.prototype.responseHandler=function(){var e=this;this.socket&&(this.socket.onmessage=function(t){t="string"==typeof t.data?JSON.parse(t.data):JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t.data))),e.onMessage(t)})},y.prototype.closeHandler=function(e){this.socket&&(this.socket.onclose=function(t){e(t)})},y.prototype.errorHandler=function(e){this.socket&&(this.socket.onerror=e)},y.prototype.onMessage=function(e){},y);function y(e,t){this.pro=t,this.socket=null,this.sendCommandList=new h,this.sendCommandMap={},this.sendDataCheckOnceCount=100,this.sendDataDropTimeout=1e4,this.sendDataCheckInterval=2e3,this.ENV=e}v.prototype.handleSendCommandMsgRsp=function(e){var t,r=this,o=this.service.sendCommandMap[e.messageId];null!=o&&(t=o._data,delete this.service.sendCommandMap[e.messageId],this.service.sendCommandList.remove(o),0===e.code?setTimeout((function(){t&&null!=t.success&&t.success(e,r.cmdSeq)}),0):setTimeout((function(){t&&null!=t.error&&t.error(e,r.cmdSeq)}),0))},v.prototype.onPush=function(){var e=this;this.service.onMessage=function(t){e.handleSendCommandMsgRsp(t)}},v.prototype.closeHandler=function(e){this.service.closeHandler(e)},v.prototype.openHandler=function(e){this.service.openHandler(e)},v.prototype.errorHandler=function(e){this.service.errorHandler(e)},v.prototype.getHeader=function(e){return{Protocol:"req",cmd:e,appid:123,seq:++this.cmdSeq,session_id:""}},v.prototype.startCheck=function(){this.service.startCheck()},v.prototype.stopCheck=function(){this.service.stopCheck()},v.prototype.isDisConnect=function(){return!this.service||this.service.isDisConnect()},v.prototype.createSocket=function(e){this.service.createSocket(e),this.responseRouters={}},v.prototype.closeSocket=function(){this.service.closeSocket()},v.prototype.sendMessage=function(e,t,r,o,n,i){return this.service.isDisConnect()?(o&&o(-1),0):(n=n||this.getHeader(e),this.service.sendMessage(n,t,r,o,{timeOut:1e3*s.netTimeout}))},v.prototype.on=function(e,t){this.responseRouters[e]=t};var b=v;function v(e,t){this.env=e,this.pro=t,this.service=new _(this.env,this.pro),this.cmdSeq=0,this.responseRouters={}}k.prototype.removeTokens=function(e,t){var r=this;return this.bucketSize?e>this.bucketSize?(setTimeout(t.bind(null,"Requested tokens "+e+" exceeds bucket size "+this.bucketSize,null),0),!1):(this.drip(),e>this.content?o():this.parentBucket?this.parentBucket.removeTokens(e,(function(n,i){return n?t(n,null):e>r.content?o():(r.content-=e,void t(null,Math.min(i,r.content)))})):(this.content-=e,setTimeout(t.bind(null,null,this.content),0),!0)):(setTimeout(t.bind(null,null,e,Number.POSITIVE_INFINITY),0),!0);function o(){var o=Math.ceil((e-r.content)*(r.interval/r.tokensPerInterval));return setTimeout((function(){r.removeTokens(e,t)}),o),!1}},k.prototype.tryRemoveTokens=function(e){return!(this.bucketSize&&(e>this.bucketSize||(this.drip(),e>this.content||this.parentBucket&&!this.parentBucket.tryRemoveTokens(e)||(this.content-=e,0))))},k.prototype.drip=function(){var e,t;this.tokensPerInterval?(t=+new Date,e=Math.max(t-this.lastDrip,0),this.lastDrip=t,t=e*(this.tokensPerInterval/this.interval),this.content=Math.min(this.content+t,this.bucketSize)):this.content=this.bucketSize};var w=k;function k(e,t,r,o){if(this.bucketSize=1,this.tokensPerInterval=1,this.interval=1e3,this.parentBucket=null,this.content=0,this.lastDrip=0,this.bucketSize=e,this.tokensPerInterval=t,"string"==typeof r)switch(r){case"sec":case"second":this.interval=1e3;break;case"min":case"minute":this.interval=6e4;break;case"hr":case"hour":this.interval=36e5;break;case"day":this.interval=864e5;break;default:throw new Error("Invaid interval "+r)}else this.interval=r;this.parentBucket=o,this.content=0,this.lastDrip=+new Date}function M(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return s}function I(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||((o=o||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}D.getInstance=function(e,t,r){return D.instance=D.instance||new D(e,t,r)},D.prototype.setLogServer=function(e){try{return e.startsWith("wss:")||e.startsWith("ws:")?(this.logType=n.WEBSOCKET,this.openWebSocketLogServer(e)):e.startsWith("https:")||e.startsWith("http:")?(this.logType=n.HTTPS,this.openHttpsLogServer(e)):this.logType=n.DISABLE,!0}catch(e){return!1}},D.prototype.setLogUrlParams=function(e){this.logParams=e},D.prototype.openWebSocketLogServer=function(e){var t=this;this.url!=e&&(this.url=e)&&(this.stopWebSocketServer(),this.logParams.id_name&&(e+="?product=".concat(this.logParams.product,"&appid=").concat(this.logParams.appid,"&token=").concat(encodeURIComponent(this.logParams.signature),"&deviceid=").concat(this.logParams.deviceid,"&id_name=").concat(this.logParams.id_name),this.service.createSocket(e),this.service.openHandler((function(){t.service.onPush(),t.service.startCheck(),t.openHandler()})),this.service.closeHandler((function(){t.service.closeSocket()})),this.service.errorHandler((function(){t.service.closeSocket()}))))},D.prototype.stopWebSocketServer=function(){this.service.closeSocket()},D.prototype.openHttpsLogServer=function(e){(this.url=e)&&this.stopHttpsServer()},D.prototype.stopHttpsServer=function(){this.logUploadTimer&&(clearInterval(this.logUploadTimer),this.logUploadTimer=null)},D.prototype.SendHttpsLog=function(e,t,r,n){this.env===o.BROWSER?this.SendHttpsLogWeb(e,t,r,n):this.SendHttpsLogWeChatMini(e,t,r,n)},D.prototype.SendHttpsLogWeb=function(e,t,r,o){var n=this,i=(e=JSON.stringify({body:{data:e}}),new XMLHttpRequest);i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status){if(0!=i.responseText.length)try{var e=JSON.parse(i.responseText).interval;"number"==typeof e&&n.logUploadInterval!==e&&n.openHttpsLogServer(n.url),r&&r()}catch(e){o&&o()}}else o&&o()},i.open("POST",this.url,!0),i.send(e)},D.prototype.SendHttpsLogWeChatMini=function(e,t,r,o){var n=this;e={appid:this.logParams.appid+"",timestamp:(new Date).getTime()+"",token:this.logParams.signature,id_name:this.logParams.id_name,product:this.logParams.product,message_id:++this.msgID,s:JSON.stringify({speed_detail:e})},wx.request({url:this.url,data:JSON.stringify(e),method:"POST",success:function(e){0!=e.data.length&&("number"==typeof(e=e&&e.data&&e.data.interval)&&n.logUploadInterval!==e&&n.openHttpsLogServer(n.url),r&&r())},fail:function(e){o&&o()}})},D.prototype.openHandler=function(){this.startReport()},D.prototype.setPostSucCallback=function(e,t){this.postSucCallbackList[e]=t},D.prototype.setPostFailCallback=function(e,t){this.postFailCallbackList[e]=t},D.prototype.reportAllowed=function(){return this.packageLen<this.PACKAGE_MAX_LEN},D.prototype.report=function(e,t,r){this.packageLen++,this.packagesDataSize+=t,this.reportQueue.enqueue({reportDatas:e,dataLen:t,product:r}),this.netWorkFail=!1,this.failCount=0,this.failStartTime=0,this.startReport()},D.prototype.setBps=function(e){this.tokenBucket=new w(1e4,e/8,"sec")},D.prototype.startReport=function(){var e,t,r,o,n=this;0<this.reportQueue.size()&&(e=this.reportQueue.dequeue(),t=e.reportDatas,r=e.dataLen,o=e.product,new Date,this.tokenBucket.removeTokens(r,(function(){n.netWorkFail?n.postFailCallbackList[o](t):n.reportData(t,r,o,(function(){n.failCount=0,n.failStartTime=0,n.packageLen--,n.packagesDataSize-=r,n.postSucCallbackList[o]&&n.postSucCallbackList[o](t,r,o)}),(function(e){n.reportQueue.enqueue({reportDatas:t,dataLen:r,product:o}),n.failCount++,0==n.failCount&&(n.failStartTime=Date.now());var i,s=(Date.now()-n.failStartTime)/1e3;if(10<=n.failCount&&60<s)return n.netWorkFail=!0,i=n.decodeReportQueue(),void Object.keys(n.postFailCallbackList).forEach((function(e){n.postFailCallbackList[o](i[e])}));-1!==e&&n.startReport()}))})))},D.prototype.reportData=function(e,t,r,o,i){var s=this,a=[];e.forEach((function(e){a.push(e.packagedContent)})),this.logType==n.WEBSOCKET?this.service.sendMessage("report",a,o,(function(e){var t;-1===e&&(t=s.url,s.url="",s.setLogServer(t)),i&&i(e)})):this.logType==n.HTTPS&&this.SendHttpsLog(a,t,o,(function(){i&&i()}))},D.prototype.unsigned2signed=function(e){var t=parseInt(e,10);if(256<t)return t%256;for(var r=[];0<t;)t%2!=0?r.push(1):r.push(0),t=Number(t/2);for(r.reverse();r.length<8;)r.unshift(0);var o="";if(1==(r=r.join("")).substr(0,1)){for(var n=1;n<r.length;n++)1==r.substr(n,1)?o+=0:o+=1;return"-"+(parseInt(o,2)+1)}for(n=0;n<r.length;n++)o+=r.substr(n,1);return parseInt(o,2)},D.prototype.decodeReportQueue=function(){for(var e={};this.reportQueue.size();){var t,r=(t=this.reportQueue.dequeue()).reportDatas;e[(t.dataLen,t=t.product)]||(e[t]=[]),e[t]=I(I([],M(e[t]),!1),M(r),!1)}return e};var S=D;function D(e,t,r){this.env=e,this.pro=r,this.websocket=null,this.packageLen=0,this.packagesDataSize=0,this.PACKAGE_MAX_LEN=5,this.msgID=0,this.logUploadTimer=null,this.logUploadInterval=1e4,this.logCacheSend=[],this.logCacheMax=100,this.reportDataCheckInterval=1e3,this.postSucCallbackList={},this.postFailCallbackList={},this.failCount=0,this.failStartTime=0,this.netWorkFail=!1,this.service=new b(e,r),this.setBps(t),this.reportQueue=new a}var C=r(0),R=r.n(C),A=(O.prototype.getItem=function(e){var t=this;return new Promise((function(r,o){try{r(wx.getStorageSync(t.keyPrefix+e))}catch(r){o(r)}}))},O.prototype.setItem=function(e,t){var r=this;return new Promise((function(o,n){try{wx.setStorageSync(r.keyPrefix+e,t),o()}catch(o){n(o)}}))},O.prototype.removeItem=function(e){var t=this;return new Promise((function(r,o){try{r(wx.removeStorageSync(t.keyPrefix+e))}catch(r){o(r)}}))},O.prototype.clear=function(){return new Promise((function(e,t){try{wx.clearStorageSync(),e()}catch(e){t(e)}}))},O.prototype.keys=function(){var e=this;return new Promise((function(t,r){try{var o=wx.getStorageInfoSync().keys,n=[];o.forEach((function(t){0==t.indexOf(e.keyPrefix)&&n.push(t.replace(e.keyPrefix,""))})),n.sort(),t(n)}catch(t){r(t)}}))},O);function O(e){this.storeName=e,this.keyPrefix=e+"/",this.storeName}function E(e,t){return t===o.BROWSER?R.a.createInstance({name:e}):new A(e)}var x=r(1),P=r.n(x);function T(e){return e=e.split("_"),{level:Number(e[0]),timestamp:e[1],seq:e[2]}}function q(e){return P()(e)}function L(e,t,r,o){return new(r=r||Promise)((function(n,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((o=o.apply(e,t||[])).next())}))}function B(e,t){var r,o,n,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var u=[s,a];if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,o&&(n=2&u[0]?o.return:u[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,u[1])).done)return n;switch(o=0,(u=n?[2&u[0],n.value]:u)[0]){case 0:case 1:n=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,o=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(n=0<(n=i.trys).length&&n[n.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!n||u[1]>n[0]&&u[1]<n[3])){i.label=u[1];break}if(6===u[0]&&i.label<n[1]){i.label=n[1],n=u;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(u);break}n[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(a){u=[6,a],o=0}finally{r=n=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}N.prototype.init=function(){return L(this,void 0,void 0,(function(){var e,t;return B(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),[4,this.commonStore.getItem(this.storeName)];case 1:return(e=r.sent())?[3,3]:(t={storeSize:this.storeSize},[4,this.commonStore.setItem(this.storeName,t)]);case 2:return r.sent(),[3,4];case 3:t="string"==typeof e?JSON.parse(e):e,this.storeSize=t.storeSize,r.label=4;case 4:return[3,6];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},N.prototype.setDropCallBack=function(e){this.dropCallBack=e},N.prototype.storeData=function(e){var t=this;return new Promise((function(r,o){return L(t,void 0,void 0,(function(){var t,o,n,i,s=this;return B(this,(function(a){switch(a.label){case 0:if(this.droping)return this.bufferData.push(e),[2];if(t=e.level,n=e.timestamp,i=e.seq,o=e.content,i=q(n=t+"_"+n+"_"+i)+q(o),Y.totalDBSize-i<=0)return this.dropDBData(t,n,o).then((function(){s.droping=!1,s.bufferDump()})).catch((function(e){})),r(),[2];a.label=1;case 1:return a.trys.push([1,5,,6]),[4,this.store.getItem(n)];case 2:return a.sent()?(r(),[2]):[4,this.store.setItem(n,o)];case 3:return a.sent(),this.storeSize+=i,Y.totalDBSize-=i,[4,this.refreshStoreInfo()];case 4:return a.sent(),r(),[3,6];case 5:return"QuotaExceededError"===a.sent().name&&this.dropDBData(t,n,o).then((function(){s.droping=!1,s.bufferDump()})).catch((function(e){})),[3,6];case 6:return[2]}}))}))}))},N.prototype.loadPendingData=function(){return L(this,void 0,void 0,(function(){var e=this;return B(this,(function(t){switch(t.label){case 0:return[4,this.store.keys()];case 1:return t.sent().forEach((function(t){return L(e,void 0,void 0,(function(){var e,r=this;return B(this,(function(o){switch(o.label){case 0:return-1===t.indexOf("pending")?[3,3]:[4,this.store.getItem(t)];case 1:return(e=o.sent())?(JSON.parse(e).forEach((function(e){return L(r,void 0,void 0,(function(){return B(this,(function(t){switch(t.label){case 0:return[4,this.storeData(e)];case 1:return t.sent(),[2]}}))}))})),[4,this.store.removeItem(t)]):[3,3];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))})),[2]}}))}))},N.prototype.storePendingData=function(e){return L(this,void 0,void 0,(function(){return B(this,(function(t){switch(t.label){case 0:return[4,this.store.setItem("pending"+(new Date).getTime(),JSON.stringify(e))];case 1:return t.sent(),[2]}}))}))},N.prototype.bufferDump=function(){return L(this,void 0,void 0,(function(){var e;return B(this,(function(t){switch(t.label){case 0:return(e=this.bufferData.pop())?[4,this.storeData(e)]:[3,2];case 1:t.sent(),this.bufferDump(),t.label=2;case 2:return[2]}}))}))},N.prototype.dropDBData=function(e,t,r){return L(this,void 0,void 0,(function(){var e=this;return B(this,(function(o){return this.droping=!0,[2,new Promise((function(o,n){return L(e,void 0,void 0,(function(){var e,i,s,a,u;return B(this,(function(c){switch(c.label){case 0:return c.trys.push([0,10,,11]),[4,this.store.keys()];case 1:(e=c.sent()).reverse(),i=Math.ceil(e.length*this.storeDelPer),s=0,c.label=2;case 2:return s<i?[4,this.store.getItem(e[s])]:[3,7];case 3:return null==(a=c.sent())?[3,6]:[4,this.store.removeItem(e[s])];case 4:return c.sent(),u=q(e[s])+q(a),Y.totalDBSize+=u,this.storeSize-=u,[4,this.refreshStoreInfo()];case 5:c.sent(),this.dropCallBack(a),c.label=6;case 6:return s++,[3,2];case 7:return[4,this.store.setItem(t,r)];case 8:return c.sent(),this.storeSize+=q(t)+q(r),[4,this.refreshStoreInfo()];case 9:return c.sent(),o(),[3,11];case 10:return u=c.sent(),n(u),[3,11];case 11:return[2]}}))}))}))]}))}))},N.prototype.removeDataItem=function(e){var t=this;return new Promise((function(r,o){return L(t,void 0,void 0,(function(){var t,n,i,s,a;return B(this,(function(u){switch(u.label){case 0:t=e.level,i=e.timestamp,s=e.seq,e.content,t=t+"_"+i+"_"+s,u.label=1;case 1:return u.trys.push([1,6,,7]),[4,this.store.getItem(t)];case 2:return(n=u.sent())?[4,this.store.removeItem(t)]:[3,5];case 3:return u.sent(),i=1==this.config.env?q(JSON.parse(n)):q(n),s=q(t)+i,this.storeSize-=s,Y.totalDBSize+=s,this.traceType.DB_O_DONE+=s,[4,this.refreshStoreInfo()];case 4:u.sent(),r(),u.label=5;case 5:return[3,7];case 6:return a=u.sent(),o(a),[3,7];case 7:return[2]}}))}))}))},N.prototype.refreshStoreInfo=function(){return L(this,void 0,void 0,(function(){return B(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.commonStore.setItem(this.storeName,{storeSize:this.storeSize})];case 1:case 2:return e.sent(),[3,3];case 3:return[2]}}))}))},N.prototype.readStoreDataItem=function(){var e=this;return new Promise((function(t,r){return L(e,void 0,void 0,(function(){var e,o,n,i,s;return B(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,this.store.keys()];case 1:return e=a.sent(),[4,this.store.getItem(e[0])];case 2:return o=a.sent(),i=T(e[0]),s=i.level,n=i.timestamp,i=i.seq,t({level:s,timestamp:n,seq:i,content:o}),[3,4];case 3:return s=a.sent(),r(s),[3,4];case 4:return[2]}}))}))}))},N.prototype.loadDBData=function(e,t,r,o){var n=this;return new Promise((function(i,s){return L(n,void 0,void 0,(function(){var n,a,u,c,l,p,h,d,f,g;return B(this,(function(m){switch(m.label){case 0:return m.trys.push([0,6,,7]),[4,this.store.keys()];case 1:n=m.sent(),a=[],p=l=c=u=0,m.label=2;case 2:return p<n.length?o(n[p])?[3,4]:[4,this.store.getItem(n[p])]:[3,5];case 3:if(null==(h=m.sent()))return[3,4];if(d=T(n[p]),f=d.level,g=d.timestamp,d=d.seq,a.push({level:f,timestamp:g,seq:d,content:h,key:n[p]}),f=q(h),c+=f,e<=(u+=f)&&(u=0,l++),t<=l&&r<=c)return[3,5];m.label=4;case 4:return p++,[3,2];case 5:return i({datas:a,len:c}),[3,7];case 6:return g=m.sent(),s(g),[3,7];case 7:return[2]}}))}))}))},N.prototype.sortKeys=function(e,t){void 0===t&&(t=!1),e.sort((function(e,t){return e=e.split("_"),+(t=t.split("_"))[0]-+e[0]||+t[1]-+e[1]||+t[2]-+e[2]})),t&&e.reverse()};var G=N;function N(e,t,r){this.storeName=e,this.config=t,this.traceType=r,this.storeSize=0,this.storeDelPer=.2,this.droping=!1,this.bufferData=[],this.store=E(e,t.env),this.commonStore=E("data_common",t.env)}function j(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return s}function U(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||((o=o||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}F.prototype.enqueue=function(e,t){(t=this.cacheMap.get(t))&&(t.enqueue(e),t=q(e.content),this.pendingDataSize+=t,this.size++,Y.totalAvailCache-=t,this.enCallback&&this.enCallback(this.byteLength,this.size,this.pendingDataSize))},F.prototype.dequeue=function(e){return e=null==(e=this.cacheMap.get(e))?void 0:e.dequeue(),this.size--,this.deCallback&&this.deCallback(),e},F.prototype.readReportData=function(e){var t=U([],j(this.cacheMap.entries()),!1);t=this.readData(t,e,!0);return this.reset(),{totalLen:t.totalLen,reportDataArr:t.resArr}},F.prototype.readStoreData=function(e){e=Math.ceil(this.pendingDataSize*e);var t=U([],j(this.cacheMap.entries()),!1).reverse();t=this.readData(t,e,!1);return this.refresh(t.totalLen),{totalLen:t.totalLen,storeArr:t.resArr}},F.prototype.readData=function(e,t,r){var o=[],n=0;e:for(var i=0;i<e.length;i++)for(var s=j(e[i],2),a=s[0],u=s[1];u.size();){var c=this.dequeue(a);if(o.push(c),t<(n+=q(c.content)))break e}return{totalLen:n,resArr:o}},F.prototype.decodeReportData=function(e){var t=this;e.forEach((function(e){t.enqueue(e,e.level)}))},F.prototype.setListener=function(e){this.enCallback=e.enCallback,this.deCallback=e.deCallback},F.prototype.getPendingDataInfo=function(){return{pendingDataSize:this.pendingDataSize,size:this.size}},F.prototype.refresh=function(e){this.pendingDataSize-=e,Y.totalAvailCache+=e},F.prototype.reset=function(){this.byteLength=0};var z=F;function F(e,t){var r=this;this.levels=e,this.product=t,this.byteLength=0,this.size=0,this.pendingDataSize=0,this.cacheMap=new Map,e.forEach((function(e){r.cacheMap.set(e,new a)}))}function H(e,t,r,o){return new(r=r||Promise)((function(n,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((o=o.apply(e,t||[])).next())}))}function K(e,t){var r,o,n,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var u=[s,a];if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,o&&(n=2&u[0]?o.return:u[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,u[1])).done)return n;switch(o=0,(u=n?[2&u[0],n.value]:u)[0]){case 0:case 1:n=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,o=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(n=0<(n=i.trys).length&&n[n.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!n||u[1]>n[0]&&u[1]<n[3])){i.label=u[1];break}if(6===u[0]&&i.label<n[1]){i.label=n[1],n=u;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(u);break}n[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(a){u=[6,a],o=0}finally{r=n=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}function V(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],o=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&o>=e.length?void 0:e)&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Z(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return s}var W=function(){return(W=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},Q=(J.prototype.init=function(e){return H(this,void 0,void 0,(function(){var t=this;return K(this,(function(r){switch(r.label){case 0:return this.config=W(W({},s),e),this.config.env%2!=1&&this.bindWindowListener(),this.logger=new S(this.config.env||o.BROWSER,this.config.bps||s.bps,this.pro),this.logger.setLogUrlParams({product:this.product,signature:this.config.token||"",appid:this.config.appID,id_name:this.config.userID||"",deviceid:this.config.deviceID||""}),this.config.serverUrl&&this.logger.setLogServer(this.config.serverUrl),this.logger.setPostSucCallback(this.product,this.postSucHandler.bind(this)),this.logger.setPostFailCallback(this.product,(function(e){t.storePackagesDataToDB(e),t.storePendingDataToDB(1),t._actionListener("postFail")})),this.initPendingQueue(),this.storeHandler=new G(this.product+"_"+this.config.appID+"_datareporter",this.config,this.traceType),this.storeHandler.setDropCallBack((function(e){t.traceType.DB_O_DROP+=q(e),t._actionListener("dataDroped",e)})),[4,this.storeHandler.loadPendingData()];case 1:return r.sent(),this.storeHandler.init().then((function(){t.loadReportData()})).catch((function(e){})),[2]}}))}))},J.prototype.setConfig=function(e){"object"==typeof e&&"number"==typeof e.bps&&(this.config.bps=e.bps,this.logger.setBps(this.config.bps)),"object"==typeof e&&"number"==typeof e.totalDBSize&&(Y.totalDBSize=e.totalDBSize),"object"==typeof e&&"string"==typeof e.serverUrl&&""!==e.serverUrl&&(this.config.serverUrl=e.serverUrl,this.logger.setLogServer(this.config.serverUrl))},J.prototype.pause=function(){this.isPaused=!0},J.prototype.startReport=function(e){var t=e.get("userID"),r=e.get("token");return!(!t||"string"!=typeof t||!r||"string"!=typeof r||(this.startCommonField=e,this.config.userID=t,this.config.token=r,this.logger.setLogUrlParams({product:this.product,signature:this.config.token,appid:this.config.appID,id_name:this.config.userID||"",deviceid:this.config.deviceID||""}),(t=e.get("serverUrl"))&&(this.config.serverUrl=t,this.logger.setLogServer(this.config.serverUrl)),this.isConfigOK(this.config)&&(e=(r=this.pendingQueue.getPendingDataInfo()).pendingDataSize,t=r.size,this.checkPendingQueue(e,t)),0))},J.prototype.resume=function(){this.isPaused=!1;var e=(t=this.pendingQueue.getPendingDataInfo()).pendingDataSize,t=t.size;this.checkPendingQueue(e,t)},J.prototype.on=function(e,t){return this._bindListener(e,t)},J.prototype.off=function(e,t){return this._deleteListener(e,t)},J.prototype.report=function(e,t){var r=this;if(4e3<e.length)return!1;var o=q(e),n=(this.traceType.MEM_I_API+=o,i++),s=(new Date).getTime(),a={seq:n,content:e,level:t,timestamp:s,packagedContent:""};return t<=this.config.importantLevel?this.storeHandler.storeData(a).then((function(e){r.pendingQueue.enqueue(a,t),a.key=t+"_"+s+"_"+n,r.dataInDb.push(a.key),r.traceType.DB_I_BACKUP+=o})).catch((function(e){r.pendingQueue.enqueue(a,t)})):this.pendingQueue.enqueue(a,t),"force"===this.state&&(e=q(e),this.forceDataTotalLen+=e),!0},J.prototype.isConfigOK=function(e){return""!==e.userID&&""!==e.token&&""!==e.server},J.prototype.testSize=function(e){},J.prototype.forceReport=function(e){var t;"force"!==this.state&&(this.state="force",t=16e6,"object"==typeof e&&"number"==typeof e.bps&&(t=e.bps),this.logger.setBps(t),this.forceDataTotalLen=this.storeHandler.storeSize+this.pendingQueue.pendingDataSize+this.reportPackagesSize,t=(e=this.pendingQueue.getPendingDataInfo()).pendingDataSize,e=e.size,t>this.config.reportSize||e>this.config.reportNum?this.checkPendingQueue(t,e):this.loadReportData())},J.prototype.bindWindowListener=function(){var e=this,t=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i);navigator.userAgent.indexOf("Firefox"),window.addEventListener(t?"pagehide":"beforeunload",(function(){var t;window.event&&(window.event.cancelBubble=!0),0<((t=e.pendingQueue.readStoreData(1)).totalLen,(t=t.storeArr).length)&&e.storeHandler.storePendingData(t)}))},J.prototype.postSucHandler=function(e,t,r){var o=this;e.forEach((function(e){o.traceType.MEM_O_DONE+=q(e.content)})),e.forEach((function(e){return H(o,void 0,void 0,(function(){var t;return K(this,(function(r){switch(r.label){case 0:return[4,this.storeHandler.removeDataItem(e)];case 1:return r.sent(),-1<(t=this.dataInDb.findIndex((function(t){return t===e.key})))&&this.dataInDb.splice(t,1),[2]}}))}))})),this.reportPackagesSize-=t,t=(e=this.pendingQueue.getPendingDataInfo()).pendingDataSize,e=e.size,this.checkPendingQueue(t,e),"force"===this.state&&0==this.reportPackagesSize&&(t=this.reportPackagesSize+this.pendingQueue.pendingDataSize+this.storeHandler.storeSize,e=1-Number((t/this.forceDataTotalLen).toFixed(2)),this.listenerList.progressUpdate&&this._actionListener("progressUpdate",e),0<this.storeHandler.storeSize&&this.loadReportData((function(e){0===e&&(o.state="normal",o.logger.setBps(o.config.bps||s.bps),o.listenerList.forceSuccessCallback&&o._actionListener("forceResult","SUCCESS"))})))},J.prototype.checkPendingQueue=function(e,t){var r,o;(e>this.config.reportSize||t>this.config.reportNum)&&(!this.isPaused&&this.config.userID&&this.config.token&&this.config.serverUrl&&this.logger.reportAllowed()?(r=(t=this.pendingQueue.readReportData(this.config.reportSize)).totalLen,t=t.reportDataArr,o=(t=this.setCommonField(t)).packageArr,t=t.packageLen,this.logger.report(o,t,this.product),this.reportPackagesSize+=t,this.pendingQueue.refresh(r)):(e>=this.cacheMaxSize||Y.totalAvailCache<=0)&&this.storePendingDataToDB(this.cacheDelPer))},J.prototype.initPendingQueue=function(){var e=this;this.pendingQueue=new z(this.config.levels,this.product),this.pendingQueue.setListener({enCallback:function(t,r,o){e.checkPendingQueue(o,r)}})},J.prototype.loadDBDataToMem=function(){var e=this;this.storeHandler.readStoreDataItem().then((function(t){var r=q(t.content);e.traceType.MEM_I_LOAD+=r,e.pendingQueue.enqueue(t,t.level)})).catch((function(e){}))},J.prototype.storePendingDataToDB=function(e){return H(this,void 0,void 0,(function(){var t,r,o,n,i,s,a;return K(this,(function(u){switch(u.label){case 0:r=this.pendingQueue.readStoreData(e),t=r.totalLen,r=r.storeArr,u.label=1;case 1:u.trys.push([1,8,9,10]),o=V(r),n=o.next(),u.label=2;case 2:if(n.done)return[3,7];i=n.value,u.label=3;case 3:return u.trys.push([3,5,,6]),[4,this.storeDataItem(i,t)];case 4:case 5:return u.sent(),[3,6];case 6:return n=o.next(),[3,2];case 7:return[3,10];case 8:return s={error:s=u.sent()},[3,10];case 9:try{n&&!n.done&&(a=o.return)&&a.call(o)}finally{if(s)throw s.error}return[7];case 10:return[2]}}))}))},J.prototype.storePackagesDataToDB=function(e){var t=this;e.length&&e.forEach((function(e){t.storeHandler.storeData(e).then((function(r){var o=q(e.content);t.traceType.MEM_O_DUMP+=o})).catch((function(e){}))}))},J.prototype.storeDataItem=function(e,t){var r=this;return new Promise((function(t,o){return H(r,void 0,void 0,(function(){var r;return K(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.storeHandler.storeData(e)];case 1:return n.sent(),r=q(e.content),this.traceType.MEM_O_DUMP+=r,t(),[3,3];case 2:return r=n.sent(),o(r),[3,3];case 3:return[2]}}))}))}))},J.prototype.loadReportData=function(e){var t=this;this.storeHandler.storeSize<=0||this.storeHandler.loadDBData(this.config.reportSize,5,Math.floor(this.cacheMaxSize/3),(function(e){return-1<t.dataInDb.indexOf(e)})).then((function(r){r.datas.forEach((function(e){var r=q(e.content);t.traceType.MEM_I_LOAD+=r,t.pendingQueue.enqueue(e,e.level),t.dataInDb.push(e.key)})),e&&e(r.len)})).catch((function(e){}))},J.prototype.setCommonField=function(e){var t=this,r=0;return e.forEach((function(e){var o,n,i,s,a,u;if(e.packagedContent=JSON.parse(e.content),t.config.initCommonField)try{for(var c=V(t.config.initCommonField),l=c.next();!l.done;l=c.next()){var p=Z(l.value,2),h=p[0],d=p[1];(b=JSON.parse(e.content))[h]=d,e.packagedContent=b}}catch(e){o={error:e}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(o)throw o.error}}if(t.startCommonField)try{for(var f=V(t.startCommonField),g=f.next();!g.done;g=f.next()){var m=Z(g.value,2);h=m[0],d=m[1];"userID"!==h&&"token"!==h&&"serverUrl"!==h&&((b=JSON.parse(e.content))[h]=d,e.packagedContent=b)}}catch(e){i={error:e}}finally{try{g&&!g.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}if(t.reporterCommonField)try{for(var _=V(t.reporterCommonField),y=_.next();!y.done;y=_.next()){var b,v=Z(y.value,2);h=v[0],d=v[1],(b=JSON.parse(e.content))[h]=d,e.packagedContent=b}}catch(e){a={error:e}}finally{try{y&&!y.done&&(u=_.return)&&u.call(_)}finally{if(a)throw a.error}}r+=q(JSON.stringify(e.packagedContent))})),{packageArr:e,packageLen:r}},J.prototype._bindListener=function(e,t){return!!this.listenerList[e]&&"function"==typeof t&&(-1==this.listenerList[e].indexOf(t)&&this.listenerList[e].push(t),!0)},J.prototype._deleteListener=function(e,t){if(!this.listenerList[e])return!1;var r=this.listenerList[e];return t?r.splice(r.indexOf(t),1):this.listenerList[e]=[],!0},J.prototype._actionListener=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.listenerList[e]&&this.listenerList[e].forEach((function(e){try{e.apply(void 0,function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||((o=o||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}([],Z(t),!1))}catch(e){}}))},J);function J(e){this.QUEUE_MAX=100,this.cacheMaxSize=2e4,this.cacheDelPer=.2,this.state="normal",this.forceDataTotalLen=0,this.reportPackagesSize=0,this.dataInDb=[],this.listenerList={progressUpdate:[],forceResult:[],postFail:[],dataDroped:[]},this.traceType={MEM_I_API:0,MEM_O_DONE:0,MEM_O_DUMP:0,MEM_I_LOAD:0,DB_O_DROP:0,DB_O_DONE:0,DB_I_BACKUP:0},this.isPaused=!1,this.pro="json",this.product=e,this.reporterCommonField=new Map}X.getDataReporter=function(e){return X.instances[e]||(X.instances[e]=new Q(e)),X.instances[e]},X.instances={},X.totalAvailCache=t,X.totalDBSize=1024e3,X.bps=1600;var Y=X;function X(){}}],u={},o.m=a,o.c=u,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=9))},function(e,t){},function(e,t,r){var o;e.exports=(e=r(2),o=e.lib.WordArray,e.enc.Base64={stringify:function(e){for(var t=e.words,r=e.sigBytes,o=this._map,n=(e.clamp(),[]),i=0;i<r;i+=3)for(var s=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;a<4&&i+.75*a<r;a++)n.push(o.charAt(s>>>6*(3-a)&63));var u=o.charAt(64);if(u)for(;n.length%4;)n.push(u);return n.join("")},parse:function(e){var t=e.length,r=this._map;if(!(n=this._reverseMap))for(var n=this._reverseMap=[],i=0;i<r.length;i++)n[r.charCodeAt(i)]=i;var s=r.charAt(64);return s&&-1!==(s=e.indexOf(s))&&(t=s),function(e,t,r){for(var n,i,s=[],a=0,u=0;u<t;u++)u%4&&(n=r[e.charCodeAt(u-1)]<<u%4*2,i=r[e.charCodeAt(u)]>>>6-u%4*2,s[a>>>2]|=(n|i)<<24-a%4*8,a++);return o.create(s,a)}(e,t,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.enc.Base64)},function(e,t,r){var o,n,i,s;e.exports=(e=r(2),s=(r=e).lib,o=s.WordArray,n=s.Hasher,s=r.algo,i=[],s=s.SHA1=n.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,o=r[0],n=r[1],s=r[2],a=r[3],u=r[4],c=0;c<80;c++){c<16?i[c]=0|e[t+c]:(l=i[c-3]^i[c-8]^i[c-14]^i[c-16],i[c]=l<<1|l>>>31);var l=(o<<5|o>>>27)+u+i[c];l+=c<20?1518500249+(n&s|~n&a):c<40?1859775393+(n^s^a):c<60?(n&s|n&a|s&a)-1894007588:(n^s^a)-899497514,u=a,a=s,s=n<<30|n>>>2,n=o,o=l}r[0]=r[0]+o|0,r[1]=r[1]+n|0,r[2]=r[2]+s|0,r[3]=r[3]+a|0,r[4]=r[4]+u|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[14+(64+o>>>9<<4)]=Math.floor(r/4294967296),t[15+(64+o>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),r.SHA1=n._createHelper(s),r.HmacSHA1=n._createHmacHelper(s),e.SHA1)},function(e,t,r){var o;e.exports=(e=r(2),r=e.lib.Base,o=e.enc.Utf8,void(e.algo.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));for(var r=e.blockSize,n=4*r,i=(e=((t=t.sigBytes>n?e.finalize(t):t).clamp(),this._oKey=t.clone()),t=this._iKey=t.clone(),e.words),s=t.words,a=0;a<r;a++)i[a]^=1549556828,s[a]^=909522486;e.sigBytes=t.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;e=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(e))}})))},function(e,t,r){var o,n,i,s,a,u,c,l,p,h,d,f;e.exports=(e=r(2),r(11),void(e.lib.Cipher||(r=(e=e).lib,o=r.Base,n=r.WordArray,i=r.BufferedBlockAlgorithm,(p=e.enc).Utf8,s=p.Base64,a=e.algo.EvpKDF,u=r.Cipher=i.extend({cfg:o.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?f:h}return function(t){return{encrypt:function(r,o,n){return e(o).encrypt(t,r,o,n)},decrypt:function(r,o,n){return e(o).decrypt(t,r,o,n)}}}}()}),r.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),p=e.mode={},c=r.BlockCipherMode=o.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=p.CBC=function(){var e=c.extend();function t(e,t,r){var o,n=this._iv;n?(o=n,this._iv=void 0):o=this._prevBlock;for(var i=0;i<r;i++)e[t+i]^=o[i]}return e.Encryptor=e.extend({processBlock:function(e,r){var o=this._cipher,n=o.blockSize;t.call(this,e,r,n),o.encryptBlock(e,r),this._prevBlock=e.slice(r,r+n)}}),e.Decryptor=e.extend({processBlock:function(e,r){var o=this._cipher,n=o.blockSize,i=e.slice(r,r+n);o.decryptBlock(e,r),t.call(this,e,r,n),this._prevBlock=i}}),e}(),d=(e.pad={}).Pkcs7={pad:function(e,t){for(var r=(t=4*t)-e.sigBytes%t,o=r<<24|r<<16|r<<8|r,i=[],s=0;s<r;s+=4)i.push(o);t=n.create(i,r),e.concat(t)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},r.BlockCipher=u.extend({cfg:u.cfg.extend({mode:p,padding:d}),reset:function(){u.reset.call(this);var e,t=(r=this.cfg).iv,r=r.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,t&&t.words):(this._mode=e.call(r,this,t&&t.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),l=r.CipherParams=o.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),p=(e.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return(e=(e=e.salt)?n.create([1398893684,1701076831]).concat(e).concat(t):t).toString(s)},parse:function(e){var t,r=(e=s.parse(e)).words;return 1398893684==r[0]&&1701076831==r[1]&&(t=n.create(r.slice(2,4)),r.splice(0,4),e.sigBytes-=16),l.create({ciphertext:e,salt:t})}},h=r.SerializableCipher=o.extend({cfg:o.extend({format:p}),encrypt:function(e,t,r,o){o=this.cfg.extend(o);t=(n=e.createEncryptor(r,o)).finalize(t);var n=n.cfg;return l.create({ciphertext:t,key:r,iv:n.iv,algorithm:e,mode:n.mode,padding:n.padding,blockSize:e.blockSize,formatter:o.format})},decrypt:function(e,t,r,o){return o=this.cfg.extend(o),t=this._parse(t,o.format),e.createDecryptor(r,o).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),d=(e.kdf={}).OpenSSL={execute:function(e,t,r,o){return o=o||n.random(8),e=a.create({keySize:t+r}).compute(e,o),r=n.create(e.words.slice(t),4*r),e.sigBytes=4*t,l.create({key:e,iv:r,salt:o})}},f=r.PasswordBasedCipher=h.extend({cfg:h.cfg.extend({kdf:d}),encrypt:function(e,t,r,o){return r=(o=this.cfg.extend(o)).kdf.execute(r,e.keySize,e.ivSize),o.iv=r.iv,(e=h.encrypt.call(this,e,t,r.key,o)).mixIn(r),e},decrypt:function(e,t,r,o){return o=this.cfg.extend(o),t=this._parse(t,o.format),r=o.kdf.execute(r,e.keySize,e.ivSize,t.salt),o.iv=r.iv,h.decrypt.call(this,e,t,r.key,o)}}))))},function(e,t,r){"use strict";var o=t;function n(){o.util._configure(),o.Writer._configure(o.BufferWriter),o.Reader._configure(o.BufferReader)}o.build="minimal",o.Writer=r(12),o.BufferWriter=r(34),o.Reader=r(13),o.BufferReader=r(35),o.util=r(5),o.rpc=r(36),o.roots=r(38),o.configure=n,n()},function(e,t,r){"use strict";e.exports=function(e,t){for(var r=new Array(arguments.length-1),o=0,n=2,i=!0;n<arguments.length;)r[o++]=arguments[n++];return new Promise((function(n,s){r[o]=function(e){if(i)if(i=!1,e)s(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];n.apply(null,t)}};try{e.apply(t||null,r)}catch(e){i&&(i=!1,s(e))}}))}},function(e,t,r){"use strict";t.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;1<--t%4&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var o=new Array(64),n=new Array(123),i=0;i<64;)n[o[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;t.encode=function(e,t,r){for(var n,i=null,s=[],a=0,u=0;t<r;){var c=e[t++];switch(u){case 0:s[a++]=o[c>>2],n=(3&c)<<4,u=1;break;case 1:s[a++]=o[n|c>>4],n=(15&c)<<2,u=2;break;case 2:s[a++]=o[n|c>>6],s[a++]=o[63&c],u=0}8191<a&&((i=i||[]).push(String.fromCharCode.apply(String,s)),a=0)}return u&&(s[a++]=o[n],s[a++]=61,1===u&&(s[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var s="invalid encoding";t.decode=function(e,t,r){for(var o,i=r,a=0,u=0;u<e.length;){var c=e.charCodeAt(u++);if(61===c&&1<a)break;if(void 0===(c=n[c]))throw Error(s);switch(a){case 0:o=c,a=1;break;case 1:t[r++]=o<<2|(48&c)>>4,o=c,a=2;break;case 2:t[r++]=(15&o)<<4|(60&c)>>2,o=c,a=3;break;case 3:t[r++]=(3&o)<<6|c,a=0}}if(1===a)throw Error(s);return r-i},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},function(e,t,r){"use strict";function o(){this._listeners={}}(e.exports=o).prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},o.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],o=0;o<r.length;)r[o].fn===t?r.splice(o,1):++o;return this},o.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],o=1;o<arguments.length;)r.push(arguments[o++]);for(o=0;o<t.length;)t[o].fn.apply(t[o++].ctx,r)}return this}},function(e,t,r){"use strict";function o(e){function t(e,t,r,o){var n=t<0?1:0;0===(t=n?-t:t)?e(0<1/t?0:2147483648,r,o):isNaN(t)?e(2143289344,r,o):e(34028234663852886e22<t?(n<<31|2139095040)>>>0:t<11754943508222875e-54?(n<<31|Math.round(t/1401298464324817e-60))>>>0:(n<<31|(e=Math.floor(Math.log(t)/Math.LN2))+127<<23|8388607&Math.round(t*Math.pow(2,-e)*8388608))>>>0,r,o)}function r(e,t,r){return t=2*((e=e(t,r))>>31)+1,r=e>>>23&255,e&=8388607,255==r?e?NaN:1/0*t:0==r?1401298464324817e-60*t*e:t*Math.pow(2,r-150)*(8388608+e)}function o(e,t,r){p[0]=e,t[r]=h[0],t[r+1]=h[1],t[r+2]=h[2],t[r+3]=h[3]}function u(e,t,r){p[0]=e,t[r]=h[3],t[r+1]=h[2],t[r+2]=h[1],t[r+3]=h[0]}function c(e,t){return h[0]=e[t],h[1]=e[t+1],h[2]=e[t+2],h[3]=e[t+3],p[0]}function l(e,t){return h[3]=e[t],h[2]=e[t+1],h[1]=e[t+2],h[0]=e[t+3],p[0]}var p,h,d,f,g;function m(e,t,r,o,n,i){var s,a,u=o<0?1:0;0===(o=u?-o:o)?(e(0,n,i+t),e(0<1/o?0:2147483648,n,i+r)):isNaN(o)?(e(0,n,i+t),e(2146959360,n,i+r)):17976931348623157e292<o?(e(0,n,i+t),e((u<<31|2146435072)>>>0,n,i+r)):o<22250738585072014e-324?(e((s=o/5e-324)>>>0,n,i+t),e((u<<31|s/4294967296)>>>0,n,i+r)):(1024===(a=Math.floor(Math.log(o)/Math.LN2))&&(a=1023),e(4503599627370496*(s=o*Math.pow(2,-a))>>>0,n,i+t),e((u<<31|a+1023<<20|1048576*s&1048575)>>>0,n,i+r))}function _(e,t,r,o,n){return t=e(o,n+t),o=2*((e=e(o,n+r))>>31)+1,r=4294967296*(1048575&e)+t,2047==(n=e>>>20&2047)?r?NaN:1/0*o:0==n?5e-324*o*r:o*Math.pow(2,n-1075)*(r+4503599627370496)}function y(e,t,r){d[0]=e,t[r]=f[0],t[r+1]=f[1],t[r+2]=f[2],t[r+3]=f[3],t[r+4]=f[4],t[r+5]=f[5],t[r+6]=f[6],t[r+7]=f[7]}function b(e,t,r){d[0]=e,t[r]=f[7],t[r+1]=f[6],t[r+2]=f[5],t[r+3]=f[4],t[r+4]=f[3],t[r+5]=f[2],t[r+6]=f[1],t[r+7]=f[0]}function v(e,t){return f[0]=e[t],f[1]=e[t+1],f[2]=e[t+2],f[3]=e[t+3],f[4]=e[t+4],f[5]=e[t+5],f[6]=e[t+6],f[7]=e[t+7],d[0]}function w(e,t){return f[7]=e[t],f[6]=e[t+1],f[5]=e[t+2],f[4]=e[t+3],f[3]=e[t+4],f[2]=e[t+5],f[1]=e[t+6],f[0]=e[t+7],d[0]}return"undefined"!=typeof Float32Array?(p=new Float32Array([-0]),g=128===(h=new Uint8Array(p.buffer))[3],e.writeFloatLE=g?o:u,e.writeFloatBE=g?u:o,e.readFloatLE=g?c:l,e.readFloatBE=g?l:c):(e.writeFloatLE=t.bind(null,n),e.writeFloatBE=t.bind(null,i),e.readFloatLE=r.bind(null,s),e.readFloatBE=r.bind(null,a)),"undefined"!=typeof Float64Array?(d=new Float64Array([-0]),g=128===(f=new Uint8Array(d.buffer))[7],e.writeDoubleLE=g?y:b,e.writeDoubleBE=g?b:y,e.readDoubleLE=g?v:w,e.readDoubleBE=g?w:v):(e.writeDoubleLE=m.bind(null,n,0,4),e.writeDoubleBE=m.bind(null,i,4,0),e.readDoubleLE=_.bind(null,s,0,4),e.readDoubleBE=_.bind(null,a,4,0)),e}function n(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function i(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function s(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=o(o)},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(e,t,r){"use strict";t.length=function(e){for(var t,r=0,o=0;o<e.length;++o)(t=e.charCodeAt(o))<128?r+=1:t<2048?r+=2:55296==(64512&t)&&56320==(64512&e.charCodeAt(o+1))?(++o,r+=4):r+=3;return r},t.read=function(e,t,r){if(r-t<1)return"";for(var o,n=null,i=[],s=0;t<r;)(o=e[t++])<128?i[s++]=o:191<o&&o<224?i[s++]=(31&o)<<6|63&e[t++]:239<o&&o<365?(o=((7&o)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[s++]=55296+(o>>10),i[s++]=56320+(1023&o)):i[s++]=(15&o)<<12|(63&e[t++])<<6|63&e[t++],8191<s&&((n=n||[]).push(String.fromCharCode.apply(String,i)),s=0);return n?(s&&n.push(String.fromCharCode.apply(String,i.slice(0,s))),n.join("")):String.fromCharCode.apply(String,i.slice(0,s))},t.write=function(e,t,r){for(var o,n,i=r,s=0;s<e.length;++s)(o=e.charCodeAt(s))<128?t[r++]=o:(o<2048?t[r++]=o>>6|192:(55296==(64512&o)&&56320==(64512&(n=e.charCodeAt(s+1)))?(++s,t[r++]=(o=65536+((1023&o)<<10)+(1023&n))>>18|240,t[r++]=o>>12&63|128):t[r++]=o>>12|224,t[r++]=o>>6&63|128),t[r++]=63&o|128);return r-i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var o=r||8192,n=o>>>1,i=null,s=o;return function(r){return r<1||n<r?e(r):(o<s+r&&(i=e(o),s=0),r=t.call(i,s,s+=r),7&s&&(s=1+(7|s)),r)}}},function(e,t,r){"use strict";e.exports=n;var o=r(5);function n(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=n.zero=new n(0,0),s=(i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1},n.zeroHash="\0\0\0\0\0\0\0\0",n.fromNumber=function(e){if(0===e)return i;var t=e<0,r=(e=t?-e:e)>>>0;e=(e-r)/4294967296>>>0;return t&&(e=~e>>>0,r=~r>>>0,4294967295<++r&&(r=0,4294967295<++e&&(e=0))),new n(r,e)},n.from=function(e){if("number"==typeof e)return n.fromNumber(e);if(o.isString(e)){if(!o.Long)return n.fromNumber(parseInt(e,10));e=o.Long.fromString(e)}return e.low||e.high?new n(e.low>>>0,e.high>>>0):i},n.prototype.toNumber=function(e){var t;return!e&&this.hi>>>31?(e=1+~this.lo>>>0,t=~this.hi>>>0,-(e+4294967296*(t=e?t:t+1>>>0))):this.lo+4294967296*this.hi},n.prototype.toLong=function(e){return o.Long?new o.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}},String.prototype.charCodeAt);n.fromHash=function(e){return"\0\0\0\0\0\0\0\0"===e?i:new n((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},n.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},n.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0==r?0==t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},function(e,t,r){"use strict";e.exports=i;var o=r(12),n=((i.prototype=Object.create(o.prototype)).constructor=i,r(5));function i(){o.call(this)}function s(e,t,r){e.length<40?n.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}i._configure=function(){i.alloc=n._Buffer_allocUnsafe,i.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var o=0;o<e.length;)t[r++]=e[o++]}},i.prototype.bytes=function(e){var t=(e=n.isString(e)?n._Buffer_from(e,"base64"):e).length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=n.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},i._configure()},function(e,t,r){"use strict";e.exports=i;var o=r(13),n=((i.prototype=Object.create(o.prototype)).constructor=i,r(5));function i(e){o.call(this,e)}i._configure=function(){n.Buffer&&(i.prototype._slice=n.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},function(e,t,r){"use strict";t.Service=r(37)},function(e,t,r){"use strict";e.exports=n;var o=r(5);function n(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");o.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}((n.prototype=Object.create(o.EventEmitter.prototype)).constructor=n).prototype.rpcCall=function e(t,r,n,i,s){if(!i)throw TypeError("request must be specified");var a=this;if(!s)return o.asPromise(e,a,t,r,n,i);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,r){if(e)return a.emit("error",e,t),s(e);if(null!==r){if(!(r instanceof n))try{r=n[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",r,t),s(null,r)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){s(e)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},n.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,r){"use strict";e.exports={}},function(e,t,r){(function(t,r,o,n){e.exports=function e(t,r,o){function n(s,a){if(!r[s]){if(!t[s]){if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}u=r[s]={exports:{}},t[s][0].call(u.exports,(function(e){return n(t[s][1][e]||e)}),u,u.exports,e,t,r,o)}return r[s].exports}for(var i=!1,s=0;s<o.length;s++)n(o[s]);return n}({1:[function(e,t,r){"use strict";var o=e("./utils"),n=e("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(e){for(var t,r,n,s,a,u,c=[],l=0,p=e.length,h="string"!==o.getTypeOf(e);l<e.length;)u=p-l,n=h?(t=e[l++],r=l<p?e[l++]:0,l<p?e[l++]:0):(t=e.charCodeAt(l++),r=l<p?e.charCodeAt(l++):0,l<p?e.charCodeAt(l++):0),s=(3&t)<<4|r>>4,a=1<u?(15&r)<<2|n>>6:64,u=2<u?63&n:64,c.push(i.charAt(t>>2)+i.charAt(s)+i.charAt(a)+i.charAt(u));return c.join("")},r.decode=function(e){var t,r,o,s,a,u=0,c=0;if("data:"===e.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var l,p=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===i.charAt(64)&&p--,e.charAt(e.length-2)===i.charAt(64)&&p--,p%1!=0)throw new Error("Invalid base64 input, bad content length.");for(l=new(n.uint8array?Uint8Array:Array)(0|p);u<e.length;)t=i.indexOf(e.charAt(u++))<<2|(s=i.indexOf(e.charAt(u++)))>>4,r=(15&s)<<4|(s=i.indexOf(e.charAt(u++)))>>2,o=(3&s)<<6|(a=i.indexOf(e.charAt(u++))),l[c++]=t,64!==s&&(l[c++]=r),64!==a&&(l[c++]=o);return l}},{"./support":30,"./utils":32}],2:[function(e,t,r){"use strict";var o=e("./external"),n=e("./stream/DataWorker"),i=e("./stream/Crc32Probe"),s=e("./stream/DataLengthProbe");function a(e,t,r,o,n){this.compressedSize=e,this.uncompressedSize=t,this.crc32=r,this.compression=o,this.compressedContent=n}a.prototype={getContentWorker:function(){var e=new n(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new n(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(e,t,r){return e.pipe(new i).pipe(new s("uncompressedSize")).pipe(t.compressWorker(r)).pipe(new s("compressedSize")).withStreamInfo("compression",t)},t.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,r){"use strict";var o=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(e){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,r){"use strict";var o=e("./utils"),n=function(){for(var e=[],t=0;t<256;t++){for(var r=t,o=0;o<8;o++)r=1&r?3988292384^r>>>1:r>>>1;e[t]=r}return e}();t.exports=function(e,t){return void 0!==e&&e.length?("string"!==o.getTypeOf(e)?function(e,t,r){var o=n,i=0+r;e^=-1;for(var s=0;s<i;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}:function(e,t,r){var o=n,i=0+r;e^=-1;for(var s=0;s<i;s++)e=e>>>8^o[255&(e^t.charCodeAt(s))];return-1^e})(0|t,e,e.length):0}},{"./utils":32}],5:[function(e,t,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,t,r){"use strict";e="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:e}},{lie:37}],7:[function(e,t,r){"use strict";var o="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,n=e("pako"),i=e("./utils"),s=e("./stream/GenericWorker"),a=o?"uint8array":"array";function u(e,t){s.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}r.magic="\b\0",i.inherits(u,s),u.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(i.transformTo(a,e.data),!1)},u.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new n[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},r.compressWorker=function(e){return new u("Deflate",e)},r.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,r){"use strict";function o(e,t){for(var r="",o=0;o<t;o++)r+=String.fromCharCode(255&e),e>>>=8;return r}function n(e,t,r,n,s,l){var p=e.file,h=e.compression,d=l!==a.utf8encode,f=i.transformTo("string",l(p.name)),g=i.transformTo("string",a.utf8encode(p.name)),m=p.comment,_=(l=i.transformTo("string",l(m)),i.transformTo("string",a.utf8encode(m))),y=g.length!==p.name.length,b=(m=_.length!==m.length,""),v=p.dir,w=p.date,k={crc32:0,compressedSize:0,uncompressedSize:0};t&&!r||(k.crc32=e.crc32,k.compressedSize=e.compressedSize,k.uncompressedSize=e.uncompressedSize),r=0,t&&(r|=8),d||!y&&!m||(r|=2048),e=0,t=0,v&&(e|=16),"UNIX"===s?(t=798,e|=(65535&((d=p.unixPermissions)?d:v?16893:33204))<<16):(t=20,e|=63&(p.dosPermissions||0)),s=w.getUTCHours(),s=(s=((s<<=6)|w.getUTCMinutes())<<5)|w.getUTCSeconds()/2,d=w.getUTCFullYear()-1980,d=(d=((d<<=4)|w.getUTCMonth()+1)<<5)|w.getUTCDate(),y&&(v=o(1,1)+o(u(f),4)+g,b+="up"+o(v.length,2)+v),m&&(p=o(1,1)+o(u(l),4)+_,b+="uc"+o(p.length,2)+p),w="",w=(w=(w=(w=(w=(w=(w=(w=(w=(w+="\n\0")+o(r,2))+h.magic)+o(s,2))+o(d,2))+o(k.crc32,4))+o(k.compressedSize,4))+o(k.uncompressedSize,4))+o(f.length,2))+o(b.length,2);return{fileRecord:c.LOCAL_FILE_HEADER+w+f+b,dirRecord:c.CENTRAL_FILE_HEADER+o(t,2)+w+o(l.length,2)+"\0\0\0\0"+o(e,4)+o(n,4)+f+b+l}}var i=e("../utils"),s=e("../stream/GenericWorker"),a=e("../utf8"),u=e("../crc32"),c=e("../signature");function l(e,t,r,o){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=r,this.encodeFileName=o,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(l,s),l.prototype.push=function(e){var t=e.meta.percent||0,r=this.entriesCount,o=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,s.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:r?(t+100*(r-o-1))/r:100}}))},l.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;t?(e=n(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName),this.push({data:e.fileRecord,meta:{percent:0}})):this.accumulate=!0},l.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,r=n(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),t)this.push({data:(t=e,c.DATA_DESCRIPTOR+o(t.crc32,4)+o(t.compressedSize,4)+o(t.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},l.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var r=this.bytesWritten-e;r=function(e,t,r,n,s){return s=i.transformTo("string",s(n)),c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(e,2)+o(e,2)+o(t,4)+o(r,4)+o(s.length,2)+s}(this.dirRecords.length,r,e,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})},l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},l.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},l.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},l.prototype.error=function(e){var t=this._sources;if(!s.prototype.error.call(this,e))return!1;for(var r=0;r<t.length;r++)try{t[r].error(e)}catch(e){}return!0},l.prototype.lock=function(){s.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=l},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,r){"use strict";var o=e("../compressions"),n=e("./ZipFileWorker");r.generateWorker=function(e,t,r){var i=new n(t.streamFiles,r,t.platform,t.encodeFileName),s=0;try{e.forEach((function(e,r){s++;var n=function(e,t){if(t=o[e=e||t])return t;throw new Error(e+" is not a valid compression method !")}(r.options.compression,t.compression),a=r.options.compressionOptions||t.compressionOptions||{},u=r.dir,c=r.date;r._compressWorker(n,a).withStreamInfo("file",{name:e,dir:u,date:c,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(i)})),i.entriesCount=s}catch(e){i.error(e)}return i}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,r){"use strict";function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e,t=new o;for(e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}(o.prototype=e("./object")).loadAsync=e("./load"),o.support=e("./support"),o.defaults=e("./defaults"),o.version="3.10.0",o.loadAsync=function(e,t){return(new o).loadAsync(e,t)},o.external=e("./external"),t.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,r){"use strict";var o=e("./utils"),n=e("./external"),i=e("./utf8"),s=e("./zipEntries"),a=e("./stream/Crc32Probe"),u=e("./nodejsUtils");t.exports=function(e,t){var r=this;return t=o.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),u.isNode&&u.isStream(e)?n.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var r=new s(t);return r.load(e),r})).then((function(e){var r=[n.Promise.resolve(e)],o=e.files;if(t.checkCRC32)for(var i=0;i<o.length;i++)r.push(function(e){return new n.Promise((function(t,r){var o=e.decompressed.getContentWorker().pipe(new a);o.on("error",(function(e){r(e)})).on("end",(function(){o.streamInfo.crc32!==e.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}(o[i]));return n.Promise.all(r)})).then((function(e){for(var n=(e=e.shift()).files,i=0;i<n.length;i++){var s=n[i],a=s.fileNameStr,u=o.resolve(s.fileNameStr);r.file(u,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:t.createFolders}),s.dir||(r.file(u).unsafeOriginalName=a)}return e.zipComment.length&&(r.comment=e.zipComment),r}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,r){"use strict";var o=e("../utils"),n=e("../stream/GenericWorker");function i(e,t){n.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}o.inherits(i,n),i.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},i.prototype.pause=function(){return!!n.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,r){"use strict";var o=e("readable-stream").Readable;function n(e,t,r){o.call(this,t),this._helper=e;var n=this;e.on("data",(function(e,t){n.push(e)||n._helper.pause(),r&&r(t)})).on("error",(function(e){n.emit("error",e)})).on("end",(function(){n.push(null)}))}e("../utils").inherits(n,o),n.prototype._read=function(){this._helper.resume()},t.exports=n},{"../utils":32,"readable-stream":16}],14:[function(e,r,o){"use strict";r.exports={isNode:void 0!==t,newBufferFrom:function(e,r){if(t.from&&t.from!==Uint8Array.from)return t.from(e,r);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new t(e,r)},allocBuffer:function(e){return t.alloc?t.alloc(e):((e=new t(e)).fill(0),e)},isBuffer:function(e){return t.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,r){"use strict";function o(e,t,r){var o=s.getTypeOf(t),i=s.extend(r||{},c),u=(i.date=i.date||new Date,null!==i.compression&&(i.compression=i.compression.toUpperCase()),"string"==typeof i.unixPermissions&&(i.unixPermissions=parseInt(i.unixPermissions,8)),i.unixPermissions&&16384&i.unixPermissions&&(i.dir=!0),i.dosPermissions&&16&i.dosPermissions&&(i.dir=!0),i.dir&&(e=g(e)),i.createFolders&&(u=function(e){var t=(e="/"===e.slice(-1)?e.substring(0,e.length-1):e).lastIndexOf("/");return 0<t?e.substring(0,t):""}(e))&&n.call(this,u,!0),"string"===o&&!1===i.binary&&!1===i.base64);r&&void 0!==r.binary||(i.binary=!u),(t instanceof l&&0===t.uncompressedSize||i.dir||!t||0===t.length)&&(i.base64=!1,i.binary=!0,t="",i.compression="STORE"),o=t instanceof l||t instanceof a?t:d.isNode&&d.isStream(t)?new f(e,t):s.prepareContent(e,t,i.binary,i.optimizedBinaryString,i.base64),r=new p(e,o,i);this.files[e]=r}function n(e,t){return t=void 0!==t?t:c.createFolders,e=g(e),this.files[e]||o.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]}var i=e("./utf8"),s=e("./utils"),a=e("./stream/GenericWorker"),u=e("./stream/StreamHelper"),c=e("./defaults"),l=e("./compressedObject"),p=e("./zipObject"),h=e("./generate"),d=e("./nodejsUtils"),f=e("./nodejs/NodejsStreamInputAdapter"),g=function(e){return"/"!==e.slice(-1)&&(e+="/"),e};function m(e){return"[object RegExp]"===Object.prototype.toString.call(e)}t.exports={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,r,o;for(t in this.files)o=this.files[t],(r=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(r,o)},filter:function(e){var t=[];return this.forEach((function(r,o){e(r,o)&&t.push(o)})),t},file:function(e,t,r){return 1!==arguments.length?(e=this.root+e,o.call(this,e,t,r),this):m(e)?(n=e,this.filter((function(e,t){return!t.dir&&n.test(e)}))):(t=this.files[this.root+e])&&!t.dir?t:null;var n},folder:function(e){if(!e)return this;if(m(e))return this.filter((function(t,r){return r.dir&&e.test(t)}));var t=this.root+e,r=(t=n.call(this,t),this.clone());return r.root=t.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var r=this.filter((function(t,r){return r.name.slice(0,e.length)===e})),o=0;o<r.length;o++)delete this.files[r[o].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t={};try{if((t=s.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=t.type.toLowerCase(),t.compression=t.compression.toUpperCase(),"binarystring"===t.type&&(t.type="string"),!t.type)throw new Error("No output type specified.");s.checkSupport(t.type),"darwin"!==t.platform&&"freebsd"!==t.platform&&"linux"!==t.platform&&"sunos"!==t.platform||(t.platform="UNIX"),"win32"===t.platform&&(t.platform="DOS");var r=t.comment||this.comment||"",o=h.generateWorker(this,t,r)}catch(e){(o=new a("error")).error(e)}return new u(o,t.type||"string",t.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}}},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,r){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,r){"use strict";var o=e("./DataReader");function n(e){o.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(n,o),n.prototype.byteAt=function(e){return this.data[this.zero+e]},n.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),o=e.charCodeAt(2),n=e.charCodeAt(3),i=this.length-4;0<=i;--i)if(this.data[i]===t&&this.data[i+1]===r&&this.data[i+2]===o&&this.data[i+3]===n)return i-this.zero;return-1},n.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),o=e.charCodeAt(2),n=(e=e.charCodeAt(3),this.readData(4));return t===n[0]&&r===n[1]&&o===n[2]&&e===n[3]},n.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"../utils":32,"./DataReader":18}],18:[function(e,t,r){"use strict";var o=e("../utils");function n(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}n.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,r=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return o.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=n},{"../utils":32}],19:[function(e,t,r){"use strict";var o=e("./Uint8ArrayReader");function n(e){o.call(this,e)}e("../utils").inherits(n,o),n.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,r){"use strict";var o=e("./DataReader");function n(e){o.call(this,e)}e("../utils").inherits(n,o),n.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},n.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},n.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},n.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"../utils":32,"./DataReader":18}],21:[function(e,t,r){"use strict";var o=e("./ArrayReader");function n(e){o.call(this,e)}e("../utils").inherits(n,o),n.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,r){"use strict";var o=e("../utils"),n=e("../support"),i=e("./ArrayReader"),s=e("./StringReader"),a=e("./NodeBufferReader"),u=e("./Uint8ArrayReader");t.exports=function(e){var t=o.getTypeOf(e);return o.checkSupport(t),"string"!==t||n.uint8array?"nodebuffer"===t?new a(e):n.uint8array?new u(o.transformTo("uint8array",e)):new i(o.transformTo("array",e)):new s(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,r){"use strict";var o=e("./GenericWorker"),n=e("../utils");function i(e){o.call(this,"ConvertWorker to "+e),this.destType=e}n.inherits(i,o),i.prototype.processChunk=function(e){this.push({data:n.transformTo(this.destType,e.data),meta:e.meta})},t.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,r){"use strict";var o=e("./GenericWorker"),n=e("../crc32");function i(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(i,o),i.prototype.processChunk=function(e){this.streamInfo.crc32=n(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,r){"use strict";var o=e("../utils"),n=e("./GenericWorker");function i(e){n.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}o.inherits(i,n),i.prototype.processChunk=function(e){var t;e&&(t=this.streamInfo[this.propName]||0,this.streamInfo[this.propName]=t+e.data.length),n.prototype.processChunk.call(this,e)},t.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,r){"use strict";var o=e("../utils"),n=e("./GenericWorker");function i(e){n.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=o.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}o.inherits(i,n),i.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,r){"use strict";function o(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var r=0;r<this._listeners[e].length;r++)this._listeners[e][r].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=o},{}],29:[function(e,r,o){"use strict";var n=e("../utils"),i=e("./ConvertWorker"),s=e("./GenericWorker"),a=e("../base64"),u=e("../support"),c=e("../external"),l=null;if(u.nodestream)try{l=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function p(e,t,r){var o=t;switch(t){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=t,this._mimeType=r,n.checkSupport(o),this._worker=e.pipe(new i(o)),e.lock()}catch(e){this._worker=new s("error"),this._worker.error(e)}}p.prototype={accumulate:function(e){return r=this,o=e,new c.Promise((function(e,i){var s=[],u=r._internalType,c=r._outputType,l=r._mimeType;r.on("data",(function(e,t){s.push(e),o&&o(t)})).on("error",(function(e){s=[],i(e)})).on("end",(function(){try{var r=function(e,t,r){switch(e){case"blob":return n.newBlob(n.transformTo("arraybuffer",t),r);case"base64":return a.encode(t);default:return n.transformTo(e,t)}}(c,function(e,r){for(var o=0,n=null,i=0,s=0;s<r.length;s++)i+=r[s].length;switch(e){case"string":return r.join("");case"array":return Array.prototype.concat.apply([],r);case"uint8array":for(n=new Uint8Array(i),s=0;s<r.length;s++)n.set(r[s],o),o+=r[s].length;return n;case"nodebuffer":return t.concat(r);default:throw new Error("concat : unsupported type '"+e+"'")}}(u,s),l);e(r)}catch(r){i(r)}s=[]})).resume()}));var r,o},on:function(e,t){var r=this;return"data"===e?this._worker.on(e,(function(e){t.call(r,e.data,e.meta)})):this._worker.on(e,(function(){n.delay(t,arguments,r)})),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:"nodebuffer"!==this._outputType},e)}},r.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,r,o){"use strict";if(o.base64=!0,o.array=!0,o.string=!0,o.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,o.nodebuffer=void 0!==t,o.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)o.blob=!1;else{var n=new ArrayBuffer(0);try{o.blob=0===new Blob([n],{type:"application/zip"}).size}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(n),o.blob=0===i.getBlob("application/zip").size}catch(e){o.blob=!1}}}try{o.nodestream=!!e("readable-stream").Readable}catch(e){o.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,r){"use strict";for(var o=e("./utils"),n=e("./support"),i=e("./nodejsUtils"),s=e("./stream/GenericWorker"),a=new Array(256),u=0;u<256;u++)a[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function c(){s.call(this,"utf-8 decode"),this.leftOver=null}function l(){s.call(this,"utf-8 encode")}a[254]=a[254]=1,r.utf8encode=function(e){if(n.nodebuffer)return i.newBufferFrom(e,"utf-8");for(var t,r,o,s,a=e,u=a.length,c=0,l=0;l<u;l++)55296==(64512&(r=a.charCodeAt(l)))&&l+1<u&&56320==(64512&(o=a.charCodeAt(l+1)))&&(r=65536+(r-55296<<10)+(o-56320),l++),c+=r<128?1:r<2048?2:r<65536?3:4;for(t=new(n.uint8array?Uint8Array:Array)(c),l=s=0;s<c;l++)55296==(64512&(r=a.charCodeAt(l)))&&l+1<u&&56320==(64512&(o=a.charCodeAt(l+1)))&&(r=65536+(r-55296<<10)+(o-56320),l++),r<128?t[s++]=r:(r<2048?t[s++]=192|r>>>6:(r<65536?t[s++]=224|r>>>12:(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63),t[s++]=128|r>>>6&63),t[s++]=128|63&r);return t},r.utf8decode=function(e){if(n.nodebuffer)return o.transformTo("nodebuffer",e).toString("utf-8");for(var t,r,i,s=e=o.transformTo(n.uint8array?"uint8array":"array",e),u=s.length,c=new Array(2*u),l=t=0;l<u;)if((r=s[l++])<128)c[t++]=r;else if(4<(i=a[r]))c[t++]=65533,l+=i-1;else{for(r&=2===i?31:3===i?15:7;1<i&&l<u;)r=r<<6|63&s[l++],i--;1<i?c[t++]=65533:r<65536?c[t++]=r:(r-=65536,c[t++]=55296|r>>10&1023,c[t++]=56320|1023&r)}return c.length!==t&&(c.subarray?c=c.subarray(0,t):c.length=t),o.applyFromCharCode(c)},o.inherits(c,s),c.prototype.processChunk=function(e){var t=o.transformTo(n.uint8array?"uint8array":"array",e.data),i=(this.leftOver&&this.leftOver.length&&(n.uint8array?(i=t,(t=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),t.set(i,this.leftOver.length)):t=this.leftOver.concat(t),this.leftOver=null),function(e,t){for(var r=(t=(t=t||e.length)>e.length?e.length:t)-1;0<=r&&128==(192&e[r]);)r--;return!(r<0)&&0!==r&&r+a[e[r]]>t?r:t}(t)),s=t;i!==t.length&&(n.uint8array?(s=t.subarray(0,i),this.leftOver=t.subarray(i,t.length)):(s=t.slice(0,i),this.leftOver=t.slice(i,t.length))),this.push({data:r.utf8decode(s),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=c,o.inherits(l,s),l.prototype.processChunk=function(e){this.push({data:r.utf8encode(e.data),meta:e.meta})},r.Utf8EncodeWorker=l},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,o){"use strict";var n=e("./support"),i=e("./base64"),s=e("./nodejsUtils"),a=e("./external");function u(e){return e}function c(e,t){for(var r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);return t}e("setimmediate"),o.newBlob=function(e,t){o.checkSupport("blob");try{return new Blob([e],{type:t})}catch(o){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var l={stringifyByChunk:function(e,t,r){var o=[],n=0,i=e.length;if(i<=r)return String.fromCharCode.apply(null,e);for(;n<i;)"array"===t||"nodebuffer"===t?o.push(String.fromCharCode.apply(null,e.slice(n,Math.min(n+r,i)))):o.push(String.fromCharCode.apply(null,e.subarray(n,Math.min(n+r,i)))),n+=r;return o.join("")},stringifyByChar:function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,s.allocBuffer(1)).length}catch(e){return!1}}()}};function p(e){var t=65536,r=o.getTypeOf(e),n=!0;if("uint8array"===r?n=l.applyCanBeUsed.uint8array:"nodebuffer"===r&&(n=l.applyCanBeUsed.nodebuffer),n)for(;1<t;)try{return l.stringifyByChunk(e,r,t)}catch(e){t=Math.floor(t/2)}return l.stringifyByChar(e)}function h(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}o.applyFromCharCode=p;var d={};d.string={string:u,array:function(e){return c(e,new Array(e.length))},arraybuffer:function(e){return d.string.uint8array(e).buffer},uint8array:function(e){return c(e,new Uint8Array(e.length))},nodebuffer:function(e){return c(e,s.allocBuffer(e.length))}},d.array={string:p,array:u,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return s.newBufferFrom(e)}},d.arraybuffer={string:function(e){return p(new Uint8Array(e))},array:function(e){return h(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:u,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return s.newBufferFrom(new Uint8Array(e))}},d.uint8array={string:p,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:u,nodebuffer:function(e){return s.newBufferFrom(e)}},d.nodebuffer={string:p,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return d.nodebuffer.uint8array(e).buffer},uint8array:function(e){return h(e,new Uint8Array(e.length))},nodebuffer:u},o.transformTo=function(e,t){if(t=t||"",!e)return t;o.checkSupport(e);var r=o.getTypeOf(t);return d[r][e](t)},o.resolve=function(e){for(var t=e.split("/"),r=[],o=0;o<t.length;o++){var n=t[o];"."===n||""===n&&0!==o&&o!==t.length-1||(".."===n?r.pop():r.push(n))}return r.join("/")},o.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":n.nodebuffer&&s.isBuffer(e)?"nodebuffer":n.uint8array&&e instanceof Uint8Array?"uint8array":n.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},o.checkSupport=function(e){if(!n[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},o.MAX_VALUE_16BITS=65535,o.MAX_VALUE_32BITS=-1,o.pretty=function(e){for(var t,r="",o=0;o<(e||"").length;o++)r+="\\x"+((t=e.charCodeAt(o))<16?"0":"")+t.toString(16).toUpperCase();return r},o.delay=function(e,t,o){r((function(){e.apply(o||null,t||[])}))},o.inherits=function(e,t){function r(){}r.prototype=t.prototype,e.prototype=new r},o.extend=function(){for(var e,t={},r=0;r<arguments.length;r++)for(e in arguments[r])arguments[r].hasOwnProperty(e)&&void 0===t[e]&&(t[e]=arguments[r][e]);return t},o.prepareContent=function(e,t,r,s,u){return a.Promise.resolve(t).then((function(e){return n.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new a.Promise((function(t,r){var o=new FileReader;o.onload=function(e){t(e.target.result)},o.onerror=function(e){r(e.target.error)},o.readAsArrayBuffer(e)})):e})).then((function(t){var l=o.getTypeOf(t);return l?("arraybuffer"===l?t=o.transformTo("uint8array",t):"string"===l&&(u?t=i.decode(t):r&&!0!==s&&(t=c(l=t,new(n.uint8array?Uint8Array:Array)(l.length)))),t):a.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,r){"use strict";var o=e("./reader/readerFor"),n=e("./utils"),i=e("./signature"),s=e("./zipEntry"),a=(e("./utf8"),e("./support"));function u(e){this.files=[],this.loadOptions=e}u.prototype={checkSignature:function(e){var t;if(!this.reader.readAndCheckSignature(e))throw this.reader.index-=4,t=this.reader.readString(4),new Error("Corrupted zip or bug: unexpected signature ("+n.pretty(t)+", expected "+n.pretty(e)+")")},isSignature:function(e,t){var r=this.reader.index;this.reader.setIndex(e),e=this.reader.readString(4)===t;return this.reader.setIndex(r),e},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=a.uint8array?"uint8array":"array";t=n.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(t)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,r,o=this.zip64EndOfCentralSize-44;0<o;)e=this.reader.readInt(2),t=this.reader.readInt(4),r=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){for(var e,t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(e=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===n.MAX_VALUE_16BITS||this.diskWithCentralDirStart===n.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===n.MAX_VALUE_16BITS||this.centralDirRecords===n.MAX_VALUE_16BITS||this.centralDirSize===n.MAX_VALUE_32BITS||this.centralDirOffset===n.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}if(e=this.centralDirOffset+this.centralDirSize,0<(e=t-(e=this.zip64?e+20+(12+this.zip64EndOfCentralSize):e)))this.isSignature(t,i.CENTRAL_FILE_HEADER)||(this.reader.zero=e);else if(e<0)throw new Error("Corrupted zip: missing "+Math.abs(e)+" bytes.")},prepareReader:function(e){this.reader=o(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(e,t,r){"use strict";var o=e("./reader/readerFor"),n=e("./utils"),i=e("./compressedObject"),s=e("./crc32"),a=e("./utf8"),u=e("./compressions"),c=e("./support");function l(e,t){this.options=e,this.loadOptions=t}l.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t;if(e.skip(22),this.fileNameLength=e.readInt(2),t=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(t),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in u)if(u.hasOwnProperty(t)&&u[t].magic===e)return u[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+n.pretty(this.compressionMethod)+" unknown (inner file : "+n.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){var t;this.extraFields[1]&&(t=o(this.extraFields[1].value),this.uncompressedSize===n.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===n.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===n.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===n.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4)))},readExtraFields:function(e){var t,r,o,n=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<n;)t=e.readInt(2),r=e.readInt(2),o=e.readData(r),this.extraFields[t]={id:t,length:r,value:o};e.setIndex(n)},handleUTF8:function(){var e,t=c.uint8array?"uint8array":"array";this.useUTF8()?(this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment)):(null!==(e=this.findExtraFieldUnicodePath())?this.fileNameStr=e:(e=n.transformTo(t,this.fileName),this.fileNameStr=this.loadOptions.decodeFileName(e)),null!==(e=this.findExtraFieldUnicodeComment())?this.fileCommentStr=e:(e=n.transformTo(t,this.fileComment),this.fileCommentStr=this.loadOptions.decodeFileName(e)))},findExtraFieldUnicodePath:function(){var e,t=this.extraFields[28789];return t&&1===(e=o(t.value)).readInt(1)&&s(this.fileName)===e.readInt(4)?a.utf8decode(e.readData(t.length-5)):null},findExtraFieldUnicodeComment:function(){var e,t=this.extraFields[25461];return t&&1===(e=o(t.value)).readInt(1)&&s(this.fileComment)===e.readInt(4)?a.utf8decode(e.readData(t.length-5)):null}},t.exports=l},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,r){"use strict";function o(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=t,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}}var n=e("./stream/StreamHelper"),i=e("./stream/DataWorker"),s=e("./utf8"),a=e("./compressedObject"),u=e("./stream/GenericWorker");o.prototype={internalStream:function(e){var t=null,r="string";try{if(!e)throw new Error("No output type specified.");var o="string"===(r=e.toLowerCase())||"text"===r,i=("binarystring"!==r&&"text"!==r||(r="string"),t=this._decompressWorker(),!this._dataBinary);i&&!o&&(t=t.pipe(new s.Utf8EncodeWorker)),!i&&o&&(t=t.pipe(new s.Utf8DecodeWorker))}catch(e){(t=new u("error")).error(e)}return new n(t,r,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof a&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new s.Utf8EncodeWorker)),a.createWorkerFrom(r,e,t)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof u?this._data:new i(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<c.length;p++)o.prototype[c[p]]=l;t.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,r){(function(e){"use strict";var r,o,n,i,s=e.MutationObserver||e.WebKitMutationObserver,a=s?(o=0,s=new s(c),n=e.document.createTextNode(""),s.observe(n,{characterData:!0}),function(){n.data=o=++o%2}):e.setImmediate||void 0===e.MessageChannel?"document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){c(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(c,0)}:((i=new e.MessageChannel).port1.onmessage=c,function(){i.port2.postMessage(0)}),u=[];function c(){var e,t;r=!0;for(var o=u.length;o;){for(t=u,u=[],e=-1;++e<o;)t[e]();o=u.length}r=!1}t.exports=function(e){1!==u.push(e)||r||a()}}).call(this,void 0!==o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,r){"use strict";var o=e("immediate");function n(){}var i={},s=["REJECTED"],a=["FULFILLED"],u=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,e!==n&&d(this,e)}function l(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function p(e,t,r){o((function(){var o;try{o=t(r)}catch(o){return i.reject(e,o)}o===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,o)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function d(e,t){var r=!1;function o(t){r||(r=!0,i.reject(e,t))}function n(t){r||(r=!0,i.resolve(e,t))}var s=f((function(){t(n,o)}));"error"===s.status&&o(s.value)}function f(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}(t.exports=c).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(r){return t.resolve(e()).then((function(){return r}))}),(function(r){return t.resolve(e()).then((function(){throw r}))}))},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===s)return this;var r=new this.constructor(n);return this.state!==u?p(r,this.state===a?e:t,this.outcome):this.queue.push(new l(r,e,t)),r},l.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){p(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){i.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){p(this.promise,this.onRejected,e)},i.resolve=function(e,t){var r=f(h,t);if("error"===r.status)return i.reject(e,r.value);if(r=r.value)d(e,r);else{e.state=a,e.outcome=t;for(var o=-1,n=e.queue.length;++o<n;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=s,e.outcome=t;for(var r=-1,o=e.queue.length;++r<o;)e.queue[r].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:i.resolve(new this(n),e)},c.reject=function(e){var t=new this(n);return i.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,o=!1;if(!r)return this.resolve([]);for(var s=new Array(r),a=0,u=-1,c=new this(n);++u<r;)!function(e,n){t.resolve(e).then((function(e){s[n]=e,++a!==r||o||(o=!0,i.resolve(c,s))}),(function(e){o||(o=!0,i.reject(c,e))}))}(e[u],u);return c},c.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,r=!1;if(!t)return this.resolve([]);for(var o,s=-1,a=new this(n);++s<t;)o=e[s],this.resolve(o).then((function(e){r||(r=!0,i.resolve(a,e))}),(function(e){r||(r=!0,i.reject(a,e))}));return a}},{immediate:36}],38:[function(e,t,r){"use strict";var o={};(0,e("./lib/utils/common").assign)(o,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,r){"use strict";var o=e("./zlib/deflate"),n=e("./utils/common"),i=e("./utils/strings"),s=e("./zlib/messages"),a=e("./zlib/zstream"),u=Object.prototype.toString;function c(e){if(!(this instanceof c))return new c(e);this.options=n.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=((e=this.options).raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0,o.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy));if(0!==t)throw new Error(s[t]);if(e.header&&o.deflateSetHeader(this.strm,e.header),e.dictionary){if(e="string"==typeof e.dictionary?i.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(t=o.deflateSetDictionary(this.strm,e)))throw new Error(s[t]);this._dict_set=!0}}function l(e,t){if((t=new c(t)).push(e,!0),t.err)throw t.msg||s[t.err];return t.result}c.prototype.push=function(e,t){var r,s,a=this.strm,c=this.options.chunkSize;if(this.ended)return!1;s=t===~~t?t:!0===t?4:0,"string"==typeof e?a.input=i.string2buf(e):"[object ArrayBuffer]"===u.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new n.Buf8(c),a.next_out=0,a.avail_out=c),1!==(r=o.deflate(a,s))&&0!==r)return this.onEnd(r),!(this.ended=!0)}while(0!==a.avail_out&&(0!==a.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(i.buf2binstring(n.shrinkBuf(a.output,a.next_out))):this.onData(n.shrinkBuf(a.output,a.next_out))),(0<a.avail_in||0===a.avail_out)&&1!==r);return 4===s?(r=o.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==s||(this.onEnd(0),!(a.avail_out=0))},c.prototype.onData=function(e){this.chunks.push(e)},c.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Deflate=c,r.deflate=l,r.deflateRaw=function(e,t){return(t=t||{}).raw=!0,l(e,t)},r.gzip=function(e,t){return(t=t||{}).gzip=!0,l(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,r){"use strict";var o=e("./zlib/inflate"),n=e("./utils/common"),i=e("./utils/strings"),s=e("./zlib/constants"),a=e("./zlib/messages"),u=e("./zlib/zstream"),c=e("./zlib/gzheader"),l=Object.prototype.toString;function p(e){if(!(this instanceof p))return new p(e);this.options=n.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;if((e=(t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0,o.inflateInit2(this.strm,t.windowBits)))!==s.Z_OK)throw new Error(a[e]);this.header=new c,o.inflateGetHeader(this.strm,this.header)}function h(e,t){if((t=new p(t)).push(e,!0),t.err)throw t.msg||a[t.err];return t.result}p.prototype.push=function(e,t){var r,a,u,c,p,h=this.strm,d=this.options.chunkSize,f=this.options.dictionary,g=!1;if(this.ended)return!1;a=t===~~t?t:!0===t?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof e?h.input=i.binstring2buf(e):"[object ArrayBuffer]"===l.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new n.Buf8(d),h.next_out=0,h.avail_out=d),(r=o.inflate(h,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&f&&(p="string"==typeof f?i.string2buf(f):"[object ArrayBuffer]"===l.call(f)?new Uint8Array(f):f,r=o.inflateSetDictionary(this.strm,p)),r===s.Z_BUF_ERROR&&!0===g&&(r=s.Z_OK,g=!1),r!==s.Z_STREAM_END&&r!==s.Z_OK)return this.onEnd(r),!(this.ended=!0)}while(!h.next_out||0!==h.avail_out&&r!==s.Z_STREAM_END&&(0!==h.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(p=i.utf8border(h.output,h.next_out),u=h.next_out-p,c=i.buf2string(h.output,p),h.next_out=u,h.avail_out=d-u,u&&n.arraySet(h.output,h.output,p,u,0),this.onData(c)):this.onData(n.shrinkBuf(h.output,h.next_out))),0===h.avail_in&&0===h.avail_out&&(g=!0),(0<h.avail_in||0===h.avail_out)&&r!==s.Z_STREAM_END);return(a=r===s.Z_STREAM_END?s.Z_FINISH:a)===s.Z_FINISH?(r=o.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(h.avail_out=0))},p.prototype.onData=function(e){this.chunks.push(e)},p.prototype.onEnd=function(e){e===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Inflate=p,r.inflate=h,r.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},r.ungzip=h},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,r){"use strict";var o="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array,n=(r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var o in r)r.hasOwnProperty(o)&&(e[o]=r[o])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)},{arraySet:function(e,t,r,o,n){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+o),n);else for(var i=0;i<o;i++)e[n+i]=t[r+i]},flattenChunks:function(e){for(var t,r,o,n,i=t=0,s=e.length;i<s;i++)t+=e[i].length;for(n=new Uint8Array(t),i=r=0,s=e.length;i<s;i++)o=e[i],n.set(o,r),r+=o.length;return n}}),i={arraySet:function(e,t,r,o,n){for(var i=0;i<o;i++)e[n+i]=t[r+i]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,n)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,i))},r.setTyped(o)},{}],42:[function(e,t,r){"use strict";var o=e("./common"),n=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(e){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){i=!1}for(var s=new o.Buf8(256),a=0;a<256;a++)s[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function u(e,t){if(t<65537&&(e.subarray&&i||!e.subarray&&n))return String.fromCharCode.apply(null,o.shrinkBuf(e,t));for(var r="",s=0;s<t;s++)r+=String.fromCharCode(e[s]);return r}s[254]=s[254]=1,r.string2buf=function(e){for(var t,r,n,i,s=e.length,a=0,u=0;u<s;u++)55296==(64512&(r=e.charCodeAt(u)))&&u+1<s&&56320==(64512&(n=e.charCodeAt(u+1)))&&(r=65536+(r-55296<<10)+(n-56320),u++),a+=r<128?1:r<2048?2:r<65536?3:4;for(t=new o.Buf8(a),u=i=0;i<a;u++)55296==(64512&(r=e.charCodeAt(u)))&&u+1<s&&56320==(64512&(n=e.charCodeAt(u+1)))&&(r=65536+(r-55296<<10)+(n-56320),u++),r<128?t[i++]=r:(r<2048?t[i++]=192|r>>>6:(r<65536?t[i++]=224|r>>>12:(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63),t[i++]=128|r>>>6&63),t[i++]=128|63&r);return t},r.buf2binstring=function(e){return u(e,e.length)},r.binstring2buf=function(e){for(var t=new o.Buf8(e.length),r=0,n=t.length;r<n;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){for(var r,o,n,i=t||e.length,a=new Array(2*i),c=r=0;c<i;)if((o=e[c++])<128)a[r++]=o;else if(4<(n=s[o]))a[r++]=65533,c+=n-1;else{for(o&=2===n?31:3===n?15:7;1<n&&c<i;)o=o<<6|63&e[c++],n--;1<n?a[r++]=65533:o<65536?a[r++]=o:(o-=65536,a[r++]=55296|o>>10&1023,a[r++]=56320|1023&o)}return u(a,r)},r.utf8border=function(e,t){for(var r=(t=(t=t||e.length)>e.length?e.length:t)-1;0<=r&&128==(192&e[r]);)r--;return!(r<0)&&0!==r&&r+s[e[r]]>t?r:t}},{"./common":41}],43:[function(e,t,r){"use strict";t.exports=function(e,t,r,o){for(var n=65535&e|0,i=e>>>16&65535|0,s=0;0!==r;){for(r-=s=2e3<r?2e3:r;i=i+(n=n+t[o++]|0)|0,--s;);n%=65521,i%=65521}return n|i<<16|0}},{}],44:[function(e,t,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,r){"use strict";var o=function(){for(var e=[],t=0;t<256;t++){for(var r=t,o=0;o<8;o++)r=1&r?3988292384^r>>>1:r>>>1;e[t]=r}return e}();t.exports=function(e,t,r,n){var i=o,s=n+r;e^=-1;for(var a=n;a<s;a++)e=e>>>8^i[255&(e^t[a])];return-1^e}},{}],46:[function(e,t,r){"use strict";var o,n=e("../utils/common"),i=e("./trees"),s=e("./adler32"),a=e("./crc32"),u=e("./messages"),c=-2,l=258,p=262,h=113;function d(e,t){return e.msg=u[t],t}function f(e){return(e<<1)-(4<e?9:0)}function g(e){for(var t=e.length;0<=--t;)e[t]=0}function m(e){var t=e.state,r=t.pending;0!==(r=r>e.avail_out?e.avail_out:r)&&(n.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function _(e,t){i._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,m(e.strm)}function y(e,t){e.pending_buf[e.pending++]=t}function b(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function v(e,t){var r,o,n=e.max_chain_length,i=e.strstart,s=e.prev_length,a=e.nice_match,u=e.strstart>e.w_size-p?e.strstart-(e.w_size-p):0,c=e.window,h=e.w_mask,d=e.prev,f=e.strstart+l,g=c[i+s-1],m=c[i+s];e.prev_length>=e.good_match&&(n>>=2),a>e.lookahead&&(a=e.lookahead);do{if(c[(r=t)+s]===m&&c[r+s-1]===g&&c[r]===c[i]&&c[++r]===c[i+1]){for(i+=2,r++;c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&i<f;);if(o=l-(f-i),i=f-l,s<o){if(e.match_start=t,a<=(s=o))break;g=c[i+s-1],m=c[i+s]}}}while((t=d[t&h])>u&&0!=--n);return s<=e.lookahead?s:e.lookahead}function w(e){var t,r,o,i,u,c,l,h,d,f=e.w_size;do{if(h=e.window_size-e.lookahead-e.strstart,e.strstart>=f+(f-p)){for(n.arraySet(e.window,e.window,f,f,0),e.match_start-=f,e.strstart-=f,e.block_start-=f,t=r=e.hash_size;o=e.head[--t],e.head[t]=f<=o?o-f:0,--r;);for(t=r=f;o=e.prev[--t],e.prev[t]=f<=o?o-f:0,--r;);h+=f}if(0===e.strm.avail_in)break;if(u=e.strm,c=e.window,l=e.strstart+e.lookahead,d=void 0,r=0===(d=(h=h)<(d=u.avail_in)?h:d)?0:(u.avail_in-=d,n.arraySet(c,u.input,u.next_in,d,l),1===u.state.wrap?u.adler=s(u.adler,c,d,l):2===u.state.wrap&&(u.adler=a(u.adler,c,d,l)),u.next_in+=d,u.total_in+=d,d),e.lookahead+=r,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+3-1])&e.hash_mask,e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<p&&0!==e.strm.avail_in)}function k(e,t){for(var r,o;;){if(e.lookahead<p){if(w(e),e.lookahead<p&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-p&&(e.match_length=v(e,r)),e.match_length>=3)if(o=i._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else o=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(o&&(_(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(_(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(_(e,!1),0===e.strm.avail_out)?1:2}function M(e,t){for(var r,o,n;;){if(e.lookahead<p){if(w(e),e.lookahead<p&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-p&&(e.match_length=v(e,r),e.match_length<=5&&(1===e.strategy||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){for(n=e.strstart+e.lookahead-3,o=i._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=n&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,o&&(_(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((o=i._tr_tally(e,0,e.window[e.strstart-1]))&&_(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(o=i._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(_(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(_(e,!1),0===e.strm.avail_out)?1:2}function I(e,t,r,o,n){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=o,this.func=n}function S(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(1146),this.dyn_dtree=new n.Buf16(122),this.bl_tree=new n.Buf16(78),g(this.dyn_ltree),g(this.dyn_dtree),g(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(16),this.heap=new n.Buf16(573),g(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(573),g(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function D(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:h,e.adler=2===t.wrap?0:1,t.last_flush=0,i._tr_init(t),0):d(e,c)}function C(e){var t=D(e);return 0===t&&((e=e.state).window_size=2*e.w_size,g(e.head),e.max_lazy_match=o[e.level].max_lazy,e.good_match=o[e.level].good_length,e.nice_match=o[e.level].nice_length,e.max_chain_length=o[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),t}function R(e,t,r,o,i,s){if(!e)return c;var a=1;if(-1===t&&(t=6),o<0?(a=0,o=-o):15<o&&(a=2,o-=16),i<1||9<i||8!==r||o<8||15<o||t<0||9<t||s<0||4<s)return d(e,c);8===o&&(o=9);var u=new S;return(e.state=u).strm=e,u.wrap=a,u.gzhead=null,u.w_bits=o,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=i+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+3-1)/3),u.window=new n.Buf8(2*u.w_size),u.head=new n.Buf16(u.hash_size),u.prev=new n.Buf16(u.w_size),u.lit_bufsize=1<<i+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new n.Buf8(u.pending_buf_size),u.d_buf=+u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=s,u.method=r,C(e)}o=[new I(0,0,0,0,(function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(w(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var o=e.block_start+r;if((0===e.strstart||e.strstart>=o)&&(e.lookahead=e.strstart-o,e.strstart=o,_(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-p&&(_(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(_(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(_(e,!1),e.strm.avail_out),1)})),new I(4,4,8,4,k),new I(4,5,16,8,k),new I(4,6,32,32,k),new I(4,4,16,16,M),new I(8,16,32,32,M),new I(8,16,128,128,M),new I(8,32,128,256,M),new I(32,128,258,1024,M),new I(32,258,258,4096,M)],r.deflateInit=function(e,t){return R(e,t,8,15,8,0)},r.deflateInit2=R,r.deflateReset=C,r.deflateResetKeep=D,r.deflateSetHeader=function(e,t){return e&&e.state&&2===e.state.wrap?(e.state.gzhead=t,0):c},r.deflate=function(e,t){var r,n,s,u;if(!e||!e.state||5<t||t<0)return e?d(e,c):c;if(n=e.state,!e.output||!e.input&&0!==e.avail_in||666===n.status&&4!==t)return d(e,0===e.avail_out?-5:c);if(n.strm=e,r=n.last_flush,n.last_flush=t,42===n.status&&(2===n.wrap?(e.adler=0,y(n,31),y(n,139),y(n,8),n.gzhead?(y(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),y(n,255&n.gzhead.time),y(n,n.gzhead.time>>8&255),y(n,n.gzhead.time>>16&255),y(n,n.gzhead.time>>24&255),y(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),y(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(y(n,255&n.gzhead.extra.length),y(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=a(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(y(n,0),y(n,0),y(n,0),y(n,0),y(n,0),y(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),y(n,3),n.status=h)):(p=8+(n.w_bits-8<<4)<<8,p|=(2<=n.strategy||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(p|=32),p+=31-p%31,n.status=h,b(n,p),0!==n.strstart&&(b(n,e.adler>>>16),b(n,65535&e.adler)),e.adler=1)),69===n.status)if(n.gzhead.extra){for(s=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>s&&(e.adler=a(e.adler,n.pending_buf,n.pending-s,s)),m(e),s=n.pending,n.pending!==n.pending_buf_size));)y(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>s&&(e.adler=a(e.adler,n.pending_buf,n.pending-s,s)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){s=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(e.adler=a(e.adler,n.pending_buf,n.pending-s,s)),m(e),s=n.pending,n.pending===n.pending_buf_size)){u=1;break}}while(u=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,y(n,u),0!==u);n.gzhead.hcrc&&n.pending>s&&(e.adler=a(e.adler,n.pending_buf,n.pending-s,s)),0===u&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){s=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(e.adler=a(e.adler,n.pending_buf,n.pending-s,s)),m(e),s=n.pending,n.pending===n.pending_buf_size)){u=1;break}}while(u=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,y(n,u),0!==u);n.gzhead.hcrc&&n.pending>s&&(e.adler=a(e.adler,n.pending_buf,n.pending-s,s)),0===u&&(n.status=103)}else n.status=103;if(103===n.status&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&m(e),n.pending+2<=n.pending_buf_size&&(y(n,255&e.adler),y(n,e.adler>>8&255),e.adler=0,n.status=h)):n.status=h),0!==n.pending){if(m(e),0===e.avail_out)return n.last_flush=-1,0}else if(0===e.avail_in&&f(t)<=f(r)&&4!==t)return d(e,-5);if(666===n.status&&0!==e.avail_in)return d(e,-5);if(0!==e.avail_in||0!==n.lookahead||0!==t&&666!==n.status){var p=2===n.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(w(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,r=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(_(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(_(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(_(e,!1),0===e.strm.avail_out)?1:2}(n,t):3===n.strategy?function(e,t){for(var r,o,n,s,a=e.window;;){if(e.lookahead<=l){if(w(e),e.lookahead<=l&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&0<e.strstart&&(o=a[n=e.strstart-1])===a[++n]&&o===a[++n]&&o===a[++n]){for(s=e.strstart+l;o===a[++n]&&o===a[++n]&&o===a[++n]&&o===a[++n]&&o===a[++n]&&o===a[++n]&&o===a[++n]&&o===a[++n]&&n<s;);e.match_length=l-(s-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=i._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(_(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(_(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(_(e,!1),0===e.strm.avail_out)?1:2}(n,t):o[n.level].func(n,t);if(3!==p&&4!==p||(n.status=666),1===p||3===p)return 0===e.avail_out&&(n.last_flush=-1),0;if(2===p&&(1===t?i._tr_align(n):5!==t&&(i._tr_stored_block(n,0,0,!1),3===t&&(g(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),m(e),0===e.avail_out))return n.last_flush=-1,0}return 4!==t?0:n.wrap<=0?1:(2===n.wrap?(y(n,255&e.adler),y(n,e.adler>>8&255),y(n,e.adler>>16&255),y(n,e.adler>>24&255),y(n,255&e.total_in),y(n,e.total_in>>8&255),y(n,e.total_in>>16&255),y(n,e.total_in>>24&255)):(b(n,e.adler>>>16),b(n,65535&e.adler)),m(e),0<n.wrap&&(n.wrap=-n.wrap),0!==n.pending?0:1)},r.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&t!==h&&666!==t?d(e,c):(e.state=null,t===h?d(e,-3):0):c},r.deflateSetDictionary=function(e,t){var r,o,i,a,u,l,p,h=t.length;if(!e||!e.state)return c;if(2===(a=(r=e.state).wrap)||1===a&&42!==r.status||r.lookahead)return c;for(1===a&&(e.adler=s(e.adler,t,h,0)),r.wrap=0,h>=r.w_size&&(0===a&&(g(r.head),r.strstart=0,r.block_start=0,r.insert=0),p=new n.Buf8(r.w_size),n.arraySet(p,t,h-r.w_size,r.w_size,0),t=p,h=r.w_size),p=e.avail_in,u=e.next_in,l=e.input,e.avail_in=h,e.next_in=0,e.input=t,w(r);r.lookahead>=3;){for(o=r.strstart,i=r.lookahead-2;r.ins_h=(r.ins_h<<r.hash_shift^r.window[o+3-1])&r.hash_mask,r.prev[o&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=o,o++,--i;);r.strstart=o,r.lookahead=2,w(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=u,e.input=l,e.avail_in=p,r.wrap=a,0},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,r){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,r){"use strict";t.exports=function(e,t){var r,o,n,i,s,a,u=e.state,c=e.next_in,l=e.input,p=c+(e.avail_in-5),h=e.next_out,d=e.output,f=h-(t-e.avail_out),g=h+(e.avail_out-257),m=u.dmax,_=u.wsize,y=u.whave,b=u.wnext,v=u.window,w=u.hold,k=u.bits,M=u.lencode,I=u.distcode,S=(1<<u.lenbits)-1,D=(1<<u.distbits)-1;e:do{for(k<15&&(w+=l[c++]<<k,k+=8,w+=l[c++]<<k,k+=8),r=M[w&S];;){if(w>>>=o=r>>>24,k-=o,0==(o=r>>>16&255))d[h++]=65535&r;else{if(!(16&o)){if(0==(64&o)){r=M[(65535&r)+(w&(1<<o)-1)];continue}if(32&o){u.mode=12;break e}e.msg="invalid literal/length code",u.mode=30;break e}for(n=65535&r,(o&=15)&&(k<o&&(w+=l[c++]<<k,k+=8),n+=w&(1<<o)-1,w>>>=o,k-=o),k<15&&(w+=l[c++]<<k,k+=8,w+=l[c++]<<k,k+=8),r=I[w&D];;){if(w>>>=o=r>>>24,k-=o,!(16&(o=r>>>16&255))){if(0==(64&o)){r=I[(65535&r)+(w&(1<<o)-1)];continue}e.msg="invalid distance code",u.mode=30;break e}if(i=65535&r,k<(o&=15)&&(w+=l[c++]<<k,(k+=8)<o&&(w+=l[c++]<<k,k+=8)),m<(i+=w&(1<<o)-1)){e.msg="invalid distance too far back",u.mode=30;break e}if(w>>>=o,k-=o,(o=h-f)<i){if(y<(o=i-o)&&u.sane){e.msg="invalid distance too far back",u.mode=30;break e}if(a=v,(s=0)===b){if(s+=_-o,o<n){for(n-=o;d[h++]=v[s++],--o;);s=h-i,a=d}}else if(b<o){if(s+=_+b-o,(o-=b)<n){for(n-=o;d[h++]=v[s++],--o;);if(s=0,b<n){for(n-=o=b;d[h++]=v[s++],--o;);s=h-i,a=d}}}else if(s+=b-o,o<n){for(n-=o;d[h++]=v[s++],--o;);s=h-i,a=d}for(;2<n;)d[h++]=a[s++],d[h++]=a[s++],d[h++]=a[s++],n-=3;n&&(d[h++]=a[s++],1<n&&(d[h++]=a[s++]))}else{for(s=h-i;d[h++]=d[s++],d[h++]=d[s++],d[h++]=d[s++],2<(n-=3););n&&(d[h++]=d[s++],1<n&&(d[h++]=d[s++]))}break}}break}}while(c<p&&h<g);c-=n=k>>3,w&=(1<<(k-=n<<3))-1,e.next_in=c,e.next_out=h,e.avail_in=c<p?p-c+5:5-(c-p),e.avail_out=h<g?g-h+257:257-(h-g),u.hold=w,u.bits=k}},{}],49:[function(e,t,r){"use strict";var o=e("../utils/common"),n=e("./adler32"),i=e("./crc32"),s=e("./inffast"),a=e("./inftrees"),u=-2;function c(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function l(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function p(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new o.Buf32(852),t.distcode=t.distdyn=new o.Buf32(592),t.sane=1,t.back=-1,0):u}function h(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,p(e)):u}function d(e,t){var r,o;return e&&e.state?(o=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?u:(null!==o.window&&o.wbits!==t&&(o.window=null),o.wrap=r,o.wbits=t,h(e))):u}function f(e,t){var r;return e?(r=new l,(e.state=r).window=null,0!==(r=d(e,t))&&(e.state=null),r):u}var g,m,_=!0;function y(e,t,r,n){var i;return null===(e=e.state).window&&(e.wsize=1<<e.wbits,e.wnext=0,e.whave=0,e.window=new o.Buf8(e.wsize)),n>=e.wsize?(o.arraySet(e.window,t,r-e.wsize,e.wsize,0),e.wnext=0,e.whave=e.wsize):(n<(i=e.wsize-e.wnext)&&(i=n),o.arraySet(e.window,t,r-n,i,e.wnext),(n-=i)?(o.arraySet(e.window,t,r-n,n,0),e.wnext=n,e.whave=e.wsize):(e.wnext+=i,e.wnext===e.wsize&&(e.wnext=0),e.whave<e.wsize&&(e.whave+=i))),0}r.inflateReset=h,r.inflateReset2=d,r.inflateResetKeep=p,r.inflateInit=function(e){return f(e,15)},r.inflateInit2=f,r.inflate=function(e,t){var r,l,p,h,d,f,b,v,w,k,M,I,S,D,C,R,A,O,E,x,P,T,q,L,B=0,G=new o.Buf8(4),N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return u;12===(r=e.state).mode&&(r.mode=13),d=e.next_out,p=e.output,b=e.avail_out,h=e.next_in,l=e.input,f=e.avail_in,v=r.hold,w=r.bits,k=f,M=b,T=0;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;w<16;){if(0===f)break e;f--,v+=l[h++]<<w,w+=8}if(2&r.wrap&&35615===v){G[r.check=0]=255&v,G[1]=v>>>8&255,r.check=i(r.check,G,2,0),w=v=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&v)<<8)+(v>>8))%31){e.msg="incorrect header check",r.mode=30;break}if(8!=(15&v)){e.msg="unknown compression method",r.mode=30;break}if(w-=4,P=8+(15&(v>>>=4)),0===r.wbits)r.wbits=P;else if(P>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<P,e.adler=r.check=1,r.mode=512&v?10:12,w=v=0;break;case 2:for(;w<16;){if(0===f)break e;f--,v+=l[h++]<<w,w+=8}if(r.flags=v,8!=(255&r.flags)){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=v>>8&1),512&r.flags&&(G[0]=255&v,G[1]=v>>>8&255,r.check=i(r.check,G,2,0)),w=v=0,r.mode=3;case 3:for(;w<32;){if(0===f)break e;f--,v+=l[h++]<<w,w+=8}r.head&&(r.head.time=v),512&r.flags&&(G[0]=255&v,G[1]=v>>>8&255,G[2]=v>>>16&255,G[3]=v>>>24&255,r.check=i(r.check,G,4,0)),w=v=0,r.mode=4;case 4:for(;w<16;){if(0===f)break e;f--,v+=l[h++]<<w,w+=8}r.head&&(r.head.xflags=255&v,r.head.os=v>>8),512&r.flags&&(G[0]=255&v,G[1]=v>>>8&255,r.check=i(r.check,G,2,0)),w=v=0,r.mode=5;case 5:if(1024&r.flags){for(;w<16;){if(0===f)break e;f--,v+=l[h++]<<w,w+=8}r.length=v,r.head&&(r.head.extra_len=v),512&r.flags&&(G[0]=255&v,G[1]=v>>>8&255,r.check=i(r.check,G,2,0)),w=v=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((I=f<(I=r.length)?f:I)&&(r.head&&(P=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),o.arraySet(r.head.extra,l,h,I,P)),512&r.flags&&(r.check=i(r.check,l,I,h)),f-=I,h+=I,r.length-=I),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===f)break e;for(I=0;P=l[h+I++],r.head&&P&&r.length<65536&&(r.head.name+=String.fromCharCode(P)),P&&I<f;);if(512&r.flags&&(r.check=i(r.check,l,I,h)),f-=I,h+=I,P)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===f)break e;for(I=0;P=l[h+I++],r.head&&P&&r.length<65536&&(r.head.comment+=String.fromCharCode(P)),P&&I<f;);if(512&r.flags&&(r.check=i(r.check,l,I,h)),f-=I,h+=I,P)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;w<16;){if(0===f)break e;f--,v+=l[h++]<<w,w+=8}if(v!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}w=v=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;w<32;){if(0===f)break e;f--,v+=l[h++]<<w,w+=8}e.adler=r.check=c(v),w=v=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=d,e.avail_out=b,e.next_in=h,e.avail_in=f,r.hold=v,r.bits=w,2;e.adler=r.check=1,r.mode=12;case 12:if(5===t||6===t)break e;case 13:if(r.last){v>>>=7&w,w-=7&w,r.mode=27;break}for(;w<3;){if(0===f)break e;f--,v+=l[h++]<<w,w+=8}switch(r.last=1&v,--w,3&(v>>>=1)){case 0:r.mode=14;break;case 1:j=U=void 0;var j,U=r;if(_){for(g=new o.Buf32(512),m=new o.Buf32(32),j=0;j<144;)U.lens[j++]=8;for(;j<256;)U.lens[j++]=9;for(;j<280;)U.lens[j++]=7;for(;j<288;)U.lens[j++]=8;for(a(1,U.lens,0,288,g,0,U.work,{bits:9}),j=0;j<32;)U.lens[j++]=5;a(2,U.lens,0,32,m,0,U.work,{bits:5}),_=!1}if(U.lencode=g,U.lenbits=9,U.distcode=m,U.distbits=5,r.mode=20,6!==t)break;v>>>=2,w-=2;break e;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}v>>>=2,w-=2;break;case 14:for(v>>>=7&w,w-=7&w;w<32;){if(0===f)break e;f--,v+=l[h++]<<w,w+=8}if((65535&v)!=(v>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&v,w=v=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(I=r.length){if(0===(I=b<(I=f<I?f:I)?b:I))break e;o.arraySet(p,l,h,I,d),f-=I,h+=I,b-=I,d+=I,r.length-=I;break}r.mode=12;break;case 17:for(;w<14;){if(0===f)break e;f--,v+=l[h++]<<w,w+=8}if(r.nlen=257+(31&v),v>>>=5,w-=5,r.ndist=1+(31&v),v>>>=5,w-=5,r.ncode=4+(15&v),v>>>=4,w-=4,286<r.nlen||30<r.ndist){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;w<3;){if(0===f)break e;f--,v+=l[h++]<<w,w+=8}r.lens[N[r.have++]]=7&v,v>>>=3,w-=3}for(;r.have<19;)r.lens[N[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,q={bits:r.lenbits},T=a(0,r.lens,0,19,r.lencode,0,r.work,q),r.lenbits=q.bits,T){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;R=(B=r.lencode[v&(1<<r.lenbits)-1])>>>16&255,A=65535&B,!((C=B>>>24)<=w);){if(0===f)break e;f--,v+=l[h++]<<w,w+=8}if(A<16)v>>>=C,w-=C,r.lens[r.have++]=A;else{if(16===A){for(L=C+2;w<L;){if(0===f)break e;f--,v+=l[h++]<<w,w+=8}if(v>>>=C,w-=C,0===r.have){e.msg="invalid bit length repeat",r.mode=30;break}P=r.lens[r.have-1],I=3+(3&v),v>>>=2,w-=2}else if(17===A){for(L=C+3;w<L;){if(0===f)break e;f--,v+=l[h++]<<w,w+=8}P=0,I=3+(7&(v>>>=C)),v>>>=3,w=w-C-3}else{for(L=C+7;w<L;){if(0===f)break e;f--,v+=l[h++]<<w,w+=8}P=0,I=11+(127&(v>>>=C)),v>>>=7,w=w-C-7}if(r.have+I>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;I--;)r.lens[r.have++]=P}}if(30===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,q={bits:r.lenbits},T=a(1,r.lens,0,r.nlen,r.lencode,0,r.work,q),r.lenbits=q.bits,T){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,q={bits:r.distbits},T=a(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,q),r.distbits=q.bits,T){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(6<=f&&258<=b){e.next_out=d,e.avail_out=b,e.next_in=h,e.avail_in=f,r.hold=v,r.bits=w,s(e,M),d=e.next_out,p=e.output,b=e.avail_out,h=e.next_in,l=e.input,f=e.avail_in,v=r.hold,w=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;R=(B=r.lencode[v&(1<<r.lenbits)-1])>>>16&255,A=65535&B,!((C=B>>>24)<=w);){if(0===f)break e;f--,v+=l[h++]<<w,w+=8}if(R&&0==(240&R)){for(O=C,E=R,x=A;R=(B=r.lencode[x+((v&(1<<O+E)-1)>>O)])>>>16&255,A=65535&B,!(O+(C=B>>>24)<=w);){if(0===f)break e;f--,v+=l[h++]<<w,w+=8}v>>>=O,w-=O,r.back+=O}if(v>>>=C,w-=C,r.back+=C,r.length=A,0===R){r.mode=26;break}if(32&R){r.back=-1,r.mode=12;break}if(64&R){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&R,r.mode=22;case 22:if(r.extra){for(L=r.extra;w<L;){if(0===f)break e;f--,v+=l[h++]<<w,w+=8}r.length+=v&(1<<r.extra)-1,v>>>=r.extra,w-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;R=(B=r.distcode[v&(1<<r.distbits)-1])>>>16&255,A=65535&B,!((C=B>>>24)<=w);){if(0===f)break e;f--,v+=l[h++]<<w,w+=8}if(0==(240&R)){for(O=C,E=R,x=A;R=(B=r.distcode[x+((v&(1<<O+E)-1)>>O)])>>>16&255,A=65535&B,!(O+(C=B>>>24)<=w);){if(0===f)break e;f--,v+=l[h++]<<w,w+=8}v>>>=O,w-=O,r.back+=O}if(v>>>=C,w-=C,r.back+=C,64&R){e.msg="invalid distance code",r.mode=30;break}r.offset=A,r.extra=15&R,r.mode=24;case 24:if(r.extra){for(L=r.extra;w<L;){if(0===f)break e;f--,v+=l[h++]<<w,w+=8}r.offset+=v&(1<<r.extra)-1,v>>>=r.extra,w-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===b)break e;if(r.offset>(I=M-b)){if((I=r.offset-I)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}S=I>r.wnext?(I-=r.wnext,r.wsize-I):r.wnext-I,I>r.length&&(I=r.length),D=r.window}else D=p,S=d-r.offset,I=r.length;for(b-=I=b<I?b:I,r.length-=I;p[d++]=D[S++],--I;);0===r.length&&(r.mode=21);break;case 26:if(0===b)break e;p[d++]=r.length,b--,r.mode=21;break;case 27:if(r.wrap){for(;w<32;){if(0===f)break e;f--,v|=l[h++]<<w,w+=8}if(M-=b,e.total_out+=M,r.total+=M,M&&(e.adler=r.check=(r.flags?i:n)(r.check,p,M,d-M)),M=b,(r.flags?v:c(v))!==r.check){e.msg="incorrect data check",r.mode=30;break}w=v=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;w<32;){if(0===f)break e;f--,v+=l[h++]<<w,w+=8}if(v!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}w=v=0}r.mode=29;case 29:T=1;break e;case 30:T=-3;break e;case 31:return-4;default:return u}return e.next_out=d,e.avail_out=b,e.next_in=h,e.avail_in=f,r.hold=v,r.bits=w,(r.wsize||M!==e.avail_out&&r.mode<30&&(r.mode<27||4!==t))&&y(e,e.output,e.next_out,M-e.avail_out)?(r.mode=31,-4):(k-=e.avail_in,M-=e.avail_out,e.total_in+=k,e.total_out+=M,r.total+=M,r.wrap&&M&&(e.adler=r.check=(r.flags?i:n)(r.check,p,M,e.next_out-M)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),T=(0==k&&0===M||4===t)&&0===T?-5:T)},r.inflateEnd=function(e){if(!e||!e.state)return u;var t=e.state;return t.window&&(t.window=null),e.state=null,0},r.inflateGetHeader=function(e,t){return e&&e.state&&0!=(2&(e=e.state).wrap)?((e.head=t).done=!1,0):u},r.inflateSetDictionary=function(e,t){var r,o=t.length;return!e||!e.state||0!==(r=e.state).wrap&&11!==r.mode?u:11===r.mode&&n(1,t,o,0)!==r.check?-3:y(e,t,o,o)?(r.mode=31,-4):(r.havedict=1,0)},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,r){"use strict";var o=e("../utils/common"),n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,u,c,l,p,h){var d,f,g,m,_,y,b,v,w,k=h.bits,M=0,I=0,S=0,D=0,C=0,R=0,A=0,O=0,E=0,x=0,P=null,T=0,q=new o.Buf16(16),L=new o.Buf16(16),B=null,G=0;for(M=0;M<=15;M++)q[M]=0;for(I=0;I<u;I++)q[t[r+I]]++;for(C=k,D=15;1<=D&&0===q[D];D--);if(D<C&&(C=D),0===D)return c[l++]=20971520,c[l++]=20971520,h.bits=1,0;for(S=1;S<D&&0===q[S];S++);for(C<S&&(C=S),M=O=1;M<=15;M++)if((O=(O<<1)-q[M])<0)return-1;if(0<O&&(0===e||1!==D))return-1;for(L[1]=0,M=1;M<15;M++)L[M+1]=L[M]+q[M];for(I=0;I<u;I++)0!==t[r+I]&&(p[L[t[r+I]]++]=I);if(y=0===e?(P=B=p,19):1===e?(P=n,T-=257,B=i,G-=257,256):(P=s,B=a,-1),M=S,_=l,A=I=x=0,g=-1,m=(E=1<<(R=C))-1,1===e&&852<E||2===e&&592<E)return 1;for(;;){for(w=p[I]<y?(v=0,p[I]):p[I]>y?(v=B[G+p[I]],P[T+p[I]]):(v=96,0),d=1<<(b=M-A),S=f=1<<R;c[_+(x>>A)+(f-=d)]=b<<24|v<<16|w|0,0!==f;);for(d=1<<M-1;x&d;)d>>=1;if(x=0!==d?(x&d-1)+d:0,I++,0==--q[M]){if(M===D)break;M=t[r+p[I]]}if(C<M&&(x&m)!==g){for(_+=S,O=1<<(R=M-(A=0===A?C:A));R+A<D&&!((O-=q[R+A])<=0);)R++,O<<=1;if(E+=1<<R,1===e&&852<E||2===e&&592<E)return 1;c[g=x&m]=C<<24|R<<16|_-l|0}}return 0!==x&&(c[_+x]=M-A<<24|64<<16|0),h.bits=C,0}},{"../utils/common":41}],51:[function(e,t,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,r){"use strict";var o=e("../utils/common");function n(e){for(var t=e.length;0<=--t;)e[t]=0}var i=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],s=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],u=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],c=new Array(576),l=(n(c),new Array(60)),p=(n(l),new Array(512)),h=(n(p),new Array(256)),d=(n(h),new Array(29));n(d);var f,g,m,_=new Array(30);function y(e,t,r,o,n){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=o,this.max_length=n,this.has_stree=e&&e.length}function b(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function v(e){return e<256?p[e]:p[256+(e>>>7)]}function w(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function k(e,t,r){e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,w(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function M(e,t,r){k(e,r[2*t],r[2*t+1])}function I(e,t){for(var r=0;r|=1&e,e>>>=1,r<<=1,0<--t;);return r>>>1}function S(e,t,r){for(var o,n=new Array(16),i=0,s=1;s<=15;s++)n[s]=i=i+r[s-1]<<1;for(o=0;o<=t;o++){var a=e[2*o+1];0!==a&&(e[2*o]=I(n[a]++,a))}}function D(e){for(var t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function C(e){8<e.bi_valid?w(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function R(e,t,r,o){var n=2*t,i=2*r;return e[n]<e[i]||e[n]===e[i]&&o[t]<=o[r]}function A(e,t,r){for(var o=e.heap[r],n=r<<1;n<=e.heap_len&&(n<e.heap_len&&R(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!R(t,o,e.heap[n],e.depth));)e.heap[r]=e.heap[n],r=n,n<<=1;e.heap[r]=o}function O(e,t,r){var o,n,a,u,c=0;if(0!==e.last_lit)for(;o=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],n=e.pending_buf[e.l_buf+c],c++,0==o?M(e,n,t):(M(e,(a=h[n])+256+1,t),0!==(u=i[a])&&k(e,n-=d[a],u),M(e,a=v(--o),r),0!==(u=s[a])&&k(e,o-=_[a],u)),c<e.last_lit;);M(e,256,t)}function E(e,t){var r,o,n,i=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=573,r=0;r<u;r++)0!==i[2*r]?(e.heap[++e.heap_len]=c=r,e.depth[r]=0):i[2*r+1]=0;for(;e.heap_len<2;)i[2*(n=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[n]=0,e.opt_len--,a&&(e.static_len-=s[2*n+1]);for(t.max_code=c,r=e.heap_len>>1;1<=r;r--)A(e,i,r);for(n=u;r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],A(e,i,1),o=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=o,i[2*n]=i[2*r]+i[2*o],e.depth[n]=(e.depth[r]>=e.depth[o]?e.depth[r]:e.depth[o])+1,i[2*r+1]=i[2*o+1]=n,e.heap[1]=n++,A(e,i,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1];for(var l,p,h,d,f,g=e,m=t.dyn_tree,_=t.max_code,y=t.stat_desc.static_tree,b=t.stat_desc.has_stree,v=t.stat_desc.extra_bits,w=t.stat_desc.extra_base,k=t.stat_desc.max_length,M=0,I=0;I<=15;I++)g.bl_count[I]=0;for(m[2*g.heap[g.heap_max]+1]=0,l=g.heap_max+1;l<573;l++)k<(I=m[2*m[2*(p=g.heap[l])+1]+1]+1)&&(I=k,M++),m[2*p+1]=I,_<p||(g.bl_count[I]++,d=0,w<=p&&(d=v[p-w]),f=m[2*p],g.opt_len+=f*(I+d),b&&(g.static_len+=f*(y[2*p+1]+d)));if(0!==M){do{for(I=k-1;0===g.bl_count[I];)I--}while(g.bl_count[I]--,g.bl_count[I+1]+=2,g.bl_count[k]--,0<(M-=2));for(I=k;0!==I;I--)for(p=g.bl_count[I];0!==p;)_<(h=g.heap[--l])||(m[2*h+1]!==I&&(g.opt_len+=(I-m[2*h+1])*m[2*h],m[2*h+1]=I),p--)}S(i,c,e.bl_count)}function x(e,t,r){var o,n,i=-1,s=t[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),t[2*(r+1)+1]=65535,o=0;o<=r;o++)n=s,s=t[2*(o+1)+1],++a<u&&n===s||(a<c?e.bl_tree[2*n]+=a:0!==n?(n!==i&&e.bl_tree[2*n]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,i=n,c=(a=0)===s?(u=138,3):n===s?(u=6,3):(u=7,4))}function P(e,t,r){var o,n,i=-1,s=t[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),o=0;o<=r;o++)if(n=s,s=t[2*(o+1)+1],!(++a<u&&n===s)){if(a<c)for(;M(e,n,e.bl_tree),0!=--a;);else 0!==n?(n!==i&&(M(e,n,e.bl_tree),a--),M(e,16,e.bl_tree),k(e,a-3,2)):a<=10?(M(e,17,e.bl_tree),k(e,a-3,3)):(M(e,18,e.bl_tree),k(e,a-11,7));i=n,c=(a=0)===s?(u=138,3):n===s?(u=6,3):(u=7,4)}}n(_);var T=!1;function q(e,t,r,n){k(e,0+(n?1:0),3),n=t,t=r,C(r=e),w(r,t),w(r,~t),o.arraySet(r.pending_buf,r.window,n,t,r.pending),r.pending+=t}r._tr_init=function(e){if(!T){for(var t,r,o,n,u=new Array(16),v=o=0;v<28;v++)for(d[v]=o,t=0;t<1<<i[v];t++)h[o++]=v;for(h[o-1]=v,v=n=0;v<16;v++)for(_[v]=n,t=0;t<1<<s[v];t++)p[n++]=v;for(n>>=7;v<30;v++)for(_[v]=n<<7,t=0;t<1<<s[v]-7;t++)p[256+n++]=v;for(r=0;r<=15;r++)u[r]=0;for(t=0;t<=143;)c[2*t+1]=8,t++,u[8]++;for(;t<=255;)c[2*t+1]=9,t++,u[9]++;for(;t<=279;)c[2*t+1]=7,t++,u[7]++;for(;t<=287;)c[2*t+1]=8,t++,u[8]++;for(S(c,287,u),t=0;t<30;t++)l[2*t+1]=5,l[2*t]=I(t,5);f=new y(c,i,257,286,15),g=new y(l,s,0,30,15),m=new y(new Array(0),a,0,19,7),T=!0}e.l_desc=new b(e.dyn_ltree,f),e.d_desc=new b(e.dyn_dtree,g),e.bl_desc=new b(e.bl_tree,m),e.bi_buf=0,e.bi_valid=0,D(e)},r._tr_stored_block=q,r._tr_flush_block=function(e,t,r,o){var n,i,s,a=0;if(0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){for(var t=4093624447,r=0;r<=31;r++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*r])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(r=32;r<256;r++)if(0!==e.dyn_ltree[2*r])return 1;return 0}(e)),E(e,e.l_desc),E(e,e.d_desc),a=function(e){var t;for(x(e,e.dyn_ltree,e.l_desc.max_code),x(e,e.dyn_dtree,e.d_desc.max_code),E(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*u[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),n=e.opt_len+3+7>>>3,(i=e.static_len+3+7>>>3)<=n&&(n=i)):n=i=r+5,r+4<=n&&-1!==t)q(e,t,r,o);else if(4===e.strategy||i===n)k(e,2+(o?1:0),3),O(e,c,l);else{k(e,4+(o?1:0),3);var p=e,h=(t=e.l_desc.max_code+1,r=e.d_desc.max_code+1,a+1);for(k(p,t-257,5),k(p,r-1,5),k(p,h-4,4),s=0;s<h;s++)k(p,p.bl_tree[2*u[s]+1],3);P(p,p.dyn_ltree,t-1),P(p,p.dyn_dtree,r-1),O(e,e.dyn_ltree,e.dyn_dtree)}D(e),o&&C(e)},r._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(h[r]+256+1)]++,e.dyn_dtree[2*v(t)]++),e.last_lit===e.lit_bufsize-1},r._tr_align=function(e){k(e,2,3),M(e,256,c),16===(e=e).bi_valid?(w(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{"../utils/common":41}],53:[function(e,t,r){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){(function(e){!function(e,t){"use strict";var r,o,i,s,a,u,c,l,p;function h(e){delete a[e]}function d(e){if(u)setTimeout(d,0,e);else{var t=a[e];if(t){u=!0;try{var r=t.callback,o=t.args;switch(o.length){case 0:r();break;case 1:r(o[0]);break;case 2:r(o[0],o[1]);break;case 3:r(o[0],o[1],o[2]);break;default:r.apply(void 0,o)}}finally{h(e),u=!1}}}}function f(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&d(+t.data.slice(i.length))}e.setImmediate||(s=1,u=!(a={}),c=e.document,l=(l=Object.getPrototypeOf&&Object.getPrototypeOf(e))&&l.setTimeout?l:e,p="[object process]"==={}.toString.call(e.process)?function(e){n.nextTick((function(){d(e)}))}:function(){var t,r;if(e.postMessage&&!e.importScripts)return t=!0,r=e.onmessage,e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}()?(i="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",f,!1):e.attachEvent("onmessage",f),function(t){e.postMessage(i+t,"*")}):e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){d(e.data)},function(e){o.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,function(e){var t=c.createElement("script");t.onreadystatechange=function(){d(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):function(e){setTimeout(d,0,e)},l.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];return a[s]={callback:e,args:t},p(s),s++},l.clearImmediate=h)}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)}).call(this,r(15).Buffer,r(43).setImmediate,r(4),r(16))},function(e,t,r){"use strict";t.byteLength=function(e){return 3*((e=c(e))[0]+(e=e[1]))/4-e},t.toByteArray=function(e){var t,r,o=(s=c(e))[0],s=s[1],a=new i(function(e,t){return 3*(e+t)/4-t}(o,s)),u=0,l=0<s?o-4:o;for(r=0;r<l;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],a[u++]=t>>16&255,a[u++]=t>>8&255,a[u++]=255&t;return 2===s&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,a[u++]=255&t),1===s&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,a[u++]=t>>8&255,a[u++]=255&t),a},t.fromByteArray=function(e){for(var t,r=e.length,n=r%3,i=[],s=0,a=r-n;s<a;s+=16383)i.push(function(e,t,r){for(var n,i=[],s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(function(e){return o[e>>18&63]+o[e>>12&63]+o[e>>6&63]+o[63&e]}(n));return i.join("")}(e,s,a<s+16383?a:s+16383));return 1==n?(t=e[r-1],i.push(o[t>>2]+o[t<<4&63]+"==")):2==n&&(t=(e[r-2]<<8)+e[r-1],i.push(o[t>>10]+o[t>>4&63]+o[t<<2&63]+"=")),i.join("")};for(var o=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)o[a]=s[a],n[s.charCodeAt(a)]=a;function c(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return t=(e=-1===(e=e.indexOf("="))?t:e)===t?0:4-e%4,[e,t]}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,o,n){var i,s,a=8*n-o-1,u=(1<<a)-1,c=u>>1,l=-7,p=r?n-1:0,h=r?-1:1;n=e[t+p];for(p+=h,i=n&(1<<-l)-1,n>>=-l,l+=a;0<l;i=256*i+e[t+p],p+=h,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=o;0<l;s=256*s+e[t+p],p+=h,l-=8);if(0===i)i=1-c;else{if(i===u)return s?NaN:1/0*(n?-1:1);s+=Math.pow(2,o),i-=c}return(n?-1:1)*s*Math.pow(2,i-o)},t.write=function(e,t,r,o,n,i){var s,a,u=8*i-n-1,c=(1<<u)-1,l=c>>1,p=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,h=o?0:i-1,d=o?1:-1;i=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(o=Math.pow(2,-s))<1&&(s--,o*=2),2<=(t+=1<=s+l?p/o:p*Math.pow(2,1-l))*o&&(s++,o/=2),c<=s+l?(a=0,s=c):1<=s+l?(a=(t*o-1)*Math.pow(2,n),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,n),s=0));8<=n;e[r+h]=255&a,h+=d,a/=256,n-=8);for(s=s<<n|a,u+=n;0<u;e[r+h]=255&s,h+=d,s/=256,u-=8);e[r+h-d]|=128*i}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){(function(e){var o=void 0!==e&&e||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(n.call(setTimeout,o,arguments),clearTimeout)},t.setInterval=function(){return new i(n.call(setInterval,o,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(o,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(44),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(4))},function(e,t,r){(function(e,t){!function(e,r){"use strict";var o,n,i,s,a,u,c,l;function p(e){delete n[e]}function h(e){if(i)setTimeout(h,0,e);else{var t=n[e];if(t){i=!0;try{var r=t,o=r.callback,s=r.args;switch(s.length){case 0:o();break;case 1:o(s[0]);break;case 2:o(s[0],s[1]);break;case 3:o(s[0],s[1],s[2]);break;default:o.apply(void 0,s)}}finally{p(e),i=!1}}}}e.setImmediate||(o=1,i=!(n={}),s=e.document,l=(l=Object.getPrototypeOf&&Object.getPrototypeOf(e))&&l.setTimeout?l:e,"[object process]"==={}.toString.call(e.process)?a=function(e){t.nextTick((function(){h(e)}))}:function(){var t,r;if(e.postMessage&&!e.importScripts)return t=!0,r=e.onmessage,e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}()?function(){function t(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(r)&&h(+t.data.slice(r.length))}var r="setImmediate$"+Math.random()+"$";e.addEventListener?e.addEventListener("message",t,!1):e.attachEvent("onmessage",t),a=function(t){e.postMessage(r+t,"*")}}():a=e.MessageChannel?((c=new MessageChannel).port1.onmessage=function(e){h(e.data)},function(e){c.port2.postMessage(e)}):s&&"onreadystatechange"in s.createElement("script")?(u=s.documentElement,function(e){var t=s.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,u.removeChild(t),t=null},u.appendChild(t)}):function(e){setTimeout(h,0,e)},l.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];return n[o]={callback:e,args:t},a(o),o++},l.clearImmediate=p)}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(4),r(16))},function(e,t,r){"use strict";var o=r(46),n=r(15).Buffer;function i(e){return function(t){if(n.isBuffer(t))return t.length;switch(typeof t){case"string":return t.length*o.STRING;case"boolean":return o.BOOLEAN;case"number":return o.NUMBER;case"symbol":return Symbol.keyFor&&Symbol.keyFor(t)?Symbol.keyFor(t).length*o.STRING:(t.toString().length-8)*o.STRING;case"object":return Array.isArray(t)?t.map(i(e)).reduce((function(e,t){return e+t}),0):function(e,t){if(null==t)return 0;for(var r=0,o=function(e){const t=[];for(var r in e)t.push(r);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(e),Array.prototype.push.apply(t,e)),t}(t),n=0;n<o.length;n++){var s=o[n];if("object"==typeof t[s]&&null!==t[s]){if(e.has(t[s]))continue;e.add(t[s])}r+=i(e)(s);try{r+=i(e)(t[s])}catch(e){e instanceof RangeError&&(r=0)}}return r}(e,t);default:return 0}}}e.exports=function(e){return i(new WeakSet)(e)}},function(e,t){e.exports={STRING:2,BOOLEAN:4,NUMBER:8}},function(e,t,r){"use strict";r.r(t),r.d(t,"Deflate",(function(){return er})),r.d(t,"Inflate",(function(){return nr})),r.d(t,"constants",(function(){return ur})),r.d(t,"default",(function(){return cr})),r.d(t,"deflate",(function(){return tr})),r.d(t,"deflateRaw",(function(){return rr})),r.d(t,"gzip",(function(){return or})),r.d(t,"inflate",(function(){return ir})),r.d(t,"inflateRaw",(function(){return sr})),r.d(t,"ungzip",(function(){return ar}));function o(e){let t=e.length;for(;0<=--t;)e[t]=0}const n=256,i=286,s=30,a=15,u=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),c=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),l=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),p=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),h=new Array(576),d=(o(h),new Array(60)),f=(o(d),new Array(512)),g=(o(f),new Array(256)),m=(o(g),new Array(29)),_=(o(m),new Array(s));function y(e,t,r,o,n){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=o,this.max_length=n,this.has_stree=e&&e.length}let b,v,w;function k(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}o(_);const M=e=>e<256?f[e]:f[256+(e>>>7)],I=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},S=(e,t,r)=>{e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,I(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},D=(e,t,r)=>{S(e,r[2*t],r[2*t+1])},C=(e,t)=>{let r=0;for(;r|=1&e,e>>>=1,r<<=1,0<--t;);return r>>>1},R=(e,t,r)=>{const o=new Array(16);let n,i,s=0;for(n=1;n<=a;n++)o[n]=s=s+r[n-1]<<1;for(i=0;i<=t;i++){var u=e[2*i+1];0!==u&&(e[2*i]=C(o[u]++,u))}},A=e=>{let t;for(t=0;t<i;t++)e.dyn_ltree[2*t]=0;for(t=0;t<s;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},O=e=>{8<e.bi_valid?I(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},E=(e,t,r,o)=>{var n=2*t,i=2*r;return e[n]<e[i]||e[n]===e[i]&&o[t]<=o[r]},x=(e,t,r)=>{var o=e.heap[r];let n=r<<1;for(;n<=e.heap_len&&(n<e.heap_len&&E(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!E(t,o,e.heap[n],e.depth));)e.heap[r]=e.heap[n],r=n,n<<=1;e.heap[r]=o},P=(e,t,r)=>{var o;let i,s,a,l=0;if(0!==e.last_lit)for(;o=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],i=e.pending_buf[e.l_buf+l],l++,0==o?D(e,i,t):(s=g[i],D(e,s+n+1,t),0!==(a=u[s])&&(i-=m[s],S(e,i,a)),o--,s=M(o),D(e,s,r),0!==(a=c[s])&&(o-=_[s],S(e,o,a))),l<e.last_lit;);D(e,256,t)},T=(e,t)=>{const r=t.dyn_tree;var o=t.stat_desc.static_tree,n=t.stat_desc.has_stree,i=t.stat_desc.elems;let s,u,c,l=-1;for(e.heap_len=0,e.heap_max=573,s=0;s<i;s++)0!==r[2*s]?(e.heap[++e.heap_len]=l=s,e.depth[s]=0):r[2*s+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,r[2*c]=1,e.depth[c]=0,e.opt_len--,n&&(e.static_len-=o[2*c+1]);for(t.max_code=l,s=e.heap_len>>1;1<=s;s--)x(e,r,s);for(c=i;s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],x(e,r,1),u=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=u,r[2*c]=r[2*s]+r[2*u],e.depth[c]=(e.depth[s]>=e.depth[u]?e.depth[s]:e.depth[u])+1,r[2*s+1]=r[2*u+1]=c,e.heap[1]=c++,x(e,r,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const r=t.dyn_tree;var o,n=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,u=t.stat_desc.extra_bits,c=t.stat_desc.extra_base,l=t.stat_desc.max_length;let p,h,d,f,g,m=0;for(f=0;f<=a;f++)e.bl_count[f]=0;for(r[2*e.heap[e.heap_max]+1]=0,p=e.heap_max+1;p<573;p++)h=e.heap[p],(f=r[2*r[2*h+1]+1]+1)>l&&(f=l,m++),r[2*h+1]=f,h>n||(e.bl_count[f]++,g=0,h>=c&&(g=u[h-c]),o=r[2*h],e.opt_len+=o*(f+g),s&&(e.static_len+=o*(i[2*h+1]+g)));if(0!==m){do{for(f=l-1;0===e.bl_count[f];)f--}while(e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[l]--,0<(m-=2));for(f=l;0!==f;f--)for(h=e.bl_count[f];0!==h;)n<(d=e.heap[--p])||(r[2*d+1]!==f&&(e.opt_len+=(f-r[2*d+1])*r[2*d],r[2*d+1]=f),h--)}})(e,t),R(r,l,e.bl_count)},q=(e,t,r)=>{let o,n=-1;var i;let s=t[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),t[2*(r+1)+1]=65535,o=0;o<=r;o++)i=s,s=t[2*(o+1)+1],++a<u&&i===s||(a<c?e.bl_tree[2*i]+=a:0!==i?(i!==n&&e.bl_tree[2*i]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,n=i,c=0===s?(u=138,3):i===s?(u=6,3):(u=7,4))},L=(e,t,r)=>{let o,n=-1;var i;let s=t[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),o=0;o<=r;o++)if(i=s,s=t[2*(o+1)+1],!(++a<u&&i===s)){if(a<c)for(;D(e,i,e.bl_tree),0!=--a;);else 0!==i?(i!==n&&(D(e,i,e.bl_tree),a--),D(e,16,e.bl_tree),S(e,a-3,2)):a<=10?(D(e,17,e.bl_tree),S(e,a-3,3)):(D(e,18,e.bl_tree),S(e,a-11,7));a=0,n=i,c=0===s?(u=138,3):i===s?(u=6,3):(u=7,4)}};let B=!1;const G=(e,t,r,o)=>{S(e,0+(o?1:0),3),o=e,e=t,t=r,r=!0,O(o),r&&(I(o,t),I(o,~t)),o.pending_buf.set(o.window.subarray(e,e+t),o.pending),o.pending+=t};r={_tr_init:e=>{if(!B){{let e,t,r,o,n;const p=new Array(16);for(r=0,o=0;o<28;o++)for(m[o]=r,e=0;e<1<<u[o];e++)g[r++]=o;for(g[r-1]=o,n=0,o=0;o<16;o++)for(_[o]=n,e=0;e<1<<c[o];e++)f[n++]=o;for(n>>=7;o<s;o++)for(_[o]=n<<7,e=0;e<1<<c[o]-7;e++)f[256+n++]=o;for(t=0;t<=a;t++)p[t]=0;for(e=0;e<=143;)h[2*e+1]=8,e++,p[8]++;for(;e<=255;)h[2*e+1]=9,e++,p[9]++;for(;e<=279;)h[2*e+1]=7,e++,p[7]++;for(;e<=287;)h[2*e+1]=8,e++,p[8]++;for(R(h,287,p),e=0;e<s;e++)d[2*e+1]=5,d[2*e]=C(e,5);b=new y(h,u,257,i,a),v=new y(d,c,0,s,a),w=new y(new Array(0),l,0,19,7)}B=!0}e.l_desc=new k(e.dyn_ltree,b),e.d_desc=new k(e.dyn_dtree,v),e.bl_desc=new k(e.bl_tree,w),e.bi_buf=0,e.bi_valid=0,A(e)},_tr_stored_block:G,_tr_flush_block:(e,t,r,o)=>{let i,s,a=0;if(0<e.level?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<n;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),T(e,e.l_desc),T(e,e.d_desc),a=(e=>{let t;for(q(e,e.dyn_ltree,e.l_desc.max_code),q(e,e.dyn_dtree,e.d_desc.max_code),T(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*p[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=i&&(i=s)):i=s=r+5,r+4<=i&&-1!==t)G(e,t,r,o);else if(4===e.strategy||s===i)S(e,2+(o?1:0),3),P(e,h,d);else{S(e,4+(o?1:0),3);{var u=e;t=e.l_desc.max_code+1,r=e.d_desc.max_code+1;var c=a+1;let o;for(S(u,t-257,5),S(u,r-1,5),S(u,c-4,4),o=0;o<c;o++)S(u,u.bl_tree[2*p[o]+1],3);L(u,u.dyn_ltree,t-1),L(u,u.dyn_dtree,r-1)}P(e,e.dyn_ltree,e.dyn_dtree)}A(e),o&&O(e)},_tr_tally:(e,t,r)=>(e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(g[r]+n+1)]++,e.dyn_dtree[2*M(t)]++),e.last_lit===e.lit_bufsize-1),_tr_align:e=>{S(e,2,3),D(e,256,h),16===(e=e).bi_valid?(I(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}};var N=(e,t,r,o)=>{let n=65535&e|0,i=e>>>16&65535|0,s=0;for(;0!==r;){for(r-=s=2e3<r?2e3:r;n=n+t[o++]|0,i=i+n|0,--s;);n%=65521,i%=65521}return n|i<<16|0};const j=new Uint32Array((()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var o=0;o<8;o++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t})());var U=(e,t,r,o)=>{var n=j,i=o+r;e^=-1;for(let r=o;r<i;r++)e=e>>>8^n[255&(e^t[r])];return-1^e},z={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};t={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:F,_tr_stored_block:H,_tr_flush_block:K,_tr_tally:V,_tr_align:Z}=r,{Z_NO_FLUSH:W,Z_PARTIAL_FLUSH:Q,Z_FULL_FLUSH:J,Z_FINISH:Y,Z_BLOCK:X,Z_OK:$,Z_STREAM_END:ee,Z_STREAM_ERROR:te,Z_DATA_ERROR:re,Z_BUF_ERROR:oe,Z_DEFAULT_COMPRESSION:ne,Z_FILTERED:ie,Z_HUFFMAN_ONLY:se,Z_RLE:ae,Z_FIXED:ue,Z_DEFAULT_STRATEGY:ce,Z_UNKNOWN:le,Z_DEFLATED:pe}=t,he=258,de=262,fe=113,ge=(e,t)=>(e.msg=z[t],t),me=e=>(e<<1)-(4<e?9:0),_e=e=>{let t=e.length;for(;0<=--t;)e[t]=0};let ye=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask;const be=e=>{const t=e.state;let r=t.pending;0!==(r=r>e.avail_out?e.avail_out:r)&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},ve=(e,t)=>{K(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,be(e.strm)},we=(e,t)=>{e.pending_buf[e.pending++]=t},ke=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Me=(e,t,r,o)=>{let n=e.avail_in;return 0===(n=n>o?o:n)?0:(e.avail_in-=n,t.set(e.input.subarray(e.next_in,e.next_in+n),r),1===e.state.wrap?e.adler=N(e.adler,t,n,r):2===e.state.wrap&&(e.adler=U(e.adler,t,n,r)),e.next_in+=n,e.total_in+=n,n)},Ie=(e,t)=>{let r,o=e.max_chain_length,n=e.strstart;var i;let s=e.prev_length,a=e.nice_match;var u=e.strstart>e.w_size-de?e.strstart-(e.w_size-de):0,c=e.window,l=e.w_mask,p=e.prev,h=e.strstart+he;let d=c[n+s-1],f=c[n+s];e.prev_length>=e.good_match&&(o>>=2),a>e.lookahead&&(a=e.lookahead);do{if(c[(r=t)+s]===f&&c[r+s-1]===d&&c[r]===c[n]&&c[++r]===c[n+1]){for(n+=2,r++;c[++n]===c[++r]&&c[++n]===c[++r]&&c[++n]===c[++r]&&c[++n]===c[++r]&&c[++n]===c[++r]&&c[++n]===c[++r]&&c[++n]===c[++r]&&c[++n]===c[++r]&&n<h;);if(i=he-(h-n),n=h-he,i>s){if(e.match_start=t,(s=i)>=a)break;d=c[n+s-1],f=c[n+s]}}}while((t=p[t&l])>u&&0!=--o);return s<=e.lookahead?s:e.lookahead},Se=e=>{var t=e.w_size;let r,o,n,i,s;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-de)){for(e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,o=e.hash_size,r=o;n=e.head[--r],e.head[r]=n>=t?n-t:0,--o;);for(o=t,r=o;n=e.prev[--r],e.prev[r]=n>=t?n-t:0,--o;);i+=t}if(0===e.strm.avail_in)break;if(o=Me(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=o,e.lookahead+e.insert>=3)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=ye(e,e.ins_h,e.window[s+1]);e.insert&&(e.ins_h=ye(e,e.ins_h,e.window[s+3-1]),e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<de&&0!==e.strm.avail_in)};r=(e,t)=>{let r,o;for(;;){if(e.lookahead<de){if(Se(e),e.lookahead<de&&t===W)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=ye(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-de&&(e.match_length=Ie(e,r)),e.match_length>=3)if(o=V(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){for(e.match_length--;e.strstart++,e.ins_h=ye(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=ye(e,e.ins_h,e.window[e.strstart+1]);else o=V(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(o&&(ve(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Y?(ve(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(ve(e,!1),0===e.strm.avail_out)?1:2};var De=(e,t)=>{let r,o;for(var n;;){if(e.lookahead<de){if(Se(e),e.lookahead<de&&t===W)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=ye(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-de&&(e.match_length=Ie(e,r),e.match_length<=5&&(e.strategy===ie||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){for(n=e.strstart+e.lookahead-3,o=V(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=n&&(e.ins_h=ye(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,o&&(ve(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((o=V(e,0,e.window[e.strstart-1]))&&ve(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(o=V(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Y?(ve(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(ve(e,!1),0===e.strm.avail_out)?1:2};function Ce(e,t,r,o,n){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=o,this.func=n}const Re=[new Ce(0,0,0,0,(e,t)=>{let r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Se(e),0===e.lookahead&&t===W)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var o=e.block_start+r;if((0===e.strstart||e.strstart>=o)&&(e.lookahead=e.strstart-o,e.strstart=o,ve(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-de&&(ve(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Y?(ve(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(ve(e,!1),e.strm.avail_out),1)}),new Ce(4,4,8,4,r),new Ce(4,5,16,8,r),new Ce(4,6,32,32,r),new Ce(4,4,16,16,De),new Ce(8,16,32,32,De),new Ce(8,16,128,128,De),new Ce(8,32,128,256,De),new Ce(32,128,258,1024,De),new Ce(32,258,258,4096,De)];function Ae(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=pe,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),_e(this.dyn_ltree),_e(this.dyn_dtree),_e(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),_e(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),_e(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Oe=e=>{if(!e||!e.state)return ge(e,te);e.total_in=e.total_out=0,e.data_type=le;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:fe,e.adler=2===t.wrap?0:1,t.last_flush=W,F(t),$},Ee=e=>{var t=Oe(e);return t===$&&((e=e.state).window_size=2*e.w_size,_e(e.head),e.max_lazy_match=Re[e.level].max_lazy,e.good_match=Re[e.level].good_length,e.nice_match=Re[e.level].nice_length,e.max_chain_length=Re[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),t},xe=(e,t,r,o,n,i)=>{if(!e)return te;let s=1;if(t===ne&&(t=6),o<0?(s=0,o=-o):15<o&&(s=2,o-=16),n<1||n>9||r!==pe||o<8||15<o||t<0||9<t||i<0||i>ue)return ge(e,te);8===o&&(o=9);const a=new Ae;return(e.state=a).strm=e,a.wrap=s,a.gzhead=null,a.w_bits=o,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=n+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<n+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=+a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=i,a.method=r,Ee(e)};var Pe=xe,Te=(e,t)=>e&&e.state&&2===e.state.wrap?(e.state.gzhead=t,$):te,qe=(e,t)=>{let r,o;if(!e||!e.state||t>X||t<0)return e?ge(e,te):te;const n=e.state;if(!e.output||!e.input&&0!==e.avail_in||666===n.status&&t!==Y)return ge(e,0===e.avail_out?oe:te);n.strm=e;var i=n.last_flush;if(n.last_flush=t,42===n.status)if(2===n.wrap)e.adler=0,we(n,31),we(n,139),we(n,8),n.gzhead?(we(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),we(n,255&n.gzhead.time),we(n,n.gzhead.time>>8&255),we(n,n.gzhead.time>>16&255),we(n,n.gzhead.time>>24&255),we(n,9===n.level?2:n.strategy>=se||n.level<2?4:0),we(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(we(n,255&n.gzhead.extra.length),we(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=U(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(we(n,0),we(n,0),we(n,0),we(n,0),we(n,0),we(n,9===n.level?2:n.strategy>=se||n.level<2?4:0),we(n,3),n.status=fe);else{let t=pe+(n.w_bits-8<<4)<<8,r=-1;r=n.strategy>=se||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=32),t+=31-t%31,n.status=fe,ke(n,t),0!==n.strstart&&(ke(n,e.adler>>>16),ke(n,65535&e.adler)),e.adler=1}if(69===n.status)if(n.gzhead.extra){for(r=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>r&&(e.adler=U(e.adler,n.pending_buf,n.pending-r,r)),be(e),r=n.pending,n.pending!==n.pending_buf_size));)we(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>r&&(e.adler=U(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){r=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>r&&(e.adler=U(e.adler,n.pending_buf,n.pending-r,r)),be(e),r=n.pending,n.pending===n.pending_buf_size)){o=1;break}}while(o=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,we(n,o),0!==o);n.gzhead.hcrc&&n.pending>r&&(e.adler=U(e.adler,n.pending_buf,n.pending-r,r)),0===o&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){r=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>r&&(e.adler=U(e.adler,n.pending_buf,n.pending-r,r)),be(e),r=n.pending,n.pending===n.pending_buf_size)){o=1;break}}while(o=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,we(n,o),0!==o);n.gzhead.hcrc&&n.pending>r&&(e.adler=U(e.adler,n.pending_buf,n.pending-r,r)),0===o&&(n.status=103)}else n.status=103;if(103===n.status&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&be(e),n.pending+2<=n.pending_buf_size&&(we(n,255&e.adler),we(n,e.adler>>8&255),e.adler=0,n.status=fe)):n.status=fe),0!==n.pending){if(be(e),0===e.avail_out)return n.last_flush=-1,$}else if(0===e.avail_in&&me(t)<=me(i)&&t!==Y)return ge(e,oe);if(666===n.status&&0!==e.avail_in)return ge(e,oe);if(0!==e.avail_in||0!==n.lookahead||t!==W&&666!==n.status){if(3!==(i=n.strategy===se?((e,t)=>{for(var r;;){if(0===e.lookahead&&(Se(e),0===e.lookahead)){if(t===W)return 1;break}if(e.match_length=0,r=V(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(ve(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Y?(ve(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(ve(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===ae?((e,t)=>{let r;var o;let n,i;for(var s=e.window;;){if(e.lookahead<=he){if(Se(e),e.lookahead<=he&&t===W)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&0<e.strstart&&(o=s[n=e.strstart-1])===s[++n]&&o===s[++n]&&o===s[++n]){for(i=e.strstart+he;o===s[++n]&&o===s[++n]&&o===s[++n]&&o===s[++n]&&o===s[++n]&&o===s[++n]&&o===s[++n]&&o===s[++n]&&n<i;);e.match_length=he-(i-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=V(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=V(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(ve(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Y?(ve(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(ve(e,!1),0===e.strm.avail_out)?1:2})(n,t):Re[n.level].func(n,t))&&4!==i||(n.status=666),1===i||3===i)return 0===e.avail_out&&(n.last_flush=-1),$;if(2===i&&(t===Q?Z(n):t!==X&&(H(n,0,0,!1),t===J&&(_e(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),be(e),0===e.avail_out))return n.last_flush=-1,$}return t!==Y?$:n.wrap<=0?ee:(2===n.wrap?(we(n,255&e.adler),we(n,e.adler>>8&255),we(n,e.adler>>16&255),we(n,e.adler>>24&255),we(n,255&e.total_in),we(n,e.total_in>>8&255),we(n,e.total_in>>16&255),we(n,e.total_in>>24&255)):(ke(n,e.adler>>>16),ke(n,65535&e.adler)),be(e),0<n.wrap&&(n.wrap=-n.wrap),0!==n.pending?$:ee)},Le=e=>{if(!e||!e.state)return te;var t=e.state.status;return 42!==t&&69!==t&&73!==t&&91!==t&&103!==t&&t!==fe&&666!==t?ge(e,te):(e.state=null,t===fe?ge(e,re):$)},Be=(e,t)=>{let r=t.length;if(!e||!e.state)return te;const o=e.state;var n=o.wrap;if(2===n||1===n&&42!==o.status||o.lookahead)return te;if(1===n&&(e.adler=N(e.adler,t,r,0)),o.wrap=0,r>=o.w_size){0===n&&(_e(o.head),o.strstart=0,o.block_start=0,o.insert=0);let e=new Uint8Array(o.w_size);e.set(t.subarray(r-o.w_size,r),0),t=e,r=o.w_size}var i=e.avail_in,s=e.next_in,a=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,Se(o);o.lookahead>=3;){let e=o.strstart,t=o.lookahead-2;for(;o.ins_h=ye(o,o.ins_h,o.window[e+3-1]),o.prev[e&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=e,e++,--t;);o.strstart=e,o.lookahead=2,Se(o)}return o.strstart+=o.lookahead,o.block_start=o.strstart,o.insert=o.lookahead,o.lookahead=0,o.match_length=o.prev_length=2,o.match_available=0,e.next_in=s,e.input=a,e.avail_in=i,o.wrap=n,$},Ge=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(const t in r)o=r,n=t,Object.prototype.hasOwnProperty.call(o,n)&&(e[t]=r[t])}}var o,n;return e},Ne=e=>{let t=0;for(let r=0,o=e.length;r<o;r++)t+=e[r].length;const r=new Uint8Array(t);for(let t=0,n=0,i=e.length;t<i;t++){var o=e[t];r.set(o,n),n+=o.length}return r};let je=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){je=!1}const Ue=new Uint8Array(256);for(let e=0;e<256;e++)Ue[e]=252<=e?6:248<=e?5:240<=e?4:224<=e?3:192<=e?2:1;Ue[254]=Ue[254]=1;var ze=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,r,o,n,i,s=e.length,a=0;for(n=0;n<s;n++)55296==(64512&(r=e.charCodeAt(n)))&&n+1<s&&56320==(64512&(o=e.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(o-56320),n++),a+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(a),i=0,n=0;i<a;n++)55296==(64512&(r=e.charCodeAt(n)))&&n+1<s&&56320==(64512&(o=e.charCodeAt(n+1)))&&(r=65536+(r-55296<<10)+(o-56320),n++),r<128?t[i++]=r:(r<2048?t[i++]=192|r>>>6:(r<65536?t[i++]=224|r>>>12:(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63),t[i++]=128|r>>>6&63),t[i++]=128|63&r);return t},Fe=(e,t)=>{var r=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let o,n;const i=new Array(2*r);for(n=0,o=0;o<r;){let t=e[o++];if(t<128)i[n++]=t;else{let s=Ue[t];if(4<s)i[n++]=65533,o+=s-1;else{for(t&=2===s?31:3===s?15:7;1<s&&o<r;)t=t<<6|63&e[o++],s--;1<s?i[n++]=65533:t<65536?i[n++]=t:(t-=65536,i[n++]=55296|t>>10&1023,i[n++]=56320|1023&t)}}}{var s=i,a=n;if(a<65534&&s.subarray&&je)return String.fromCharCode.apply(null,s.length===a?s:s.subarray(0,a));let e="";for(let t=0;t<a;t++)e+=String.fromCharCode(s[t]);return e}},He=(e,t)=>{let r=(t=(t=t||e.length)>e.length?e.length:t)-1;for(;0<=r&&128==(192&e[r]);)r--;return!(r<0)&&0!==r&&r+Ue[e[r]]>t?r:t},Ke=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Ve=Object.prototype.toString,{Z_NO_FLUSH:Ze,Z_SYNC_FLUSH:We,Z_FULL_FLUSH:Qe,Z_FINISH:Je,Z_OK:Ye,Z_STREAM_END:Xe,Z_DEFAULT_COMPRESSION:$e,Z_DEFAULT_STRATEGY:et,Z_DEFLATED:tt}=t;function rt(e){this.options=Ge({level:$e,method:tt,chunkSize:16384,windowBits:15,memLevel:8,strategy:et},e||{});let t=this.options,r=(t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ke,this.strm.avail_out=0,Pe(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy));if(r!==Ye)throw new Error(z[r]);if(t.header&&Te(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?ze(t.dictionary):"[object ArrayBuffer]"===Ve.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=Be(this.strm,e))!==Ye)throw new Error(z[r]);this._dict_set=!0}}function ot(e,t){const r=new rt(t);if(r.push(e,!0),r.err)throw r.msg||z[r.err];return r.result}rt.prototype.push=function(e,t){const r=this.strm;var o=this.options.chunkSize;let n,i;if(this.ended)return!1;for(i=t===~~t?t:!0===t?Je:Ze,"string"==typeof e?r.input=ze(e):"[object ArrayBuffer]"===Ve.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(o),r.next_out=0,r.avail_out=o),(i===We||i===Qe)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(qe(r,i)===Xe)return 0<r.next_out&&this.onData(r.output.subarray(0,r.next_out)),n=Le(this.strm),this.onEnd(n),this.ended=!0,n===Ye;if(0===r.avail_out)this.onData(r.output);else if(0<i&&0<r.next_out)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}return!0},rt.prototype.onData=function(e){this.chunks.push(e)},rt.prototype.onEnd=function(e){e===Ye&&(this.result=Ne(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r={Deflate:rt,deflate:ot,deflateRaw:function(e,t){return(t=t||{}).raw=!0,ot(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,ot(e,t)},constants:t};const nt=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),it=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),st=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),at=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ut=(e,t,r,o,n,i,s,a)=>{var u,c=a.bits;let l,p,h,d,f,g=0,m=0,_=0,y=0,b=0,v=0,w=0,k=0,M=0,I=0,S=null,D=0;const C=new Uint16Array(16),R=new Uint16Array(16);let A,O,E,x=null,P=0;for(g=0;g<=15;g++)C[g]=0;for(m=0;m<o;m++)C[t[r+m]]++;for(b=c,y=15;1<=y&&0===C[y];y--);if(b>y&&(b=y),0===y)return n[i++]=20971520,n[i++]=20971520,a.bits=1,0;for(_=1;_<y&&0===C[_];_++);for(b<_&&(b=_),k=1,g=1;g<=15;g++)if((k=(k<<=1)-C[g])<0)return-1;if(0<k&&(0===e||1!==y))return-1;for(R[1]=0,g=1;g<15;g++)R[g+1]=R[g]+C[g];for(m=0;m<o;m++)0!==t[r+m]&&(s[R[t[r+m]]++]=m);if(f=0===e?(S=x=s,19):1===e?(S=nt,D-=257,x=it,P-=257,256):(S=st,x=at,-1),I=0,m=0,g=_,d=i,v=b,w=0,h=-1,u=(M=1<<b)-1,1===e&&852<M||2===e&&592<M)return 1;for(;;){for(A=g-w,E=s[m]<f?(O=0,s[m]):s[m]>f?(O=x[P+s[m]],S[D+s[m]]):(O=96,0),l=1<<g-w,p=1<<v,_=p;p-=l,n[d+(I>>w)+p]=A<<24|O<<16|E|0,0!==p;);for(l=1<<g-1;I&l;)l>>=1;if(I=0!==l?(I&=l-1)+l:0,m++,0==--C[g]){if(g===y)break;g=t[r+s[m]]}if(g>b&&(I&u)!==h){for(0===w&&(w=b),d+=_,v=g-w,k=1<<v;v+w<y&&!((k-=C[v+w])<=0);)v++,k<<=1;if(M+=1<<v,1===e&&852<M||2===e&&592<M)return 1;n[h=I&u]=b<<24|v<<16|d-i|0}}return 0!==I&&(n[d+I]=g-w<<24|64<<16|0),a.bits=b,0};const{Z_FINISH:ct,Z_BLOCK:lt,Z_TREES:pt,Z_OK:ht,Z_STREAM_END:dt,Z_NEED_DICT:ft,Z_STREAM_ERROR:gt,Z_DATA_ERROR:mt,Z_MEM_ERROR:_t,Z_BUF_ERROR:yt,Z_DEFLATED:bt}=t,vt=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function wt(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const kt=e=>{if(!e||!e.state)return gt;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,ht},Mt=e=>{if(!e||!e.state)return gt;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,kt(e)},It=(e,t)=>{let r;if(!e||!e.state)return gt;const o=e.state;return t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?gt:(null!==o.window&&o.wbits!==t&&(o.window=null),o.wrap=r,o.wbits=t,Mt(e))},St=(e,t)=>{if(!e)return gt;const r=new wt;return(e.state=r).window=null,(t=It(e,t))!==ht&&(e.state=null),t};let Dt,Ct,Rt=!0;const At=(e,t,r,o)=>{let n;const i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),o>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):((n=i.wsize-i.wnext)>o&&(n=o),i.window.set(t.subarray(r-o,r-o+n),i.wnext),(o-=n)?(i.window.set(t.subarray(r-o,r),0),i.wnext=o,i.whave=i.wsize):(i.wnext+=n,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=n))),0};var Ot=Mt,Et=St,xt=(e,t)=>{let r,o,n,i,s,a,u,c,l,p,h,d,f,g,m,_,y,b,v,w,k,M,I=0;const S=new Uint8Array(4);let D,C;var R,A,O,E,x,P,T,q,L,B,G,j,z,F=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return gt;12===(r=e.state).mode&&(r.mode=13),s=e.next_out,n=e.output,u=e.avail_out,i=e.next_in,o=e.input,a=e.avail_in,c=r.hold,l=r.bits,p=a,h=u,M=ht;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;l<16;){if(0===a)break e;a--,c+=o[i++]<<l,l+=8}if(2&r.wrap&&35615===c){r.check=0,S[0]=255&c,S[1]=c>>>8&255,r.check=U(r.check,S,2,0),c=0,l=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",r.mode=30;break}if((15&c)!==bt){e.msg="unknown compression method",r.mode=30;break}if(c>>>=4,l-=4,k=8+(15&c),0===r.wbits)r.wbits=k;else if(k>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<r.wbits,e.adler=r.check=1,r.mode=512&c?10:12,c=0,l=0;break;case 2:for(;l<16;){if(0===a)break e;a--,c+=o[i++]<<l,l+=8}if(r.flags=c,(255&r.flags)!==bt){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=c>>8&1),512&r.flags&&(S[0]=255&c,S[1]=c>>>8&255,r.check=U(r.check,S,2,0)),c=0,l=0,r.mode=3;case 3:for(;l<32;){if(0===a)break e;a--,c+=o[i++]<<l,l+=8}r.head&&(r.head.time=c),512&r.flags&&(S[0]=255&c,S[1]=c>>>8&255,S[2]=c>>>16&255,S[3]=c>>>24&255,r.check=U(r.check,S,4,0)),c=0,l=0,r.mode=4;case 4:for(;l<16;){if(0===a)break e;a--,c+=o[i++]<<l,l+=8}r.head&&(r.head.xflags=255&c,r.head.os=c>>8),512&r.flags&&(S[0]=255&c,S[1]=c>>>8&255,r.check=U(r.check,S,2,0)),c=0,l=0,r.mode=5;case 5:if(1024&r.flags){for(;l<16;){if(0===a)break e;a--,c+=o[i++]<<l,l+=8}r.length=c,r.head&&(r.head.extra_len=c),512&r.flags&&(S[0]=255&c,S[1]=c>>>8&255,r.check=U(r.check,S,2,0)),c=0,l=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((d=(d=r.length)>a?a:d)&&(r.head&&(k=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(o.subarray(i,i+d),k)),512&r.flags&&(r.check=U(r.check,o,d,i)),a-=d,i+=d,r.length-=d),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===a)break e;for(d=0;k=o[i+d++],r.head&&k&&r.length<65536&&(r.head.name+=String.fromCharCode(k)),k&&d<a;);if(512&r.flags&&(r.check=U(r.check,o,d,i)),a-=d,i+=d,k)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===a)break e;for(d=0;k=o[i+d++],r.head&&k&&r.length<65536&&(r.head.comment+=String.fromCharCode(k)),k&&d<a;);if(512&r.flags&&(r.check=U(r.check,o,d,i)),a-=d,i+=d,k)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;l<16;){if(0===a)break e;a--,c+=o[i++]<<l,l+=8}if(c!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}c=0,l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;l<32;){if(0===a)break e;a--,c+=o[i++]<<l,l+=8}e.adler=r.check=vt(c),c=0,l=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=s,e.avail_out=u,e.next_in=i,e.avail_in=a,r.hold=c,r.bits=l,ft;e.adler=r.check=1,r.mode=12;case 12:if(t===lt||t===pt)break e;case 13:if(r.last){c>>>=7&l,l-=7&l,r.mode=27;break}for(;l<3;){if(0===a)break e;a--,c+=o[i++]<<l,l+=8}switch(r.last=1&c,c>>>=1,--l,3&c){case 0:r.mode=14;break;case 1:var H=r;if(Rt){Dt=new Int32Array(512),Ct=new Int32Array(32);let e=0;for(;e<144;)H.lens[e++]=8;for(;e<256;)H.lens[e++]=9;for(;e<280;)H.lens[e++]=7;for(;e<288;)H.lens[e++]=8;for(ut(1,H.lens,0,288,Dt,0,H.work,{bits:9}),e=0;e<32;)H.lens[e++]=5;ut(2,H.lens,0,32,Ct,0,H.work,{bits:5}),Rt=!1}if(H.lencode=Dt,H.lenbits=9,H.distcode=Ct,H.distbits=5,r.mode=20,t!==pt)break;c>>>=2,l-=2;break e;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}c>>>=2,l-=2;break;case 14:for(c>>>=7&l,l-=7&l;l<32;){if(0===a)break e;a--,c+=o[i++]<<l,l+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&c,c=0,l=0,r.mode=15,t===pt)break e;case 15:r.mode=16;case 16:if(d=r.length){if(0===(d=(d=d>a?a:d)>u?u:d))break e;n.set(o.subarray(i,i+d),s),a-=d,i+=d,u-=d,s+=d,r.length-=d;break}r.mode=12;break;case 17:for(;l<14;){if(0===a)break e;a--,c+=o[i++]<<l,l+=8}if(r.nlen=257+(31&c),c>>>=5,l-=5,r.ndist=1+(31&c),c>>>=5,l-=5,r.ncode=4+(15&c),c>>>=4,l-=4,286<r.nlen||30<r.ndist){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;l<3;){if(0===a)break e;a--,c+=o[i++]<<l,l+=8}r.lens[F[r.have++]]=7&c,c>>>=3,l-=3}for(;r.have<19;)r.lens[F[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,D={bits:r.lenbits},M=ut(0,r.lens,0,19,r.lencode,0,r.work,D),r.lenbits=D.bits,M){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;I=r.lencode[c&(1<<r.lenbits)-1],m=I>>>24,_=I>>>16&255,y=65535&I,!(m<=l);){if(0===a)break e;a--,c+=o[i++]<<l,l+=8}if(y<16)c>>>=m,l-=m,r.lens[r.have++]=y;else{if(16===y){for(C=m+2;l<C;){if(0===a)break e;a--,c+=o[i++]<<l,l+=8}if(c>>>=m,l-=m,0===r.have){e.msg="invalid bit length repeat",r.mode=30;break}k=r.lens[r.have-1],d=3+(3&c),c>>>=2,l-=2}else if(17===y){for(C=m+3;l<C;){if(0===a)break e;a--,c+=o[i++]<<l,l+=8}c>>>=m,l-=m,k=0,d=3+(7&c),c>>>=3,l-=3}else{for(C=m+7;l<C;){if(0===a)break e;a--,c+=o[i++]<<l,l+=8}c>>>=m,l-=m,k=0,d=11+(127&c),c>>>=7,l-=7}if(r.have+d>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;d--;)r.lens[r.have++]=k}}if(30===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,D={bits:r.lenbits},M=ut(1,r.lens,0,r.nlen,r.lencode,0,r.work,D),r.lenbits=D.bits,M){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,D={bits:r.distbits},M=ut(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,D),r.distbits=D.bits,M){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,t===pt)break e;case 20:r.mode=21;case 21:if(6<=a&&258<=u){e.next_out=s,e.avail_out=u,e.next_in=i,e.avail_in=a,r.hold=c,r.bits=l;{void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,z=void 0;var K=e,V=h;let t,r,o,n,i,s,a,u,c,l,p;const d=K.state;t=K.next_in,l=K.input,R=t+(K.avail_in-5),r=K.next_out,p=K.output,A=r-(V-K.avail_out),O=r+(K.avail_out-257),E=d.dmax,x=d.wsize,P=d.whave,T=d.wnext,q=d.window,o=d.hold,n=d.bits,L=d.lencode,B=d.distcode,G=(1<<d.lenbits)-1,j=(1<<d.distbits)-1;t:do{for(n<15&&(o+=l[t++]<<n,n+=8,o+=l[t++]<<n,n+=8),i=L[o&G];;){if(s=i>>>24,o>>>=s,n-=s,0==(s=i>>>16&255))p[r++]=65535&i;else{if(!(16&s)){if(0==(64&s)){i=L[(65535&i)+(o&(1<<s)-1)];continue}if(32&s){d.mode=12;break t}K.msg="invalid literal/length code",d.mode=30;break t}for(a=65535&i,(s&=15)&&(n<s&&(o+=l[t++]<<n,n+=8),a+=o&(1<<s)-1,o>>>=s,n-=s),n<15&&(o+=l[t++]<<n,n+=8,o+=l[t++]<<n,n+=8),i=B[o&j];;){if(s=i>>>24,o>>>=s,n-=s,!(16&(s=i>>>16&255))){if(0==(64&s)){i=B[(65535&i)+(o&(1<<s)-1)];continue}K.msg="invalid distance code",d.mode=30;break t}if(z=65535&i,s&=15,n<s&&(o+=l[t++]<<n,(n+=8)<s&&(o+=l[t++]<<n,n+=8)),E<(z+=o&(1<<s)-1)){K.msg="invalid distance too far back",d.mode=30;break t}if(o>>>=s,n-=s,z>(s=r-A)){if((s=z-s)>P&&d.sane){K.msg="invalid distance too far back",d.mode=30;break t}if(u=0,c=q,0===T){if(u+=x-s,s<a){for(a-=s;p[r++]=q[u++],--s;);u=r-z,c=p}}else if(T<s){if(u+=x+T-s,(s-=T)<a){for(a-=s;p[r++]=q[u++],--s;);if(u=0,T<a){for(s=T,a-=s;p[r++]=q[u++],--s;);u=r-z,c=p}}}else if(u+=T-s,s<a){for(a-=s;p[r++]=q[u++],--s;);u=r-z,c=p}for(;2<a;)p[r++]=c[u++],p[r++]=c[u++],p[r++]=c[u++],a-=3;a&&(p[r++]=c[u++],1<a&&(p[r++]=c[u++]))}else{for(u=r-z;p[r++]=p[u++],p[r++]=p[u++],p[r++]=p[u++],2<(a-=3););a&&(p[r++]=p[u++],1<a&&(p[r++]=p[u++]))}break}}break}}while(t<R&&r<O);a=n>>3,t-=a,n-=a<<3,o&=(1<<n)-1,K.next_in=t,K.next_out=r,K.avail_in=t<R?R-t+5:5-(t-R),K.avail_out=r<O?O-r+257:257-(r-O),d.hold=o,d.bits=n}s=e.next_out,n=e.output,u=e.avail_out,i=e.next_in,o=e.input,a=e.avail_in,c=r.hold,l=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;I=r.lencode[c&(1<<r.lenbits)-1],m=I>>>24,_=I>>>16&255,y=65535&I,!(m<=l);){if(0===a)break e;a--,c+=o[i++]<<l,l+=8}if(_&&0==(240&_)){for(b=m,v=_,w=y;I=r.lencode[w+((c&(1<<b+v)-1)>>b)],m=I>>>24,_=I>>>16&255,y=65535&I,!(b+m<=l);){if(0===a)break e;a--,c+=o[i++]<<l,l+=8}c>>>=b,l-=b,r.back+=b}if(c>>>=m,l-=m,r.back+=m,r.length=y,0===_){r.mode=26;break}if(32&_){r.back=-1,r.mode=12;break}if(64&_){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&_,r.mode=22;case 22:if(r.extra){for(C=r.extra;l<C;){if(0===a)break e;a--,c+=o[i++]<<l,l+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;I=r.distcode[c&(1<<r.distbits)-1],m=I>>>24,_=I>>>16&255,y=65535&I,!(m<=l);){if(0===a)break e;a--,c+=o[i++]<<l,l+=8}if(0==(240&_)){for(b=m,v=_,w=y;I=r.distcode[w+((c&(1<<b+v)-1)>>b)],m=I>>>24,_=I>>>16&255,y=65535&I,!(b+m<=l);){if(0===a)break e;a--,c+=o[i++]<<l,l+=8}c>>>=b,l-=b,r.back+=b}if(c>>>=m,l-=m,r.back+=m,64&_){e.msg="invalid distance code",r.mode=30;break}r.offset=y,r.extra=15&_,r.mode=24;case 24:if(r.extra){for(C=r.extra;l<C;){if(0===a)break e;a--,c+=o[i++]<<l,l+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===u)break e;if(d=h-u,r.offset>d){if((d=r.offset-d)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}f=d>r.wnext?(d-=r.wnext,r.wsize-d):r.wnext-d,d>r.length&&(d=r.length),g=r.window}else g=n,f=s-r.offset,d=r.length;for(d>u&&(d=u),u-=d,r.length-=d;n[s++]=g[f++],--d;);0===r.length&&(r.mode=21);break;case 26:if(0===u)break e;n[s++]=r.length,u--,r.mode=21;break;case 27:if(r.wrap){for(;l<32;){if(0===a)break e;a--,c|=o[i++]<<l,l+=8}if(h-=u,e.total_out+=h,r.total+=h,h&&(e.adler=r.check=(r.flags?U:N)(r.check,n,h,s-h)),h=u,(r.flags?c:vt(c))!==r.check){e.msg="incorrect data check",r.mode=30;break}c=0,l=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;l<32;){if(0===a)break e;a--,c+=o[i++]<<l,l+=8}if(c!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}c=0,l=0}r.mode=29;case 29:M=dt;break e;case 30:M=mt;break e;case 31:return _t;default:return gt}return e.next_out=s,e.avail_out=u,e.next_in=i,e.avail_in=a,r.hold=c,r.bits=l,(r.wsize||h!==e.avail_out&&r.mode<30&&(r.mode<27||t!==ct))&&At(e,e.output,e.next_out,h-e.avail_out),p-=e.avail_in,h-=e.avail_out,e.total_in+=p,e.total_out+=h,r.total+=h,r.wrap&&h&&(e.adler=r.check=(r.flags?U:N)(r.check,n,h,e.next_out-h)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==p&&0===h||t===ct)&&M===ht?yt:M},Pt=e=>{if(!e||!e.state)return gt;let t=e.state;return t.window&&(t.window=null),e.state=null,ht},Tt=(e,t)=>{if(!e||!e.state)return gt;const r=e.state;return 0==(2&r.wrap)?gt:((r.head=t).done=!1,ht)},qt=(e,t)=>{var r=t.length;let o;return!e||!e.state||0!==(o=e.state).wrap&&11!==o.mode?gt:11===o.mode&&N(1,t,r,0)!==o.check?mt:At(e,t,r,r)?(o.mode=31,_t):(o.havedict=1,ht)},Lt=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Bt=Object.prototype.toString,{Z_NO_FLUSH:Gt,Z_FINISH:Nt,Z_OK:jt,Z_STREAM_END:Ut,Z_NEED_DICT:zt,Z_STREAM_ERROR:Ft,Z_DATA_ERROR:Ht,Z_MEM_ERROR:Kt}=t;function Vt(e){this.options=Ge({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ke,this.strm.avail_out=0;let r=Et(this.strm,t.windowBits);if(r!==jt)throw new Error(z[r]);if(this.header=new Lt,Tt(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=ze(t.dictionary):"[object ArrayBuffer]"===Bt.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=qt(this.strm,t.dictionary))!==jt))throw new Error(z[r])}function Zt(e,t){const r=new Vt(t);if(r.push(e),r.err)throw r.msg||z[r.err];return r.result}Vt.prototype.push=function(e,t){const r=this.strm;var o,n,i,s=this.options.chunkSize,a=this.options.dictionary;let u,c,l;if(this.ended)return!1;for(c=t===~~t?t:!0===t?Nt:Gt,"[object ArrayBuffer]"===Bt.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(s),r.next_out=0,r.avail_out=s),(u=xt(r,c))===zt&&a&&((u=qt(r,a))===jt?u=xt(r,c):u===Ht&&(u=zt));0<r.avail_in&&u===Ut&&0<r.state.wrap&&0!==e[r.next_in];)Ot(r),u=xt(r,c);switch(u){case Ft:case Ht:case zt:case Kt:return this.onEnd(u),!(this.ended=!0)}if(l=r.avail_out,!r.next_out||0!==r.avail_out&&u!==Ut||("string"===this.options.to?(o=He(r.output,r.next_out),n=r.next_out-o,i=Fe(r.output,o),r.next_out=n,r.avail_out=s-n,n&&r.output.set(r.output.subarray(o,o+n),0),this.onData(i)):this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out))),u!==jt||0!==l){if(u===Ut)return u=Pt(this.strm),this.onEnd(u),this.ended=!0;if(0===r.avail_in)break}}return!0},Vt.prototype.onData=function(e){this.chunks.push(e)},Vt.prototype.onEnd=function(e){e===jt&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Ne(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var{Deflate:De,deflate:r,deflateRaw:Wt,gzip:Qt}=r,{Inflate:Jt,inflate:Yt,inflateRaw:Xt,ungzip:$t}={Inflate:Vt,inflate:Zt,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Zt(e,t)},ungzip:Zt},er=De,tr=r,rr=Wt,or=Qt,nr=Jt,ir=Yt,sr=Xt,ar=$t,ur=t,cr={Deflate:De,deflate:r,deflateRaw:Wt,gzip:Qt,Inflate:Jt,inflate:Yt,inflateRaw:Xt,ungzip:$t,constants:t}},function(e,t,r){"use strict";r.r(t),r.d(t,"ZIM",(function(){return Ft}));var o=r(1),n=r(7),i=r.n(n),s=(n=r(8),r.n(n)),a=(n=r(9),r.n(n)),u=(n=r(17),r.n(n)),c=(n=r(6),r.n(n)),l={d:(e,t)=>{for(var r in t)l.o(t,r)&&!l.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},p=(((e,t,r)=>{function o(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function n(e,t){return e&t}function i(e,t){return e|t}function s(e,t){return e^t}function a(e,t){return e&~t}r.d(t,{default:()=>ie});var u,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function l(e){for(var t,r="",o=0;o+3<=e.length;o+=3)t=parseInt(e.substring(o,o+3),16),r+=c.charAt(t>>6)+c.charAt(63&t);for(o+1==e.length?(t=parseInt(e.substring(o,o+1),16),r+=c.charAt(t<<2)):o+2==e.length&&(t=parseInt(e.substring(o,o+2),16),r+=c.charAt(t>>2)+c.charAt((3&t)<<4));0<(3&r.length);)r+="=";return r}function p(e){for(var t="",r=0,n=0,i=0;i<e.length&&"="!=e.charAt(i);++i){var s=c.indexOf(e.charAt(i));s<0||(r=0==r?(t+=o(s>>2),n=3&s,1):1==r?(t+=o(n<<2|s>>4),n=15&s,2):2==r?(t=(t+=o(n))+o(s>>2),n=3&s,3):(t=(t+=o(n<<2|s>>4))+o(15&s),0))}return 1==r&&(t+=o(n<<2)),t}var h,d={decode:function(e){if(void 0===h){var t="= \f\n\r\t\u2028\u2029";for(h=Object.create(null),i=0;i<64;++i)h["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i)]=i;for(h["-"]=62,h._=63,i=0;i<t.length;++i)h[t.charAt(i)]=-1}for(var r=[],o=0,n=0,i=0;i<e.length;++i){var s=e.charAt(i);if("="==s)break;if(-1!=(s=h[s])){if(void 0===s)throw new Error("Illegal character at offset "+i);o|=s,4<=++n?(r[r.length]=o>>16,r[r.length]=o>>8&255,r[r.length]=255&o,n=o=0):o<<=6}}switch(n){case 1:throw new Error("Base64 encoding incomplete: at least 2 bits missing");case 2:r[r.length]=o>>10;break;case 3:r[r.length]=o>>16,r[r.length]=o>>8&255}return r},re:/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,unarmor:function(e){var t=d.re.exec(e);if(t)if(t[1])e=t[1];else{if(!t[2])throw new Error("RegExp out of sync");e=t[2]}return d.decode(e)}},f=(_.prototype.mulAdd=function(e,t){for(var r,o=this.buf,n=o.length,i=0;i<n;++i)(r=o[i]*e+t)<1e13?t=0:r-=1e13*(t=0|r/1e13),o[i]=r;0<t&&(o[i]=t)},_.prototype.sub=function(e){for(var t,r=this.buf,o=r.length,n=0;n<o;++n)e=(t=r[n]-e)<0?(t+=1e13,1):0,r[n]=t;for(;0===r[r.length-1];)r.pop()},_.prototype.toString=function(e){if(10!=(e||10))throw new Error("only base 10 is supported");for(var t=this.buf,r=t[t.length-1].toString(),o=t.length-2;0<=o;--o)r+=(1e13+t[o]).toString().substring(1);return r},_.prototype.valueOf=function(){for(var e=this.buf,t=0,r=e.length-1;0<=r;--r)t=1e13*t+e[r];return t},_.prototype.simplify=function(){var e=this.buf;return 1==e.length?e[0]:this},_),g=/^(\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,m=/^(\d\d\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/;function _(e){this.buf=[+e||0]}function y(e,t){return e.length>t?e.substring(0,t)+"":e}L.prototype.get=function(e){if((e=void 0===e?this.pos++:e)>=this.enc.length)throw new Error("Requesting byte offset "+e+" on a stream of length "+this.enc.length);return"string"==typeof this.enc?this.enc.charCodeAt(e):this.enc[e]},L.prototype.hexByte=function(e){return this.hexDigits.charAt(e>>4&15)+this.hexDigits.charAt(15&e)},L.prototype.hexDump=function(e,t,r){for(var o="",n=e;n<t;++n)if(o+=this.hexByte(this.get(n)),!0!==r)switch(15&n){case 7:o+="  ";break;case 15:o+="\n";break;default:o+=" "}return o},L.prototype.isASCII=function(e,t){for(var r=e;r<t;++r){var o=this.get(r);if(o<32||176<o)return!1}return!0},L.prototype.parseStringISO=function(e,t){for(var r="",o=e;o<t;++o)r+=String.fromCharCode(this.get(o));return r},L.prototype.parseStringUTF=function(e,t){for(var r="",o=e;o<t;){var n=this.get(o++);r+=n<128?String.fromCharCode(n):191<n&&n<224?String.fromCharCode((31&n)<<6|63&this.get(o++)):String.fromCharCode((15&n)<<12|(63&this.get(o++))<<6|63&this.get(o++))}return r},L.prototype.parseStringBMP=function(e,t){for(var r,o,n="",i=e;i<t;)r=this.get(i++),o=this.get(i++),n+=String.fromCharCode(r<<8|o);return n},L.prototype.parseTime=function(e,t,r){return e=this.parseStringISO(e,t),(t=(r?g:m).exec(e))?(r&&(t[1]=+t[1],t[1]+=+t[1]<70?2e3:1900),e=t[1]+"-"+t[2]+"-"+t[3]+" "+t[4],t[5]&&(e+=":"+t[5],t[6]&&(e+=":"+t[6],t[7]&&(e+="."+t[7]))),t[8]&&(e+=" UTC","Z"!=t[8]&&(e+=t[8],t[9]&&(e+=":"+t[9]))),e):"Unrecognized time: "+e},L.prototype.parseInteger=function(e,t){for(var r,o=this.get(e),n=127<o,i=n?255:0,s="";o==i&&++e<t;)o=this.get(e);if(0==(r=t-e))return n?-1:0;if(4<r){for(s=o,r<<=3;0==(128&(+s^i));)s=+s<<1,--r;s="("+r+" bit)\n"}n&&(o-=256);for(var a=new f(o),u=e+1;u<t;++u)a.mulAdd(256,this.get(u));return s+a.toString()},L.prototype.parseBitString=function(e,t,r){for(var o=this.get(e),n="("+((t-e-1<<3)-o)+" bit)\n",i="",s=e+1;s<t;++s){for(var a=this.get(s),u=s==t-1?o:0,c=7;u<=c;--c)i+=a>>c&1?"1":"0";if(i.length>r)return n+y(i,r)}return n+i},L.prototype.parseOctetString=function(e,t,r){if(this.isASCII(e,t))return y(this.parseStringISO(e,t),r);var o=t-e,n="("+o+" byte)\n";o>(r/=2)&&(t=e+r);for(var i=e;i<t;++i)n+=this.hexByte(this.get(i));return r<o&&(n+=""),n},L.prototype.parseOID=function(e,t,r){for(var o="",n=new f,i=0,s=e;s<t;++s){var a=this.get(s);if(n.mulAdd(128,127&a),i+=7,!(128&a)){if(""===o?o=(n=n.simplify())instanceof f?(n.sub(80),"2."+n.toString()):(a=n<80?n<40?0:1:2)+"."+(n-40*a):o+="."+n.toString(),o.length>r)return y(o,r);n=new f,i=0}}return 0<i&&(o+=".incomplete"),o};var b=L,v=(q.prototype.typeName=function(){switch(this.tag.tagClass){case 0:switch(this.tag.tagNumber){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString"}return"Universal_"+this.tag.tagNumber.toString();case 1:return"Application_"+this.tag.tagNumber.toString();case 2:return"["+this.tag.tagNumber.toString()+"]";case 3:return"Private_"+this.tag.tagNumber.toString()}},q.prototype.content=function(e){if(void 0===this.tag)return null;void 0===e&&(e=1/0);var t=this.posContent(),r=Math.abs(this.length);if(!this.tag.isUniversal())return null!==this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(t,t+r,e);switch(this.tag.tagNumber){case 1:return 0===this.stream.get(t)?"false":"true";case 2:return this.stream.parseInteger(t,t+r);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(t,t+r,e);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(t,t+r,e);case 6:return this.stream.parseOID(t,t+r,e);case 16:case 17:return null!==this.sub?"("+this.sub.length+" elem)":"(no elem)";case 12:return y(this.stream.parseStringUTF(t,t+r),e);case 18:case 19:case 20:case 21:case 22:case 26:return y(this.stream.parseStringISO(t,t+r),e);case 30:return y(this.stream.parseStringBMP(t,t+r),e);case 23:case 24:return this.stream.parseTime(t,t+r,23==this.tag.tagNumber)}return null},q.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null===this.sub?"null":this.sub.length)+"]"},q.prototype.toPrettyString=function(e){var t=(e=void 0===e?"":e)+this.typeName()+" @"+this.stream.pos;if(0<=this.length&&(t+="+"),t+=this.length,this.tag.tagConstructed?t+=" (constructed)":!this.tag.isUniversal()||3!=this.tag.tagNumber&&4!=this.tag.tagNumber||null===this.sub||(t+=" (encapsulates)"),t+="\n",null!==this.sub){e+="  ";for(var r=0,o=this.sub.length;r<o;++r)t+=this.sub[r].toPrettyString(e)}return t},q.prototype.posStart=function(){return this.stream.pos},q.prototype.posContent=function(){return this.stream.pos+this.header},q.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},q.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},q.decodeLength=function(e){var t=127&(r=e.get());if(t==r)return t;if(6<t)throw new Error("Length over 48 bits not supported at position "+(e.pos-1));if(0==t)return null;for(var r=0,o=0;o<t;++o)r=256*r+e.get();return r},q.prototype.getHexStringValue=function(){var e=this.toHexString(),t=2*this.header,r=2*this.length;return e.substr(t,r)},q.decode=function(e){function t(){var e=[];if(null!==n){for(var t=i+n;r.pos<t;)e[e.length]=q.decode(r);if(r.pos!=t)throw new Error("Content size is not correct for container starting at offset "+i)}else try{for(;;){var o=q.decode(r);if(o.tag.isEOC())break;e[e.length]=o}n=i-r.pos}catch(e){throw new Error("Exception while decoding undefined length content: "+e)}return e}var r=e instanceof b?e:new b(e,0),o=(e=new b(r),new w(r)),n=q.decodeLength(r),i=r.pos,s=i-e.pos,a=null;if(o.tagConstructed)a=t();else if(o.isUniversal()&&(3==o.tagNumber||4==o.tagNumber))try{if(3==o.tagNumber&&0!=r.get())throw new Error("BIT STRINGs with unused bits cannot encapsulate.");a=t();for(var u=0;u<a.length;++u)if(a[u].tag.isEOC())throw new Error("EOC is not supposed to be actual content.")}catch(e){a=null}if(null===a){if(null===n)throw new Error("We can't skip over an invalid tag with undefined length at offset "+i);r.pos=i+Math.abs(n)}return new q(e,s,n,o,a)},q),w=(T.prototype.isUniversal=function(){return 0===this.tagClass},T.prototype.isEOC=function(){return 0===this.tagClass&&0===this.tagNumber},T),k=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],M=(1<<26)/k[k.length-1],I=(P.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,i=!1,s="",a=this.t,u=this.DB-a*this.DB%t;if(0<a--)for(u<this.DB&&0<(r=this[a]>>u)&&(i=!0,s=o(r));0<=a;)u<t?(r=(this[a]&(1<<u)-1)<<t-u,r|=this[--a]>>(u+=this.DB-t)):(r=this[a]>>(u-=t)&n,u<=0&&(u+=this.DB,--a)),(i=0<r||i)&&(s+=o(r));return i?s:"0"},P.prototype.negate=function(){var e=B();return P.ZERO.subTo(this,e),e},P.prototype.abs=function(){return this.s<0?this.negate():this},P.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;0<=--r;)if(0!=(t=this[r]-e[r]))return t;return 0},P.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+H(this[this.t-1]^this.s&this.DM)},P.prototype.mod=function(e){var t=B();return this.abs().divRemTo(e,null,t),this.s<0&&0<t.compareTo(P.ZERO)&&e.subTo(t,t),t},P.prototype.modPowInt=function(e,t){return t=new(e<256||t.isEven()?D:C)(t),this.exp(e,t)},P.prototype.clone=function(){var e=B();return this.copyTo(e),e},P.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},P.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},P.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},P.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},P.prototype.toByteArray=function(){var e=this.t,t=[];t[0]=this.s;var r,o=this.DB-e*this.DB%8,n=0;if(0<e--)for(o<this.DB&&(r=this[e]>>o)!=(this.s&this.DM)>>o&&(t[n++]=r|this.s<<this.DB-o);0<=e;)o<8?(r=(this[e]&(1<<o)-1)<<8-o,r|=this[--e]>>(o+=this.DB-8)):(r=this[e]>>(o-=8)&255,o<=0&&(o+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==n&&(128&this.s)!=(128&r)&&++n,(0<n||r!=this.s)&&(t[n++]=r);return t},P.prototype.equals=function(e){return 0==this.compareTo(e)},P.prototype.min=function(e){return this.compareTo(e)<0?this:e},P.prototype.max=function(e){return 0<this.compareTo(e)?this:e},P.prototype.and=function(e){var t=B();return this.bitwiseTo(e,n,t),t},P.prototype.or=function(e){var t=B();return this.bitwiseTo(e,i,t),t},P.prototype.xor=function(e){var t=B();return this.bitwiseTo(e,s,t),t},P.prototype.andNot=function(e){var t=B();return this.bitwiseTo(e,a,t),t},P.prototype.not=function(){for(var e=B(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},P.prototype.shiftLeft=function(e){var t=B();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},P.prototype.shiftRight=function(e){var t=B();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},P.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+function(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}(this[e]);return this.s<0?this.t*this.DB:-1},P.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=function(e){for(var t=0;0!=e;)e&=e-1,++t;return t}(this[r]^t);return e},P.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},P.prototype.setBit=function(e){return this.changeBit(e,i)},P.prototype.clearBit=function(e){return this.changeBit(e,a)},P.prototype.flipBit=function(e){return this.changeBit(e,s)},P.prototype.add=function(e){var t=B();return this.addTo(e,t),t},P.prototype.subtract=function(e){var t=B();return this.subTo(e,t),t},P.prototype.multiply=function(e){var t=B();return this.multiplyTo(e,t),t},P.prototype.divide=function(e){var t=B();return this.divRemTo(e,t,null),t},P.prototype.remainder=function(e){var t=B();return this.divRemTo(e,null,t),t},P.prototype.divideAndRemainder=function(e){var t=B(),r=B();return this.divRemTo(e,t,r),[t,r]},P.prototype.modPow=function(e,t){var r=e.bitLength(),o=F(1);if(r<=0)return o;var n=r<18?1:r<48?3:r<144?4:r<768?5:6,i=new(r<8?D:t.isEven()?R:C)(t),s=[],a=3,u=n-1,c=(1<<n)-1;if(s[1]=i.convert(this),1<n){var l=B();for(i.sqrTo(s[1],l);a<=c;)s[a]=B(),i.mulTo(l,s[a-2],s[a]),a+=2}var p,h,d=e.t-1,f=!0,g=B();for(r=H(e[d])-1;0<=d;){for(u<=r?p=e[d]>>r-u&c:(p=(e[d]&(1<<r+1)-1)<<u-r,0<d&&(p|=e[d-1]>>this.DB+r-u)),a=n;0==(1&p);)p>>=1,--a;if((r-=a)<0&&(r+=this.DB,--d),f)s[p].copyTo(o),f=!1;else{for(;1<a;)i.sqrTo(o,g),i.sqrTo(g,o),a-=2;0<a?i.sqrTo(o,g):(h=o,o=g,g=h),i.mulTo(g,s[p],o)}for(;0<=d&&0==(e[d]&1<<r);)i.sqrTo(o,g),h=o,o=g,g=h,--r<0&&(r=this.DB-1,--d)}return i.revert(o)},P.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return P.ZERO;for(var r=e.clone(),o=this.clone(),n=F(1),i=F(0),s=F(0),a=F(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(n.isEven()&&i.isEven()||(n.addTo(this,n),i.subTo(e,i)),n.rShiftTo(1,n)):i.isEven()||i.subTo(e,i),i.rShiftTo(1,i);for(;o.isEven();)o.rShiftTo(1,o),t?(s.isEven()&&a.isEven()||(s.addTo(this,s),a.subTo(e,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);0<=r.compareTo(o)?(r.subTo(o,r),t&&n.subTo(s,n),i.subTo(a,i)):(o.subTo(r,o),t&&s.subTo(n,s),a.subTo(i,a))}return 0!=o.compareTo(P.ONE)?P.ZERO:0<=a.compareTo(e)?a.subtract(e):a.signum()<0?(a.addTo(e,a),a.signum()<0?a.add(e):a):a},P.prototype.pow=function(e){return this.exp(e,new S)},P.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone(),o=(t.compareTo(r)<0&&(e=t,t=r,r=e),t.getLowestSetBit());if((e=r.getLowestSetBit())<0)return t;for(0<(e=o<e?o:e)&&(t.rShiftTo(e,t),r.rShiftTo(e,r));0<t.signum();)0<(o=t.getLowestSetBit())&&t.rShiftTo(o,t),0<(o=r.getLowestSetBit())&&r.rShiftTo(o,r),0<=t.compareTo(r)?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return 0<e&&r.lShiftTo(e,r),r},P.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r[0]<=k[k.length-1]){for(t=0;t<k.length;++t)if(r[0]==k[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<k.length;){for(var o=k[t],n=t+1;n<k.length&&o<M;)o*=k[n++];for(o=r.modInt(o);t<n;)if(o%k[t++]==0)return!1}return r.millerRabin(e)},P.prototype.copyTo=function(e){for(var t=this.t-1;0<=t;--t)e[t]=this[t];e.t=this.t,e.s=this.s},P.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,0<e?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},P.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var o=e.length,n=!1,i=0;0<=--o;){var s=8==r?255&+e[o]:z(e,o);s<0?"-"==e.charAt(o)&&(n=!0):(n=!1,0==i?this[this.t++]=s:i+r>this.DB?(this[this.t-1]|=(s&(1<<this.DB-i)-1)<<i,this[this.t++]=s>>this.DB-i):this[this.t-1]|=s<<i,(i+=r)>=this.DB&&(i-=this.DB))}8==r&&0!=(128&+e[0])&&(this.s=-1,0<i&&(this[this.t-1]|=(1<<this.DB-i)-1<<i)),this.clamp(),n&&P.ZERO.subTo(this,this)},P.prototype.clamp=function(){for(var e=this.s&this.DM;0<this.t&&this[this.t-1]==e;)--this.t},P.prototype.dlShiftTo=function(e,t){for(var r=this.t-1;0<=r;--r)t[r+e]=this[r];for(r=e-1;0<=r;--r)t[r]=0;t.t=this.t+e,t.s=this.s},P.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s},P.prototype.lShiftTo=function(e,t){for(var r=e%this.DB,o=this.DB-r,n=(1<<o)-1,i=Math.floor(e/this.DB),s=this.s<<r&this.DM,a=this.t-1;0<=a;--a)t[a+i+1]=this[a]>>o|s,s=(this[a]&n)<<r;for(a=i-1;0<=a;--a)t[a]=0;t[i]=s,t.t=this.t+i+1,t.s=this.s,t.clamp()},P.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var o=e%this.DB,n=this.DB-o,i=(1<<o)-1;t[0]=this[r]>>o;for(var s=r+1;s<this.t;++s)t[s-r-1]|=(this[s]&i)<<n,t[s-r]=this[s]>>o;0<o&&(t[this.t-r-1]|=(this.s&i)<<n),t.t=this.t-r,t.clamp()}},P.prototype.subTo=function(e,t){for(var r=0,o=0,n=Math.min(e.t,this.t);r<n;)o+=this[r]-e[r],t[r++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o-=e.s;r<this.t;)o+=this[r],t[r++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;r<e.t;)o-=e[r],t[r++]=o&this.DM,o>>=this.DB;o-=e.s}t.s=o<0?-1:0,o<-1?t[r++]=this.DV+o:0<o&&(t[r++]=o),t.t=r,t.clamp()},P.prototype.multiplyTo=function(e,t){var r=this.abs(),o=e.abs(),n=r.t;for(t.t=n+o.t;0<=--n;)t[n]=0;for(n=0;n<o.t;++n)t[n+r.t]=r.am(0,o[n],t,n,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&P.ZERO.subTo(t,t)},P.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;0<=--r;)e[r]=0;for(r=0;r<t.t-1;++r){var o=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,o,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}0<e.t&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()},P.prototype.divRemTo=function(e,t,r){if(!((c=e.abs()).t<=0)){var o=this.abs();if(o.t<c.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=B());var n=B(),i=this.s,s=(e=e.s,this.DB-H(c[c.t-1])),a=(0<s?(c.lShiftTo(s,n),o.lShiftTo(s,r)):(c.copyTo(n),o.copyTo(r)),n.t),u=n[a-1];if(0!=u){var c=u*(1<<this.F1)+(1<a?n[a-2]>>this.F2:0),l=this.FV/c,p=(1<<this.F1)/c,h=1<<this.F2,d=r.t,f=d-a,g=null==t?B():t;for(n.dlShiftTo(f,g),0<=r.compareTo(g)&&(r[r.t++]=1,r.subTo(g,r)),P.ONE.dlShiftTo(a,g),g.subTo(n,n);n.t<a;)n[n.t++]=0;for(;0<=--f;){var m=r[--d]==u?this.DM:Math.floor(r[d]*l+(r[d-1]+h)*p);if((r[d]+=n.am(0,m,r,f,0,a))<m)for(n.dlShiftTo(f,g),r.subTo(g,r);r[d]<--m;)r.subTo(g,r)}null!=t&&(r.drShiftTo(a,t),i!=e&&P.ZERO.subTo(t,t)),r.t=a,r.clamp(),0<s&&r.rShiftTo(s,r),i<0&&P.ZERO.subTo(r,r)}}},P.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return 0<(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)?this.DV-t:-t},P.prototype.isEven=function(){return 0==(0<this.t?1&this[0]:this.s)},P.prototype.exp=function(e,t){if(4294967295<e||e<1)return P.ONE;var r,o=B(),n=B(),i=t.convert(this),s=H(e)-1;for(i.copyTo(o);0<=--s;)t.sqrTo(o,n),0<(e&1<<s)?t.mulTo(n,i,o):(r=o,o=n,n=r);return t.revert(o)},P.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},P.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||36<e)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),o=F(r),n=B(),i=B(),s="";for(this.divRemTo(o,n,i);0<n.signum();)s=(r+i.intValue()).toString(e).substr(1)+s,n.divRemTo(o,n,i);return i.intValue().toString(e)+s},P.prototype.fromRadix=function(e,t){this.fromInt(0);for(var r=this.chunkSize(t=null==t?10:t),o=Math.pow(t,r),n=!1,i=0,s=0,a=0;a<e.length;++a){var u=z(e,a);u<0?"-"==e.charAt(a)&&0==this.signum()&&(n=!0):(s=t*s+u,++i>=r&&(this.dMultiply(o),this.dAddOffset(s,0),s=i=0))}0<i&&(this.dMultiply(Math.pow(t,i)),this.dAddOffset(s,0)),n&&P.ZERO.subTo(this,this)},P.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(P.ONE.shiftLeft(e-1),i,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(P.ONE.shiftLeft(e-1),this);else{var o=7&e;(r=[]).length=1+(e>>3),t.nextBytes(r),0<o?r[0]&=(1<<o)-1:r[0]=0,this.fromString(r,256)}},P.prototype.bitwiseTo=function(e,t,r){for(var o,n=Math.min(e.t,this.t),i=0;i<n;++i)r[i]=t(this[i],e[i]);if(e.t<this.t){for(o=e.s&this.DM,i=n;i<this.t;++i)r[i]=t(this[i],o);r.t=this.t}else{for(o=this.s&this.DM,i=n;i<e.t;++i)r[i]=t(o,e[i]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},P.prototype.changeBit=function(e,t){return e=P.ONE.shiftLeft(e),this.bitwiseTo(e,t,e),e},P.prototype.addTo=function(e,t){for(var r=0,o=0,n=Math.min(e.t,this.t);r<n;)o+=this[r]+e[r],t[r++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o+=e.s;r<this.t;)o+=this[r],t[r++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;r<e.t;)o+=e[r],t[r++]=o&this.DM,o>>=this.DB;o+=e.s}t.s=o<0?-1:0,0<o?t[r++]=o:o<-1&&(t[r++]=this.DV+o),t.t=r,t.clamp()},P.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},P.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},P.prototype.multiplyLowerTo=function(e,t,r){var o=Math.min(this.t+e.t,t);for(r.s=0,r.t=o;0<o;)r[--o]=0;for(var n=r.t-this.t;o<n;++o)r[o+this.t]=this.am(0,e[o],r,o,0,this.t);for(n=Math.min(e.t,t);o<n;++o)this.am(0,e[o],r,o,0,t-o);r.clamp()},P.prototype.multiplyUpperTo=function(e,t,r){var o=r.t=this.t+e.t- --t;for(r.s=0;0<=--o;)r[o]=0;for(o=Math.max(t-this.t,0);o<e.t;++o)r[this.t+o-t]=this.am(t-o,e[o],r,0,0,this.t+o-t);r.clamp(),r.drShiftTo(1,r)},P.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(0<this.t)if(0==t)r=this[0]%e;else for(var o=this.t-1;0<=o;--o)r=(t*r+this[o])%e;return r},P.prototype.millerRabin=function(e){var t=this.subtract(P.ONE),r=t.getLowestSetBit();if(r<=0)return!1;var o=t.shiftRight(r);(e=e+1>>1)>k.length&&(e=k.length);for(var n=B(),i=0;i<e;++i){n.fromInt(k[Math.floor(Math.random()*k.length)]);var s=n.modPow(o,this);if(0!=s.compareTo(P.ONE)&&0!=s.compareTo(t)){for(var a=1;a++<r&&0!=s.compareTo(t);)if(0==(s=s.modPowInt(2,this)).compareTo(P.ONE))return!1;if(0!=s.compareTo(t))return!1}}return!0},P.prototype.square=function(){var e=B();return this.squareTo(e),e},P.prototype.gcda=function(e,t){var r,o=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone(),i=(o.compareTo(n)<0&&(e=o,o=n,n=e),o.getLowestSetBit()),s=n.getLowestSetBit();s<0?t(o):(0<(s=i<s?i:s)&&(o.rShiftTo(s,o),n.rShiftTo(s,n)),r=function(){0<(i=o.getLowestSetBit())&&o.rShiftTo(i,o),0<(i=n.getLowestSetBit())&&n.rShiftTo(i,n),0<=o.compareTo(n)?(o.subTo(n,o),o.rShiftTo(1,o)):(n.subTo(o,n),n.rShiftTo(1,n)),0<o.signum()?setTimeout(r,0):(0<s&&n.lShiftTo(s,n),setTimeout((function(){t(n)}),0))},setTimeout(r,10))},P.prototype.fromNumberAsync=function(e,t,r,o){var n,s,a;"number"==typeof t?e<2?this.fromInt(1):(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(P.ONE.shiftLeft(e-1),i,this),this.isEven()&&this.dAddOffset(1,0),n=this,s=function(){n.dAddOffset(2,0),n.bitLength()>e&&n.subTo(P.ONE.shiftLeft(e-1),n),n.isProbablePrime(t)?setTimeout((function(){o()}),0):setTimeout(s,0)},setTimeout(s,0)):(r=7&e,(a=[]).length=1+(e>>3),t.nextBytes(a),0<r?a[0]&=(1<<r)-1:a[0]=0,this.fromString(a,256))},P),S=(x.prototype.convert=function(e){return e},x.prototype.revert=function(e){return e},x.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},x.prototype.sqrTo=function(e,t){e.squareTo(t)},x),D=(E.prototype.convert=function(e){return e.s<0||0<=e.compareTo(this.m)?e.mod(this.m):e},E.prototype.revert=function(e){return e},E.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},E.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},E.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},E),C=(O.prototype.convert=function(e){var t=B();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&0<t.compareTo(I.ZERO)&&this.m.subTo(t,t),t},O.prototype.revert=function(e){var t=B();return e.copyTo(t),this.reduce(t),t},O.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],o=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=t+this.m.t]+=this.m.am(0,o,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),0<=e.compareTo(this.m)&&e.subTo(this.m,e)},O.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},O.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},O),R=(A.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=B();return e.copyTo(t),this.reduce(t),t},A.prototype.revert=function(e){return e},A.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);0<=e.compareTo(this.m);)e.subTo(this.m,e)},A.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},A.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},A);function A(e){this.m=e,this.r2=B(),this.q3=B(),I.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e)}function O(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function E(e){this.m=e}function x(){}function P(e,t,r){null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function T(e){var t=e.get();if(this.tagClass=t>>6,this.tagConstructed=0!=(32&t),this.tagNumber=31&t,31==this.tagNumber){for(var r=new f;t=e.get(),r.mulAdd(128,127&t),128&t;);this.tagNumber=r.simplify()}}function q(e,t,r,o,n){if(!(o instanceof w))throw new Error("Invalid tag value.");this.stream=e,this.header=t,this.length=r,this.tag=o,this.sub=n}function L(e,t){this.hexDigits="0123456789ABCDEF",e instanceof L?(this.enc=e.enc,this.pos=e.pos):(this.enc=e,this.pos=t)}function B(){return new I(null)}function G(e,t){return new I(e,t)}t=(r="undefined"!=typeof navigator)&&"Microsoft Internet Explorer"==navigator.appName?(I.prototype.am=function(e,t,r,o,n,i){for(var s=32767&t,a=t>>15;0<=--i;){var u=32767&this[e],c=this[e++]>>15,l=a*u+c*s;n=((u=s*u+((32767&l)<<15)+r[o]+(1073741823&n))>>>30)+(l>>>15)+a*c+(n>>>30),r[o++]=1073741823&u}return n},30):r&&"Netscape"!=navigator.appName?(I.prototype.am=function(e,t,r,o,n,i){for(;0<=--i;){var s=t*this[e++]+r[o]+n;n=Math.floor(s/67108864),r[o++]=67108863&s}return n},26):(I.prototype.am=function(e,t,r,o,n,i){for(var s=16383&t,a=t>>14;0<=--i;){var u=16383&this[e],c=this[e++]>>14,l=a*u+c*s;n=((u=s*u+((16383&l)<<14)+r[o]+n)>>28)+(l>>14)+a*c,r[o++]=268435455&u}return n},28),I.prototype.DB=t,I.prototype.DM=(1<<t)-1,I.prototype.DV=1<<t,I.prototype.FV=Math.pow(2,52),I.prototype.F1=52-t,I.prototype.F2=2*t-52;for(var N=[],j="0".charCodeAt(0),U=0;U<=9;++U)N[j++]=U;for(j="a".charCodeAt(0),U=10;U<36;++U)N[j++]=U;for(j="A".charCodeAt(0),U=10;U<36;++U)N[j++]=U;function z(e,t){return null==(e=N[e.charCodeAt(t)])?-1:e}function F(e){var t=B();return t.fromInt(e),t}function H(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}I.ZERO=F(0),I.ONE=F(1),W.prototype.init=function(e){for(var t,r,o=0;o<256;++o)this.S[o]=o;for(o=t=0;o<256;++o)t=t+this.S[o]+e[o%e.length]&255,r=this.S[o],this.S[o]=this.S[t],this.S[t]=r;this.i=0,this.j=0},W.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]};var K,V=W,Z=null;function W(){this.i=0,this.j=0,this.S=[]}Z=[];var Q=0,J=void 0;if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues){var Y=new Uint32Array(256);for(window.crypto.getRandomValues(Y),J=0;J<Y.length;++J)Z[Q++]=255&Y[J]}te.prototype.nextBytes=function(e){for(var t=0;t<e.length;++t)e[t]=function(){if(null==K){for(K=new V;Q<256;){var e=Math.floor(65536*Math.random());Z[Q++]=255&e}for(K.init(Z),Q=0;Q<Z.length;++Q)Z[Q]=0;Q=0}return K.next()}()};var X=te,$=(r=(ee.prototype.doPublic=function(e){return e.modPowInt(this.e,this.n)},ee.prototype.doPrivate=function(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),r=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(r)<0;)t=t.add(this.p);return t.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r)},ee.prototype.setPublic=function(e,t){null!=e&&null!=t&&0<e.length&&0<t.length&&(this.n=G(e,16),this.e=parseInt(t,16))},ee.prototype.encrypt=function(e){var t=this.n.bitLength()+7>>3;if(null==(e=function(e,t){if(t<e.length+11)return null;for(var r=[],o=e.length-1;0<=o&&0<t;){var n=e.charCodeAt(o--);n<128?r[--t]=n:127<n&&n<2048?(r[--t]=63&n|128,r[--t]=n>>6|192):(r[--t]=63&n|128,r[--t]=n>>6&63|128,r[--t]=n>>12|224)}r[--t]=0;for(var i=new X,s=[];2<t;){for(s[0]=0;0==s[0];)i.nextBytes(s);r[--t]=s[0]}return r[--t]=2,r[--t]=0,new I(r)}(e,t)))return null;if(null==(e=this.doPublic(e)))return null;for(var r=e.toString(16),o=r.length,n=0;n<2*t-o;n++)r="0"+r;return r},ee.prototype.setPrivate=function(e,t,r){null!=e&&null!=t&&0<e.length&&0<t.length&&(this.n=G(e,16),this.e=parseInt(t,16),this.d=G(r,16))},ee.prototype.setPrivateEx=function(e,t,r,o,n,i,s,a){null!=e&&null!=t&&0<e.length&&0<t.length&&(this.n=G(e,16),this.e=parseInt(t,16),this.d=G(r,16),this.p=G(o,16),this.q=G(n,16),this.dmp1=G(i,16),this.dmq1=G(s,16),this.coeff=G(a,16))},ee.prototype.generate=function(e,t){var r=new X,o=e>>1;this.e=parseInt(t,16);for(var n=new I(t,16);;){for(;this.p=new I(e-o,1,r),0!=this.p.subtract(I.ONE).gcd(n).compareTo(I.ONE)||!this.p.isProbablePrime(10););for(;this.q=new I(o,1,r),0!=this.q.subtract(I.ONE).gcd(n).compareTo(I.ONE)||!this.q.isProbablePrime(10););this.p.compareTo(this.q)<=0&&(i=this.p,this.p=this.q,this.q=i);var i=this.p.subtract(I.ONE),s=this.q.subtract(I.ONE),a=i.multiply(s);if(0==a.gcd(n).compareTo(I.ONE)){this.n=this.p.multiply(this.q),this.d=n.modInverse(a),this.dmp1=this.d.mod(i),this.dmq1=this.d.mod(s),this.coeff=this.q.modInverse(this.p);break}}},ee.prototype.decrypt=function(e){if(e=G(e,16),null==(e=this.doPrivate(e)))return null;for(var t=this.n.bitLength()+7>>3,r=e.toByteArray(),o=0;o<r.length&&0==r[o];)++o;if(r.length-o!=t-1||2!=r[o])return null;for(++o;0!=r[o];)if(++o>=r.length)return null;for(var n="";++o<r.length;){var i=255&r[o];i<128?n+=String.fromCharCode(i):191<i&&i<224?(n+=String.fromCharCode((31&i)<<6|63&r[o+1]),++o):(n+=String.fromCharCode((15&i)<<12|(63&r[o+1])<<6|63&r[o+2]),o+=2)}return n},ee.prototype.generateAsync=function(e,t,r){var o=new X,n=e>>1,i=(this.e=parseInt(t,16),new I(t,16)),s=this,a=function(){var t=function(){s.p.compareTo(s.q)<=0&&(e=s.p,s.p=s.q,s.q=e);var e=s.p.subtract(I.ONE),t=s.q.subtract(I.ONE),o=e.multiply(t);0==o.gcd(i).compareTo(I.ONE)?(s.n=s.p.multiply(s.q),s.d=i.modInverse(o),s.dmp1=s.d.mod(e),s.dmq1=s.d.mod(t),s.coeff=s.q.modInverse(s.p),setTimeout((function(){r()}),0)):setTimeout(a,0)},u=function(){s.q=B(),s.q.fromNumberAsync(n,1,o,(function(){s.q.subtract(I.ONE).gcda(i,(function(e){0==e.compareTo(I.ONE)&&s.q.isProbablePrime(10)?setTimeout(t,0):setTimeout(u,0)}))}))};setTimeout((function t(){s.p=B(),s.p.fromNumberAsync(e-n,1,o,(function(){s.p.subtract(I.ONE).gcda(i,(function(e){0==e.compareTo(I.ONE)&&s.p.isProbablePrime(10)?setTimeout(u,0):setTimeout(t,0)}))}))}),0)};setTimeout(a,0)},ee.prototype.sign=function(e,t,r){return null==(r=function(e,t){if(t<e.length+22)return null;for(var r=t-e.length-6,o="",n=0;n<r;n+=2)o+="ff";return G("0001"+o+"00"+e,16)}(($[r]||"")+t(e).toString(),this.n.bitLength()/4))||null==(t=this.doPrivate(r))?null:0==(1&(e=t.toString(16)).length)?e:"0"+e},ee.prototype.verify=function(e,t,r){return t=G(t,16),null==(t=this.doPublic(t))?null:function(e){for(var t in $)if($.hasOwnProperty(t)){var r=(t=$[t]).length;if(e.substr(0,r)==t)return e.substr(r)}return e}(t.toString(16).replace(/^1f+00/,""))==r(e).toString()},ee),{md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",ripemd160:"3021300906052b2403020105000414"});function ee(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function te(){}(t={}).lang={extend:function(e,t,r){if(!t||!e)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");function o(){}if(o.prototype=t.prototype,e.prototype=new o,(e.prototype.constructor=e).superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t),r){for(var n in r)e.prototype[n]=r[n];t=function(){};var i=["toString","valueOf"];try{"undefined"!=typeof navigator&&/MSIE/.test(navigator.userAgent)&&(t=function(e,t){for(n=0;n<i.length;n+=1){var r=i[n],o=t[r];"function"==typeof o&&o!=Object.prototype[r]&&(e[r]=o)}})}catch(e){}t(e.prototype,r)}}};var re={};void 0!==re.asn1&&re.asn1||(re.asn1={}),re.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){return(e=e.toString(16)).length%2==1?"0"+e:e},this.bigIntToMinTwosComplementsHex=function(e){var t=e.toString(16);if("-"!=t.substr(0,1))t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t);else{var r=t.substr(1).length;r%2==1?r+=1:t.match(/^[0-7]/)||(r+=2);for(var o="",n=0;n<r;n++)o+="f";t=new I(o,16).xor(e).add(I.ONE).toString(16).replace(/^-/,"")}return t},this.getPEMStringFromHex=function(e,t){return hextopem(e,t)},this.newObject=function(e){var t,r=(t=re.asn1).DERBoolean,o=t.DERInteger,n=t.DERBitString,i=t.DEROctetString,s=t.DERNull,a=t.DERObjectIdentifier,u=t.DEREnumerated,c=t.DERUTF8String,l=t.DERNumericString,p=t.DERPrintableString,h=t.DERTeletexString,d=t.DERIA5String,f=t.DERUTCTime,g=t.DERGeneralizedTime,m=t.DERSequence,_=t.DERSet,y=t.DERTaggedObject,b=t.ASN1Util.newObject;if(1!=(t=Object.keys(e)).length)throw"key of param shall be only one.";if(t=t[0],-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+t+":"))throw"undefined key: "+t;if("bool"==t)return new r(e[t]);if("int"==t)return new o(e[t]);if("bitstr"==t)return new n(e[t]);if("octstr"==t)return new i(e[t]);if("null"==t)return new s(e[t]);if("oid"==t)return new a(e[t]);if("enum"==t)return new u(e[t]);if("utf8str"==t)return new c(e[t]);if("numstr"==t)return new l(e[t]);if("prnstr"==t)return new p(e[t]);if("telstr"==t)return new h(e[t]);if("ia5str"==t)return new d(e[t]);if("utctime"==t)return new f(e[t]);if("gentime"==t)return new g(e[t]);if("seq"==t){for(var v=e[t],w=[],k=0;k<v.length;k++){var M=b(v[k]);w.push(M)}return new m({array:w})}if("set"==t){for(v=e[t],w=[],k=0;k<v.length;k++)M=b(v[k]),w.push(M);return new _({array:w})}if("tag"==t){if(r=e[t],"[object Array]"===Object.prototype.toString.call(r)&&3==r.length)return o=b(r[2]),new y({tag:r[0],explicit:r[1],obj:o});if(n={},void 0!==r.explicit&&(n.explicit=r.explicit),void 0!==r.tag&&(n.tag=r.tag),void 0===r.obj)throw"obj shall be specified for 'tag'.";return n.obj=b(r.obj),new y(n)}},this.jsonToASN1HEX=function(e){return this.newObject(e).getEncodedHex()}},re.asn1.ASN1Util.oidHexToInt=function(e){for(var t="",r=parseInt(e.substr(0,2),16),o=(t=Math.floor(r/40)+"."+r%40,""),n=2;n<e.length;n+=2){var i=("00000000"+parseInt(e.substr(n,2),16).toString(2)).slice(-8);o+=i.substr(1,7),"0"==i.substr(0,1)&&(t=t+"."+new I(o,2).toString(10),o="")}return t},re.asn1.ASN1Util.oidIntToHex=function(e){function t(e){return 1==(e=e.toString(16)).length?"0"+e:e}if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var r="",o=e.split(".");r+=t(e=40*parseInt(o[0])+parseInt(o[1])),o.splice(0,2);for(var n=0;n<o.length;n++)r+=function(e){var r="",o=new I(e,10).toString(2),n=7-o.length%7;7==n&&(n=0);for(var i="",s=0;s<n;s++)i+="0";for(o=i+o,s=0;s<o.length-1;s+=7){var a=o.substr(s,7);s!=o.length-7&&(a="1"+a),r+=t(parseInt(a,2))}return r}(o[n]);return r},re.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+"".length+",v="+this.hV;var e=this.hV.length/2,t=e.toString(16);if(t.length%2==1&&(t="0"+t),e<128)return t;var r=t.length/2;if(15<r)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);return(128+r).toString(16)+t},this.getEncodedHex=function(){return null!=this.hTLV&&!this.isModified||(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},re.asn1.DERAbstractString=function(e){re.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=stohex(this.s)},this.setStringHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?this.setString(e):void 0!==e.str?this.setString(e.str):void 0!==e.hex&&this.setStringHex(e.hex))},t.lang.extend(re.asn1.DERAbstractString,re.asn1.ASN1Object),re.asn1.DERAbstractTime=function(e){re.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(e){return utc=e.getTime()+6e4*e.getTimezoneOffset(),new Date(utc)},this.formatDate=function(e,t,r){var o=this.zeroPadding,n=(e=this.localDateToUTC(e),String(e.getFullYear()));t=(n="utc"==t?n.substr(2,2):n)+o(String(e.getMonth()+1),2)+o(String(e.getDate()),2)+o(String(e.getHours()),2)+o(String(e.getMinutes()),2)+o(String(e.getSeconds()),2);return(t=!0===r&&0!=(n=e.getMilliseconds())?t+"."+o(String(n),3).replace(/[0]+$/,""):t)+"Z"},this.zeroPadding=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=stohex(e)},this.setByDateValue=function(e,t,r,o,n,i){e=new Date(Date.UTC(e,t-1,r,o,n,i,0)),this.setByDate(e)},this.getFreshValueHex=function(){return this.hV}},t.lang.extend(re.asn1.DERAbstractTime,re.asn1.ASN1Object),re.asn1.DERAbstractStructured=function(e){re.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array=e},this.appendASN1Object=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array.push(e)},this.asn1Array=new Array,void 0!==e&&void 0!==e.array&&(this.asn1Array=e.array)},t.lang.extend(re.asn1.DERAbstractStructured,re.asn1.ASN1Object),re.asn1.DERBoolean=function(){re.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},t.lang.extend(re.asn1.DERBoolean,re.asn1.ASN1Object),re.asn1.DERInteger=function(e){re.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=re.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){e=new I(String(e),10),this.setByBigInteger(e)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.bigint?this.setByBigInteger(e.bigint):void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},t.lang.extend(re.asn1.DERInteger,re.asn1.ASN1Object),re.asn1.DERBitString=function(e){var t;void 0!==e&&void 0!==e.obj&&(t=re.asn1.ASN1Util.newObject(e.obj),e.hex="00"+t.getEncodedHex()),re.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(e){this.hTLV=null,this.isModified=!0,this.hV=e},this.setUnusedBitsAndHexValue=function(e,t){if(e<0||7<e)throw"unused bits shall be from 0 to 7: u = "+e;e="0"+e,this.hTLV=null,this.isModified=!0,this.hV=e+t},this.setByBinaryString=function(e){var t=8-(e=e.replace(/0+$/,"")).length%8;8==t&&(t=0);for(var r=0;r<=t;r++)e+="0";var o="";for(r=0;r<e.length-1;r+=8){var n=e.substr(r,8);o+=n=1==(n=parseInt(n,2).toString(16)).length?"0"+n:n}this.hTLV=null,this.isModified=!0,this.hV="0"+t+o},this.setByBooleanArray=function(e){for(var t="",r=0;r<e.length;r++)1==e[r]?t+="1":t+="0";this.setByBinaryString(t)},this.newFalseArray=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=!1;return t},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):void 0!==e.hex?this.setHexValueIncludingUnusedBits(e.hex):void 0!==e.bin?this.setByBinaryString(e.bin):void 0!==e.array&&this.setByBooleanArray(e.array))},t.lang.extend(re.asn1.DERBitString,re.asn1.ASN1Object),re.asn1.DEROctetString=function(e){var t;void 0!==e&&void 0!==e.obj&&(t=re.asn1.ASN1Util.newObject(e.obj),e.hex=t.getEncodedHex()),re.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},t.lang.extend(re.asn1.DEROctetString,re.asn1.DERAbstractString),re.asn1.DERNull=function(){re.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},t.lang.extend(re.asn1.DERNull,re.asn1.ASN1Object),re.asn1.DERObjectIdentifier=function(e){var t=function(e){return 1==(e=e.toString(16)).length?"0"+e:e};re.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var r="",o=e.split(".");e=40*parseInt(o[0])+parseInt(o[1]);r+=t(e),o.splice(0,2);for(var n=0;n<o.length;n++)r+=function(e){var r="",o=new I(e,10).toString(2),n=7-o.length%7;7==n&&(n=0);for(var i="",s=0;s<n;s++)i+="0";for(o=i+o,s=0;s<o.length-1;s+=7){var a=o.substr(s,7);s!=o.length-7&&(a="1"+a),r+=t(parseInt(a,2))}return r}(o[n]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=r},this.setValueName=function(e){var t=re.asn1.x509.OID.name2oid(e);if(""===t)throw"DERObjectIdentifier oidName undefined: "+e;this.setValueOidString(t)},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e):void 0!==e.oid?this.setValueOidString(e.oid):void 0!==e.hex?this.setValueHex(e.hex):void 0!==e.name&&this.setValueName(e.name))},t.lang.extend(re.asn1.DERObjectIdentifier,re.asn1.ASN1Object),re.asn1.DEREnumerated=function(e){re.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=re.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){e=new I(String(e),10),this.setByBigInteger(e)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},t.lang.extend(re.asn1.DEREnumerated,re.asn1.ASN1Object),re.asn1.DERUTF8String=function(e){re.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},t.lang.extend(re.asn1.DERUTF8String,re.asn1.DERAbstractString),re.asn1.DERNumericString=function(e){re.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},t.lang.extend(re.asn1.DERNumericString,re.asn1.DERAbstractString),re.asn1.DERPrintableString=function(e){re.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},t.lang.extend(re.asn1.DERPrintableString,re.asn1.DERAbstractString),re.asn1.DERTeletexString=function(e){re.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},t.lang.extend(re.asn1.DERTeletexString,re.asn1.DERAbstractString),re.asn1.DERIA5String=function(e){re.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},t.lang.extend(re.asn1.DERIA5String,re.asn1.DERAbstractString),re.asn1.DERUTCTime=function(e){re.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{12}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date))},t.lang.extend(re.asn1.DERUTCTime,re.asn1.DERAbstractTime),re.asn1.DERGeneralizedTime=function(e){re.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.withMillis=!1,this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{14}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date),!0===e.millis&&(this.withMillis=!0))},t.lang.extend(re.asn1.DERGeneralizedTime,re.asn1.DERAbstractTime),re.asn1.DERSequence=function(e){re.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var e="",t=0;t<this.asn1Array.length;t++)e+=this.asn1Array[t].getEncodedHex();return this.hV=e,this.hV}},t.lang.extend(re.asn1.DERSequence,re.asn1.DERAbstractStructured),re.asn1.DERSet=function(e){re.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=new Array,t=0;t<this.asn1Array.length;t++){var r=this.asn1Array[t];e.push(r.getEncodedHex())}return 1==this.sortFlag&&e.sort(),this.hV=e.join(""),this.hV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},t.lang.extend(re.asn1.DERSet,re.asn1.DERAbstractStructured),re.asn1.DERTaggedObject=function(e){re.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(e,t,r){this.hT=t,this.isExplicit=e,this.asn1Object=r,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=r.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,t),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.tag&&(this.hT=e.tag),void 0!==e.explicit&&(this.isExplicit=e.explicit),void 0!==e.obj&&(this.asn1Object=e.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},t.lang.extend(re.asn1.DERTaggedObject,re.asn1.ASN1Object),oe=function(e,t){return(oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};var oe,ne=function(e){function t(r){var o=e.call(this)||this;return r&&("string"==typeof r?o.parseKey(r):(t.hasPrivateKeyProperty(r)||t.hasPublicKeyProperty(r))&&o.parsePropertiesFrom(r)),o}var r=t,o=e;if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=r}return oe(r,o),r.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n),t.prototype.parseKey=function(e){try{var t=0,r=0,o=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(e)?function(e){if(void 0===u){var t="0123456789ABCDEF",r=" \f\n\r\t\u2028\u2029";for(u={},s=0;s<16;++s)u[t.charAt(s)]=s;for(t=t.toLowerCase(),s=10;s<16;++s)u[t.charAt(s)]=s;for(s=0;s<r.length;++s)u[r.charAt(s)]=-1}for(var o=[],n=0,i=0,s=0;s<e.length;++s){var a=e.charAt(s);if("="==a)break;if(-1!=(a=u[a])){if(void 0===a)throw new Error("Illegal character at offset "+s);n|=a,2<=++i?(o[o.length]=n,i=n=0):n<<=4}}if(i)throw new Error("Hex encoding incomplete: 4 bits missing");return o}(e):d.unarmor(e),n=v.decode(o);if(9===(n=3===n.sub.length?n.sub[2].sub[0]:n).sub.length){t=n.sub[1].getHexStringValue(),this.n=G(t,16),r=n.sub[2].getHexStringValue(),this.e=parseInt(r,16);var i=n.sub[3].getHexStringValue(),s=(this.d=G(i,16),n.sub[4].getHexStringValue()),a=(this.p=G(s,16),n.sub[5].getHexStringValue()),c=(this.q=G(a,16),n.sub[6].getHexStringValue()),l=(this.dmp1=G(c,16),n.sub[7].getHexStringValue()),p=(this.dmq1=G(l,16),n.sub[8].getHexStringValue());this.coeff=G(p,16)}else{if(2!==n.sub.length)return!1;var h=n.sub[1].sub[0];t=h.sub[0].getHexStringValue();this.n=G(t,16),r=h.sub[1].getHexStringValue(),this.e=parseInt(r,16)}return!0}catch(e){return!1}},t.prototype.getPrivateBaseKey=function(){var e={array:[new re.asn1.DERInteger({int:0}),new re.asn1.DERInteger({bigint:this.n}),new re.asn1.DERInteger({int:this.e}),new re.asn1.DERInteger({bigint:this.d}),new re.asn1.DERInteger({bigint:this.p}),new re.asn1.DERInteger({bigint:this.q}),new re.asn1.DERInteger({bigint:this.dmp1}),new re.asn1.DERInteger({bigint:this.dmq1}),new re.asn1.DERInteger({bigint:this.coeff})]};return new re.asn1.DERSequence(e).getEncodedHex()},t.prototype.getPrivateBaseKeyB64=function(){return l(this.getPrivateBaseKey())},t.prototype.getPublicBaseKey=function(){var e=new re.asn1.DERSequence({array:[new re.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new re.asn1.DERNull]}),t=new re.asn1.DERSequence({array:[new re.asn1.DERInteger({bigint:this.n}),new re.asn1.DERInteger({int:this.e})]});t=new re.asn1.DERBitString({hex:"00"+t.getEncodedHex()});return new re.asn1.DERSequence({array:[e,t]}).getEncodedHex()},t.prototype.getPublicBaseKeyB64=function(){return l(this.getPublicBaseKey())},t.wordwrap=function(e,t){return e?(t="(.{1,"+(t=t||64)+"})( +|$\n?)|(.{1,"+t+"})",e.match(RegExp(t,"g")).join("\n")):e},t.prototype.getPrivateKey=function(){return"-----BEGIN RSA PRIVATE KEY-----\n"+t.wordwrap(this.getPrivateBaseKeyB64())+"\n-----END RSA PRIVATE KEY-----"},t.prototype.getPublicKey=function(){return"-----BEGIN PUBLIC KEY-----\n"+t.wordwrap(this.getPublicBaseKeyB64())+"\n-----END PUBLIC KEY-----"},t.hasPublicKeyProperty=function(e){return(e=e||{}).hasOwnProperty("n")&&e.hasOwnProperty("e")},t.hasPrivateKeyProperty=function(e){return(e=e||{}).hasOwnProperty("n")&&e.hasOwnProperty("e")&&e.hasOwnProperty("d")&&e.hasOwnProperty("p")&&e.hasOwnProperty("q")&&e.hasOwnProperty("dmp1")&&e.hasOwnProperty("dmq1")&&e.hasOwnProperty("coeff")},t.prototype.parsePropertiesFrom=function(e){this.n=e.n,this.e=e.e,e.hasOwnProperty("d")&&(this.d=e.d,this.p=e.p,this.q=e.q,this.dmp1=e.dmp1,this.dmq1=e.dmq1,this.coeff=e.coeff)},t}(r);se.prototype.setKey=function(e){this.log&&this.key,this.key=new ne(e)},se.prototype.setPrivateKey=function(e){this.setKey(e)},se.prototype.setPublicKey=function(e){this.setKey(e)},se.prototype.decrypt=function(e){try{return this.getKey().decrypt(p(e))}catch(e){return!1}},se.prototype.encrypt=function(e){try{return l(this.getKey().encrypt(e))}catch(e){return!1}},se.prototype.sign=function(e,t,r){try{return l(this.getKey().sign(e,t,r))}catch(e){return!1}},se.prototype.verify=function(e,t,r){try{return this.getKey().verify(e,p(t),r)}catch(e){return!1}},se.prototype.getKey=function(e){if(!this.key){if(this.key=new ne,e&&"[object Function]"==={}.toString.call(e))return void this.key.generateAsync(this.default_key_size,this.default_public_exponent,e);this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key},se.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()},se.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()},se.prototype.getPublicKey=function(){return this.getKey().getPublicKey()},se.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()},se.version="3.2.1";const ie=se;function se(e){this.default_key_size=(e=(e=void 0===e?{}:e)||{}).default_key_size?parseInt(e.default_key_size,10):1024,this.default_public_exponent=e.default_public_exponent||"010001",this.log=e.log||!1,this.key=null}})(0,n={},l),n.default),h=(Object.defineProperty(d.prototype,"publicKey",{get:function(){return"-----BEGIN RSA Public Key-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEArdnPFtPzQx+XhhuNYrI8\no2X9gZe6igdp9S23NZ2E/caWCZD9Gfu3z2/rzmYD93biUssHAEVypNZTBIv77dQg\nl79Tdv2Y9MYZotkv/qUx00tfN0iqnASWGMT+6QEgZS9ot7bAzJBTw3pB79+E9Q/T\nE3kEyqIpZ/sG80NAGjMJ/4IHhf63q96+Zh0OC8Z43HcNtt/PWzsRkdYvdq02oDih\nsoEuzsxEOar/iDC0B6kxSuVhSF3J4jamAj15EUFFR+ndVccVJy5W+AGiH8n8T1ip\ng3MSSoH1pmNh7KOMVs7F64/K5H/+B+M1U05nC15ZMxtSVF+N6xMmVDffctRZrGIG\nDwIDAQAB\n-----END RSA Public Key-----"},enumerable:!1,configurable:!0}),d.prototype.encrypt=function(e){return e=i.a.encrypt(this.uint8Array2WordArray(e),this.key2,this.iv2).toString(),o.Base64.toUint8Array(e)},d.prototype.decrypt=function(e){return this.wordArray2Uint8Array(i.a.decrypt(o.Base64.fromUint8Array(e),this.key2,this.iv2))},d.prototype.encryptString=function(e){return i.a.encrypt(e,this.appIDKey,this.appIDIV).toString()},d.prototype.decryptString=function(e){return i.a.decrypt(e,this.appIDKey,this.appIDIV).toString(a.a)},d.prototype.generateK1Sign=function(){var e=this.generateNonce(),t=((t=(this.key1=a.a.parse(e),this.iv1={iv:s.a.parse(c()(e).toString().toLowerCase())},new p)).setPublicKey(this.publicKey),t.getKey().encrypt(e));return this.wordArray2Uint8Array(s.a.parse(t))},d.prototype.decryptK2Sign=function(e){try{this.key2=i.a.decrypt(o.Base64.fromUint8Array(e),this.key1,this.iv1),this.iv2={iv:c()(this.key2)}}catch(e){}},d.prototype.generateNonce=function(){var e=Math.random().toString().substring(2,18);return e.length<16&&(e+=e.substring(0,16-e.length)),e},d.prototype.generateAppIDKey=function(e){e=c()(String(e)).toString().toLowerCase(),this.appIDKey=a.a.parse(e),this.appIDIV={iv:s.a.parse(e)}},d.prototype.md5=function(e){return this.wordArray2Uint8Array(c()(e))},d.prototype.md5Bytes=function(e){return this.wordArray2Uint8Array(c()(this.uint8Array2WordArray(e)))},d.prototype.wordArray2Uint8Array=function(e){for(var t=e.words,r=e.sigBytes,o=new Uint8Array(r),n=0;n<r;n++){var i=t[n>>>2]>>>24-n%4*8&255;o[n]=i}return o},d.prototype.uint8Array2WordArray=function(e){for(var t=e.length,r=[],o=0;o<t;o++)r[o>>>2]|=(255&e[o])<<24-o%4*8;return u.a.create(r,t)},d);function d(){}n=r(0);var f=r.n(n);const g=(n=r(3)).Reader,m=n.Writer,_=n.util,y=n.roots.default||(n.roots.default={});function b(e,t){return function(r,o,n){return{value:function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var s=r.createNotLoggedError.call(this,e,t);return s?Promise.reject(s):n.value.apply(this,o)}}}}y.proto_accesshub=(()=>{const e={};function t(e){if(this.headers=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function r(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function o(e){if(this.headers=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function n(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function i(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function s(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function a(e){if(this.groups=[],this.opt_ports=[],this.wss_groups=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function u(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function c(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function l(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function p(e){if(this.quic_nodes=[],this.mtcp_nodes=[],this.wss_nodes=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function h(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function d(e){if(this.groups=[],this.opt_ports=[],this.wss_groups=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function f(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.HTTPRequest=(t.prototype.txid=_.Long?_.Long.fromBits(0,0,!0):0,t.prototype.appid=0,t.prototype.biz_type=0,t.prototype.mode="",t.prototype.id_name="",t.prototype.reqid="",t.prototype.stick="",t.prototype.service="",t.prototype.location="",t.prototype.method="",t.prototype.headers=_.emptyArray,t.prototype.body=_.newBuffer([]),t.prototype.ack=!1,t.prototype.mode_no=0,t.prototype.service_no=0,t.prototype.method_no=0,t.prototype.sdk_type=0,t.prototype.zegoconn_run_env=0,t.prototype.zegoconn_version=0,t.encode=function(e,t){if(t=t||m.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(34).string(e.mode),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.reqid&&Object.hasOwnProperty.call(e,"reqid")&&t.uint32(50).string(e.reqid),null!=e.stick&&Object.hasOwnProperty.call(e,"stick")&&t.uint32(58).string(e.stick),null!=e.service&&Object.hasOwnProperty.call(e,"service")&&t.uint32(66).string(e.service),null!=e.location&&Object.hasOwnProperty.call(e,"location")&&t.uint32(74).string(e.location),null!=e.method&&Object.hasOwnProperty.call(e,"method")&&t.uint32(82).string(e.method),null!=e.headers&&e.headers.length)for(let r=0;r<e.headers.length;++r)y.proto_accesshub.HTTPRequest.HTTPHeader.encode(e.headers[r],t.uint32(90).fork()).ldelim();return null!=e.body&&Object.hasOwnProperty.call(e,"body")&&t.uint32(98).bytes(e.body),null!=e.ack&&Object.hasOwnProperty.call(e,"ack")&&t.uint32(104).bool(e.ack),null!=e.mode_no&&Object.hasOwnProperty.call(e,"mode_no")&&t.uint32(112).int32(e.mode_no),null!=e.service_no&&Object.hasOwnProperty.call(e,"service_no")&&t.uint32(120).int32(e.service_no),null!=e.method_no&&Object.hasOwnProperty.call(e,"method_no")&&t.uint32(128).int32(e.method_no),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(136).int32(e.sdk_type),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(144).int32(e.zegoconn_run_env),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(152).uint32(e.zegoconn_version),t},t.HTTPHeader=(r.prototype.name="",r.prototype.val="",r.encode=function(e,t){return t=t||m.create(),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.val&&Object.hasOwnProperty.call(e,"val")&&t.uint32(18).string(e.val),t},r.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_accesshub.HTTPRequest.HTTPHeader;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.name=e.string();break;case 2:o.val=e.string();break;default:e.skipType(7&n)}}return o},r),t),e.HTTPResponse=(o.prototype.txid=_.Long?_.Long.fromBits(0,0,!0):0,o.prototype.headers=_.emptyArray,o.prototype.status_code=0,o.prototype.body=_.newBuffer([]),o.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_accesshub.HTTPResponse;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.txid=e.uint64();break;case 2:o.headers&&o.headers.length||(o.headers=[]),o.headers.push(y.proto_accesshub.HTTPRequest.HTTPHeader.decode(e,e.uint32()));break;case 3:o.status_code=e.int32();break;case 4:o.body=e.bytes();break;default:e.skipType(7&n)}}return o},o),e.PCUpwardMessage=(n.prototype.txid=_.Long?_.Long.fromBits(0,0,!0):0,n.prototype.appid=0,n.prototype.biz_type=0,n.prototype.mode_no=0,n.prototype.id_name="",n.prototype.service_no=0,n.prototype.ack=!1,n.prototype.payload=_.newBuffer([]),n.prototype.sdk_type=0,n.prototype.wss_message_type=0,n.prototype.wss_path="",n.prototype.wss_raw_query="",n.prototype.zegoconn_version=0,n.prototype.zegoconn_run_env=0,n.encode=function(e,t){return t=t||m.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode_no&&Object.hasOwnProperty.call(e,"mode_no")&&t.uint32(32).int32(e.mode_no),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.service_no&&Object.hasOwnProperty.call(e,"service_no")&&t.uint32(48).int32(e.service_no),null!=e.ack&&Object.hasOwnProperty.call(e,"ack")&&t.uint32(56).bool(e.ack),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(66).bytes(e.payload),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(72).int32(e.sdk_type),null!=e.wss_message_type&&Object.hasOwnProperty.call(e,"wss_message_type")&&t.uint32(80).uint32(e.wss_message_type),null!=e.wss_path&&Object.hasOwnProperty.call(e,"wss_path")&&t.uint32(90).string(e.wss_path),null!=e.wss_raw_query&&Object.hasOwnProperty.call(e,"wss_raw_query")&&t.uint32(98).string(e.wss_raw_query),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(104).uint32(e.zegoconn_version),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(112).int32(e.zegoconn_run_env),t},n),e.PCDownwardMessage=(i.prototype.payload=_.newBuffer([]),i.prototype.wss_message_type=0,i.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_accesshub.PCDownwardMessage;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.payload=e.bytes();break;case 2:o.wss_message_type=e.uint32();break;default:e.skipType(7&n)}}return o},i),e.PCEstablished=(s.prototype.elapse=0,s.prototype.from=0,s.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_accesshub.PCEstablished;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.elapse=e.uint32();break;case 2:o.from=e.uint32();break;default:e.skipType(7&n)}}return o},s),e.Redirect=(a.prototype.rand="",a.prototype.secret="",a.prototype.groups=_.emptyArray,a.prototype.opt_ports=_.emptyArray,a.prototype.wss_groups=_.emptyArray,a.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_accesshub.Redirect;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.rand=e.string();break;case 2:o.secret=e.string();break;case 3:o.groups&&o.groups.length||(o.groups=[]),o.groups.push(y.proto_accesshub.AccesshubDispatchGroup.decode(e,e.uint32()));break;case 4:if(o.opt_ports&&o.opt_ports.length||(o.opt_ports=[]),2==(7&n))for(var i=e.uint32()+e.pos;e.pos<i;)o.opt_ports.push(e.uint32());else o.opt_ports.push(e.uint32());break;case 5:o.wss_groups&&o.wss_groups.length||(o.wss_groups=[]),o.wss_groups.push(y.proto_accesshub.WssAccesshubDispatchGroup.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},a),e.PushException=(u.prototype.reason=0,u.prototype.msg="",u.prototype.txid=_.Long?_.Long.fromBits(0,0,!0):0,u.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_accesshub.PushException;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.reason=e.int32();break;case 2:o.msg=e.string();break;case 3:o.txid=e.uint64();break;default:e.skipType(7&n)}}return o},u),e.CloseConnection=(c.prototype.reason=0,c.prototype.msg="",c.prototype.action=0,c.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_accesshub.CloseConnection;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.reason=e.int32();break;case 2:o.msg=e.string();break;case 3:o.action=e.int32();break;default:e.skipType(7&n)}}return o},c),e.AccesshubDispatchRequest=(l.prototype.txid=_.Long?_.Long.fromBits(0,0,!0):0,l.prototype.appid=0,l.prototype.biz_type=0,l.prototype.mode_no=0,l.prototype.id_name="",l.prototype.sdk_type=0,l.prototype.zegoconn_version=0,l.prototype.zegoconn_run_env=0,l.encode=function(e,t){return t=t||m.create(),null!=e.txid&&Object.hasOwnProperty.call(e,"txid")&&t.uint32(8).uint64(e.txid),null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(16).uint32(e.appid),null!=e.biz_type&&Object.hasOwnProperty.call(e,"biz_type")&&t.uint32(24).uint32(e.biz_type),null!=e.mode_no&&Object.hasOwnProperty.call(e,"mode_no")&&t.uint32(32).int32(e.mode_no),null!=e.id_name&&Object.hasOwnProperty.call(e,"id_name")&&t.uint32(42).string(e.id_name),null!=e.sdk_type&&Object.hasOwnProperty.call(e,"sdk_type")&&t.uint32(48).int32(e.sdk_type),null!=e.zegoconn_version&&Object.hasOwnProperty.call(e,"zegoconn_version")&&t.uint32(56).uint32(e.zegoconn_version),null!=e.zegoconn_run_env&&Object.hasOwnProperty.call(e,"zegoconn_run_env")&&t.uint32(64).int32(e.zegoconn_run_env),t},l),e.AccesshubDispatchGroup=(p.prototype.group="",p.prototype.quic_nodes=_.emptyArray,p.prototype.mtcp_nodes=_.emptyArray,p.prototype.wss_nodes=_.emptyArray,p.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_accesshub.AccesshubDispatchGroup;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.group=e.string();break;case 2:o.quic_nodes&&o.quic_nodes.length||(o.quic_nodes=[]),o.quic_nodes.push(e.string());break;case 3:o.mtcp_nodes&&o.mtcp_nodes.length||(o.mtcp_nodes=[]),o.mtcp_nodes.push(e.string());break;case 4:o.wss_nodes&&o.wss_nodes.length||(o.wss_nodes=[]),o.wss_nodes.push(e.string());break;default:e.skipType(7&n)}}return o},p),e.WssAccesshubDispatchGroup=(h.prototype.group="",h.prototype.host="",h.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_accesshub.WssAccesshubDispatchGroup;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.group=e.string();break;case 2:o.host=e.string();break;default:e.skipType(7&n)}}return o},h),e.AccesshubDispatchResponseData=(d.prototype.txid=_.Long?_.Long.fromBits(0,0,!0):0,d.prototype.rand="",d.prototype.secret="",d.prototype.groups=_.emptyArray,d.prototype.opt_ports=_.emptyArray,d.prototype.wss_groups=_.emptyArray,d.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_accesshub.AccesshubDispatchResponseData;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.txid=e.uint64();break;case 2:o.rand=e.string();break;case 3:o.secret=e.string();break;case 4:o.groups&&o.groups.length||(o.groups=[]),o.groups.push(y.proto_accesshub.AccesshubDispatchGroup.decode(e,e.uint32()));break;case 5:if(o.opt_ports&&o.opt_ports.length||(o.opt_ports=[]),2==(7&n))for(var i=e.uint32()+e.pos;e.pos<i;)o.opt_ports.push(e.uint32());else o.opt_ports.push(e.uint32());break;case 6:o.wss_groups&&o.wss_groups.length||(o.wss_groups=[]),o.wss_groups.push(y.proto_accesshub.WssAccesshubDispatchGroup.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},d),e.AccesshubDispatchResponse=(f.prototype.code=0,f.prototype.message="",f.prototype.data=null,f.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_accesshub.AccesshubDispatchResponse;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.int32();break;case 2:o.message=e.string();break;case 3:o.data=y.proto_accesshub.AccesshubDispatchResponseData.decode(e,e.uint32());break;default:e.skipType(7&n)}}return o},f),e})(),y.proto_switch=(()=>{const e={};function t(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function r(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function o(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function n(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function i(e){if(this.redirect_server=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function s(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function a(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function u(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function c(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function l(e){if(this.forward_ip=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function p(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function h(e){if(this.server_ips=[],this.redirect_server=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function d(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function f(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function b(e){if(this.push_requests=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function v(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function w(e){if(this.push_responses=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function k(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.Header=(t.prototype.cmd="",t.prototype.seq=0,t.prototype.timestamp=_.Long?_.Long.fromBits(0,0,!1):0,t.prototype.app_id=0,t.prototype.user_id="",t.prototype.session_id=_.Long?_.Long.fromBits(0,0,!1):0,t.prototype.user_nid=_.Long?_.Long.fromBits(0,0,!1):0,t.prototype.controls=_.newBuffer([]),t.prototype.product=0,t.prototype.flags=_.newBuffer([]),t.prototype.caller_type=0,t.encode=function(e,t){return t=t||m.create(),null!=e.cmd&&Object.hasOwnProperty.call(e,"cmd")&&t.uint32(10).string(e.cmd),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint32(e.seq),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(24).int64(e.timestamp),null!=e.app_id&&Object.hasOwnProperty.call(e,"app_id")&&t.uint32(32).uint32(e.app_id),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(42).string(e.user_id),null!=e.session_id&&Object.hasOwnProperty.call(e,"session_id")&&t.uint32(48).int64(e.session_id),null!=e.user_nid&&Object.hasOwnProperty.call(e,"user_nid")&&t.uint32(56).int64(e.user_nid),null!=e.controls&&Object.hasOwnProperty.call(e,"controls")&&t.uint32(66).bytes(e.controls),null!=e.product&&Object.hasOwnProperty.call(e,"product")&&t.uint32(72).int32(e.product),null!=e.flags&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(82).bytes(e.flags),null!=e.caller_type&&Object.hasOwnProperty.call(e,"caller_type")&&t.uint32(88).int32(e.caller_type),t},t.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_switch.Header;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.cmd=e.string();break;case 2:o.seq=e.uint32();break;case 3:o.timestamp=e.int64();break;case 4:o.app_id=e.uint32();break;case 5:o.user_id=e.string();break;case 6:o.session_id=e.int64();break;case 7:o.user_nid=e.int64();break;case 8:o.controls=e.bytes();break;case 9:o.product=e.int32();break;case 10:o.flags=e.bytes();break;case 11:o.caller_type=e.int32();break;default:e.skipType(7&n)}}return o},t),e.HbReq=(r.prototype.user_name=_.newBuffer([]),r.encode=function(e,t){return t=t||m.create(),null!=e.user_name&&Object.hasOwnProperty.call(e,"user_name")&&t.uint32(10).bytes(e.user_name),t},r),e.HbRsp=(o.prototype.code=0,o.prototype.message="",o.prototype.heartbeat_interval=0,o.prototype.hb_timeout=0,o.prototype.server_timestamp=_.Long?_.Long.fromBits(0,0,!1):0,o.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_switch.HbRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.heartbeat_interval=e.uint32();break;case 4:o.hb_timeout=e.uint32();break;case 5:o.server_timestamp=e.int64();break;default:e.skipType(7&n)}}return o},o),e.PushKickout=(n.prototype.reason=0,n.prototype.message="",n.prototype.need_relogin=0,n.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_switch.PushKickout;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.reason=e.uint32();break;case 2:o.message=e.string();break;case 3:o.need_relogin=e.uint32();break;default:e.skipType(7&n)}}return o},n),e.PushRedirect2Sdk=(i.prototype.redirect_server=_.emptyArray,i.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_switch.PushRedirect2Sdk;for(;e.pos<r;){var n=e.uint32();n>>>3==1?(o.redirect_server&&o.redirect_server.length||(o.redirect_server=[]),o.redirect_server.push(e.string())):e.skipType(7&n)}return o},i),e.PushReq=(s.prototype.head=null,s.prototype.msg_body=_.newBuffer([]),s.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_switch.PushReq;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.head=y.proto_switch.PushReqHead.decode(e,e.uint32());break;case 2:o.msg_body=e.bytes();break;default:e.skipType(7&n)}}return o},s),e.PushReqHead=(a.prototype.sub_cmd="",a.prototype.sender_user_id="",a.prototype.qos_flag=0,a.prototype.msg_id="",a.prototype.send_time=_.Long?_.Long.fromBits(0,0,!1):0,a.prototype.room_id=_.newBuffer([]),a.prototype.sender_user_nid=_.Long?_.Long.fromBits(0,0,!0):0,a.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_switch.PushReqHead;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.sub_cmd=e.string();break;case 2:o.sender_user_id=e.string();break;case 3:o.qos_flag=e.uint32();break;case 4:o.msg_id=e.string();break;case 5:o.send_time=e.int64();break;case 6:o.room_id=e.bytes();break;case 7:o.sender_user_nid=e.uint64();break;default:e.skipType(7&n)}}return o},a),e.PushRsp=(u.prototype.code=0,u.prototype.message="",u.prototype.sub_cmd="",u.prototype.msg_id="",u.prototype.server_send_time=_.Long?_.Long.fromBits(0,0,!1):0,u.encode=function(e,t){return t=t||m.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).uint32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.sub_cmd&&Object.hasOwnProperty.call(e,"sub_cmd")&&t.uint32(26).string(e.sub_cmd),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(34).string(e.msg_id),null!=e.server_send_time&&Object.hasOwnProperty.call(e,"server_send_time")&&t.uint32(40).int64(e.server_send_time),t},u),e.CommonCodeMessage=(c.prototype.code=0,c.prototype.message="",c.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_switch.CommonCodeMessage;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;default:e.skipType(7&n)}}return o},c),e.HandshakeReq=(l.prototype.term_type=0,l.prototype.net_type=0,l.prototype.sdk_ver=0,l.prototype.forward_ip=_.emptyArray,l.prototype.device_id="",l.prototype.server_addr="",l.prototype.channel_index=0,l.encode=function(e,t){if(t=t||m.create(),null!=e.term_type&&Object.hasOwnProperty.call(e,"term_type")&&t.uint32(8).int32(e.term_type),null!=e.net_type&&Object.hasOwnProperty.call(e,"net_type")&&t.uint32(16).int32(e.net_type),null!=e.sdk_ver&&Object.hasOwnProperty.call(e,"sdk_ver")&&t.uint32(24).uint32(e.sdk_ver),null!=e.forward_ip&&e.forward_ip.length)for(let r=0;r<e.forward_ip.length;++r)t.uint32(34).string(e.forward_ip[r]);return null!=e.device_id&&Object.hasOwnProperty.call(e,"device_id")&&t.uint32(42).string(e.device_id),null!=e.server_addr&&Object.hasOwnProperty.call(e,"server_addr")&&t.uint32(50).string(e.server_addr),null!=e.channel_index&&Object.hasOwnProperty.call(e,"channel_index")&&t.uint32(56).uint32(e.channel_index),t},l),e.LoginReq=(p.prototype.sdk_ver=0,p.prototype.user_name=_.newBuffer([]),p.prototype.term_type=0,p.prototype.net_type=0,p.prototype.device_id="",p.prototype.server_ip="",p.prototype.channel_index=0,p.prototype.client_stamp=_.newBuffer([]),p.prototype.k1_sign=_.newBuffer([]),p.prototype.login_token=_.newBuffer([]),p.prototype.relogin_token=_.newBuffer([]),p.prototype.zpns_push_id="",p.prototype.login_sign=_.newBuffer([]),p.encode=function(e,t){return t=t||m.create(),null!=e.sdk_ver&&Object.hasOwnProperty.call(e,"sdk_ver")&&t.uint32(8).uint32(e.sdk_ver),null!=e.user_name&&Object.hasOwnProperty.call(e,"user_name")&&t.uint32(18).bytes(e.user_name),null!=e.term_type&&Object.hasOwnProperty.call(e,"term_type")&&t.uint32(24).int32(e.term_type),null!=e.net_type&&Object.hasOwnProperty.call(e,"net_type")&&t.uint32(32).int32(e.net_type),null!=e.device_id&&Object.hasOwnProperty.call(e,"device_id")&&t.uint32(42).string(e.device_id),null!=e.server_ip&&Object.hasOwnProperty.call(e,"server_ip")&&t.uint32(50).string(e.server_ip),null!=e.channel_index&&Object.hasOwnProperty.call(e,"channel_index")&&t.uint32(56).uint32(e.channel_index),null!=e.client_stamp&&Object.hasOwnProperty.call(e,"client_stamp")&&t.uint32(66).bytes(e.client_stamp),null!=e.k1_sign&&Object.hasOwnProperty.call(e,"k1_sign")&&t.uint32(74).bytes(e.k1_sign),null!=e.login_token&&Object.hasOwnProperty.call(e,"login_token")&&t.uint32(82).bytes(e.login_token),null!=e.relogin_token&&Object.hasOwnProperty.call(e,"relogin_token")&&t.uint32(90).bytes(e.relogin_token),null!=e.zpns_push_id&&Object.hasOwnProperty.call(e,"zpns_push_id")&&t.uint32(98).string(e.zpns_push_id),null!=e.login_sign&&Object.hasOwnProperty.call(e,"login_sign")&&t.uint32(106).bytes(e.login_sign),t},p),e.LoginRsp=(h.prototype.code=0,h.prototype.message="",h.prototype.k2_sign=_.newBuffer([]),h.prototype.hb_interval=0,h.prototype.hb_timeout=0,h.prototype.server_timestamp=_.Long?_.Long.fromBits(0,0,!1):0,h.prototype.redirect_server_ip="",h.prototype.server_ips=_.emptyArray,h.prototype.login_server_ip="",h.prototype.relogin_token=_.newBuffer([]),h.prototype.redirect_server=_.emptyArray,h.prototype.usermail_hb_interval=0,h.prototype.fetch_c2c_msg_list=0,h.prototype.fetch_conv_list=0,h.prototype.fetch_conv_msg_list=0,h.prototype.fetch_group_list=0,h.prototype.im_conf_json="",h.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_switch.LoginRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.k2_sign=e.bytes();break;case 4:o.hb_interval=e.uint32();break;case 5:o.hb_timeout=e.uint32();break;case 6:o.server_timestamp=e.int64();break;case 7:o.redirect_server_ip=e.string();break;case 8:o.server_ips&&o.server_ips.length||(o.server_ips=[]),o.server_ips.push(e.string());break;case 9:o.login_server_ip=e.string();break;case 10:o.relogin_token=e.bytes();break;case 11:o.redirect_server&&o.redirect_server.length||(o.redirect_server=[]),o.redirect_server.push(e.string());break;case 12:o.usermail_hb_interval=e.uint32();break;case 13:o.fetch_c2c_msg_list=e.int32();break;case 14:o.fetch_conv_list=e.int32();break;case 15:o.fetch_conv_msg_list=e.int32();break;case 16:o.fetch_group_list=e.int32();break;case 17:o.im_conf_json=e.string();break;default:e.skipType(7&n)}}return o},h),e.LogoutReq=(d.prototype.logout_reason=0,d.prototype.logout_check=_.newBuffer([]),d.encode=function(e,t){return t=t||m.create(),null!=e.logout_reason&&Object.hasOwnProperty.call(e,"logout_reason")&&t.uint32(8).uint32(e.logout_reason),null!=e.logout_check&&Object.hasOwnProperty.call(e,"logout_check")&&t.uint32(18).bytes(e.logout_check),t},d),e.RenewTokenReq=(f.prototype.third_token=_.newBuffer([]),f.encode=function(e,t){return t=t||m.create(),null!=e.third_token&&Object.hasOwnProperty.call(e,"third_token")&&t.uint32(10).bytes(e.third_token),t},f),e.PushListRequest=(b.prototype.push_requests=_.emptyArray,b.prototype.qos_flag=0,b.prototype.send_time=_.Long?_.Long.fromBits(0,0,!1):0,b.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_switch.PushListRequest;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.push_requests&&o.push_requests.length||(o.push_requests=[]),o.push_requests.push(y.proto_switch.PushRequest.decode(e,e.uint32()));break;case 2:o.qos_flag=e.uint32();break;case 3:o.send_time=e.int64();break;default:e.skipType(7&n)}}return o},b),e.PushRequest=(v.prototype.sub_cmd="",v.prototype.msg_body=_.newBuffer([]),v.prototype.sender_user_id="",v.prototype.msg_id="",v.prototype.sender_user_nid=_.Long?_.Long.fromBits(0,0,!0):0,v.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_switch.PushRequest;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.sub_cmd=e.string();break;case 2:o.msg_body=e.bytes();break;case 3:o.sender_user_id=e.string();break;case 4:o.msg_id=e.string();break;case 5:o.sender_user_nid=e.uint64();break;default:e.skipType(7&n)}}return o},v),e.PushListRsp=(w.prototype.code=0,w.prototype.message="",w.prototype.push_responses=_.emptyArray,w.prototype.server_send_time=_.Long?_.Long.fromBits(0,0,!1):0,w.encode=function(e,t){if(t=t||m.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).uint32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.push_responses&&e.push_responses.length)for(let r=0;r<e.push_responses.length;++r)y.proto_switch.PushResponse.encode(e.push_responses[r],t.uint32(26).fork()).ldelim();return null!=e.server_send_time&&Object.hasOwnProperty.call(e,"server_send_time")&&t.uint32(32).int64(e.server_send_time),t},w),e.PushResponse=(k.prototype.msg_id="",k.prototype.sub_cmd="",k.encode=function(e,t){return t=t||m.create(),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(10).string(e.msg_id),null!=e.sub_cmd&&Object.hasOwnProperty.call(e,"sub_cmd")&&t.uint32(18).string(e.sub_cmd),t},k),e})(),y.proto_zim=(()=>{const e={};function t(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function r(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function o(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function n(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function i(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function s(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function a(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function u(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function c(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function l(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function p(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function h(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function d(e){if(this.user_ids=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function f(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function b(e){if(this.err_list=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function v(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function w(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function k(e){if(this.user_ids=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function M(e){if(this.err_list=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function I(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function S(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function D(e){if(this.user_list=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function C(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function R(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function A(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function O(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function E(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function x(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function P(e){if(this.conv_list=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function T(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function q(e){if(this.msg_info=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function L(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function B(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function G(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function N(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function j(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function U(e){if(this.msg_ids=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function z(e){if(this.headers={},this.forms={},e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function F(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function H(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function K(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function V(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Z(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function W(e){if(this.user_ids=[],this.attributes=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Q(e){if(this.members=[],this.error_users=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function J(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Y(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function X(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function $(e){if(this.attributes=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ee(e){if(this.attributes=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function te(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function re(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function oe(e){if(this.fail_keys=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ne(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ie(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function se(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ae(e){if(this.user_ids=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ue(e){if(this.members=[],this.error_users=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ce(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function le(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function pe(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function he(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function de(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function fe(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ge(e){if(this.error_users=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function me(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function _e(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ye(e){if(this.change_list=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function be(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ve(e){if(this.attributes=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function we(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ke(e){if(this.attributes=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Me(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ie(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Se(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function De(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ce(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Re(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ae(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Oe(e){if(this.groups=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ee(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function xe(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Pe(e){if(this.members=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Te(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function qe(e){if(this.members=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Le(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Be(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ge(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ne(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function je(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ue(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ze(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Fe(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function He(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ke(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ve(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ze(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function We(e){if(this.recv_msg_info=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Qe(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Je(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ye(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Xe(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function $e(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function et(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function tt(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function rt(e){if(this.msgs=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ot(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function nt(e){if(this.conv_msg_seq=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function it(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function st(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function at(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ut(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ct(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function lt(e){if(this.attributes=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function pt(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ht(e){if(this.attributes=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function dt(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function ft(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function gt(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function mt(e){if(this.users=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function _t(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function yt(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function bt(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function vt(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function wt(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function kt(e){if(this.attributes=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Mt(e){if(this.attributes=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function It(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function St(e){if(this.err_list=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Dt(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ct(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Rt(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function At(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Ot(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Et(e){if(this.attributes=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function xt(e){if(this.quey_user_id=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Pt(e){if(this.result=[],this.err_list=[],e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function Tt(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}function qt(e){if(e)for(let t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.StMsgClientInfo=(t.prototype.conv_sid=_.Long?_.Long.fromBits(0,0,!1):0,t.prototype.client_msg_seq=_.Long?_.Long.fromBits(0,0,!1):0,t.encode=function(e,t){return t=t||m.create(),null!=e.conv_sid&&Object.hasOwnProperty.call(e,"conv_sid")&&t.uint32(8).int64(e.conv_sid),null!=e.client_msg_seq&&Object.hasOwnProperty.call(e,"client_msg_seq")&&t.uint32(16).int64(e.client_msg_seq),t},t.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.StMsgClientInfo;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.conv_sid=e.int64();break;case 2:o.client_msg_seq=e.int64();break;default:e.skipType(7&n)}}return o},t),e.StOfflinePushInfo=(r.prototype.enable_push=0,r.prototype.title="",r.prototype.content="",r.prototype.payload="",r.encode=function(e,t){return t=t||m.create(),null!=e.enable_push&&Object.hasOwnProperty.call(e,"enable_push")&&t.uint32(8).int32(e.enable_push),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(18).string(e.title),null!=e.content&&Object.hasOwnProperty.call(e,"content")&&t.uint32(26).string(e.content),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(34).string(e.payload),t},r.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.StOfflinePushInfo;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.enable_push=e.int32();break;case 2:o.title=e.string();break;case 3:o.content=e.string();break;case 4:o.payload=e.string();break;default:e.skipType(7&n)}}return o},r),e.StConvMsgInfo=(o.prototype.msg_type=0,o.prototype.msg=_.newBuffer([]),o.prototype.priority_type=0,o.prototype.conv_id="",o.prototype.msg_client_info=null,o.prototype.payload=_.newBuffer([]),o.prototype.offline_push=null,o.encode=function(e,t){return t=t||m.create(),null!=e.msg_type&&Object.hasOwnProperty.call(e,"msg_type")&&t.uint32(8).int32(e.msg_type),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).bytes(e.msg),null!=e.priority_type&&Object.hasOwnProperty.call(e,"priority_type")&&t.uint32(24).int32(e.priority_type),null!=e.conv_id&&Object.hasOwnProperty.call(e,"conv_id")&&t.uint32(34).string(e.conv_id),null!=e.msg_client_info&&Object.hasOwnProperty.call(e,"msg_client_info")&&y.proto_zim.StMsgClientInfo.encode(e.msg_client_info,t.uint32(42).fork()).ldelim(),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(50).bytes(e.payload),null!=e.offline_push&&Object.hasOwnProperty.call(e,"offline_push")&&y.proto_zim.StOfflinePushInfo.encode(e.offline_push,t.uint32(58).fork()).ldelim(),t},o.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.StConvMsgInfo;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.msg_type=e.int32();break;case 2:o.msg=e.bytes();break;case 3:o.priority_type=e.int32();break;case 4:o.conv_id=e.string();break;case 5:o.msg_client_info=y.proto_zim.StMsgClientInfo.decode(e,e.uint32());break;case 6:o.payload=e.bytes();break;case 7:o.offline_push=y.proto_zim.StOfflinePushInfo.decode(e,e.uint32());break;default:e.skipType(7&n)}}return o},o),e.StMsgSvrInfo=(n.prototype.msg_id=_.Long?_.Long.fromBits(0,0,!1):0,n.prototype.conv_msg_seq=_.Long?_.Long.fromBits(0,0,!1):0,n.prototype.c2c_msg_seq=_.Long?_.Long.fromBits(0,0,!1):0,n.prototype.sender_user_id="",n.prototype.sender_user_name=_.newBuffer([]),n.prototype.msg_time=_.Long?_.Long.fromBits(0,0,!1):0,n.prototype.has_content=0,n.prototype.msg_rsp=_.newBuffer([]),n.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.StMsgSvrInfo;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.msg_id=e.int64();break;case 2:o.conv_msg_seq=e.int64();break;case 3:o.c2c_msg_seq=e.int64();break;case 4:o.sender_user_id=e.string();break;case 5:o.sender_user_name=e.bytes();break;case 6:o.msg_time=e.int64();break;case 7:o.has_content=e.int32();break;case 9:o.msg_rsp=e.bytes();break;default:e.skipType(7&n)}}return o},n),e.StRecvMsgInfo=(i.prototype.msg_info=null,i.prototype.msg_svr_info=null,i.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.StRecvMsgInfo;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.msg_info=y.proto_zim.StConvMsgInfo.decode(e,e.uint32());break;case 2:o.msg_svr_info=y.proto_zim.StMsgSvrInfo.decode(e,e.uint32());break;default:e.skipType(7&n)}}return o},i),e.StCommandMsgInfo=(s.prototype.msg_type=0,s.prototype.msg=_.newBuffer([]),s.prototype.priority_type=0,s.prototype.payload=_.newBuffer([]),s.prototype.conv_id="",s.encode=function(e,t){return t=t||m.create(),null!=e.msg_type&&Object.hasOwnProperty.call(e,"msg_type")&&t.uint32(8).int32(e.msg_type),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).bytes(e.msg),null!=e.priority_type&&Object.hasOwnProperty.call(e,"priority_type")&&t.uint32(24).int32(e.priority_type),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(34).bytes(e.payload),null!=e.conv_id&&Object.hasOwnProperty.call(e,"conv_id")&&t.uint32(42).string(e.conv_id),t},s.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.StCommandMsgInfo;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.msg_type=e.int32();break;case 2:o.msg=e.bytes();break;case 3:o.priority_type=e.int32();break;case 4:o.payload=e.bytes();break;case 5:o.conv_id=e.string();break;default:e.skipType(7&n)}}return o},s),e.StCommandSvrInfo=(a.prototype.msg_id=_.Long?_.Long.fromBits(0,0,!1):0,a.prototype.sender_user_id="",a.prototype.sender_user_name=_.newBuffer([]),a.prototype.msg_time=_.Long?_.Long.fromBits(0,0,!1):0,a.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.StCommandSvrInfo;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.msg_id=e.int64();break;case 2:o.sender_user_id=e.string();break;case 3:o.sender_user_name=e.bytes();break;case 4:o.msg_time=e.int64();break;default:e.skipType(7&n)}}return o},a),e.StRecvCommandInfo=(u.prototype.command_msg_info=null,u.prototype.command_svr_info=null,u.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.StRecvCommandInfo;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.command_msg_info=y.proto_zim.StCommandMsgInfo.decode(e,e.uint32());break;case 2:o.command_svr_info=y.proto_zim.StCommandSvrInfo.decode(e,e.uint32());break;default:e.skipType(7&n)}}return o},u),e.ErrorUser=(c.prototype.user_id="",c.prototype.sub_code=0,c.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.ErrorUser;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.user_id=e.string();break;case 2:o.sub_code=e.uint32();break;default:e.skipType(7&n)}}return o},c),e.FetchMsgInfo=(l.prototype.msg_body=_.newBuffer([]),l.prototype.msg_dyn_info=null,l.prototype.msglist_seq=_.Long?_.Long.fromBits(0,0,!1):0,l.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.FetchMsgInfo;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.msg_body=e.bytes();break;case 2:o.msg_dyn_info=y.proto_zim.MsgDynInfo.decode(e,e.uint32());break;case 3:o.msglist_seq=e.int64();break;default:e.skipType(7&n)}}return o},l),e.MsgDynInfo=(p.prototype.msg_status=0,p.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.MsgDynInfo;for(;e.pos<r;){var n=e.uint32();n>>>3==1?o.msg_status=e.int32():e.skipType(7&n)}return o},p),e.CommonCodeMessage=(h.prototype.code=0,h.prototype.message="",h.encode=function(e,t){return t=t||m.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).uint32(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},h.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.CommonCodeMessage;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;default:e.skipType(7&n)}}return o},h),e.call_req=(d.prototype.call_id="",d.prototype.user_ids=_.emptyArray,d.prototype.timeout=0,d.prototype.payload=_.newBuffer([]),d.encode=function(e,t){if(t=t||m.create(),null!=e.call_id&&Object.hasOwnProperty.call(e,"call_id")&&t.uint32(10).string(e.call_id),null!=e.user_ids&&e.user_ids.length)for(let r=0;r<e.user_ids.length;++r)t.uint32(18).string(e.user_ids[r]);return null!=e.timeout&&Object.hasOwnProperty.call(e,"timeout")&&t.uint32(24).int32(e.timeout),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(34).bytes(e.payload),t},d),e.call_user_state=(f.prototype.user_id="",f.prototype.user_state=0,f.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.call_user_state;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.user_id=e.string();break;case 2:o.user_state=e.uint32();break;default:e.skipType(7&n)}}return o},f),e.call_rsp=(b.prototype.code=0,b.prototype.message="",b.prototype.timeout=0,b.prototype.call_id="",b.prototype.err_list=_.emptyArray,b.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.call_rsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.timeout=e.int32();break;case 4:o.call_id=e.string();break;case 5:o.err_list&&o.err_list.length||(o.err_list=[]),o.err_list.push(y.proto_zim.call_user_state.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},b),e.call_refuse_req=(v.prototype.call_id="",v.prototype.state=0,v.prototype.extended_data=_.newBuffer([]),v.encode=function(e,t){return t=t||m.create(),null!=e.call_id&&Object.hasOwnProperty.call(e,"call_id")&&t.uint32(10).string(e.call_id),null!=e.state&&Object.hasOwnProperty.call(e,"state")&&t.uint32(16).int32(e.state),null!=e.extended_data&&Object.hasOwnProperty.call(e,"extended_data")&&t.uint32(26).bytes(e.extended_data),t},v),e.call_accept_req=(w.prototype.call_id="",w.prototype.extended_data=_.newBuffer([]),w.encode=function(e,t){return t=t||m.create(),null!=e.call_id&&Object.hasOwnProperty.call(e,"call_id")&&t.uint32(10).string(e.call_id),null!=e.extended_data&&Object.hasOwnProperty.call(e,"extended_data")&&t.uint32(18).bytes(e.extended_data),t},w),e.call_cancel_req=(k.prototype.call_id="",k.prototype.user_ids=_.emptyArray,k.prototype.state=0,k.prototype.extended_data=_.newBuffer([]),k.encode=function(e,t){if(t=t||m.create(),null!=e.call_id&&Object.hasOwnProperty.call(e,"call_id")&&t.uint32(10).string(e.call_id),null!=e.user_ids&&e.user_ids.length)for(let r=0;r<e.user_ids.length;++r)t.uint32(18).string(e.user_ids[r]);return null!=e.state&&Object.hasOwnProperty.call(e,"state")&&t.uint32(24).int32(e.state),null!=e.extended_data&&Object.hasOwnProperty.call(e,"extended_data")&&t.uint32(34).bytes(e.extended_data),t},k),e.call_cancel_rsp=(M.prototype.code=0,M.prototype.message="",M.prototype.err_list=_.emptyArray,M.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.call_cancel_rsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.err_list&&o.err_list.length||(o.err_list=[]),o.err_list.push(y.proto_zim.call_user_state.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},M),e.call_user_info=(I.prototype.user_id="",I.prototype.user_state=0,I.prototype.extended_data=_.newBuffer([]),I.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.call_user_info;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.user_id=e.string();break;case 2:o.user_state=e.uint32();break;case 3:o.extended_data=e.bytes();break;default:e.skipType(7&n)}}return o},I),e.call_info_req=(S.prototype.call_id="",S.encode=function(e,t){return t=t||m.create(),null!=e.call_id&&Object.hasOwnProperty.call(e,"call_id")&&t.uint32(10).string(e.call_id),t},S),e.call_info_rsp=(D.prototype.code=0,D.prototype.message="",D.prototype.user_list=_.emptyArray,D.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.call_info_rsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.user_list&&o.user_list.length||(o.user_list=[]),o.user_list.push(y.proto_zim.call_user_info.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},D),e.PushCallInvited=(C.prototype.call_id="",C.prototype.timeout=0,C.prototype.caller="",C.prototype.payload=_.newBuffer([]),C.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.PushCallInvited;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.call_id=e.string();break;case 2:o.timeout=e.int32();break;case 3:o.caller=e.string();break;case 4:o.payload=e.bytes();break;default:e.skipType(7&n)}}return o},C),e.PushCallRefuse=(R.prototype.call_id="",R.prototype.invitee="",R.prototype.caller="",R.prototype.call_state=0,R.prototype.extended_data=_.newBuffer([]),R.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.PushCallRefuse;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.call_id=e.string();break;case 2:o.invitee=e.string();break;case 3:o.caller=e.string();break;case 4:o.call_state=e.int32();break;case 5:o.extended_data=e.bytes();break;default:e.skipType(7&n)}}return o},R),e.PushCallAccept=(A.prototype.call_id="",A.prototype.invitee="",A.prototype.caller="",A.prototype.extended_data=_.newBuffer([]),A.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.PushCallAccept;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.call_id=e.string();break;case 2:o.invitee=e.string();break;case 3:o.caller=e.string();break;case 4:o.extended_data=e.bytes();break;default:e.skipType(7&n)}}return o},A),e.PushCallCancel=(O.prototype.call_id="",O.prototype.caller="",O.prototype.state=0,O.prototype.extended_data=_.newBuffer([]),O.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.PushCallCancel;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.call_id=e.string();break;case 2:o.caller=e.string();break;case 4:o.state=e.int32();break;case 5:o.extended_data=e.bytes();break;default:e.skipType(7&n)}}return o},O),e.ConvInfo=(E.prototype.conv_id="",E.prototype.conv_type=0,E.prototype.conv_list_seq=_.Long?_.Long.fromBits(0,0,!1):0,E.prototype.conv_msg_seq=_.Long?_.Long.fromBits(0,0,!1):0,E.prototype.read_seq=_.Long?_.Long.fromBits(0,0,!1):0,E.prototype.is_del=!1,E.prototype.last_msg=null,E.prototype.send_count_after_read=_.Long?_.Long.fromBits(0,0,!1):0,E.prototype.last_msg_del=!1,E.prototype.last_del_msg_seq=_.Long?_.Long.fromBits(0,0,!1):0,E.prototype.state_seq=_.Long?_.Long.fromBits(0,0,!1):0,E.prototype.receipt_max_conv_msg_seq=_.Long?_.Long.fromBits(0,0,!1):0,E.prototype.at_max_conv_msg_seq=_.Long?_.Long.fromBits(0,0,!1):0,E.prototype.at_all_max_conv_msg_seq=_.Long?_.Long.fromBits(0,0,!1):0,E.prototype.update_time=_.Long?_.Long.fromBits(0,0,!1):0,E.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.ConvInfo;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.conv_id=e.string();break;case 2:o.conv_type=e.int32();break;case 3:o.conv_list_seq=e.int64();break;case 4:o.conv_msg_seq=e.int64();break;case 5:o.read_seq=e.int64();break;case 6:o.is_del=e.bool();break;case 7:o.last_msg=y.proto_zim.StRecvMsgInfo.decode(e,e.uint32());break;case 8:o.send_count_after_read=e.int64();break;case 9:o.last_msg_del=e.bool();break;case 10:o.last_del_msg_seq=e.int64();break;case 11:o.state_seq=e.int64();break;case 12:o.receipt_max_conv_msg_seq=e.int64();break;case 13:o.at_max_conv_msg_seq=e.int64();break;case 14:o.at_all_max_conv_msg_seq=e.int64();break;case 15:o.update_time=e.int64();break;default:e.skipType(7&n)}}return o},E),e.GetConvListReq=(x.prototype.conv_list_seq=_.Long?_.Long.fromBits(0,0,!1):0,x.prototype.count=0,x.prototype.full_pull=0,x.prototype.degree=0,x.encode=function(e,t){return t=t||m.create(),null!=e.conv_list_seq&&Object.hasOwnProperty.call(e,"conv_list_seq")&&t.uint32(8).int64(e.conv_list_seq),null!=e.count&&Object.hasOwnProperty.call(e,"count")&&t.uint32(16).uint32(e.count),null!=e.full_pull&&Object.hasOwnProperty.call(e,"full_pull")&&t.uint32(24).int32(e.full_pull),null!=e.degree&&Object.hasOwnProperty.call(e,"degree")&&t.uint32(32).uint32(e.degree),t},x),e.GetConvListRsp=(P.prototype.code=0,P.prototype.message="",P.prototype.conv_list=_.emptyArray,P.prototype.conv_list_seq=_.Long?_.Long.fromBits(0,0,!1):0,P.prototype.max_list_seq=_.Long?_.Long.fromBits(0,0,!1):0,P.prototype.full_list=0,P.prototype.fetch_end=0,P.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.GetConvListRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.conv_list&&o.conv_list.length||(o.conv_list=[]),o.conv_list.push(y.proto_zim.ConvInfo.decode(e,e.uint32()));break;case 4:o.conv_list_seq=e.int64();break;case 5:o.max_list_seq=e.int64();break;case 6:o.full_list=e.int32();break;case 7:o.fetch_end=e.int32();break;default:e.skipType(7&n)}}return o},P),e.FetchConvMsgReq=(T.prototype.conv_id="",T.prototype.conv_type=0,T.prototype.conv_msg_seq=_.Long?_.Long.fromBits(0,0,!1):0,T.prototype.count=0,T.prototype.mode=0,T.prototype.login_fetch=0,T.prototype.how=0,T.prototype.degree=0,T.encode=function(e,t){return t=t||m.create(),null!=e.conv_id&&Object.hasOwnProperty.call(e,"conv_id")&&t.uint32(10).string(e.conv_id),null!=e.conv_type&&Object.hasOwnProperty.call(e,"conv_type")&&t.uint32(16).int32(e.conv_type),null!=e.conv_msg_seq&&Object.hasOwnProperty.call(e,"conv_msg_seq")&&t.uint32(24).int64(e.conv_msg_seq),null!=e.count&&Object.hasOwnProperty.call(e,"count")&&t.uint32(32).int32(e.count),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(40).int32(e.mode),null!=e.login_fetch&&Object.hasOwnProperty.call(e,"login_fetch")&&t.uint32(48).int32(e.login_fetch),null!=e.how&&Object.hasOwnProperty.call(e,"how")&&t.uint32(56).int32(e.how),null!=e.degree&&Object.hasOwnProperty.call(e,"degree")&&t.uint32(64).uint32(e.degree),t},T),e.FetchConvMsgRsp=(q.prototype.code=0,q.prototype.message="",q.prototype.conv_msg_svr_seq=_.Long?_.Long.fromBits(0,0,!1):0,q.prototype.conv_msg_seq=_.Long?_.Long.fromBits(0,0,!1):0,q.prototype.msg_info=_.emptyArray,q.prototype.fetch_end=0,q.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.FetchConvMsgRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.conv_msg_svr_seq=e.int64();break;case 4:o.conv_msg_seq=e.int64();break;case 5:o.msg_info&&o.msg_info.length||(o.msg_info=[]),o.msg_info.push(y.proto_zim.FetchMsgInfo.decode(e,e.uint32()));break;case 6:o.fetch_end=e.int32();break;default:e.skipType(7&n)}}return o},q),e.UpdateReadSeqReq=(L.prototype.conv_id="",L.prototype.conv_type=0,L.prototype.read_seq=_.Long?_.Long.fromBits(0,0,!1):0,L.encode=function(e,t){return t=t||m.create(),null!=e.conv_id&&Object.hasOwnProperty.call(e,"conv_id")&&t.uint32(10).string(e.conv_id),null!=e.conv_type&&Object.hasOwnProperty.call(e,"conv_type")&&t.uint32(16).int32(e.conv_type),null!=e.read_seq&&Object.hasOwnProperty.call(e,"read_seq")&&t.uint32(24).int64(e.read_seq),t},L),e.UserMailHbReq=(B.prototype.conv_list_seq=_.Long?_.Long.fromBits(0,0,!1):0,B.encode=function(e,t){return t=t||m.create(),null!=e.conv_list_seq&&Object.hasOwnProperty.call(e,"conv_list_seq")&&t.uint32(8).int64(e.conv_list_seq),t},B),e.UserMailHbRsp=(G.prototype.code=0,G.prototype.message="",G.prototype.conv_list_seq=_.Long?_.Long.fromBits(0,0,!1):0,G.prototype.group_list_seq=_.Long?_.Long.fromBits(0,0,!1):0,G.prototype.c2c_msg_seq=_.Long?_.Long.fromBits(0,0,!1):0,G.prototype.seq_fallback_timeout=0,G.prototype.msg_to=0,G.prototype.msg_itvl=0,G.prototype.list_to=0,G.prototype.list_itvl=0,G.prototype.conv_to=0,G.prototype.conv_itvl=0,G.prototype.group_to=0,G.prototype.group_itvl=0,G.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.UserMailHbRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.conv_list_seq=e.int64();break;case 4:o.group_list_seq=e.int64();break;case 5:o.c2c_msg_seq=e.int64();break;case 7:o.seq_fallback_timeout=e.uint32();break;case 8:o.msg_to=e.uint32();break;case 9:o.msg_itvl=e.uint32();break;case 10:o.list_to=e.uint32();break;case 11:o.list_itvl=e.uint32();break;case 12:o.conv_to=e.uint32();break;case 13:o.conv_itvl=e.uint32();break;case 14:o.group_to=e.uint32();break;case 15:o.group_itvl=e.uint32();break;default:e.skipType(7&n)}}return o},G),e.ConvDelReq=(N.prototype.conv_id="",N.prototype.conv_type=0,N.prototype.read_seq=_.Long?_.Long.fromBits(0,0,!1):0,N.encode=function(e,t){return t=t||m.create(),null!=e.conv_id&&Object.hasOwnProperty.call(e,"conv_id")&&t.uint32(10).string(e.conv_id),null!=e.conv_type&&Object.hasOwnProperty.call(e,"conv_type")&&t.uint32(16).int32(e.conv_type),null!=e.read_seq&&Object.hasOwnProperty.call(e,"read_seq")&&t.uint32(24).int64(e.read_seq),t},N),e.ConvDelRsp=(j.prototype.code=0,j.prototype.message="",j.prototype.conv_list_seq=_.Long?_.Long.fromBits(0,0,!1):0,j.prototype.conv_msg_seq=_.Long?_.Long.fromBits(0,0,!1):0,j.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.ConvDelRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.conv_list_seq=e.int64();break;case 4:o.conv_msg_seq=e.int64();break;default:e.skipType(7&n)}}return o},j),e.ConvDelMsgByMsgIdReq=(U.prototype.conv_id="",U.prototype.conv_type=0,U.prototype.msg_ids=_.emptyArray,U.encode=function(e,t){if(t=t||m.create(),null!=e.conv_id&&Object.hasOwnProperty.call(e,"conv_id")&&t.uint32(10).string(e.conv_id),null!=e.conv_type&&Object.hasOwnProperty.call(e,"conv_type")&&t.uint32(16).int32(e.conv_type),null!=e.msg_ids&&e.msg_ids.length){t.uint32(26).fork();for(let r=0;r<e.msg_ids.length;++r)t.int64(e.msg_ids[r]);t.ldelim()}return t},U),e.HttpRequest=(z.prototype.url="",z.prototype.method="",z.prototype.headers=_.emptyObject,z.prototype.forms=_.emptyObject,z.decode=function(e,t){e instanceof g||(e=g.create(e));let r,o,n=void 0===t?e.len:e.pos+t,i=new y.proto_zim.HttpRequest;for(;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:i.url=e.string();break;case 2:i.method=e.string();break;case 3:i.headers===_.emptyObject&&(i.headers={});var a=e.uint32()+e.pos;for(r="",o="";e.pos<a;){var u=e.uint32();switch(u>>>3){case 1:r=e.string();break;case 2:o=e.string();break;default:e.skipType(7&u)}}i.headers[r]=o;break;case 4:i.forms===_.emptyObject&&(i.forms={});var c=e.uint32()+e.pos;for(r="",o="";e.pos<c;){var l=e.uint32();switch(l>>>3){case 1:r=e.string();break;case 2:o=e.string();break;default:e.skipType(7&l)}}i.forms[r]=o;break;default:e.skipType(7&s)}}return i},z),e.FileUploadReq=(F.prototype.md5="",F.prototype.file_type=0,F.prototype.name="",F.prototype.size=_.Long?_.Long.fromBits(0,0,!1):0,F.prototype.duration=_.Long?_.Long.fromBits(0,0,!1):0,F.encode=function(e,t){return t=t||m.create(),null!=e.md5&&Object.hasOwnProperty.call(e,"md5")&&t.uint32(10).string(e.md5),null!=e.file_type&&Object.hasOwnProperty.call(e,"file_type")&&t.uint32(16).int32(e.file_type),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(26).string(e.name),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(32).int64(e.size),null!=e.duration&&Object.hasOwnProperty.call(e,"duration")&&t.uint32(40).int64(e.duration),t},F),e.FileUploadRsp=(H.prototype.code=0,H.prototype.message="",H.prototype.state=0,H.prototype.upload_req=null,H.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.FileUploadRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.state=e.uint32();break;case 4:o.upload_req=y.proto_zim.HttpRequest.decode(e,e.uint32());break;default:e.skipType(7&n)}}return o},H),e.FileProcessRsp=(K.prototype.code=0,K.prototype.message="",K.prototype.state=0,K.prototype.download_url="",K.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.FileProcessRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.state=e.uint32();break;case 4:o.download_url=e.string();break;default:e.skipType(7&n)}}return o},K),e.StGroupMemberData=(V.prototype.member_data_seq=_.Long?_.Long.fromBits(0,0,!1):0,V.prototype.user_name="",V.prototype.group_nick_name="",V.prototype.role=0,V.prototype.mute=0,V.prototype.not_notify=0,V.prototype.not_recv_msg=0,V.prototype.user_avatar=_.newBuffer([]),V.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.StGroupMemberData;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.member_data_seq=e.int64();break;case 2:o.user_name=e.string();break;case 3:o.group_nick_name=e.string();break;case 4:o.role=e.int32();break;case 5:o.mute=e.int32();break;case 6:o.not_notify=e.int32();break;case 7:o.not_recv_msg=e.int32();break;case 8:o.user_avatar=e.bytes();break;default:e.skipType(7&n)}}return o},V),e.StGroupMember=(Z.prototype.user_id="",Z.prototype.user_nid=_.Long?_.Long.fromBits(0,0,!1):0,Z.prototype.member_seq=_.Long?_.Long.fromBits(0,0,!1):0,Z.prototype.member_data=null,Z.prototype.attributes=null,Z.prototype.group_list_seq=_.Long?_.Long.fromBits(0,0,!1):0,Z.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.StGroupMember;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.user_id=e.string();break;case 2:o.user_nid=e.int64();break;case 3:o.member_seq=e.int64();break;case 4:o.member_data=y.proto_zim.StGroupMemberData.decode(e,e.uint32());break;case 5:o.attributes=y.proto_zim.StGroupMemberAttributes.decode(e,e.uint32());break;case 6:o.group_list_seq=e.int64();break;default:e.skipType(7&n)}}return o},Z),e.GroupCreateReq=(W.prototype.group_id="",W.prototype.group_name="",W.prototype.group_notice="",W.prototype.user_ids=_.emptyArray,W.prototype.attributes=_.emptyArray,W.prototype.group_avatar=_.newBuffer([]),W.encode=function(e,t){if(t=t||m.create(),null!=e.group_id&&Object.hasOwnProperty.call(e,"group_id")&&t.uint32(10).string(e.group_id),null!=e.group_name&&Object.hasOwnProperty.call(e,"group_name")&&t.uint32(18).string(e.group_name),null!=e.group_notice&&Object.hasOwnProperty.call(e,"group_notice")&&t.uint32(26).string(e.group_notice),null!=e.user_ids&&e.user_ids.length)for(let r=0;r<e.user_ids.length;++r)t.uint32(34).string(e.user_ids[r]);if(null!=e.attributes&&e.attributes.length)for(let r=0;r<e.attributes.length;++r)y.proto_zim.StGroupAttribute.encode(e.attributes[r],t.uint32(42).fork()).ldelim();return null!=e.group_avatar&&Object.hasOwnProperty.call(e,"group_avatar")&&t.uint32(50).bytes(e.group_avatar),t},W),e.GroupCreateRsp=(Q.prototype.code=0,Q.prototype.message="",Q.prototype.group_id="",Q.prototype.members=_.emptyArray,Q.prototype.member_all_seq=_.Long?_.Long.fromBits(0,0,!1):0,Q.prototype.error_users=_.emptyArray,Q.prototype.group_list_seq=_.Long?_.Long.fromBits(0,0,!1):0,Q.prototype.group_data_seq=_.Long?_.Long.fromBits(0,0,!1):0,Q.prototype.group_attribute_seq=_.Long?_.Long.fromBits(0,0,!1):0,Q.prototype.member_count=0,Q.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.GroupCreateRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.group_id=e.string();break;case 4:o.members&&o.members.length||(o.members=[]),o.members.push(y.proto_zim.StGroupMember.decode(e,e.uint32()));break;case 5:o.member_all_seq=e.int64();break;case 6:o.error_users&&o.error_users.length||(o.error_users=[]),o.error_users.push(y.proto_zim.ErrorUser.decode(e,e.uint32()));break;case 7:o.group_list_seq=e.int64();break;case 8:o.group_data_seq=e.int64();break;case 9:o.group_attribute_seq=e.int64();break;case 10:o.member_count=e.uint32();break;default:e.skipType(7&n)}}return o},Q),e.GroupDestroyReq=(J.prototype.group_id="",J.encode=function(e,t){return t=t||m.create(),null!=e.group_id&&Object.hasOwnProperty.call(e,"group_id")&&t.uint32(10).string(e.group_id),t},J),e.GroupDestroyRsp=(Y.prototype.code=0,Y.prototype.message="",Y.prototype.group_list_seq=_.Long?_.Long.fromBits(0,0,!1):0,Y.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.GroupDestroyRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.group_list_seq=e.int64();break;default:e.skipType(7&n)}}return o},Y),e.StGroupAttribute=(X.prototype.key="",X.prototype.value="",X.prototype.seq=_.Long?_.Long.fromBits(0,0,!1):0,X.encode=function(e,t){return t=t||m.create(),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(24).int64(e.seq),t},X.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.StGroupAttribute;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.key=e.string();break;case 2:o.value=e.string();break;case 3:o.seq=e.int64();break;default:e.skipType(7&n)}}return o},X),e.StModifyGroupAttribute=($.prototype.action=0,$.prototype.attributes=_.emptyArray,$.encode=function(e,t){if(t=t||m.create(),null!=e.action&&Object.hasOwnProperty.call(e,"action")&&t.uint32(8).int32(e.action),null!=e.attributes&&e.attributes.length)for(let r=0;r<e.attributes.length;++r)y.proto_zim.StGroupAttribute.encode(e.attributes[r],t.uint32(18).fork()).ldelim();return t},$.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.StModifyGroupAttribute;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.action=e.int32();break;case 2:o.attributes&&o.attributes.length||(o.attributes=[]),o.attributes.push(y.proto_zim.StGroupAttribute.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},$),e.StGroupAttributes=(ee.prototype.seq=_.Long?_.Long.fromBits(0,0,!1):0,ee.prototype.attributes=_.emptyArray,ee.encode=function(e,t){if(t=t||m.create(),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).int64(e.seq),null!=e.attributes&&e.attributes.length)for(let r=0;r<e.attributes.length;++r)y.proto_zim.StGroupAttribute.encode(e.attributes[r],t.uint32(18).fork()).ldelim();return t},ee.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.StGroupAttributes;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.seq=e.int64();break;case 2:o.attributes&&o.attributes.length||(o.attributes=[]),o.attributes.push(y.proto_zim.StGroupAttribute.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},ee),e.GroupDataRsp=(te.prototype.code=0,te.prototype.message="",te.prototype.group_name="",te.prototype.group_notice="",te.prototype.group_data_seq=_.Long?_.Long.fromBits(0,0,!1):0,te.prototype.group_avatar=_.newBuffer([]),te.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.GroupDataRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.group_name=e.string();break;case 4:o.group_notice=e.string();break;case 5:o.group_data_seq=e.int64();break;case 6:o.group_avatar=e.bytes();break;default:e.skipType(7&n)}}return o},te),e.GroupModifyAttributeReq=(re.prototype.group_id="",re.prototype.attributes=null,re.encode=function(e,t){return t=t||m.create(),null!=e.group_id&&Object.hasOwnProperty.call(e,"group_id")&&t.uint32(10).string(e.group_id),null!=e.attributes&&Object.hasOwnProperty.call(e,"attributes")&&y.proto_zim.StModifyGroupAttribute.encode(e.attributes,t.uint32(18).fork()).ldelim(),t},re),e.GroupModifyAttributeRsp=(oe.prototype.code=0,oe.prototype.message="",oe.prototype.attributes=null,oe.prototype.fail_keys=_.emptyArray,oe.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.GroupModifyAttributeRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.attributes=y.proto_zim.StGroupAttributes.decode(e,e.uint32());break;case 4:o.fail_keys&&o.fail_keys.length||(o.fail_keys=[]),o.fail_keys.push(y.proto_zim.FailKey.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},oe),e.GroupGetAttributesReq=(ne.prototype.group_id="",ne.prototype.attributes=null,ne.encode=function(e,t){return t=t||m.create(),null!=e.group_id&&Object.hasOwnProperty.call(e,"group_id")&&t.uint32(10).string(e.group_id),null!=e.attributes&&Object.hasOwnProperty.call(e,"attributes")&&y.proto_zim.StGroupAttributes.encode(e.attributes,t.uint32(18).fork()).ldelim(),t},ne),e.GroupGetAttributesRsp=(ie.prototype.code=0,ie.prototype.message="",ie.prototype.attributes=null,ie.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.GroupGetAttributesRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.attributes=y.proto_zim.StGroupAttributes.decode(e,e.uint32());break;default:e.skipType(7&n)}}return o},ie),e.GroupEnterRsp=(se.prototype.code=0,se.prototype.message="",se.prototype.group_name="",se.prototype.properties=null,se.prototype.member=null,se.prototype.member_all_seq=_.Long?_.Long.fromBits(0,0,!1):0,se.prototype.group_list_seq=_.Long?_.Long.fromBits(0,0,!1):0,se.prototype.group_data_seq=_.Long?_.Long.fromBits(0,0,!1):0,se.prototype.group_attribute_seq=_.Long?_.Long.fromBits(0,0,!1):0,se.prototype.conv_msg_seq=_.Long?_.Long.fromBits(0,0,!1):0,se.prototype.member_count=0,se.prototype.group_avatar=_.newBuffer([]),se.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.GroupEnterRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.group_name=e.string();break;case 4:o.properties=y.proto_zim.StGroupAttributes.decode(e,e.uint32());break;case 5:o.member=y.proto_zim.StGroupMember.decode(e,e.uint32());break;case 6:o.member_all_seq=e.int64();break;case 7:o.group_list_seq=e.int64();break;case 8:o.group_data_seq=e.int64();break;case 9:o.group_attribute_seq=e.int64();break;case 10:o.conv_msg_seq=e.int64();break;case 11:o.member_count=e.uint32();break;case 12:o.group_avatar=e.bytes();break;default:e.skipType(7&n)}}return o},se),e.GroupInviteReq=(ae.prototype.group_id="",ae.prototype.user_ids=_.emptyArray,ae.encode=function(e,t){if(t=t||m.create(),null!=e.group_id&&Object.hasOwnProperty.call(e,"group_id")&&t.uint32(10).string(e.group_id),null!=e.user_ids&&e.user_ids.length)for(let r=0;r<e.user_ids.length;++r)t.uint32(18).string(e.user_ids[r]);return t},ae),e.GroupInviteRsp=(ue.prototype.code=0,ue.prototype.message="",ue.prototype.member_all_seq=_.Long?_.Long.fromBits(0,0,!1):0,ue.prototype.members=_.emptyArray,ue.prototype.error_users=_.emptyArray,ue.prototype.group_data_seq=_.Long?_.Long.fromBits(0,0,!1):0,ue.prototype.group_attribute_seq=_.Long?_.Long.fromBits(0,0,!1):0,ue.prototype.member_count=0,ue.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.GroupInviteRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.member_all_seq=e.int64();break;case 4:o.members&&o.members.length||(o.members=[]),o.members.push(y.proto_zim.StGroupMember.decode(e,e.uint32()));break;case 5:o.error_users&&o.error_users.length||(o.error_users=[]),o.error_users.push(y.proto_zim.ErrorUser.decode(e,e.uint32()));break;case 6:o.group_data_seq=e.int64();break;case 7:o.group_attribute_seq=e.int64();break;case 8:o.member_count=e.uint32();break;default:e.skipType(7&n)}}return o},ue),e.GroupSetMemberNicknameReq=(ce.prototype.group_id="",ce.prototype.user_id="",ce.prototype.member_nickname="",ce.encode=function(e,t){return t=t||m.create(),null!=e.group_id&&Object.hasOwnProperty.call(e,"group_id")&&t.uint32(10).string(e.group_id),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(18).string(e.user_id),null!=e.member_nickname&&Object.hasOwnProperty.call(e,"member_nickname")&&t.uint32(26).string(e.member_nickname),t},ce),e.GroupSetMemberNicknameRsp=(le.prototype.code=0,le.prototype.message="",le.prototype.member_data_seq=_.Long?_.Long.fromBits(0,0,!1):0,le.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.GroupSetMemberNicknameRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.member_data_seq=e.int64();break;default:e.skipType(7&n)}}return o},le),e.GroupModifyGroupNameReq=(pe.prototype.group_id="",pe.prototype.group_name="",pe.encode=function(e,t){return t=t||m.create(),null!=e.group_id&&Object.hasOwnProperty.call(e,"group_id")&&t.uint32(10).string(e.group_id),null!=e.group_name&&Object.hasOwnProperty.call(e,"group_name")&&t.uint32(18).string(e.group_name),t},pe),e.GroupModifyGroupNameRsp=(he.prototype.code=0,he.prototype.message="",he.prototype.group_data_seq=_.Long?_.Long.fromBits(0,0,!1):0,he.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.GroupModifyGroupNameRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.group_data_seq=e.int64();break;default:e.skipType(7&n)}}return o},he),e.GroupModifyGroupNoticeReq=(de.prototype.group_id="",de.prototype.group_notice="",de.encode=function(e,t){return t=t||m.create(),null!=e.group_id&&Object.hasOwnProperty.call(e,"group_id")&&t.uint32(10).string(e.group_id),null!=e.group_notice&&Object.hasOwnProperty.call(e,"group_notice")&&t.uint32(18).string(e.group_notice),t},de),e.GroupModifyGroupAvatarReq=(fe.prototype.group_id="",fe.prototype.group_avatar=_.newBuffer([]),fe.encode=function(e,t){return t=t||m.create(),null!=e.group_id&&Object.hasOwnProperty.call(e,"group_id")&&t.uint32(10).string(e.group_id),null!=e.group_avatar&&Object.hasOwnProperty.call(e,"group_avatar")&&t.uint32(18).bytes(e.group_avatar),t},fe),e.GroupKickOutRsp=(ge.prototype.code=0,ge.prototype.message="",ge.prototype.member_all_seq=_.Long?_.Long.fromBits(0,0,!1):0,ge.prototype.error_users=_.emptyArray,ge.prototype.member_count=0,ge.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.GroupKickOutRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.member_all_seq=e.int64();break;case 4:o.error_users&&o.error_users.length||(o.error_users=[]),o.error_users.push(y.proto_zim.ErrorUser.decode(e,e.uint32()));break;case 5:o.member_count=e.uint32();break;default:e.skipType(7&n)}}return o},ge),e.GroupGetMembersReq=(me.prototype.group_id="",me.prototype.cur_member_seq=_.Long?_.Long.fromBits(0,0,!1):0,me.prototype.count=0,me.prototype.full_pull=0,me.prototype.degree=0,me.encode=function(e,t){return t=t||m.create(),null!=e.group_id&&Object.hasOwnProperty.call(e,"group_id")&&t.uint32(10).string(e.group_id),null!=e.cur_member_seq&&Object.hasOwnProperty.call(e,"cur_member_seq")&&t.uint32(16).int64(e.cur_member_seq),null!=e.count&&Object.hasOwnProperty.call(e,"count")&&t.uint32(24).uint32(e.count),null!=e.full_pull&&Object.hasOwnProperty.call(e,"full_pull")&&t.uint32(32).int32(e.full_pull),null!=e.degree&&Object.hasOwnProperty.call(e,"degree")&&t.uint32(40).uint32(e.degree),t},me),e.StGroupMemberChangeEvent=(_e.prototype.group_id="",_e.prototype.member=null,_e.prototype.event_type=0,_e.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.StGroupMemberChangeEvent;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.group_id=e.string();break;case 2:o.member=y.proto_zim.StGroupMember.decode(e,e.uint32());break;case 3:o.event_type=e.int32();break;default:e.skipType(7&n)}}return o},_e),e.GroupGetMembersRsp=(ye.prototype.code=0,ye.prototype.message="",ye.prototype.member_all_seq=_.Long?_.Long.fromBits(0,0,!1):0,ye.prototype.change_list=_.emptyArray,ye.prototype.full_list=0,ye.prototype.cur_member_seq=_.Long?_.Long.fromBits(0,0,!1):0,ye.prototype.fetch_end=0,ye.prototype.member_count=0,ye.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.GroupGetMembersRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.member_all_seq=e.int64();break;case 4:o.change_list&&o.change_list.length||(o.change_list=[]),o.change_list.push(y.proto_zim.StGroupMemberChangeEvent.decode(e,e.uint32()));break;case 5:o.full_list=e.int32();break;case 6:o.cur_member_seq=e.int64();break;case 7:o.fetch_end=e.int32();break;case 8:o.member_count=e.uint32();break;default:e.skipType(7&n)}}return o},ye),e.StGroupMemberAttribute=(be.prototype.key="",be.prototype.value="",be.prototype.seq=_.Long?_.Long.fromBits(0,0,!1):0,be.encode=function(e,t){return t=t||m.create(),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(24).int64(e.seq),t},be.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.StGroupMemberAttribute;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.key=e.string();break;case 2:o.value=e.string();break;case 3:o.seq=e.int64();break;default:e.skipType(7&n)}}return o},be),e.StGroupMemberAttributes=(ve.prototype.attributes_seq=_.Long?_.Long.fromBits(0,0,!1):0,ve.prototype.attributes=_.emptyArray,ve.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.StGroupMemberAttributes;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.attributes_seq=e.int64();break;case 2:o.attributes&&o.attributes.length||(o.attributes=[]),o.attributes.push(y.proto_zim.StGroupMemberAttribute.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},ve),e.FailKey=(we.prototype.key="",we.prototype.reason="",we.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.FailKey;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.key=e.string();break;case 2:o.reason=e.string();break;default:e.skipType(7&n)}}return o},we),e.GroupMemberDataReq=(ke.prototype.group_id="",ke.prototype.user_id="",ke.prototype.attributes=_.emptyArray,ke.encode=function(e,t){if(t=t||m.create(),null!=e.group_id&&Object.hasOwnProperty.call(e,"group_id")&&t.uint32(10).string(e.group_id),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(18).string(e.user_id),null!=e.attributes&&e.attributes.length)for(let r=0;r<e.attributes.length;++r)y.proto_zim.StGroupMemberAttribute.encode(e.attributes[r],t.uint32(26).fork()).ldelim();return t},ke),e.GroupMemberDataRsp=(Me.prototype.code=0,Me.prototype.message="",Me.prototype.member=null,Me.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.GroupMemberDataRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.member=y.proto_zim.StGroupMember.decode(e,e.uint32());break;default:e.skipType(7&n)}}return o},Me),e.GroupSetMemberRoleReq=(Ie.prototype.group_id="",Ie.prototype.user_id="",Ie.prototype.role=0,Ie.encode=function(e,t){return t=t||m.create(),null!=e.group_id&&Object.hasOwnProperty.call(e,"group_id")&&t.uint32(10).string(e.group_id),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(18).string(e.user_id),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).int32(e.role),t},Ie),e.GroupOwnerTransferReq=(Se.prototype.group_id="",Se.prototype.user_id="",Se.encode=function(e,t){return t=t||m.create(),null!=e.group_id&&Object.hasOwnProperty.call(e,"group_id")&&t.uint32(10).string(e.group_id),null!=e.user_id&&Object.hasOwnProperty.call(e,"user_id")&&t.uint32(18).string(e.user_id),t},Se),e.GroupOwnerTransferRsp=(De.prototype.code=0,De.prototype.message="",De.prototype.old_owner_data_seq=_.Long?_.Long.fromBits(0,0,!1):0,De.prototype.new_owner_data_seq=_.Long?_.Long.fromBits(0,0,!1):0,De.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.GroupOwnerTransferRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.old_owner_data_seq=e.int64();break;case 4:o.new_owner_data_seq=e.int64();break;default:e.skipType(7&n)}}return o},De),e.GroupUpdate=(Ce.prototype.type=0,Ce.prototype.info=null,Ce.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.GroupUpdate;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.type=e.int32();break;case 2:o.info=y.proto_zim.GroupInfo.decode(e,e.uint32());break;default:e.skipType(7&n)}}return o},Ce),e.GroupInfo=(Re.prototype.group_id="",Re.prototype.group_name="",Re.prototype.group_list_seq=_.Long?_.Long.fromBits(0,0,!1):0,Re.prototype.group_data_seq=_.Long?_.Long.fromBits(0,0,!1):0,Re.prototype.all_member_seq=_.Long?_.Long.fromBits(0,0,!1):0,Re.prototype.attribute_seq=_.Long?_.Long.fromBits(0,0,!1):0,Re.prototype.not_notify=!1,Re.prototype.member_count=0,Re.prototype.group_avatar=_.newBuffer([]),Re.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.GroupInfo;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.group_id=e.string();break;case 2:o.group_name=e.string();break;case 3:o.group_list_seq=e.int64();break;case 4:o.group_data_seq=e.int64();break;case 5:o.all_member_seq=e.int64();break;case 6:o.attribute_seq=e.int64();break;case 7:o.not_notify=e.bool();break;case 8:o.member_count=e.uint32();break;case 9:o.group_avatar=e.bytes();break;default:e.skipType(7&n)}}return o},Re),e.GroupListReq=(Ae.prototype.cur_list_seq=_.Long?_.Long.fromBits(0,0,!1):0,Ae.prototype.count=0,Ae.prototype.full_pull=0,Ae.prototype.degree=0,Ae.encode=function(e,t){return t=t||m.create(),null!=e.cur_list_seq&&Object.hasOwnProperty.call(e,"cur_list_seq")&&t.uint32(8).int64(e.cur_list_seq),null!=e.count&&Object.hasOwnProperty.call(e,"count")&&t.uint32(16).uint32(e.count),null!=e.full_pull&&Object.hasOwnProperty.call(e,"full_pull")&&t.uint32(24).int32(e.full_pull),null!=e.degree&&Object.hasOwnProperty.call(e,"degree")&&t.uint32(32).uint32(e.degree),t},Ae),e.GroupListRsp=(Oe.prototype.code=0,Oe.prototype.message="",Oe.prototype.cur_list_seq=_.Long?_.Long.fromBits(0,0,!1):0,Oe.prototype.max_list_seq=_.Long?_.Long.fromBits(0,0,!1):0,Oe.prototype.groups=_.emptyArray,Oe.prototype.full_list=0,Oe.prototype.fetch_end=0,Oe.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.GroupListRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.cur_list_seq=e.int64();break;case 4:o.max_list_seq=e.int64();break;case 5:o.groups&&o.groups.length||(o.groups=[]),o.groups.push(y.proto_zim.GroupUpdate.decode(e,e.uint32()));break;case 6:o.full_list=e.int32();break;case 7:o.fetch_end=e.int32();break;default:e.skipType(7&n)}}return o},Oe),e.GroupMuteReq=(Ee.prototype.group_id="",Ee.prototype.enable=!1,Ee.encode=function(e,t){return t=t||m.create(),null!=e.group_id&&Object.hasOwnProperty.call(e,"group_id")&&t.uint32(10).string(e.group_id),null!=e.enable&&Object.hasOwnProperty.call(e,"enable")&&t.uint32(16).bool(e.enable),t},Ee),e.GroupOperator=(xe.prototype.user_id="",xe.prototype.user_name=_.newBuffer([]),xe.prototype.group_nick_name="",xe.prototype.role=0,xe.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.GroupOperator;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.user_id=e.string();break;case 2:o.user_name=e.bytes();break;case 3:o.group_nick_name=e.string();break;case 4:o.role=e.int32();break;default:e.skipType(7&n)}}return o},xe),e.PushCreateGroup=(Pe.prototype.group_id="",Pe.prototype.group_name="",Pe.prototype.members=_.emptyArray,Pe.prototype.member_all_seq=_.Long?_.Long.fromBits(0,0,!1):0,Pe.prototype.attributes=null,Pe.prototype.op_user=null,Pe.prototype.member_count=0,Pe.prototype.group_avatar=_.newBuffer([]),Pe.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.PushCreateGroup;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.group_id=e.string();break;case 2:o.group_name=e.string();break;case 3:o.members&&o.members.length||(o.members=[]),o.members.push(y.proto_zim.StGroupMember.decode(e,e.uint32()));break;case 4:o.member_all_seq=e.int64();break;case 5:o.attributes=y.proto_zim.StGroupAttributes.decode(e,e.uint32());break;case 6:o.op_user=y.proto_zim.GroupOperator.decode(e,e.uint32());break;case 7:o.member_count=e.uint32();break;case 8:o.group_avatar=e.bytes();break;default:e.skipType(7&n)}}return o},Pe),e.PushModifyGroupAttribute=(Te.prototype.group_id="",Te.prototype.attributes=null,Te.prototype.op_user=null,Te.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.PushModifyGroupAttribute;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.group_id=e.string();break;case 2:o.attributes=y.proto_zim.StGroupAttributes.decode(e,e.uint32());break;case 3:o.op_user=y.proto_zim.GroupOperator.decode(e,e.uint32());break;default:e.skipType(7&n)}}return o},Te),e.PushGroupMemberChange=(qe.prototype.group_id="",qe.prototype.member_all_seq=_.Long?_.Long.fromBits(0,0,!1):0,qe.prototype.members=_.emptyArray,qe.prototype.change_type=0,qe.prototype.op_user=null,qe.prototype.new_owner_id="",qe.prototype.member_count=0,qe.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.PushGroupMemberChange;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.group_id=e.string();break;case 2:o.member_all_seq=e.int64();break;case 3:o.members&&o.members.length||(o.members=[]),o.members.push(y.proto_zim.StGroupMember.decode(e,e.uint32()));break;case 4:o.change_type=e.int32();break;case 5:o.op_user=y.proto_zim.GroupOperator.decode(e,e.uint32());break;case 6:o.new_owner_id=e.string();break;case 7:o.member_count=e.uint32();break;default:e.skipType(7&n)}}return o},qe),e.PushGroupMemberKickout=(Le.prototype.group_id="",Le.prototype.kickout_reason="",Le.prototype.op_user=null,Le.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.PushGroupMemberKickout;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.group_id=e.string();break;case 2:o.kickout_reason=e.string();break;case 3:o.op_user=y.proto_zim.GroupOperator.decode(e,e.uint32());break;default:e.skipType(7&n)}}return o},Le),e.PushModifyGroupData=(Be.prototype.group_id="",Be.prototype.op_user=null,Be.prototype.group_data_seq=_.Long?_.Long.fromBits(0,0,!1):0,Be.prototype.group_notice=null,Be.prototype.group_name=null,Be.prototype.group_avatar=null,Be.prototype.modify_type=0,Be.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.PushModifyGroupData;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.group_id=e.string();break;case 2:o.op_user=y.proto_zim.GroupOperator.decode(e,e.uint32());break;case 3:o.group_data_seq=e.int64();break;case 4:o.group_notice=e.string();break;case 5:o.group_name=e.string();break;case 7:o.group_avatar=e.bytes();break;case 6:o.modify_type=e.int32();break;default:e.skipType(7&n)}}return o},Be),e.PushGroupDestroy=(Ge.prototype.group_id="",Ge.prototype.op_user=null,Ge.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.PushGroupDestroy;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.group_id=e.string();break;case 2:o.op_user=y.proto_zim.GroupOperator.decode(e,e.uint32());break;default:e.skipType(7&n)}}return o},Ge),e.PushGroupOwnerTransfer=(Ne.prototype.group_id="",Ne.prototype.user_id="",Ne.prototype.op_user=null,Ne.prototype.member_all_seq=_.Long?_.Long.fromBits(0,0,!1):0,Ne.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.PushGroupOwnerTransfer;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.group_id=e.string();break;case 2:o.user_id=e.string();break;case 3:o.op_user=y.proto_zim.GroupOperator.decode(e,e.uint32());break;case 4:o.member_all_seq=e.int64();break;default:e.skipType(7&n)}}return o},Ne),e.PushGroupInvite=(je.prototype.group_id="",je.prototype.group_name="",je.prototype.group_notice="",je.prototype.op_user=null,je.prototype.conv_msg_seq=_.Long?_.Long.fromBits(0,0,!1):0,je.prototype.member_count=0,je.prototype.group_avatar=_.newBuffer([]),je.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.PushGroupInvite;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.group_id=e.string();break;case 2:o.group_name=e.string();break;case 3:o.group_notice=e.string();break;case 4:o.op_user=y.proto_zim.GroupOperator.decode(e,e.uint32());break;case 5:o.conv_msg_seq=e.int64();break;case 6:o.member_count=e.uint32();break;case 7:o.group_avatar=e.bytes();break;default:e.skipType(7&n)}}return o},je),e.C2CMsgReq=(Ue.prototype.peer_user_id="",Ue.prototype.msg_info=null,Ue.prototype.fetch_peer_user_info=0,Ue.encode=function(e,t){return t=t||m.create(),null!=e.peer_user_id&&Object.hasOwnProperty.call(e,"peer_user_id")&&t.uint32(10).string(e.peer_user_id),null!=e.msg_info&&Object.hasOwnProperty.call(e,"msg_info")&&y.proto_zim.StConvMsgInfo.encode(e.msg_info,t.uint32(18).fork()).ldelim(),null!=e.fetch_peer_user_info&&Object.hasOwnProperty.call(e,"fetch_peer_user_info")&&t.uint32(24).int32(e.fetch_peer_user_info),t},Ue),e.C2CMsgRsp=(ze.prototype.code=0,ze.prototype.message="",ze.prototype.msg_svr_info=null,ze.prototype.peer_user_name=_.newBuffer([]),ze.prototype.send_count_after_read=_.Long?_.Long.fromBits(0,0,!1):0,ze.prototype.conv_disable=!1,ze.prototype.peer_user_avatar=_.newBuffer([]),ze.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.C2CMsgRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.msg_svr_info=y.proto_zim.StMsgSvrInfo.decode(e,e.uint32());break;case 4:o.peer_user_name=e.bytes();break;case 5:o.send_count_after_read=e.int64();break;case 6:o.conv_disable=e.bool();break;case 7:o.peer_user_avatar=e.bytes();break;default:e.skipType(7&n)}}return o},ze),e.C2CCommandReq=(Fe.prototype.peer_user_id="",Fe.prototype.command_msg_info=null,Fe.encode=function(e,t){return t=t||m.create(),null!=e.peer_user_id&&Object.hasOwnProperty.call(e,"peer_user_id")&&t.uint32(10).string(e.peer_user_id),null!=e.command_msg_info&&Object.hasOwnProperty.call(e,"command_msg_info")&&y.proto_zim.StCommandMsgInfo.encode(e.command_msg_info,t.uint32(18).fork()).ldelim(),t},Fe),e.C2CCommandReqRsp=(He.prototype.code=0,He.prototype.message="",He.prototype.command_svr_info=null,He.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.C2CCommandReqRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.command_svr_info=y.proto_zim.StCommandSvrInfo.decode(e,e.uint32());break;default:e.skipType(7&n)}}return o},He),e.RoomMsgReq=(Ke.prototype.room_id="",Ke.prototype.room_session_id=_.Long?_.Long.fromBits(0,0,!1):0,Ke.prototype.room_user_session_id=_.Long?_.Long.fromBits(0,0,!1):0,Ke.prototype.msg_info=null,Ke.prototype.sub_room_id="",Ke.encode=function(e,t){return t=t||m.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).string(e.room_id),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(16).int64(e.room_session_id),null!=e.room_user_session_id&&Object.hasOwnProperty.call(e,"room_user_session_id")&&t.uint32(24).int64(e.room_user_session_id),null!=e.msg_info&&Object.hasOwnProperty.call(e,"msg_info")&&y.proto_zim.StConvMsgInfo.encode(e.msg_info,t.uint32(34).fork()).ldelim(),null!=e.sub_room_id&&Object.hasOwnProperty.call(e,"sub_room_id")&&t.uint32(402).string(e.sub_room_id),t},Ke),e.RoomMsgRsp=(Ve.prototype.code=0,Ve.prototype.message="",Ve.prototype.msg_id=_.Long?_.Long.fromBits(0,0,!1):0,Ve.prototype.msg_svr_info=null,Ve.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.RoomMsgRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.msg_id=e.int64();break;case 4:o.msg_svr_info=y.proto_zim.StMsgSvrInfo.decode(e,e.uint32());break;default:e.skipType(7&n)}}return o},Ve),e.RoomMsglistReq=(Ze.prototype.room_id="",Ze.prototype.room_session_id=_.Long?_.Long.fromBits(0,0,!1):0,Ze.prototype.room_user_session_id=_.Long?_.Long.fromBits(0,0,!1):0,Ze.prototype.conv_msg_seq=_.Long?_.Long.fromBits(0,0,!1):0,Ze.prototype.count=0,Ze.prototype.sort_type=0,Ze.prototype.how=0,Ze.prototype.degree=0,Ze.prototype.sub_room_id="",Ze.encode=function(e,t){return t=t||m.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).string(e.room_id),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(16).int64(e.room_session_id),null!=e.room_user_session_id&&Object.hasOwnProperty.call(e,"room_user_session_id")&&t.uint32(24).int64(e.room_user_session_id),null!=e.conv_msg_seq&&Object.hasOwnProperty.call(e,"conv_msg_seq")&&t.uint32(32).int64(e.conv_msg_seq),null!=e.count&&Object.hasOwnProperty.call(e,"count")&&t.uint32(40).int32(e.count),null!=e.sort_type&&Object.hasOwnProperty.call(e,"sort_type")&&t.uint32(48).int32(e.sort_type),null!=e.how&&Object.hasOwnProperty.call(e,"how")&&t.uint32(64).int32(e.how),null!=e.degree&&Object.hasOwnProperty.call(e,"degree")&&t.uint32(72).uint32(e.degree),null!=e.sub_room_id&&Object.hasOwnProperty.call(e,"sub_room_id")&&t.uint32(402).string(e.sub_room_id),t},Ze),e.RoomMsglistRsp=(We.prototype.code=0,We.prototype.message="",We.prototype.next_conv_msg_seq=_.Long?_.Long.fromBits(0,0,!1):0,We.prototype.max_conv_msg_seq=_.Long?_.Long.fromBits(0,0,!1):0,We.prototype.recv_msg_info=_.emptyArray,We.prototype.fetch_end=0,We.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.RoomMsglistRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.next_conv_msg_seq=e.int64();break;case 4:o.max_conv_msg_seq=e.int64();break;case 6:o.recv_msg_info&&o.recv_msg_info.length||(o.recv_msg_info=[]),o.recv_msg_info.push(y.proto_zim.FetchMsgInfo.decode(e,e.uint32()));break;case 7:o.fetch_end=e.int32();break;default:e.skipType(7&n)}}return o},We),e.StMsgInfo=(Qe.prototype.msg_type=0,Qe.prototype.msg=_.newBuffer([]),Qe.prototype.priority_type=0,Qe.prototype.msg_id=_.Long?_.Long.fromBits(0,0,!1):0,Qe.prototype.sender_user_id="",Qe.prototype.msg_time=_.Long?_.Long.fromBits(0,0,!1):0,Qe.prototype.payload=_.newBuffer([]),Qe.encode=function(e,t){return t=t||m.create(),null!=e.msg_type&&Object.hasOwnProperty.call(e,"msg_type")&&t.uint32(8).int32(e.msg_type),null!=e.msg&&Object.hasOwnProperty.call(e,"msg")&&t.uint32(18).bytes(e.msg),null!=e.priority_type&&Object.hasOwnProperty.call(e,"priority_type")&&t.uint32(24).int32(e.priority_type),null!=e.msg_id&&Object.hasOwnProperty.call(e,"msg_id")&&t.uint32(32).int64(e.msg_id),null!=e.sender_user_id&&Object.hasOwnProperty.call(e,"sender_user_id")&&t.uint32(42).string(e.sender_user_id),null!=e.msg_time&&Object.hasOwnProperty.call(e,"msg_time")&&t.uint32(48).int64(e.msg_time),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(58).bytes(e.payload),t},Qe.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.StMsgInfo;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.msg_type=e.int32();break;case 2:o.msg=e.bytes();break;case 3:o.priority_type=e.int32();break;case 4:o.msg_id=e.int64();break;case 5:o.sender_user_id=e.string();break;case 6:o.msg_time=e.int64();break;case 7:o.payload=e.bytes();break;default:e.skipType(7&n)}}return o},Qe),e.RoomCommandMsgReq=(Je.prototype.room_id="",Je.prototype.room_session_id=_.Long?_.Long.fromBits(0,0,!1):0,Je.prototype.room_user_session_id=_.Long?_.Long.fromBits(0,0,!1):0,Je.prototype.msg_info=null,Je.prototype.sub_room_id="",Je.encode=function(e,t){return t=t||m.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).string(e.room_id),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(16).int64(e.room_session_id),null!=e.room_user_session_id&&Object.hasOwnProperty.call(e,"room_user_session_id")&&t.uint32(24).int64(e.room_user_session_id),null!=e.msg_info&&Object.hasOwnProperty.call(e,"msg_info")&&y.proto_zim.StMsgInfo.encode(e.msg_info,t.uint32(34).fork()).ldelim(),null!=e.sub_room_id&&Object.hasOwnProperty.call(e,"sub_room_id")&&t.uint32(402).string(e.sub_room_id),t},Je),e.RoomCommandMsgRsp=(Ye.prototype.code=0,Ye.prototype.message="",Ye.prototype.msg_id=_.Long?_.Long.fromBits(0,0,!1):0,Ye.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.RoomCommandMsgRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.msg_id=e.int64();break;default:e.skipType(7&n)}}return o},Ye),e.GroupMsgReq=(Xe.prototype.group_id="",Xe.prototype.msg_info=null,Xe.encode=function(e,t){return t=t||m.create(),null!=e.group_id&&Object.hasOwnProperty.call(e,"group_id")&&t.uint32(10).string(e.group_id),null!=e.msg_info&&Object.hasOwnProperty.call(e,"msg_info")&&y.proto_zim.StConvMsgInfo.encode(e.msg_info,t.uint32(18).fork()).ldelim(),t},Xe),e.GroupMsgRsp=($e.prototype.code=0,$e.prototype.message="",$e.prototype.msg_svr_info=null,$e.prototype.send_count_after_read=_.Long?_.Long.fromBits(0,0,!1):0,$e.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.GroupMsgRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.msg_svr_info=y.proto_zim.StMsgSvrInfo.decode(e,e.uint32());break;case 4:o.send_count_after_read=e.int64();break;default:e.skipType(7&n)}}return o},$e),e.GroupCommandReq=(et.prototype.group_id="",et.prototype.command_msg_info=null,et.encode=function(e,t){return t=t||m.create(),null!=e.group_id&&Object.hasOwnProperty.call(e,"group_id")&&t.uint32(10).string(e.group_id),null!=e.command_msg_info&&Object.hasOwnProperty.call(e,"command_msg_info")&&y.proto_zim.StCommandMsgInfo.encode(e.command_msg_info,t.uint32(18).fork()).ldelim(),t},et),e.FetchGroupMsgList=(tt.prototype.group_id="",tt.prototype.conv_msg_seq=_.Long?_.Long.fromBits(0,0,!1):0,tt.prototype.count=0,tt.prototype.sort_type=0,tt.prototype.max_conv_msg_seq=_.Long?_.Long.fromBits(0,0,!1):0,tt.prototype.how=0,tt.prototype.degree=0,tt.encode=function(e,t){return t=t||m.create(),null!=e.group_id&&Object.hasOwnProperty.call(e,"group_id")&&t.uint32(10).string(e.group_id),null!=e.conv_msg_seq&&Object.hasOwnProperty.call(e,"conv_msg_seq")&&t.uint32(16).int64(e.conv_msg_seq),null!=e.count&&Object.hasOwnProperty.call(e,"count")&&t.uint32(24).int32(e.count),null!=e.sort_type&&Object.hasOwnProperty.call(e,"sort_type")&&t.uint32(32).int32(e.sort_type),null!=e.max_conv_msg_seq&&Object.hasOwnProperty.call(e,"max_conv_msg_seq")&&t.uint32(40).int64(e.max_conv_msg_seq),null!=e.how&&Object.hasOwnProperty.call(e,"how")&&t.uint32(48).int32(e.how),null!=e.degree&&Object.hasOwnProperty.call(e,"degree")&&t.uint32(56).uint32(e.degree),t},tt),e.FetchGroupMsgListRsp=(rt.prototype.code=0,rt.prototype.message="",rt.prototype.max_conv_msg_seq=_.Long?_.Long.fromBits(0,0,!1):0,rt.prototype.next_conv_msg_seq=_.Long?_.Long.fromBits(0,0,!1):0,rt.prototype.msgs=_.emptyArray,rt.prototype.fetch_end=_.Long?_.Long.fromBits(0,0,!1):0,rt.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.FetchGroupMsgListRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.max_conv_msg_seq=e.int64();break;case 4:o.next_conv_msg_seq=e.int64();break;case 5:o.msgs&&o.msgs.length||(o.msgs=[]),o.msgs.push(y.proto_zim.FetchMsgInfo.decode(e,e.uint32()));break;case 6:o.fetch_end=e.int64();break;default:e.skipType(7&n)}}return o},rt),e.DelGroupAllConvMsg=(ot.prototype.group_id="",ot.encode=function(e,t){return t=t||m.create(),null!=e.group_id&&Object.hasOwnProperty.call(e,"group_id")&&t.uint32(10).string(e.group_id),t},ot),e.DelGroupConvMsg=(nt.prototype.group_id="",nt.prototype.conv_msg_seq=_.emptyArray,nt.encode=function(e,t){if(t=t||m.create(),null!=e.group_id&&Object.hasOwnProperty.call(e,"group_id")&&t.uint32(10).string(e.group_id),null!=e.conv_msg_seq&&e.conv_msg_seq.length){t.uint32(18).fork();for(let r=0;r<e.conv_msg_seq.length;++r)t.int64(e.conv_msg_seq[r]);t.ldelim()}return t},nt),e.PushC2CMsg=(it.prototype.recv_msg_info=null,it.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.PushC2CMsg;for(;e.pos<r;){var n=e.uint32();n>>>3==1?o.recv_msg_info=y.proto_zim.StRecvMsgInfo.decode(e,e.uint32()):e.skipType(7&n)}return o},it),e.PushC2CCommand=(st.prototype.recv_command_info=null,st.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.PushC2CCommand;for(;e.pos<r;){var n=e.uint32();n>>>3==1?o.recv_command_info=y.proto_zim.StRecvCommandInfo.decode(e,e.uint32()):e.skipType(7&n)}return o},st),e.PushRoomMsg=(at.prototype.room_id="",at.prototype.room_session_id=_.Long?_.Long.fromBits(0,0,!1):0,at.prototype.recv_msg_info=null,at.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.PushRoomMsg;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.room_id=e.string();break;case 2:o.room_session_id=e.int64();break;case 3:o.recv_msg_info=y.proto_zim.StRecvMsgInfo.decode(e,e.uint32());break;default:e.skipType(7&n)}}return o},at),e.PushRoomCommand=(ut.prototype.room_id="",ut.prototype.room_session_id=_.Long?_.Long.fromBits(0,0,!1):0,ut.prototype.msg_info=null,ut.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.PushRoomCommand;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.room_id=e.string();break;case 2:o.room_session_id=e.int64();break;case 3:o.msg_info=y.proto_zim.StMsgInfo.decode(e,e.uint32());break;default:e.skipType(7&n)}}return o},ut),e.PushGroupCommand=(ct.prototype.recv_command_info=null,ct.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.PushGroupCommand;for(;e.pos<r;){var n=e.uint32();n>>>3==2?o.recv_command_info=y.proto_zim.StRecvCommandInfo.decode(e,e.uint32()):e.skipType(7&n)}return o},ct),e.RoomCreateReq=(lt.prototype.room_id="",lt.prototype.room_name=_.newBuffer([]),lt.prototype.attributes=_.emptyArray,lt.prototype.destroy_delay=0,lt.encode=function(e,t){if(t=t||m.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).string(e.room_id),null!=e.room_name&&Object.hasOwnProperty.call(e,"room_name")&&t.uint32(18).bytes(e.room_name),null!=e.attributes&&e.attributes.length)for(let r=0;r<e.attributes.length;++r)y.proto_zim.StRoomAttribute.encode(e.attributes[r],t.uint32(26).fork()).ldelim();return null!=e.destroy_delay&&Object.hasOwnProperty.call(e,"destroy_delay")&&t.uint32(32).uint32(e.destroy_delay),t},lt),e.RoomCreateRsp=(pt.prototype.code=0,pt.prototype.message="",pt.prototype.room_session_id=_.Long?_.Long.fromBits(0,0,!1):0,pt.prototype.room_user_session_id=_.Long?_.Long.fromBits(0,0,!1):0,pt.prototype.room_info_interval=0,pt.prototype.userlist_enable=0,pt.prototype.userlist_merge_timeout=0,pt.prototype.userlist_interval=0,pt.prototype.attributes=null,pt.prototype.attributes_pull_interval=0,pt.prototype.attributes_merge_timeout=0,pt.prototype.conv_msg_seq=_.Long?_.Long.fromBits(0,0,!1):0,pt.prototype.enabled_offline_msg=0,pt.prototype.msg_merge_timeout=0,pt.prototype.msg_pull_interval=0,pt.prototype.destroy_delay=0,pt.prototype.sub_room_id="",pt.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.RoomCreateRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.room_session_id=e.int64();break;case 4:o.room_user_session_id=e.int64();break;case 5:o.room_info_interval=e.uint32();break;case 6:o.userlist_enable=e.uint32();break;case 7:o.userlist_merge_timeout=e.uint32();break;case 8:o.userlist_interval=e.uint32();break;case 9:o.attributes=y.proto_zim.StRoomAttributes.decode(e,e.uint32());break;case 10:o.attributes_pull_interval=e.uint32();break;case 11:o.attributes_merge_timeout=e.uint32();break;case 13:o.conv_msg_seq=e.int64();break;case 14:o.enabled_offline_msg=e.uint32();break;case 15:o.msg_merge_timeout=e.uint32();break;case 16:o.msg_pull_interval=e.uint32();break;case 17:o.destroy_delay=e.uint32();break;case 18:o.sub_room_id=e.string();break;default:e.skipType(7&n)}}return o},pt),e.RoomEnterReq=(ht.prototype.room_id="",ht.prototype.room_user_session_id=_.Long?_.Long.fromBits(0,0,!1):0,ht.prototype.room_name=_.newBuffer([]),ht.prototype.attributes=_.emptyArray,ht.prototype.destroy_delay=0,ht.prototype.create_if_not_exist=!1,ht.encode=function(e,t){if(t=t||m.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).string(e.room_id),null!=e.room_user_session_id&&Object.hasOwnProperty.call(e,"room_user_session_id")&&t.uint32(16).int64(e.room_user_session_id),null!=e.room_name&&Object.hasOwnProperty.call(e,"room_name")&&t.uint32(26).bytes(e.room_name),null!=e.attributes&&e.attributes.length)for(let r=0;r<e.attributes.length;++r)y.proto_zim.StRoomAttribute.encode(e.attributes[r],t.uint32(34).fork()).ldelim();return null!=e.destroy_delay&&Object.hasOwnProperty.call(e,"destroy_delay")&&t.uint32(40).uint32(e.destroy_delay),null!=e.create_if_not_exist&&Object.hasOwnProperty.call(e,"create_if_not_exist")&&t.uint32(48).bool(e.create_if_not_exist),t},ht),e.RoomEnterRsp=(dt.prototype.code=0,dt.prototype.message="",dt.prototype.room_name=_.newBuffer([]),dt.prototype.room_session_id=_.Long?_.Long.fromBits(0,0,!1):0,dt.prototype.room_user_session_id=_.Long?_.Long.fromBits(0,0,!1):0,dt.prototype.userlist_seq=0,dt.prototype.user_count=0,dt.prototype.room_info_interval=0,dt.prototype.userlist_enable=0,dt.prototype.userlist_merge_timeout=0,dt.prototype.userlist_interval=0,dt.prototype.attribute_seq=0,dt.prototype.attributes_pull_interval=0,dt.prototype.attributes_merge_timeout=0,dt.prototype.sub_room_id="",dt.prototype.conv_msg_seq=_.Long?_.Long.fromBits(0,0,!1):0,dt.prototype.enabled_offline_msg=0,dt.prototype.msg_merge_timeout=0,dt.prototype.msg_pull_interval=0,dt.prototype.destroy_delay=0,dt.prototype.attributes=null,dt.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.RoomEnterRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.room_name=e.bytes();break;case 4:o.room_session_id=e.int64();break;case 5:o.room_user_session_id=e.int64();break;case 6:o.userlist_seq=e.uint32();break;case 7:o.user_count=e.uint32();break;case 8:o.room_info_interval=e.uint32();break;case 9:o.userlist_enable=e.uint32();break;case 10:o.userlist_merge_timeout=e.uint32();break;case 11:o.userlist_interval=e.uint32();break;case 12:o.attribute_seq=e.uint32();break;case 13:o.attributes_pull_interval=e.uint32();break;case 14:o.attributes_merge_timeout=e.uint32();break;case 15:o.sub_room_id=e.string();break;case 17:o.conv_msg_seq=e.int64();break;case 18:o.enabled_offline_msg=e.uint32();break;case 19:o.msg_merge_timeout=e.uint32();break;case 20:o.msg_pull_interval=e.uint32();break;case 21:o.destroy_delay=e.uint32();break;case 22:o.attributes=y.proto_zim.StRoomAttributes.decode(e,e.uint32());break;default:e.skipType(7&n)}}return o},dt),e.RoomQuitReq=(ft.prototype.room_id="",ft.prototype.room_session_id=_.Long?_.Long.fromBits(0,0,!1):0,ft.prototype.room_user_session_id=_.Long?_.Long.fromBits(0,0,!1):0,ft.prototype.sub_room_id="",ft.encode=function(e,t){return t=t||m.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).string(e.room_id),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(16).int64(e.room_session_id),null!=e.room_user_session_id&&Object.hasOwnProperty.call(e,"room_user_session_id")&&t.uint32(24).int64(e.room_user_session_id),null!=e.sub_room_id&&Object.hasOwnProperty.call(e,"sub_room_id")&&t.uint32(402).string(e.sub_room_id),t},ft),e.RoomUserlistReq=(gt.prototype.room_id="",gt.prototype.room_session_id=_.Long?_.Long.fromBits(0,0,!1):0,gt.prototype.pos_flag="",gt.prototype.count=0,gt.prototype.mode=0,gt.prototype.sub_room_id="",gt.prototype.expect_seq=0,gt.encode=function(e,t){return t=t||m.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).string(e.room_id),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(16).int64(e.room_session_id),null!=e.pos_flag&&Object.hasOwnProperty.call(e,"pos_flag")&&t.uint32(26).string(e.pos_flag),null!=e.count&&Object.hasOwnProperty.call(e,"count")&&t.uint32(32).int32(e.count),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(40).int32(e.mode),null!=e.expect_seq&&Object.hasOwnProperty.call(e,"expect_seq")&&t.uint32(48).uint32(e.expect_seq),null!=e.sub_room_id&&Object.hasOwnProperty.call(e,"sub_room_id")&&t.uint32(402).string(e.sub_room_id),t},gt),e.RoomUserlistRsp=(mt.prototype.code=0,mt.prototype.message="",mt.prototype.pos_flag="",mt.prototype.userlist_seq=0,mt.prototype.user_count=0,mt.prototype.users=_.emptyArray,mt.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.RoomUserlistRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.pos_flag=e.string();break;case 4:o.userlist_seq=e.uint32();break;case 5:o.user_count=e.uint32();break;case 6:o.users&&o.users.length||(o.users=[]),o.users.push(y.proto_zim.StUserInfo.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},mt),e.StUserInfo=(_t.prototype.user_id="",_t.prototype.user_name=_.newBuffer([]),_t.prototype.online_state=0,_t.prototype.extra=_.newBuffer([]),_t.prototype.avatar=_.newBuffer([]),_t.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.StUserInfo;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.user_id=e.string();break;case 2:o.user_name=e.bytes();break;case 3:o.online_state=e.int32();break;case 4:o.extra=e.bytes();break;case 5:o.avatar=e.bytes();break;default:e.skipType(7&n)}}return o},_t),e.RoomInfoReq=(yt.prototype.room_id="",yt.prototype.room_session_id=_.Long?_.Long.fromBits(0,0,!1):0,yt.prototype.sub_room_id="",yt.encode=function(e,t){return t=t||m.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).string(e.room_id),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(16).int64(e.room_session_id),null!=e.sub_room_id&&Object.hasOwnProperty.call(e,"sub_room_id")&&t.uint32(402).string(e.sub_room_id),t},yt),e.RoomInfoRsp=(bt.prototype.code=0,bt.prototype.message="",bt.prototype.userlist_seq=0,bt.prototype.user_count=0,bt.prototype.room_info_interval=0,bt.prototype.attribute_seq=0,bt.prototype.max_conv_msg_seq=_.Long?_.Long.fromBits(0,0,!1):0,bt.prototype.ulist_to=0,bt.prototype.ulist_itvl=0,bt.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.RoomInfoRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.userlist_seq=e.uint32();break;case 4:o.user_count=e.uint32();break;case 5:o.room_info_interval=e.uint32();break;case 6:o.attribute_seq=e.uint32();break;case 7:o.max_conv_msg_seq=e.int64();break;case 9:o.ulist_to=e.uint32();break;case 10:o.ulist_itvl=e.uint32();break;default:e.skipType(7&n)}}return o},bt),e.StRoomAttribute=(vt.prototype.key="",vt.prototype.value="",vt.prototype.seq=0,vt.prototype.auto_delete=0,vt.encode=function(e,t){return t=t||m.create(),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(24).uint32(e.seq),null!=e.auto_delete&&Object.hasOwnProperty.call(e,"auto_delete")&&t.uint32(32).int32(e.auto_delete),t},vt.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.StRoomAttribute;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.key=e.string();break;case 2:o.value=e.string();break;case 3:o.seq=e.uint32();break;case 4:o.auto_delete=e.int32();break;default:e.skipType(7&n)}}return o},vt),e.StModifyRoomAttribute=(wt.prototype.action=0,wt.prototype.attribute=null,wt.encode=function(e,t){return t=t||m.create(),null!=e.action&&Object.hasOwnProperty.call(e,"action")&&t.uint32(8).int32(e.action),null!=e.attribute&&Object.hasOwnProperty.call(e,"attribute")&&y.proto_zim.StRoomAttribute.encode(e.attribute,t.uint32(18).fork()).ldelim(),t},wt),e.StRoomAttributes=(kt.prototype.attribute_seq=0,kt.prototype.attributes=_.emptyArray,kt.encode=function(e,t){if(t=t||m.create(),null!=e.attribute_seq&&Object.hasOwnProperty.call(e,"attribute_seq")&&t.uint32(8).uint32(e.attribute_seq),null!=e.attributes&&e.attributes.length)for(let r=0;r<e.attributes.length;++r)y.proto_zim.StRoomAttribute.encode(e.attributes[r],t.uint32(18).fork()).ldelim();return t},kt.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.StRoomAttributes;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.attribute_seq=e.uint32();break;case 2:o.attributes&&o.attributes.length||(o.attributes=[]),o.attributes.push(y.proto_zim.StRoomAttribute.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},kt),e.ModifyRoomAttributesReq=(Mt.prototype.room_id="",Mt.prototype.room_session_id=_.Long?_.Long.fromBits(0,0,!1):0,Mt.prototype.force_modify=0,Mt.prototype.set_member=0,Mt.prototype.attribute_seq=0,Mt.prototype.op_fail_fast=0,Mt.prototype.attributes=_.emptyArray,Mt.prototype.sub_room_id="",Mt.encode=function(e,t){if(t=t||m.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).string(e.room_id),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(16).int64(e.room_session_id),null!=e.force_modify&&Object.hasOwnProperty.call(e,"force_modify")&&t.uint32(24).int32(e.force_modify),null!=e.set_member&&Object.hasOwnProperty.call(e,"set_member")&&t.uint32(32).int32(e.set_member),null!=e.attribute_seq&&Object.hasOwnProperty.call(e,"attribute_seq")&&t.uint32(40).uint32(e.attribute_seq),null!=e.op_fail_fast&&Object.hasOwnProperty.call(e,"op_fail_fast")&&t.uint32(48).uint32(e.op_fail_fast),null!=e.attributes&&e.attributes.length)for(let r=0;r<e.attributes.length;++r)y.proto_zim.StModifyRoomAttribute.encode(e.attributes[r],t.uint32(58).fork()).ldelim();return null!=e.sub_room_id&&Object.hasOwnProperty.call(e,"sub_room_id")&&t.uint32(402).string(e.sub_room_id),t},Mt),e.ErrList=(It.prototype.code=0,It.prototype.key="",It.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.ErrList;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.key=e.string();break;default:e.skipType(7&n)}}return o},It),e.ModifyRoomAttributesRsp=(St.prototype.code=0,St.prototype.message="",St.prototype.attributes=null,St.prototype.err_list=_.emptyArray,St.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.ModifyRoomAttributesRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.attributes=y.proto_zim.StRoomAttributes.decode(e,e.uint32());break;case 4:o.err_list&&o.err_list.length||(o.err_list=[]),o.err_list.push(y.proto_zim.ErrList.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},St),e.GetRoomAttributesReq=(Dt.prototype.room_id="",Dt.prototype.room_session_id=_.Long?_.Long.fromBits(0,0,!1):0,Dt.prototype.attributes=null,Dt.prototype.sub_room_id="",Dt.encode=function(e,t){return t=t||m.create(),null!=e.room_id&&Object.hasOwnProperty.call(e,"room_id")&&t.uint32(10).string(e.room_id),null!=e.room_session_id&&Object.hasOwnProperty.call(e,"room_session_id")&&t.uint32(16).int64(e.room_session_id),null!=e.attributes&&Object.hasOwnProperty.call(e,"attributes")&&y.proto_zim.StRoomAttributes.encode(e.attributes,t.uint32(26).fork()).ldelim(),null!=e.sub_room_id&&Object.hasOwnProperty.call(e,"sub_room_id")&&t.uint32(402).string(e.sub_room_id),t},Dt),e.GetRoomAttributesRsp=(Ct.prototype.code=0,Ct.prototype.message="",Ct.prototype.attributes=null,Ct.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.GetRoomAttributesRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.attributes=y.proto_zim.StRoomAttributes.decode(e,e.uint32());break;default:e.skipType(7&n)}}return o},Ct),e.PushRoomEnter=(Rt.prototype.room_id="",Rt.prototype.room_session_id=_.Long?_.Long.fromBits(0,0,!1):0,Rt.prototype.user_id="",Rt.prototype.user_name=_.newBuffer([]),Rt.prototype.enter_time=_.Long?_.Long.fromBits(0,0,!1):0,Rt.prototype.userlist_seq=0,Rt.prototype.user_count=0,Rt.prototype.sub_room_id="",Rt.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.PushRoomEnter;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.room_id=e.string();break;case 2:o.room_session_id=e.int64();break;case 3:o.user_id=e.string();break;case 4:o.user_name=e.bytes();break;case 5:o.enter_time=e.int64();break;case 6:o.userlist_seq=e.uint32();break;case 7:o.user_count=e.uint32();break;case 8:o.sub_room_id=e.string();break;default:e.skipType(7&n)}}return o},Rt),e.PushRoomQuit=(At.prototype.room_id="",At.prototype.room_session_id=_.Long?_.Long.fromBits(0,0,!1):0,At.prototype.user_id="",At.prototype.user_name=_.newBuffer([]),At.prototype.quit_time=_.Long?_.Long.fromBits(0,0,!1):0,At.prototype.userlist_seq=0,At.prototype.user_count=0,At.prototype.sub_room_id="",At.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.PushRoomQuit;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.room_id=e.string();break;case 2:o.room_session_id=e.int64();break;case 3:o.user_id=e.string();break;case 4:o.user_name=e.bytes();break;case 5:o.quit_time=e.int64();break;case 6:o.userlist_seq=e.uint32();break;case 7:o.user_count=e.uint32();break;case 8:o.sub_room_id=e.string();break;default:e.skipType(7&n)}}return o},At),e.PushRoomKickout=(Ot.prototype.room_id="",Ot.prototype.reason=0,Ot.prototype.message="",Ot.prototype.sub_room_id="",Ot.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.PushRoomKickout;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.room_id=e.string();break;case 2:o.reason=e.uint32();break;case 3:o.message=e.string();break;case 4:o.sub_room_id=e.string();break;default:e.skipType(7&n)}}return o},Ot),e.PushRoomAttributesModify=(Et.prototype.attributes=_.emptyArray,Et.prototype.room_id="",Et.prototype.room_session_id=_.Long?_.Long.fromBits(0,0,!1):0,Et.prototype.user_id="",Et.prototype.attributes_seq=0,Et.prototype.sub_room_id="",Et.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.PushRoomAttributesModify;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.attributes&&o.attributes.length||(o.attributes=[]),o.attributes.push(y.proto_zim.StRoomAttribute.decode(e,e.uint32()));break;case 2:o.room_id=e.string();break;case 3:o.room_session_id=e.int64();break;case 4:o.user_id=e.string();break;case 5:o.attributes_seq=e.uint32();break;case 6:o.sub_room_id=e.string();break;default:e.skipType(7&n)}}return o},Et),e.UserInfo=(xt.prototype.quey_user_id=_.emptyArray,xt.encode=function(e,t){if(t=t||m.create(),null!=e.quey_user_id&&e.quey_user_id.length)for(let r=0;r<e.quey_user_id.length;++r)t.uint32(10).string(e.quey_user_id[r]);return t},xt),e.UserInfoRsp=(Pt.prototype.code=0,Pt.prototype.message="",Pt.prototype.result=_.emptyArray,Pt.prototype.err_list=_.emptyArray,Pt.decode=function(e,t){e instanceof g||(e=g.create(e));let r=void 0===t?e.len:e.pos+t,o=new y.proto_zim.UserInfoRsp;for(;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:o.code=e.uint32();break;case 2:o.message=e.string();break;case 3:o.result&&o.result.length||(o.result=[]),o.result.push(y.proto_zim.StUserInfo.decode(e,e.uint32()));break;case 4:o.err_list&&o.err_list.length||(o.err_list=[]),o.err_list.push(y.proto_zim.ErrorUser.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return o},Pt),e.ModifyUserInfoReq=(Tt.prototype.user_name=_.newBuffer([]),Tt.prototype.extra=_.newBuffer([]),Tt.prototype.set_flag=0,Tt.prototype.user_avatar=_.newBuffer([]),Tt.encode=function(e,t){return t=t||m.create(),null!=e.user_name&&Object.hasOwnProperty.call(e,"user_name")&&t.uint32(10).bytes(e.user_name),null!=e.extra&&Object.hasOwnProperty.call(e,"extra")&&t.uint32(18).bytes(e.extra),null!=e.set_flag&&Object.hasOwnProperty.call(e,"set_flag")&&t.uint32(24).uint32(e.set_flag),null!=e.user_avatar&&Object.hasOwnProperty.call(e,"user_avatar")&&t.uint32(34).bytes(e.user_avatar),t},Tt),e.ZpnsReport=(qt.prototype.zpns_push_id="",qt.encode=function(e,t){return t=t||m.create(),null!=e.zpns_push_id&&Object.hasOwnProperty.call(e,"zpns_push_id")&&t.uint32(10).string(e.zpns_push_id),t},qt),e})(),(be=v=v||{})[be.Success=0]="Success",be[be.Failed=1]="Failed",be[be.CommonModuleParamInvalid=6000001]="CommonModuleParamInvalid",be[be.CommonModuleNotInit=6000002]="CommonModuleNotInit",be[be.CommonModuleInvalidAppID=6000003]="CommonModuleInvalidAppID",be[be.CommonModuleTriggerSDKFrequencyLimit=6000004]="CommonModuleTriggerSDKFrequencyLimit",be[be.CommonModuleTriggerServerFrequencyLimit=6000005]="CommonModuleTriggerServerFrequencyLimit",be[be.CommonModuleSwitchServerError=6000006]="CommonModuleSwitchServerError",be[be.CommonModuleIMServerError=6000007]="CommonModuleIMServerError",be[be.CommonModuleUploadLogError=6000010]="CommonModuleUploadLogError",be[be.CommonModuleUserIsNotExist=6000011]="CommonModuleUserIsNotExist",be[be.CommonModuleUserIsOperationLimit=6000012]="CommonModuleUserIsOperationLimit",be[be.NetworkModuleCommonError=6000101]="NetworkModuleCommonError",be[be.NetworkModuleServerError=6000102]="NetworkModuleServerError",be[be.NetworkModuleTokenInvalid=6000103]="NetworkModuleTokenInvalid",be[be.NetworkModuleNetworkError=6000104]="NetworkModuleNetworkError",be[be.NetworkModuleTokenExpired=6000106]="NetworkModuleTokenExpired",be[be.NetworkModuleTokenVersionError=6000107]="NetworkModuleTokenVersionError",be[be.NetworkModuleTokenTimeIsTooShort=6000108]="NetworkModuleTokenTimeIsTooShort",be[be.NetworkModuleUserHasAlreadyLogged=6000111]="NetworkModuleUserHasAlreadyLogged",be[be.NetworkModuleUserIsNotLogged=6000121]="NetworkModuleUserIsNotLogged",be[be.ConversationModuleCommonError=6000601]="ConversationModuleCommonError",be[be.ConversationModuleServerError=6000602]="ConversationModuleServerError",be[be.ConversationModuleConversationDoesNotExist=6000603]="ConversationModuleConversationDoesNotExist",be[be.MessageModuleCommonError=6000201]="MessageModuleCommonError",be[be.MessageModuleServerError=6000202]="MessageModuleServerError",be[be.MessageModuleSendMessageFailed=6000203]="MessageModuleSendMessageFailed",be[be.MessageModuleTargetDoesNotExist=6000204]="MessageModuleTargetDoesNotExist",be[be.MessageModuleCallError=6000270]="MessageModuleCallError",be[be.MessageModuleCancelCallError=6000271]="MessageModuleCancelCallError",be[be.MessageModuleCallServerError=6000272]="MessageModuleCallServerError",be[be.MessageModuleIsNotInvitor=6000273]="MessageModuleIsNotInvitor",be[be.MessageModuleIsNotInvitee=6000274]="MessageModuleIsNotInvitee",be[be.MessageModuleCallAlreadyExists=6000275]="MessageModuleCallAlreadyExists",be[be.MessageModuleCallDoesNotExist=6000276]="MessageModuleCallDoesNotExist",be[be.MessageModuleAuditRejected=6000221]="MessageModuleAuditRejected",be[be.MessageModuleAuditFailed=6000222]="MessageModuleAuditFailed",be[be.MessageModuleFileNotExist=6000211]="MessageModuleFileNotExist",be[be.MessageModuleFileServerError=6000212]="MessageModuleFileServerError",be[be.MessageModuleFileTypeUnsupported=6000213]="MessageModuleFileTypeUnsupported",be[be.MessageModuleFileSizeInvalid=6000214]="MessageModuleFileSizeInvalid",be[be.MessageModuleFileDurationInvalid=6000215]="MessageModuleFileDurationInvalid",be[be.RoomModuleCommonError=6000301]="RoomModuleCommonError",be[be.RoomModuleServerError=6000302]="RoomModuleServerError",be[be.RoomModuleCreateRoomError=6000303]="RoomModuleCreateRoomError",be[be.RoomModuleJoinRoomError=6000304]="RoomModuleJoinRoomError",be[be.RoomModuleLeaveRoomError=6000306]="RoomModuleLeaveRoomError",be[be.RoomModuleUserIsNotInTheRoom=6000321]="RoomModuleUserIsNotInTheRoom",be[be.RoomModuleTheRoomDoesNotExist=6000322]="RoomModuleTheRoomDoesNotExist",be[be.RoomModuleTheRoomAlreadyExists=6000323]="RoomModuleTheRoomAlreadyExists",be[be.RoomModuleTheNumberOfExistingRoomsHasReachedLimit=6000324]="RoomModuleTheNumberOfExistingRoomsHasReachedLimit",be[be.RoomModuleTheNumberOfJoinedRoomsHasReachedLimit=6000325]="RoomModuleTheNumberOfJoinedRoomsHasReachedLimit",be[be.RoomModuleRoomAttributesCommonError=6000330]="RoomModuleRoomAttributesCommonError",be[be.RoomModuleRoomAttributesOperationFailedCompletely=6000331]="RoomModuleRoomAttributesOperationFailedCompletely",be[be.RoomModuleRoomAttributesQueryFailed=6000333]="RoomModuleRoomAttributesQueryFailed",be[be.RoomModuleTheNumberOfRoomAttributesExceedsLimit=6000334]="RoomModuleTheNumberOfRoomAttributesExceedsLimit",be[be.RoomModuleTheLengthOfRoomAttributeKeyExceedsLimit=6000335]="RoomModuleTheLengthOfRoomAttributeKeyExceedsLimit",be[be.RoomModuleTheLengthOfRoomAttributeValueExceedsLimit=6000336]="RoomModuleTheLengthOfRoomAttributeValueExceedsLimit",be[be.RoomModuleTheTotalLengthOfRoomAttributesValueExceedsLimit=6000337]="RoomModuleTheTotalLengthOfRoomAttributesValueExceedsLimit",be[be.GroupModuleCommonError=6000501]="GroupModuleCommonError",be[be.GroupModuleServerError=6000502]="GroupModuleServerError",be[be.GroupModuleCreateGroupError=6000503]="GroupModuleCreateGroupError",be[be.GroupModuleDismissGroupError=6000504]="GroupModuleDismissGroupError",be[be.GroupModuleJoinGroupError=6000505]="GroupModuleJoinGroupError",be[be.GroupModuleLeaveGroupError=6000506]="GroupModuleLeaveGroupError",be[be.GroupModuleKickoutGroupMemberError=6000507]="GroupModuleKickoutGroupMemberError",be[be.GroupModuleInviteUserIntoGroupError=6000508]="GroupModuleInviteUserIntoGroupError",be[be.GroupModuleTransferOwnerError=6000509]="GroupModuleTransferOwnerError",be[be.GroupModuleUpdateGroupInfoError=6000510]="GroupModuleUpdateGroupInfoError",be[be.GroupModuleQueryGroupInfoError=6000511]="GroupModuleQueryGroupInfoError",be[be.GroupModuleGroupAttributesOperationFailed=6000512]="GroupModuleGroupAttributesOperationFailed",be[be.GroupModuleGroupAttributesQueryFailed=6000513]="GroupModuleGroupAttributesQueryFailed",be[be.GroupModuleUpdateGroupMemberInfoError=6000514]="GroupModuleUpdateGroupMemberInfoError",be[be.GroupModuleQueryGroupMemberInfoError=6000515]="GroupModuleQueryGroupMemberInfoError",be[be.GroupModuleQueryGroupListError=6000516]="GroupModuleQueryGroupListError",be[be.GroupModuleQueryGroupMemberListError=6000517]="GroupModuleQueryGroupMemberListError",be[be.GroupModuleUserIsNotInTheGroup=6000521]="GroupModuleUserIsNotInTheGroup",be[be.GroupModuleMemberIsAlreadyInTheGroup=6000522]="GroupModuleMemberIsAlreadyInTheGroup",be[be.GroupModuleGroupDoesNotExist=6000523]="GroupModuleGroupDoesNotExist",be[be.GroupModuleGroupAlreadyExists=6000524]="GroupModuleGroupAlreadyExists",be[be.GroupModuleGroupMemberHasReachedLimit=6000525]="GroupModuleGroupMemberHasReachedLimit",be[be.GroupModuleGroupAttributeDoesNotExist=6000526]="GroupModuleGroupAttributeDoesNotExist",be[be.GroupModuleTheNumberOfGroupAttributesExceedsLimit=6000531]="GroupModuleTheNumberOfGroupAttributesExceedsLimit",be[be.GroupModuleTheLengthOfGroupAttributeKeyExceedsLimit=6000532]="GroupModuleTheLengthOfGroupAttributeKeyExceedsLimit",be[be.GroupModuleTheLengthOfGroupAttributeValueExceedsLimit=6000533]="GroupModuleTheLengthOfGroupAttributeValueExceedsLimit",be[be.GroupModuleTheTotalLengthOfGroupAttributesValueExceedsLimit=6000534]="GroupModuleTheTotalLengthOfGroupAttributesValueExceedsLimit",be[be.GroupModuleNoCorrespondingOperationAuthority=6000541]="GroupModuleNoCorrespondingOperationAuthority",(be=w=w||{})[be.Disconnected=0]="Disconnected",be[be.Connecting=1]="Connecting",be[be.Connected=2]="Connected",be[be.Reconnecting=3]="Reconnecting",(be=k=k||{})[be.Success=0]="Success",be[be.ActiveLogin=1]="ActiveLogin",be[be.LoginTimeout=2]="LoginTimeout",be[be.LoginInterrupted=3]="LoginInterrupted",be[be.KickedOut=4]="KickedOut",(be=M=M||{})[be.Inviting=0]="Inviting",be[be.Accepted=1]="Accepted",be[be.Rejected=2]="Rejected",be[be.Cancelled=3]="Cancelled",be[be.Offline=4]="Offline",be[be.Received=5]="Received",(be=I=I||{})[be.Peer=0]="Peer",be[be.Room=1]="Room",be[be.Group=2]="Group",(be=S=S||{})[be.Added=0]="Added",be[be.Updated=1]="Updated",be[be.Disabled=2]="Disabled",(be=D=D||{})[be.Notify=1]="Notify",be[be.DoNotDisturb=2]="DoNotDisturb",(be=C=C||{})[be.Low=1]="Low",be[be.Medium=2]="Medium",be[be.High=3]="High",(be=R=R||{})[be.Unknown=0]="Unknown",be[be.Text=1]="Text",be[be.Command=2]="Command",be[be.Image=11]="Image",be[be.File=12]="File",be[be.Audio=13]="Audio",be[be.Video=14]="Video",be[be.Barrage=20]="Barrage",(be=A=A||{})[be.Sending=0]="Sending",be[be.Success=1]="Success",be[be.Failed=2]="Failed",(be=O=O||{})[be.Send=0]="Send",be[be.Receive=1]="Receive",(be=E=E||{})[be.Notify=1]="Notify",be[be.Disturb=2]="Disturb",(be=x=x||{})[be.Quit=0]="Quit",be[be.Enter=1]="Enter",(be=P=P||{})[be.Created=1]="Created",be[be.Dismissed=2]="Dismissed",be[be.Joined=3]="Joined",be[be.Invited=4]="Invited",be[be.Left=5]="Left",be[be.KickedOut=6]="KickedOut",(be=T=T||{})[be.Quit=0]="Quit",be[be.Enter=1]="Enter",(be=q=q||{})[be.Joined=1]="Joined",be[be.Left=2]="Left",be[be.KickedOut=4]="KickedOut",be[be.Invited=5]="Invited",(be=L=L||{})[be.Owner=1]="Owner",be[be.Member=3]="Member",(be=B=B||{})[be.Set=0]="Set",be[be.Delete=1]="Delete",(be=G=G||{})[be.Disconnected=0]="Disconnected",be[be.Connecting=1]="Connecting",be[be.Connected=2]="Connected",(be=N=N||{})[be.Success=0]="Success",be[be.NetworkInterrupted=1]="NetworkInterrupted",be[be.NetworkDisconnected=2]="NetworkDisconnected",be[be.RoomNotExist=3]="RoomNotExist",be[be.ActiveCreate=4]="ActiveCreate",be[be.CreateFailed=5]="CreateFailed",be[be.ActiveEnter=6]="ActiveEnter",be[be.EnterFailed=7]="EnterFailed",be[be.KickedOut=8]="KickedOut",(be=j=j||{})[be.Set=0]="Set",be[be.Delete=1]="Delete",(be=U=U||{})[be.Cancel=0]="Cancel",be[be.Timeout=1]="Timeout",(be=z=z||{})[be.Normal=0]="Normal",be[be.Disable=1]="Disable",be[be.Delete=2]="Delete",(be=F=F||{})[be.Notice=0]="Notice",be[be.Name=1]="Name",be[be.Avatar=2]="Avatar",(be=H=H||{})[be.Set=0]="Set",be[be.Delete=1]="Delete",be[be.Push=2]="Push",be[be.Query=3]="Query",(be=K=K||{})[be.None=0]="None",be[be.Enter=1]="Enter",be[be.Quit=2]="Quit",be[be.Modify=3]="Modify",be[be.Kickout=4]="Kickout",be[be.Invited=5]="Invited",be[be.OwnerQuit=6]="OwnerQuit",(be=V=V||{})[be.Nickname=0]="Nickname",be[be.Role=1]="Role",(be=Z=Z||{})[be.Other=0]="Other",be[be.SDKLogin=1]="SDKLogin",be[be.SDKPush=2]="SDKPush",be[be.SDKHb=3]="SDKHb",be[be.Biz=4]="Biz",(be=W=W||{}).Send="Send",be.Fetch="Fetch",be.Push="Push",(be=Q=Q||{})[be.SDK=0]="SDK",be[be.API=1]="API",(be=J=J||{}).sw_handshake_req="/sw/handshake_req",be.sw_login="/sw/login",be.sw_login_rsp="/sw/login_rsp",be.sw_logout="/sw/logout",be.sw_logout_rsp="/sw/logout_rsp",be.sw_renew_token="/sw/renew_token",be.sw_renew_token_rsp="/sw/renew_token_rsp",be.sw_hb="/sw/hb",be.sw_hb_rsp="/sw/hb_rsp",be.sw_push_kickout="/sw/push_kickout",be.sw_push_redirect="/sw/push_redirect",be.sw_push="/sw/push",be.sw_push_rsp="/sw/push_rsp",be.sw_push_list="/sw/push_list",be.sw_push_list_rsp="/sw/push_list_rsp",be.im_account_modify_user_info="/im/account/modify_user_info",be.im_account_modify_user_info_rsp="/im/account/modify_user_info_rsp",be.im_account_fetch_user_info="/im/account/fetch_user_info",be.im_account_fetch_user_info_rsp="/im/account/fetch_user_info_rsp",be.im_userstate_zpns_report="/im/userstate/zpns_report",be.im_userstate_zpns_report_rsp="/im/userstate/zpns_report_rsp",be.im_usermail_hb="/im/usermail/hb",be.im_usermail_hb_rsp="/im/usermail/hb_rsp",be.im_usermail_convlist="/im/usermail/convlist",be.im_usermail_convlist_rsp="/im/usermail/convlist_rsp",be.im_usermail_del_conv="/im/usermail/del_conv",be.im_usermail_del_conv_rsp="/im/usermail/del_conv_rsp",be.im_usermail_update_read_seq="/im/usermail/update_read_seq",be.im_usermail_update_read_seq_rsp="/im/usermail/update_read_seq_rsp",be.im_c2c_msg="/im/c2c/msg",be.im_c2c_msg_rsp="/im/c2c/msg_rsp",be.im_c2c_command="/im/c2c/command",be.im_c2c_command_rsp="/im/c2c/command_rsp",be.im_c2c_msglist="/im/usermail/msglist",be.im_c2c_msglist_rsp="/im/usermail/msglist_rsp",be.im_c2c_del_msg="/im/usermail/del_msg_by_msgid",be.im_c2c_del_msg_rsp="/im/usermail/del_msg_by_msgid_rsp",be.im_c2c_del_all_msg="/im/usermail/del_all_msg",be.im_c2c_del_all_msg_rsp="/im/usermail/del_all_msg_rsp",be.im_group_msg="/im/group/msg",be.im_group_msg_rsp="/im/group/msg_rsp",be.im_group_command="/im/group/command",be.im_group_command_rsp="/im/group/command_rsp",be.im_group_msglist="/im/group/msglist",be.im_group_msglist_rsp="/im/group/msglist_rsp",be.im_group_del_msg="/im/group/del_msg",be.im_group_del_msg_rsp="/im/group/del_msg_rsp",be.im_group_del_all_msg="/im/group/del_all_msg",be.im_group_del_all_msg_rsp="/im/group/del_all_msg_rsp",be.im_room_msg="/im/room/msg",be.im_room_msg_rsp="/im/room/msg_rsp",be.im_room_command="/im/msg/room_msg",be.im_room_command_rsp="/im/msg/room_msg_rsp",be.im_room_msglist="/im/room/room_msglist",be.im_room_msglist_rsp="/im/room/room_msglist_rsp",be.im_file_upload="/im/file/upload",be.im_file_upload_rsp="/im/file/upload_rsp",be.im_file_process="/im/file/process",be.im_file_process_rsp="/im/file/process_rsp",be.im_file_delete="/im/file/delete",be.im_file_delete_rsp="/im/file/delete_rsp",be.im_push_c2c_msg="/im/push_c2c_msg",be.im_push_c2c_command="/im/push_c2c_command",be.im_push_group_msg="/im/push_group_msg",be.im_push_group_command="/im/push_group_command_msg",be.im_push_room_msg="/im/push_roommsg",be.im_push_room_command="/im/push_room_msg",be.im_room_create="/im/room/create",be.im_room_create_rsp="/im/room/create_rsp",be.im_room_enter="/im/room/enter",be.im_room_enter_rsp="/im/room/enter_rsp",be.im_room_quit="/im/room/quit",be.im_room_quit_rsp="/im/room/quit_rsp",be.im_room_info="/im/room/info",be.im_room_info_rsp="/im/room/info_rsp",be.im_room_userlist="/im/room/userlist",be.im_room_userlist_rsp="/im/room/userlist_rsp",be.im_room_attributes="/im/room/get_attributes",be.im_room_attributes_rsp="/im/room/get_attributes_rsp",be.im_room_attributes_modify="/im/room/modify_attributes",be.im_room_attributes_modify_rsp="/im/room/modify_attributes_rsp",be.im_push_room_enter="/im/push_room_enter",be.im_push_room_quit="/im/push_room_quit",be.im_push_room_kickout="/im/push_room_kickout",be.im_push_room_attrs="/im/push_room_attrs_modify",be.im_group_create="/im/group/create",be.im_group_create_rsp="/im/group/create_rsp",be.im_group_enter="/im/group/enter",be.im_group_enter_rsp="/im/group/enter_rsp",be.im_group_invite="/im/group/invite",be.im_group_invite_rsp="/im/group/invite_rsp",be.im_group_quit="/im/group/quit",be.im_group_quit_rsp="/im/group/quit_rsp",be.im_group_kickout="/im/group/kickout",be.im_group_kickout_rsp="/im/group/kickout_rsp",be.im_group_destroy="/im/group/destroy",be.im_group_destroy_rsp="/im/group/destroy_rsp",be.im_group_list="/im/usermail/grouplist",be.im_group_list_rsp="/im/usermail/grouplist_rsp",be.im_group_owner_transfer="/im/group/owner_transfer",be.im_group_owner_transfer_rsp="/im/group/owner_transfer_rsp",be.im_group_data="/im/group/data",be.im_group_data_rsp="/im/group/data_rsp",be.im_group_attributes="/im/group/get_attributes",be.im_group_attributes_rsp="/im/group/get_attributes_rsp",be.im_group_mute="/im/group/mute",be.im_group_mute_rsp="/im/group/mute_rsp",be.im_group_modify_name="/im/group/modify_group_name",be.im_group_modify_name_rsp="/im/group/modify_group_name_rsp",be.im_group_modify_avatar="/im/group/modify_group_avatar",be.im_group_modify_avatar_rsp="/im/group/modify_group_avatar_rsp",be.im_group_modify_notice="/im/group/modify_group_notice",be.im_group_modify_notice_rsp="/im/group/modify_group_notice_rsp",be.im_group_modify_attributes="/im/group/modify_attribute",be.im_group_modify_attributes_rsp="/im/group/modify_attribute_rsp",be.im_group_member_list="/im/group/members",be.im_group_member_list_rsp="/im/group/members_rsp",be.im_group_member_data="/im/group/member_data",be.im_group_member_data_rsp="/im/group/member_data_rsp",be.im_group_member_nickname_set="/im/group/set_nickname",be.im_group_member_nickname_set_rsp="/im/group/set_nickname_rsp",be.im_group_member_role_set="/im/group/set_member_role",be.im_group_member_role_set_rsp="/im/group/set_member_role_rsp",be.im_push_group_create="/im/push_create_group",be.im_push_group_invite="/im/push_group_invite",be.im_push_group_destroy="/im/push_group_destroy",be.im_push_group_owner_transfer="/im/push_group_owner_transfer",be.im_push_group_modify_attributes="/im/push_modify_group_attribute",be.im_push_group_modify_data="/im/push_modify_group_data",be.im_push_group_member_change="/im/push_group_member_change",be.im_push_group_member_kickout="/im/push_group_member_kickout",be.im_call_create="/im/call/create",be.im_call_create_rsp="/im/call/create_rsp",be.im_call_cancel="/im/call/cancel",be.im_call_cancel_rsp="/im/call/cancel_rsp",be.im_call_accept="/im/call/accept",be.im_call_accept_rsp="/im/call/accept_rsp",be.im_call_refuse="/im/call/refuse",be.im_call_refuse_rsp="/im/call/refuse_rsp",be.im_call_ack="/im/call/ack",be.im_call_ack_rsp="/im/call/ack_rsp",be.im_call_info="/im/call/call_info",be.im_call_info_rsp="/im/call/call_info_rsp",be.im_push_call_invite="/im/push_call_invite",be.im_push_call_cancel="/im/push_call_cancel",be.im_push_call_accept="/im/push_call_accept",be.im_push_call_refuse="/im/push_call_refuse",(be={})[J.sw_handshake_req]="HandshakeReq",be[J.sw_login]="LoginReq",be[J.sw_login_rsp]="LoginRsp",be[J.sw_logout]="LogoutReq",be[J.sw_logout_rsp]="CommonCodeMessage",be[J.sw_renew_token]="RenewTokenReq",be[J.sw_renew_token_rsp]="CommonCodeMessage",be[J.sw_hb]="HbReq",be[J.sw_hb_rsp]="HbRsp",be[J.sw_push_kickout]="PushKickout",be[J.sw_push_redirect]="PushRedirect2Sdk",be[J.sw_push]="PushReq",be[J.sw_push_rsp]="PushRsp",be[J.sw_push_list]="PushListRequest",be[J.sw_push_list_rsp]="PushListRsp",be[J.im_account_modify_user_info]="ModifyUserInfoReq",be[J.im_account_modify_user_info_rsp]="CommonCodeMessage",be[J.im_account_fetch_user_info]="UserInfo",be[J.im_account_fetch_user_info_rsp]="UserInfoRsp",be[J.im_userstate_zpns_report]="ZpnsReport",be[J.im_userstate_zpns_report_rsp]="CommonCodeMessage",be[J.im_usermail_hb]="UserMailHbReq",be[J.im_usermail_hb_rsp]="UserMailHbRsp",be[J.im_usermail_convlist]="GetConvListReq",be[J.im_usermail_convlist_rsp]="GetConvListRsp",be[J.im_usermail_del_conv]="ConvDelReq",be[J.im_usermail_del_conv_rsp]="ConvDelRsp",be[J.im_usermail_update_read_seq]="UpdateReadSeqReq",be[J.im_usermail_update_read_seq_rsp]="CommonCodeMessage",be[J.im_c2c_msg]="C2CMsgReq",be[J.im_c2c_msg_rsp]="C2CMsgRsp",be[J.im_c2c_command]="C2CCommandReq",be[J.im_c2c_command_rsp]="C2CCommandReqRsp",be[J.im_c2c_msglist]="FetchConvMsgReq",be[J.im_c2c_msglist_rsp]="FetchConvMsgRsp",be[J.im_c2c_del_msg]="ConvDelMsgByMsgIdReq",be[J.im_c2c_del_msg_rsp]="CommonCodeMessage",be[J.im_c2c_del_all_msg]="ConvDelReq",be[J.im_c2c_del_all_msg_rsp]="CommonCodeMessage",be[J.im_group_msg]="GroupMsgReq",be[J.im_group_msg_rsp]="GroupMsgRsp",be[J.im_group_command]="GroupCommandReq",be[J.im_group_command_rsp]="C2CCommandReqRsp",be[J.im_group_msglist]="FetchGroupMsgList",be[J.im_group_msglist_rsp]="FetchGroupMsgListRsp",be[J.im_group_del_msg]="DelGroupConvMsg",be[J.im_group_del_msg_rsp]="CommonCodeMessage",be[J.im_group_del_all_msg]="DelGroupAllConvMsg",be[J.im_group_del_all_msg_rsp]="CommonCodeMessage",be[J.im_room_msg]="RoomMsgReq",be[J.im_room_msg_rsp]="RoomMsgRsp",be[J.im_room_command]="RoomCommandMsgReq",be[J.im_room_command_rsp]="RoomCommandMsgRsp",be[J.im_room_msglist]="RoomMsglistReq",be[J.im_room_msglist_rsp]="RoomMsglistRsp",be[J.im_file_upload]="FileUploadReq",be[J.im_file_upload_rsp]="FileUploadRsp",be[J.im_file_process]="FileUploadReq",be[J.im_file_process_rsp]="FileProcessRsp",be[J.im_file_delete]="FileUploadReq",be[J.im_file_delete_rsp]="CommonCodeMessage",be[J.im_push_c2c_msg]="PushC2CMsg",be[J.im_push_c2c_command]="PushC2CCommand",be[J.im_push_group_msg]="PushC2CMsg",be[J.im_push_group_command]="PushGroupCommand",be[J.im_push_room_msg]="PushRoomMsg",be[J.im_push_room_command]="PushRoomCommand",be[J.im_room_create]="RoomCreateReq",be[J.im_room_create_rsp]="RoomCreateRsp",be[J.im_room_enter]="RoomEnterReq",be[J.im_room_enter_rsp]="RoomEnterRsp",be[J.im_room_quit]="RoomQuitReq",be[J.im_room_quit_rsp]="CommonCodeMessage",be[J.im_room_info]="RoomInfoReq",be[J.im_room_info_rsp]="RoomInfoRsp",be[J.im_room_userlist]="RoomUserlistReq",be[J.im_room_userlist_rsp]="RoomUserlistRsp",be[J.im_room_attributes]="GetRoomAttributesReq",be[J.im_room_attributes_rsp]="GetRoomAttributesRsp",be[J.im_room_attributes_modify]="ModifyRoomAttributesReq",be[J.im_room_attributes_modify_rsp]="ModifyRoomAttributesRsp",be[J.im_push_room_enter]="PushRoomEnter",be[J.im_push_room_quit]="PushRoomQuit",be[J.im_push_room_kickout]="PushRoomKickout",be[J.im_push_room_attrs]="PushRoomAttributesModify",be[J.im_group_create]=["GroupCreateReq"],be[J.im_group_create_rsp]=["GroupCreateRsp"],be[J.im_group_enter]=["GroupDestroyReq"],be[J.im_group_enter_rsp]=["GroupEnterRsp"],be[J.im_group_invite]=["GroupInviteReq"],be[J.im_group_invite_rsp]=["GroupInviteRsp"],be[J.im_group_quit]=["GroupDestroyReq"],be[J.im_group_quit_rsp]=["GroupDestroyRsp"],be[J.im_group_kickout]=["GroupInviteReq"],be[J.im_group_kickout_rsp]=["GroupKickOutRsp"],be[J.im_group_destroy]=["GroupDestroyReq"],be[J.im_group_destroy_rsp]=["GroupDestroyRsp"],be[J.im_group_list]=["GroupListReq"],be[J.im_group_list_rsp]=["GroupListRsp"],be[J.im_group_owner_transfer]=["GroupOwnerTransferReq"],be[J.im_group_owner_transfer_rsp]=["GroupOwnerTransferRsp"],be[J.im_group_data]=["GroupDestroyReq"],be[J.im_group_data_rsp]=["GroupDataRsp"],be[J.im_group_attributes]=["GroupGetAttributesReq"],be[J.im_group_attributes_rsp]=["GroupGetAttributesRsp"],be[J.im_group_mute]=["GroupMuteReq"],be[J.im_group_mute_rsp]=["GroupSetMemberNicknameRsp"],be[J.im_group_modify_name]=["GroupModifyGroupNameReq"],be[J.im_group_modify_name_rsp]=["GroupModifyGroupNameRsp"],be[J.im_group_modify_avatar]=["GroupModifyGroupAvatarReq"],be[J.im_group_modify_avatar_rsp]=["GroupModifyGroupNameRsp"],be[J.im_group_modify_notice]=["GroupModifyGroupNoticeReq"],be[J.im_group_modify_notice_rsp]=["GroupModifyGroupNameRsp"],be[J.im_group_modify_attributes]=["GroupModifyAttributeReq"],be[J.im_group_modify_attributes_rsp]=["GroupModifyAttributeRsp"],be[J.im_group_member_list]=["GroupGetMembersReq"],be[J.im_group_member_list_rsp]=["GroupGetMembersRsp"],be[J.im_group_member_data]=["GroupMemberDataReq"],be[J.im_group_member_data_rsp]=["GroupMemberDataRsp"],be[J.im_group_member_nickname_set]=["GroupSetMemberNicknameReq"],be[J.im_group_member_nickname_set_rsp]=["GroupSetMemberNicknameRsp"],be[J.im_group_member_role_set]=["GroupSetMemberRoleReq"],be[J.im_group_member_role_set_rsp]=["GroupSetMemberNicknameRsp"],be[J.im_push_group_create]=["PushCreateGroup"],be[J.im_push_group_invite]=["PushGroupInvite"],be[J.im_push_group_destroy]=["PushGroupDestroy"],be[J.im_push_group_owner_transfer]=["PushGroupOwnerTransfer"],be[J.im_push_group_modify_attributes]=["PushModifyGroupAttribute"],be[J.im_push_group_modify_data]=["PushModifyGroupData"],be[J.im_push_group_member_change]=["PushGroupMemberChange"],be[J.im_push_group_member_kickout]=["PushGroupMemberKickout"],be[J.im_call_create]=["call_req"],be[J.im_call_create_rsp]=["call_rsp"],be[J.im_call_cancel]=["call_cancel_req"],be[J.im_call_cancel_rsp]=["call_cancel_rsp"],be[J.im_call_accept]=["call_accept_req"],be[J.im_call_accept_rsp]=["CommonCodeMessage"],be[J.im_call_refuse]=["call_refuse_req"],be[J.im_call_refuse_rsp]=["CommonCodeMessage"],be[J.im_call_ack]=["call_accept_req"],be[J.im_call_ack_rsp]=["CommonCodeMessage"],be[J.im_call_info]=["call_info_req"],be[J.im_call_info_rsp]=["call_info_rsp"],be[J.im_push_call_invite]=["PushCallInvited"],be[J.im_push_call_cancel]=["PushCallCancel"],be[J.im_push_call_accept]=["PushCallAccept"],be[J.im_push_call_refuse]=["PushCallRefuse"];var v,w,k,M,I,S,D,C,R,A,O,E,x,P,T,q,L,B,G,N,j,U,z,F,H,K,V,Z,W,Q,J,Y,X=be;function $(e){switch(e){case 100002:case 100003:case 100004:return v.CommonModuleParamInvalid;case 50008:case 100017:return v.CommonModuleTriggerServerFrequencyLimit;case 100018:return v.CommonModuleUserIsOperationLimit;case 50001:case 50002:case 50003:case 50004:case 50005:case 50007:case 50009:case 50101:case 50102:case 50105:case 50106:case 50107:case 50108:case 50110:return v.CommonModuleSwitchServerError;case 50111:return v.NetworkModuleTokenInvalid;case 100001:case 102001:case 100005:case 100006:case 100007:case 100008:case 100009:case 100010:case 100011:case 101001:case 101002:case 101003:case 101004:return v.CommonModuleIMServerError;case 105004:return v.CommonModuleUserIsNotExist;case 103015:return v.RoomModuleUserIsNotInTheRoom;case 103021:return v.RoomModuleTheRoomDoesNotExist;case 103032:return v.RoomModuleTheRoomAlreadyExists;case 103018:return v.RoomModuleTheNumberOfExistingRoomsHasReachedLimit;case 103010:return v.RoomModuleTheNumberOfJoinedRoomsHasReachedLimit;case 103022:return v.RoomModuleTheNumberOfRoomAttributesExceedsLimit;case 103023:return v.RoomModuleTheLengthOfRoomAttributeKeyExceedsLimit;case 103024:return v.RoomModuleTheLengthOfRoomAttributeValueExceedsLimit;case 103025:return v.RoomModuleTheTotalLengthOfRoomAttributesValueExceedsLimit;case 107003:return v.MessageModuleCancelCallError;case 107004:return v.MessageModuleCallServerError;case 107005:return v.MessageModuleCallDoesNotExist;case 107006:case 107007:return v.MessageModuleCallServerError;case 107012:return v.MessageModuleIsNotInvitor;case 107014:return v.MessageModuleIsNotInvitee;case 61001:return v.MessageModuleCallAlreadyExists;case 61002:return v.MessageModuleCallDoesNotExist;case 111003:case 111006:case 111007:return v.MessageModuleAuditRejected;case 111002:return v.MessageModuleAuditFailed;case 61003:case 61004:return v.MessageModuleCallServerError;case 109001:return v.MessageModuleTargetDoesNotExist;case 108035:return v.GroupModuleUserIsNotInTheGroup;case 108003:return v.GroupModuleNoCorrespondingOperationAuthority;case 108040:return v.GroupModuleTheNumberOfGroupAttributesExceedsLimit;case 108041:return v.GroupModuleTheLengthOfGroupAttributeKeyExceedsLimit;case 108042:return v.GroupModuleTheLengthOfGroupAttributeValueExceedsLimit;case 108037:return v.GroupModuleMemberIsAlreadyInTheGroup;case 108038:case 108039:return v.GroupModuleUpdateGroupMemberInfoError;case 108043:return v.GroupModuleGroupAlreadyExists;case 108044:case 106011:return v.GroupModuleGroupDoesNotExist;case 108046:return v.GroupModuleGroupAttributeDoesNotExist;default:return 0}}function ee(e){return $(e)||e}function te(){return(new Date).getTime()+Math.random().toString().substring(2,7)}function re(e){return new Uint8Array(Array.from(unescape(encodeURIComponent(e||""))).map((function(e){return e.charCodeAt(0)})))}function oe(e){return"string"==typeof e?e:e&&e.length?decodeURIComponent(escape(String.fromCharCode.apply(String,ke([],we(Array.from(e)),!1)))):""}function ne(e,t){return!!e&&"string"==typeof e&&e.length<=fe&&(!t||"#"!=e[0])}function ie(e){return!e||"string"==typeof e&&e.length<=ge}function se(e,t){var r;if(e&&"[object Object]"===Object.prototype.toString.call(e))return r=Object.keys(e),!(!t&&!r.length)&&r.every((function(t){var r=e[t];return t&&r&&"string"==typeof t&&"string"==typeof r}))}function ae(e){return!(!e||"[object Object]"!==Object.prototype.toString.call(e))&&Object.keys(e).every((function(t){return"string"==typeof t&&"string"==typeof e[t]}))}function ue(e,t){if(!e||"string"!=typeof e||e.length<31)return[v.NetworkModuleTokenInvalid];if("04"!==e.substring(0,2))return[v.NetworkModuleTokenVersionError];try{var r=Array.from(o.Base64.toUint8Array(e.substring(2,14))),n=f.a.fromBytes(r.slice(0,8)).toInt();return[n<t||n<Date.now()/1e3?v.NetworkModuleTokenExpired:n<Date.now()/1e3+30?v.NetworkModuleTokenTimeIsTooShort:v.Success,n]}catch(e){return(0,console.error)("Parse token fail for invalid Base64.",e),[v.NetworkModuleTokenInvalid]}}function ce(e,t){var r={};return e.forEach((function(e){return r[e]=t[e]})),r}function le(e){if(e.type>=R.Image&&e.type<=R.Video&&e.message)try{var t,r,o=JSON.parse(e.message);o&&"object"==typeof o&&"1"==o.version&&(t=o.file_download_url||"",e.message="",e.fileUID=o.file_uid||"",e.fileName=o.file_name||"",e.fileSize=+o.file_size||0,e.fileDownloadUrl=t,e.type==R.Image?(r=e,o.large?r.largeImageDownloadUrl=t+o.large:r.largeImageDownloadUrl=o.large_image_download_url||"",o.thumbnail?r.thumbnailDownloadUrl=t+o.thumbnail:r.thumbnailDownloadUrl=o.thumbnail_download_url||"",r.originalImageWidth=o.origin_width||0,r.originalImageHeight=o.origin_height||0,r.thumbnailWidth=o.small_width||0,r.thumbnailHeight=o.small_height||0,r.largeImageWidth=o.big_width||0,r.largeImageHeight=o.big_height||0):e.type==R.Audio?(r=e).audioDuration=+o.media_duration||0:e.type==R.Video&&((r=e).videoDuration=+o.media_duration||0,o.thumbnail?r.videoFirstFrameDownloadUrl=t+o.thumbnail:r.videoFirstFrameDownloadUrl=o.video_first_frame_download_url||"",r.videoFirstFrameWidth=o.frame_width||0,r.videoFirstFrameHeight=o.frame_height||0))}catch(e){}}(be=Y=Y||{}).InnerLogined="logined",be.InnerLogout="logout",be.InnerUpdateSelf="updateSelf",be.InnerJoinedGroup="joinedGroup",be.InnerLeftGroup="leftGroup",be.InnerSyncGroups="syncGroups",be.InnerSyncGroupInfo="syncGroupInfo",be.InnerUnreadMessageCount="unreadMessageCount",be.InnerConnectedRoom="connectedRoom",be.InnerConnected="connected",be.InnerDisConnected="disConnected",be.Logger="_loggerOutput",be.Error="error",be.ConnectionStateChanged="connectionStateChanged",be.TokenWillExpire="tokenWillExpire",be.ConversationChanged="conversationChanged",be.ConversationTotalUnreadMessageCountUpdated="conversationTotalUnreadMessageCountUpdated",be.ReceivePeerMessage="receivePeerMessage",be.ReceiveRoomMessage="receiveRoomMessage",be.ReceiveGroupMessage="receiveGroupMessage",be.RoomStateChanged="roomStateChanged",be.RoomMemberJoined="roomMemberJoined",be.RoomMemberLeft="roomMemberLeft",be.RoomAttributesUpdated="roomAttributesUpdated",be.RoomAttributesBatchUpdated="roomAttributesBatchUpdated",be.GroupStateChanged="groupStateChanged",be.GroupNameUpdated="groupNameUpdated",be.GroupNoticeUpdated="groupNoticeUpdated",be.GroupAvatarUrlUpdated="groupAvatarUrlUpdated",be.GroupAttributesUpdated="groupAttributesUpdated",be.GroupMemberStateChanged="groupMemberStateChanged",be.GroupMemberInfoUpdated="groupMemberInfoUpdated",be.CallInvitationReceived="callInvitationReceived",be.CallInvitationCancelled="callInvitationCancelled",be.CallInvitationTimeout="callInvitationTimeout",be.CallInvitationAccepted="callInvitationAccepted",be.CallInvitationRejected="callInvitationRejected",be.CallInviteesAnsweredTimeout="callInviteesAnsweredTimeout";var pe,he,de,fe=1024,ge=2048,me=((be={})[R.Image]=1,be[R.File]=2,be[R.Audio]=3,be[R.Video]=4,be),_e=((be=pe=pe||{}).User="User",be.Conv="Conversation",be.Group="Group",be.Member="GroupMember",be.Message="Message",(be=he=he||{}).Manager="Manager",be.Connection="Connection",be.Database="Database",be.User="User",be.Conversation="Conversation",be.Room="Room",be.Group="Group",be.Call="Call",(be=de=de||{}).CreateEngine="API.createEngine",be.DestroyEngine="API.destroyEngine",be.SetLogConfig="API.setLogConfig",be.UploadLog="API.uploadLog",be.Login="API.login",be.Logout="API.logout",be.RenewToken="API.renewToken",be.QueryConversationList="API.queryConversationList",be.DeleteConversation="API.deleteConversation",be.ClearConversationUnreadMessageCount="API.clearConversationUnreadMessageCount",be.SendPeerMessage="API.sendPeerMessage",be.SendRoomMessage="API.sendRoomMessage",be.SendGroupMessage="API.sendGroupMessage",be.DeleteMessages="API.deleteMessages",be.SendMediaMessage="API.sendMediaMessage",be.DeleteAllMessage="API.deleteAllMessage",be.QueryHistoryMessage="API.queryHistoryMessage",be.SetConversationNotificationStatus="API.setConversationNotificationStatus",be.QueryUsersInfo="API.queryUsersInfo",be.UpdateUserName="API.updateUserName",be.UpdateUserExtendedData="API.updateUserExtendedData",be.UpdateUserAvatarUrl="API.updateUserAvatarUrl",be.CreateRoom="API.createRoom",be.JoinRoom="API.joinRoom",be.LeaveRoom="API.leaveRoom",be.QueryRoomMemberList="API.queryRoomMemberList",be.QueryRoomOnlineMemberCount="API.queryRoomOnlineMemberCount",be.SetRoomAttributes="API.setRoomAttributes",be.DeleteRoomAttributes="API.deleteRoomAttributes",be.QueryRoomAllAttributes="API.queryRoomAllAttributes",be.BeginRoomAttributesBatchOperation="API.beginRoomAttributesBatchOperation",be.EndRoomAttributesBatchOperation="API.endRoomAttributesBatchOperation",be.CreateGroup="API.createGroup",be.EnterRoom="API.enterRoom",be.JoinGroup="API.joinGroup",be.DismissGroup="API.dismissGroup",be.LeaveGroup="API.leaveGroup",be.InviteUsersIntoGroup="API.inviteUsersIntoGroup",be.KickGroupMembers="API.kickGroupMembers",be.QueryGroupList="API.queryGroupList",be.QueryGroupMemberList="API.queryGroupMemberList",be.QueryGroupMemberCount="API.queryGroupMemberCount",be.TransferGroupOwner="API.transferGroupOwner",be.QueryGroupInfo="API.queryGroupInfo",be.UpdateGroupName="API.updateGroupName",be.UpdateGroupNotice="API.updateGroupNotice",be.UpdateGroupAvatarUrl="API.updateGroupAvatarUrl",be.SetGroupAttributes="API.setGroupAttributes",be.DeleteGroupAttributes="API.deleteGroupAttributes",be.QueryGroupAttributes="API.queryGroupAttributes",be.SetGroupMemberNickname="API.setGroupMemberNickname",be.SetGroupMemberRole="API.setGroupMemberRole",be.QueryGroupMemberInfo="API.queryGroupMemberInfo",be.CallInvite="API.callInvite",be.CallCancel="API.callCancel",be.CallAccept="API.callAccept",be.CallReject="API.callReject",be.SendCMD="sendCMD",be.PushCMD="pushCMD",be.Reconnection="reconnection",be.OpenConnection="openConnection",be.CloseConnection="closeConnection",be.CreateDB="createDB",be.DeleteDB="deleteDB",be.WriteDB="writeDB",(be={})[v.Success]="Success.",be[v.Failed]="Failed.",be[v.CommonModuleParamInvalid]="The incoming parameter is invalid.",be[v.CommonModuleNotInit]="The SDK is not initialized.",be[v.CommonModuleInvalidAppID]="Invalid AppID.",be[v.CommonModuleTriggerSDKFrequencyLimit]="Trigger SDK internal frequency limit.",be[v.CommonModuleTriggerServerFrequencyLimit]="Trigger background service frequency limit.",be[v.CommonModuleSwitchServerError]="Switch server internal error.",be[v.CommonModuleIMServerError]="ZIM service internal error.",be[v.CommonModuleUploadLogError]="Failed to upload log.",be[v.CommonModuleUserIsNotExist]="User is not exist.",be[v.CommonModuleUserIsOperationLimit]="User is operation limit.",be[v.NetworkModuleCommonError]="Login failed.",be[v.NetworkModuleServerError]="Login failed due to background service.",be[v.NetworkModuleTokenInvalid]="Token is invalid.",be[v.NetworkModuleNetworkError]="Network error.",be[v.NetworkModuleTokenExpired]="Token expired.",be[v.NetworkModuleTokenVersionError]="Token version number is wrong.",be[v.NetworkModuleTokenTimeIsTooShort]="Token duration is too short.",be[v.NetworkModuleUserHasAlreadyLogged]="User has already logged in.",be[v.NetworkModuleUserIsNotLogged]="User is not logged in.",be[v.MessageModuleCommonError]="Internal error sending message.",be[v.MessageModuleServerError]="Error sending message background service.",be[v.MessageModuleSendMessageFailed]="Message sending failed.",be[v.MessageModuleTargetDoesNotExist]="The message target does not exist.",be[v.MessageModuleCallError]="Call invitation failed.",be[v.MessageModuleCancelCallError]="Failed to cancel call invitation.",be[v.MessageModuleCallServerError]="Failed to initiate call invitation service.",be[v.MessageModuleIsNotInvitor]="The non-initiator cancel the call invitation.",be[v.MessageModuleIsNotInvitee]="Uninvited users.",be[v.MessageModuleCallAlreadyExists]="CallID already exists.",be[v.MessageModuleCallDoesNotExist]="CallID does not exist.",be[v.MessageModuleAuditRejected]="Failed to pass security audit.",be[v.MessageModuleAuditFailed]="Security audit failed.",be[v.ConversationModuleCommonError]="Internal error in conversation.",be[v.ConversationModuleServerError]="Error in conversation service.",be[v.ConversationModuleConversationDoesNotExist]="Conversation does not exist.",be[v.RoomModuleCommonError]="Internal error in room.",be[v.RoomModuleServerError]="Error in room service.",be[v.RoomModuleCreateRoomError]="Failed to create room.",be[v.RoomModuleJoinRoomError]="Failed to join room.",be[v.RoomModuleLeaveRoomError]="Failed to leave the room.",be[v.RoomModuleUserIsNotInTheRoom]="The user is not in the room.",be[v.RoomModuleTheRoomDoesNotExist]="Room does not exist.",be[v.RoomModuleTheRoomAlreadyExists]="Room already exist.",be[v.RoomModuleTheNumberOfExistingRoomsHasReachedLimit]="The maximum number of rooms can exist at the same time.",be[v.RoomModuleTheNumberOfJoinedRoomsHasReachedLimit]="The number of rooms a user can join at the same time has reached the upper limit.",be[v.RoomModuleRoomAttributesCommonError]="Internal error in room attributes.",be[v.RoomModuleRoomAttributesOperationFailedCompletely]="Failed to operate room attributes.",be[v.RoomModuleRoomAttributesQueryFailed]="Failed to query room attributes.",be[v.RoomModuleTheNumberOfRoomAttributesExceedsLimit]="The number of room attributes exceeds the limit.",be[v.RoomModuleTheLengthOfRoomAttributeKeyExceedsLimit]="The room attribute key length exceeds the limit.",be[v.RoomModuleTheLengthOfRoomAttributeValueExceedsLimit]="The room attribute value length exceeds the limit.",be[v.RoomModuleTheTotalLengthOfRoomAttributesValueExceedsLimit]="The total length of the room attributes value exceeds the limit.",be[v.GroupModuleCommonError]="Internal error in group.",be[v.GroupModuleServerError]="Error in group service.",be[v.GroupModuleCreateGroupError]="Failed to create group.",be[v.GroupModuleDismissGroupError]="Failed to dismiss group.",be[v.GroupModuleJoinGroupError]="Failed to join group.",be[v.GroupModuleLeaveGroupError]="Failed to leave group.",be[v.GroupModuleKickoutGroupMemberError]="Failed to kick group member.",be[v.GroupModuleInviteUserIntoGroupError]="Failed to invite user to group.",be[v.GroupModuleTransferOwnerError]="Failed to transfer group owner.",be[v.GroupModuleUpdateGroupInfoError]="Failed to update group information.",be[v.GroupModuleQueryGroupInfoError]="Failed to query group information.",be[v.GroupModuleGroupAttributesOperationFailed]="Failed to operate group attributes.",be[v.GroupModuleGroupAttributesQueryFailed]="Failed to query group attributes.",be[v.GroupModuleUpdateGroupMemberInfoError]="Failed to update group member information.",be[v.GroupModuleQueryGroupMemberInfoError]="Failed to query group member information.",be[v.GroupModuleQueryGroupListError]="Failed to query group list.",be[v.GroupModuleQueryGroupMemberListError]="Failed to query group member list.",be[v.GroupModuleUserIsNotInTheGroup]="User is not in group.",be[v.GroupModuleMemberIsAlreadyInTheGroup]="User is already in the group.",be[v.GroupModuleGroupDoesNotExist]="Group does not exist.",be[v.GroupModuleGroupAlreadyExists]="Group already exists.",be[v.GroupModuleGroupMemberHasReachedLimit]="The group members have reached the limit.",be[v.GroupModuleGroupAttributeDoesNotExist]="Group attribute does not exist.",be[v.GroupModuleTheNumberOfGroupAttributesExceedsLimit]="Group attributes exceeds limit.",be[v.GroupModuleTheLengthOfGroupAttributeKeyExceedsLimit]="The group attribute key length exceeds the limit.",be[v.GroupModuleTheLengthOfGroupAttributeValueExceedsLimit]="The group attribute value length exceeds the limit.",be[v.GroupModuleTheTotalLengthOfGroupAttributesValueExceedsLimit]="The total length of the group attributes value exceeds the limit.",be[v.GroupModuleNoCorrespondingOperationAuthority]="There is no operation permission for group-related interfaces.",be),ye=function(e,t,r){return t=r&&r!=v.NetworkModuleNetworkError?(e=$(r)||e,"code: ".concat(r,", message: ").concat(t||_e[e])):t||_e[e],{code:e=r==v.NetworkModuleNetworkError?r:e,message:t}},be=r(10),ve=r.n(be),we=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return s},ke=function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||((o=o||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},Me=(be="z_deviceID",Qe=localStorage.getItem(be)||function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(36)}))}(),localStorage.setItem(be,Qe),Qe),Ie=navigator.userAgent.split(" ").slice(-2).join(),Se=navigator.userAgent,De=function(){return(De=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},Ce=(n.util.Long=f.a,n.configure(),Re.prototype.encodeRequest=function(e,t,r){var o=((s=-1==this.unencryptCmdList.indexOf(e.cmd))||(e.flags[0]=0),this.encode(this.protoInstance.proto_switch.Header,e)),n=o.length,i=(t=this.encode(this.getProtoBeanInstance(e.cmd),t)).length,s=(t=s?this.crypto.encrypt(t):t).length,a=new Uint8Array(7+n+s);return a[0]=33,a[1]=n>>8,a[2]=n-(a[1]<<8),a.set(new Uint8Array(new Int32Array([s]).buffer).reverse(),3),a.set(o,7),a.set(t,7+n),[this.encodeAccesshubPCUpwardMessage(r,e,a),i,s]},Re.prototype.decodeAccesshubResponse=function(e,t){return 21==e?this.decode(this.protoInstance.proto_accesshub.PCDownwardMessage,t.slice(13)).payload:(e=this.accesshubDecodeTypeMap[e])&&this.decode(this.protoInstance.proto_accesshub[e],t.slice(13))},Re.prototype.decodeResponseHeader=function(e){var t=(e[1]<<8)+e[2];return[this.decode(this.protoInstance.proto_switch.Header,e.slice(7,7+t)),t]},Re.prototype.decodeResponseBody=function(e,t,r){var o=this;r=(e=e.slice(7+r)).length;if(-1==this.undecryptCmdList.indexOf(t))try{e=this.crypto.decrypt(e)}catch(e){}var n=e.length,i=[];try{var s=this.decode(this.getProtoBeanInstance(t),e);return t===J.sw_push?(i.push(s.head.sub_cmd),s.msg_body=this.decode(this.getProtoBeanInstance(i[0]),s.msg_body)):t===J.sw_push_list&&s.push_requests&&s.push_requests.forEach((function(e){i.push(e.sub_cmd),e.msg_body=o.decode(o.getProtoBeanInstance(e.sub_cmd),e.msg_body)})),[s,r,n]}catch(e){return(0,console.error)("Protobuf decode error",t,i,e),[{subCmds:i,code:1},r,n]}},Re.prototype.decodeMsgBody=function(e){var t=this;if(!e)return[];var r=this.protoInstance.proto_zim.StRecvMsgInfo;return e.map((function(e){var o=t.decode(r,e.msg_body);return Object.assign(o.msg_svr_info,e.msg_dyn_info),o.msg_svr_info.conv_msg_seq&&o.msg_svr_info.conv_msg_seq.toInt()?o.msg_svr_info.c2c_msg_seq=e.msglist_seq:o.msg_svr_info.conv_msg_seq=e.msglist_seq,o}))},Re.prototype.encodeAccesshubHTTPRequest=function(e,t,r,o,n){var i=o.url.replace(/^(https?):\/\/[\w\-\.]+\//,"/"),s=(s=o.headers)&&Object.keys(s).map((function(e){return{name:e,val:String(s[e])}}));t={txid:t,biz_type:0,appid:r.appID,id_name:r.userID,location:i,headers:s,body:n?re(JSON.stringify(n)):null,ack:!1,mode_no:1,service_no:10,method_no:"GET"==o.method?1:2,sdk_type:3,zegoconn_version:2,zegoconn_run_env:1},r=this.encode(this.protoInstance.proto_accesshub.HTTPRequest,t);return this.createAccesshubBody(4,e,r)},Re.prototype.encodeAccesshubDispatchRequest=function(e,t,r){return t={txid:t,biz_type:0,appid:r.appID,id_name:r.userID,mode_no:1,sdk_type:3,zegoconn_version:2,zegoconn_run_env:1},r=this.encode(this.protoInstance.proto_accesshub.AccesshubDispatchRequest,t),this.createAccesshubBody(26,e,r)},Re.prototype.encodeAccesshubPCUpwardMessage=function(e,t,r){return t={txid:t.seq,appid:t.app_id,biz_type:0,mode_no:1,id_name:t.user_id,service_no:9,ack:!1,payload:r,sdk_type:3,wss_message_type:1,wss_path:"/ws",wss_raw_query:"",zegoconn_version:2,zegoconn_run_env:1},r=this.encode(this.protoInstance.proto_accesshub.PCUpwardMessage,t),this.createAccesshubBody(17,e,r)},Re.prototype.createAccesshubBody=function(e,t,r){var o=new Uint8Array(13+r.length);return o[0]=175,o[1]=0,o[2]=e>>8,o[3]=e-(o[2]<<8),o.set(new Uint8Array(new Int32Array([r.length]).buffer).reverse(),4),o.set(new Uint8Array(new Int32Array([t]).buffer).reverse(),8),o[12]=0,o.set(r,13),o},Re.prototype.encode=function(e,t){return e.encode(new e(t)).finish()},Re.prototype.decode=function(e,t){
    // console.log(t, e.decode)
    return De({},e.decode(t))
},Re.prototype.getProtoBeanInstance=function(e){var t=0==e.indexOf("/im/")?"proto_zim":"proto_switch";return this.protoInstance[t][X[e]]},Re);function Re(e){this.crypto=e,this.protoInstance=y,this.unencryptCmdList=[J.sw_handshake_req,J.sw_login],this.undecryptCmdList=[J.sw_login_rsp],this.accesshubDecodeTypeMap={5:"HTTPResponse",27:"AccesshubDispatchResponse",3:"CloseConnection",22:"Redirect",19:"PCEstablished",30:"PushException"}}var Ae=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return s},Oe=function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||((o=o||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))},Ee=(xe.prototype.setContext=function(e){this.context=e},xe.prototype.on=function(e,t){this.listenerMap.set(e,t)},xe.prototype.off=function(e){e?this.listenerMap.delete(e):(this.listenerMap.clear(),this.innerEvents[Y.InnerLogined].length=0,this.innerEvents[Y.InnerLogout].length=0,this.innerEvents[Y.InnerUpdateSelf].length=0,this.innerEvents[Y.InnerJoinedGroup].length=0,this.innerEvents[Y.InnerLeftGroup].length=0,this.innerEvents[Y.InnerSyncGroups].length=0,this.innerEvents[Y.InnerSyncGroupInfo].length=0,this.innerEvents[Y.InnerUnreadMessageCount].length=0,this.innerEvents[Y.InnerConnectedRoom].length=0,this.innerEvents[Y.InnerConnected].length=0,this.innerEvents[Y.InnerDisConnected].length=0,this.context=null)},xe.prototype.emit=function(e,t,r){var o,n=this.listenerMap.get(e);if(e!=Y.Logger&&(o="function"==typeof n?":1":":0",r=r?[r,t]:t,Ut.getInstance().logger.info([he.Manager],"API.emit_".concat(e).concat(o),r,!0)),"function"==typeof n)try{n(this.context,t)}catch(e){throw e}},xe.prototype.add=function(e,t){this.innerEvents[e].push(t)},xe.prototype.remove=function(e,t){var r;t?-1!==(r=this.innerEvents[e].findIndex((function(e){return e===t})))&&this.innerEvents[e].splice(r,1):this.innerEvents[e].length=0},xe.prototype.exec=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var o=e==Y.InnerLogined?void 0:t&&1==t.length?t[0]:t;Ut.getInstance().logger.info([he.Manager],"InnerEvent_"+e,o),this.innerEvents[e].forEach((function(e){return e.apply(void 0,Oe([],Ae(t),!1))}))},xe);function xe(){var e;this.listenerMap=new Map,this.innerEvents=((e={})[Y.InnerLogined]=[],e[Y.InnerLogout]=[],e[Y.InnerUpdateSelf]=[],e[Y.InnerJoinedGroup]=[],e[Y.InnerLeftGroup]=[],e[Y.InnerSyncGroups]=[],e[Y.InnerSyncGroupInfo]=[],e[Y.InnerUnreadMessageCount]=[],e[Y.InnerConnectedRoom]=[],e[Y.InnerConnected]=[],e[Y.InnerDisConnected]=[],e)}Te.prototype.destroy=function(){this.storeMap.forEach((function(e){return e.close()})),this.storeMap.clear(),this.logger=null},Te.prototype.setUserID=function(e){this.userID=e},Te.prototype.setUser=function(e){this.batchAdd(this.getStaticDB(),pe.User,[e])},Te.prototype.getUser=function(e){return this.innerGetByID(this.getStaticDB(),pe.User,e)},Te.prototype.getUserList=function(){return this.innerGetAll(this.getStaticDB(),pe.User)},Te.prototype.addUserList=function(e){this.batchAdd(this.getStaticDB(),pe.User,e)},Te.prototype.addConversationList=function(e,t){var r=this,o=this.userID,n={_action_:t};return e.forEach((function(e){e.id=r.appendID(e.type+e.conversationID),e.ownerID=o,e.state=e.state||z.Normal,n[e.conversationID]=[e.state,e.localMsgSeq,e.maxOrderKey,e.unreadMessageCount,e.msgSeq,e.readMsgSeq,e.sendMsgCount,e.deletedMsgCount]})),new Promise((function(t){return r.batchAdd(r.getStaticDB(),pe.Conv,e,n,t)}))},Te.prototype.getConversationList=function(){return this.innerGetListByCursor(this.getStaticDB(),pe.Conv,(function(e){return e.type!=I.Room}))},Te.prototype.addGroupList=function(e){var t=this,r=this.userID,o={};e.forEach((function(e){e.id=t.appendID(e.groupID),e.ownerID=r,o[e.groupID]=[e.dataSeq,e.attributeSeq,e.memberSeq,e.groupSeq]})),this.batchAdd(this.getStaticDB(),pe.Group,e,o)},Te.prototype.deleteGroupList=function(e){var t=this,r=I.Group,o=[];e.forEach((function(e){o.push(t.appendID(e)),t.createDynamicDB(e,r).then((function(r){return t.deleteAll(r,pe.Member,e)}))})),this.batchDelete(this.getStaticDB(),pe.Group,o)},Te.prototype.getGroup=function(e){return this.innerGetByID(this.getStaticDB(),pe.Group,this.appendID(e))},Te.prototype.getGroupList=function(){return this.innerGetListByCursor(this.getStaticDB(),pe.Group)},Te.prototype.addGroupMemberList=function(e,t){var r=this,o={_groupID_:e};t.forEach((function(e){o[e.userID]=[e.seq,e.memberRole]})),this.createDynamicDB(e,I.Group).then((function(e){return r.batchAdd(e,pe.Member,t,o)})).catch((function(){var o={name:pe.Member,groupID:e,list:t};r.logger.warn([he.Database],de.WriteDB,o)}))},Te.prototype.deleteGroupMemberList=function(e,t){var r=this;this.createDynamicDB(e,I.Group).then((function(o){return r.batchDelete(o,pe.Member,t,e)})).catch((function(){var o={name:pe.Member,groupID:e,userIDs:t};r.logger.warn([he.Database],de.WriteDB,o)}))},Te.prototype.getGroupMember=function(e,t){var r=this;return this.createDynamicDB(e,I.Group).then((function(o){return r.innerGetByID(o,pe.Member,t,e)}))},Te.prototype.getGroupMemberList=function(e){var t=this;return this.createDynamicDB(e,I.Group).then((function(r){return t.innerGetAll(r,pe.Member,e)}))},Te.prototype.addMessageList=function(e,t,r){var o=this;return this.createDynamicDB(e,t).then((function(n){return new Promise((function(i){return o.batchAdd(n,pe.Message,r,{convID:e,type:t},i)}))}))},Te.prototype.deleteAllMessage=function(e,t){var r=this;this.createDynamicDB(e,t).then((function(o){return r.deleteAll(o,pe.Message,t+e)})).catch((function(){var o={name:pe.Message,convID:e,type:t,event:"clear"};r.logger.warn([he.Database],de.WriteDB,o)}))},Te.prototype.deleteMessageList=function(e,t,r){var o=this;return this.createDynamicDB(e,t).then((function(n){var i=pe.Message;return n.objectStoreNames.contains(i)?new Promise((function(s){var a=r.map((function(e){return e.messageID}));o.batchDelete(n,i,a,t+e,(function(){o.getLastMessage(e,t).then(s)}))})):Promise.resolve({})}))},Te.prototype.clearRoomMessage=function(e){var t=this,r=this.seq++,o=Date.now(),n=[];e.forEach((function(e){var i,s=t.appendID(I.Room+e);n.push(s),t.storeMap.has(s)&&((i=indexedDB.deleteDatabase("".concat(t.dbNameMap.dynamic).concat(s))).onsuccess=function(){var n={seq:r,time:Date.now()-o,event:"onsuccess",roomID:e};t.logger.info([he.Database],de.DeleteDB,n)},i.onerror=function(){var n={seq:r,time:Date.now()-o,event:"onerror",roomID:e};t.logger.warn([he.Database],de.DeleteDB,n)},t.storeMap.get(s).close(),t.storeMap.delete(s))})),this.batchDelete(this.getStaticDB(),pe.Conv,n)},Te.prototype.getMessageList=function(e,t){var r=this,o=t.count,n=t.reverse,i=t.nextMessage,s=e.conversationID,a=e.type,u=e.minOrderKey||0,c=e.maxOrderKey||0;return this.createDynamicDB(s,a).then((function(e){var t=pe.Message;return e.objectStoreNames.contains(t)?new Promise((function(l){var p=100*(o+1),h=i?i.orderKey:0,d=0,f=0,g=(p=(n?(f=h?h-1:c,d=Math.max(f-p,0)):f=(d=h?h+1:u)+p,r.seq++),Date.now()),m=[],_={seq:p,time:g,convID:s,type:a,queryCount:o,orderKey:h,min:d,max:f,convMin:u,convMax:c};p=d==f?IDBKeyRange.only(d):IDBKeyRange.bound(d,f);(h=e.transaction([t],"readonly").objectStore(t).index("orderKey").openCursor(p)).onsuccess=function(e){var t;if(!(e=e.target.result))return m.sort((function(e,t){return e.orderKey-t.orderKey})),n?m.splice(0,m.length-o):m.splice(o),t={},m.forEach((function(e){t[e.conversationSeq]=e.orderKey})),_.time=Date.now()-g,_.count=m.length,_.flag=t,r.logger.info([he.Database],"getMessageList",_),l(m);m.push(e.value),e.continue()},h.onerror=function(e){_.time=Date.now()-g,r.logger.warn([he.Database],"getMessageList",_),l([])}})):Promise.resolve([])}))},Te.prototype.getLastMessage=function(e,t){var r=this;return this.createDynamicDB(e,t).then((function(o){var n=pe.Message;return o.objectStoreNames.contains(n)?new Promise((function(i){var s=r.seq++,a=Date.now(),u=o.transaction([n],"readonly").objectStore(n).index("orderKey").openCursor(null,"prev");u.onsuccess=function(o){o=(o=o.target.result)&&o.value;var n={seq:s,time:Date.now()-a,convID:e,type:t,msg:o};r.logger.info([he.Database],"getLastMessage",n),i(o)},u.onerror=function(o){var n={seq:s,time:Date.now()-a,convID:e,type:t};r.logger.warn([he.Database],"getLastMessage",n),i({})}})):Promise.resolve({})}))},Te.prototype.appendID=function(e){return"".concat(this.userID).concat(e)},Te.prototype.getStaticDB=function(){return this.storeMap.get("static")},Te.prototype.createStaticDB=function(){var e,t,r=this;this.getStaticDB()||(e=Date.now(),(t=indexedDB.open(this.dbNameMap.static)).onsuccess=function(o){t.onsuccess=null,r.storeMap.set("static",t.result),r.initStaticStore({time:e,event:"onsuccess"})},t.onupgradeneeded=function(o){t.onupgradeneeded=null,o.newVersion&&o.newVersion>o.oldVersion&&(r.storeMap.set("static",o.target.result),r.initStaticStore({time:e,event:"onupgradeneeded"}))})},Te.prototype.createDynamicDB=function(e,t){var r=this,o=this.appendID(t+e);return this.storeMap.has(o)?Promise.resolve(this.storeMap.get(o)):new Promise((function(n,i){var s=Date.now(),a=indexedDB.open("".concat(r.dbNameMap.dynamic).concat(o));a.onsuccess=function(i){a.onsuccess=null;var u=a.result;r.initDynamicStore(u,e,t,{time:s,event:"onsuccess"}),a.transaction?a.transaction.oncomplete=function(){r.storeMap.set(o,u),n(u)}:(r.storeMap.set(o,u),n(u))},a.onupgradeneeded=function(i){var u;a.onupgradeneeded=null,i.newVersion&&i.newVersion>i.oldVersion&&(u=i.target.result,r.initDynamicStore(u,e,t,{time:s,event:"onupgradeneeded"}),a.transaction?a.transaction.oncomplete=function(){r.storeMap.set(o,u),n(u)}:(r.storeMap.set(o,u),n(u)))},a.onerror=function(){var o={time:Date.now()-s,convID:e,type:t,event:"open onerror"};r.logger.warn([he.Database],de.CreateDB,o),i()},a.onblocked=function(){var o={time:Date.now()-s,convID:e,type:t,event:"open onblocked"};r.logger.warn([he.Database],de.CreateDB,o)}}))},Te.prototype.initStaticStore=function(e){var t,r=!1,o=this.getStaticDB();o.objectStoreNames.contains(pe.User)||(r=!0,o.createObjectStore(pe.User,{keyPath:"userID"})),o.objectStoreNames.contains(pe.Conv)||(r=!0,(t=o.createObjectStore(pe.Conv,{keyPath:"id"})).createIndex("ownerID","ownerID")),o.objectStoreNames.contains(pe.Group)||(r=!0,(t=o.createObjectStore(pe.Group,{keyPath:"id"})).createIndex("ownerID","ownerID"),t.createIndex("groupName","groupName")),Object.assign(e,{time:Date.now()-e.time,isCreate:r,db:"Main:[User,Conversation,Group]"}),this.logger.info([he.Database],de.CreateDB,e)},Te.prototype.initDynamicStore=function(e,t,r,o){var n,i=!1;e.objectStoreNames.contains(pe.Message)||(i=!0,(n=e.createObjectStore(pe.Message,{keyPath:"messageID"})).createIndex("type","type"),n.createIndex("timestamp","timestamp"),n.createIndex("sentStatus","sentStatus"),n.createIndex("orderKey","orderKey"),n.createIndex("message","message")),r!==I.Group||e.objectStoreNames.contains(pe.Member)||(i=!0,(n=e.createObjectStore(pe.Member,{keyPath:"userID"})).createIndex("userName","userName"),n.createIndex("memberRole","memberRole"),n.createIndex("memberNickname","memberNickname")),Object.assign(o,{time:Date.now()-o.time,isCreate:i,convID:t,type:r,db:"Message,GroupMember"}),this.logger.info([he.Database],de.CreateDB,o)},Te.prototype.batchAdd=function(e,t,r,o,n){var i=this,s=this.seq++,a=Date.now(),u=e.transaction([t],"readwrite").objectStore(t);u.transaction.oncomplete=function(){var e={seq:s,total:r.length,time:Date.now()-a,flag:o};i.logger.info([he.Database],"batchAdd"+t,e),n&&n()},u.transaction.onerror=function(){var e={seq:s,name:t,time:Date.now()-a,event:"batchAdd onerror",flag:o};i.logger.warn([he.Database],de.WriteDB,e),n&&n()},u.transaction.onabort=function(){var e={seq:s,name:t,time:Date.now()-a,event:"batchAdd onabort",flag:o};i.logger.warn([he.Database],de.WriteDB,e),n&&n()},r.forEach((function(e){return u.put(e)}))},Te.prototype.batchDelete=function(e,t,r,o,n){var i,s,a,u=this;e.objectStoreNames.contains(t)&&(i=this.seq++,s=Date.now(),(a=e.transaction([t],"readwrite").objectStore(t)).transaction.oncomplete=function(){var e={seq:i,total:r.length,time:Date.now()-s,ids:r,pid:o};u.logger.info([he.Database],"batchDelete"+t,e),n&&n()},a.transaction.onerror=function(){var e={seq:i,name:t,time:Date.now()-s,event:"batchDelete onerror",ids:r,pid:o};u.logger.warn([he.Database],de.WriteDB,e)},a.transaction.onabort=function(){var e={seq:i,name:t,time:Date.now()-s,event:"batchDelete onabort",ids:r,pid:o};u.logger.warn([he.Database],de.WriteDB,e)},r.forEach((function(e){return a.delete(e)})))},Te.prototype.deleteAll=function(e,t,r){var o,n,i=this;e.objectStoreNames.contains(t)&&(o=this.seq++,n=Date.now(),(e=e.transaction([t],"readwrite").objectStore(t)).transaction.oncomplete=function(){i.logger.info([he.Database],"deleteAll"+t,{seq:o,time:Date.now()-n,pid:r})},e.transaction.onerror=function(){var e={seq:o,name:t,time:Date.now()-n,event:"deleteAll onerror",pid:r};i.logger.warn([he.Database],de.WriteDB,e)},e.transaction.onabort=function(){var e={seq:o,name:t,time:Date.now()-n,event:"deleteAll onabort",pid:r};i.logger.warn([he.Database],de.WriteDB,e)},e.clear())},Te.prototype.innerGetByID=function(e,t,r,o){var n=this;return e.objectStoreNames.contains(t)?new Promise((function(i){var s=n.seq++,a=Date.now(),u=e.transaction([t],"readonly").objectStore(t).get(r);u.onsuccess=function(e){i(u.result||{})},u.onerror=function(e){var u={seq:s,time:Date.now()-a,id:r,pid:o,event:"onerror"};n.logger.warn([he.Database],"get"+t,u),i({})}})):Promise.resolve({})},Te.prototype.innerGetListByCursor=function(e,t,r){var o=this;return e.objectStoreNames.contains(t)?new Promise((function(n){var i=o.seq++,s=Date.now(),a=[],u=e.transaction([t],"readonly").objectStore(t).index("ownerID").openCursor(IDBKeyRange.only(o.userID));u.onsuccess=function(e){if(!(e=e.target.result))return u={seq:i,total:a.length,time:Date.now()-s},o.logger.info([he.Database],"get".concat(t,"List"),u),n(a);var u=e.value;r&&!r(u)||a.push(u),e.continue()},u.onerror=function(e){var r={seq:i,total:a.length,time:Date.now()-s,event:"onerror"};o.logger.warn([he.Database],"get".concat(t,"List"),r),n(a)}})):Promise.resolve([])},Te.prototype.innerGetAll=function(e,t,r){var o=this;return e.objectStoreNames.contains(t)?new Promise((function(n){var i=o.seq++,s=Date.now(),a=e.transaction([t],"readonly").objectStore(t).getAll();a.onsuccess=function(e){var u=a.result||[],c={seq:i,total:u.length,time:Date.now()-s,pid:r};o.logger.info([he.Database],"get".concat(t,"List"),c),n(u)},a.onerror=function(e){var a={seq:i,total:0,time:Date.now()-s,event:"onerror",pid:r};o.logger.warn([he.Database],"get".concat(t,"List"),a),n([])}})):Promise.resolve([])};var Pe=Te;function Te(e){this.logger=Ut.getInstance().logger,this.dbNameMap={static:"",dynamic:""},this.storeMap=new Map,this.seq=1,this.userID="",this.dbNameMap.static="ZIMSDKSTATIC"+e,this.dbNameMap.dynamic="ZIMSDKDYNAMIC"+e,this.createStaticDB()}var qe,Le,Be,Ge=function(){return(Ge=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},Ne=(je.prototype.destroy=function(){this.itemMap.clear(),this.fs=null,this.logger=null,this.crypto=null},je.prototype.writeLog=function(e,t){this.logger.info(this.logTags,e,t)},je.prototype.unlinkFile=function(){var e=this,t=Date.now();this.fs.unlink({filePath:this.path,complete:function(r){e.logger.info(e.logTags,"unlinkFile",Ge({time:Date.now()-t},r))}})},je.prototype.getList=function(){var e=this;return this.isReadAll?(this.logger.info(this.logTags,"getList_cache",{total:this.itemMap.size}),Promise.resolve(Array.from(this.itemMap.values()))):new Promise((function(t){var r=Date.now();e.fs.readFile({filePath:e.path,encoding:"utf8",position:0,success:function(o){var n=0;o.data.split("\n").forEach((function(t){t&&(n++,t=e.decode(t),e.itemMap.set(t[e.key],t))})),o.time=Date.now()-r,o.total=e.itemMap.size,o.count=n,o.size=o.data.length,delete o.data,e.isReadAll=!0,e.logger.info(e.logTags,"getList_readFile1",o),t(Array.from(e.itemMap.values()))},fail:function(o){o&&(o.time=Date.now()-r,o.total=e.itemMap.size,o.count=e.itemMap.size),e.logger.warn(e.logTags,"getList_readFile0",o),t(Array.from(e.itemMap.values()))}})}))},je.prototype.get=function(e){var t=this;return this.itemMap.has(e)?Promise.resolve(this.itemMap.get(e)):new Promise((function(r){var o=Date.now();t.fs.readFile({filePath:t.path,encoding:"utf8",position:0,success:function(n){var i=n.data.split("\n");i.some((function(r){return!!r&&(r=t.decode(r),t.itemMap.set(r[t.key],r),r[t.key]==e)})),n.time=Date.now()-o,n.total=t.itemMap.size,n.count=i.length-1,n.id=e,n.size=n.data.length,delete n.data,t.logger.info(t.logTags,"get_readFile1",n),r(t.itemMap.get(e)||{})},fail:function(n){n&&(n.time=Date.now()-o,n.total=t.itemMap.size,n.count=t.itemMap.size,n.id=e),t.logger.warn(t.logTags,"get_readFile0",n),r(t.itemMap.get(e)||{})}})}))},je.prototype.addList=function(e,t,r){var o=this,n=Date.now(),i=!1,s=(e.forEach((function(e){var t=e[o.key];!i&&o.itemMap.has(t)&&(i=!0),o.itemMap.set(t,e)})),e.length),a=(e=i?Array.from(this.itemMap.values()):e).map((function(e){return o.encode(e)})).join("\n")+"\n";this.fs.access({path:this.path,success:function(){var e={time:n,hasUpdate:i,total:o.itemMap.size,count:s,flag:t};o.writeFile(i?"writeFile":"appendFile","addList",a,e),r&&r()},fail:function(e){e={time:n,hasUpdate:i,total:o.itemMap.size,count:s,flag:t,accessRes:e&&e.errMsg},o.writeFile("writeFile","addList",a,e),r&&r()}})},je.prototype.deleteList=function(e,t){var r=this,o=Date.now();e.forEach((function(e){return r.itemMap.delete(e)})),this.fs.access({path:this.path,complete:function(n){var i=Array.from(r.itemMap.values()),s=i.map((function(e){return r.encode(e)})).join("\n")+"\n";r.writeFile("writeFile","deleteList",s,{time:o,ids:e,accessRes:n&&n.errMsg}),t&&t(i)}})},je.prototype.deleteAll=function(){this.itemMap.clear(),this.writeFile("writeFile","deleteAll","",{time:Date.now()})},je.prototype.createFile=function(){var e=this,t=Date.now();this.fs.access({path:this.path,success:function(){e.logger.info(e.logTags,"createFile_access1",{time:Date.now()-t})},fail:function(){e.writeFile("writeFile","createFile","",{time:t})}})},je.prototype.writeFile=function(e,t,r,o){var n=this;this.fs[e]({filePath:this.path,data:r,encoding:"utf8",complete:function(i){o.time=Date.now()-o.time,i.length=r.length,n.logger.info(n.logTags,"".concat(t,"_").concat(e),Object.assign(o,i))}})},je.prototype.encode=function(e){return o.Base64.btoa(encodeURI(JSON.stringify(e)))},je.prototype.decode=function(e){try{return JSON.parse(decodeURI(o.Base64.atob(e)))}catch(e){return{}}},je);function je(e,t,r){this.logger=Ut.getInstance().logger,this.isReadAll=!1,this.itemMap=new Map,this.key=r,this.dir=e,this.path="".concat(e,"/").concat(t,".txt"),this.fs=wx.getFileSystemManager(),this.logTags=[he.Database,t],this.logger.info(this.logTags,de.CreateDB,this.path),this.createFile()}function Ue(){var e=null!==Le&&Le.apply(this,arguments)||this;return e.storeMap=new Map,e}function ze(){var e=null!==Be&&Be.apply(this,arguments)||this;return e.storeMap=new Map,e}qe=function(e,t){return(qe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},(be=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}qe(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(Ue,Le=Ne),Ue.prototype.addMessageList=function(e,t,r,o){var n=this;return new Promise((function(i){var s=n.getMessageFileName(e,t,r);n.createMessageStore(s).addList(o,void 0,i)}))},Ue.prototype.deleteMessageList=function(e,t,r,o){e=this.getMessageFileName(e,t,r);var n=this.createMessageStore(e);return new Promise((function(e){n.deleteList(o.map((function(e){return e.messageID})),(function(t){t.sort((function(e,t){return t.orderKey-e.orderKey})),e(t[0])}))}))},Ue.prototype.deleteAllMessage=function(e,t,r){this.createMessageStore(this.getMessageFileName(e,t,r)).deleteAll()},Ue.prototype.clearRoomMessage=function(e,t,r){var o=this;this.deleteList(t),r.forEach((function(t){t=o.getMessageFileName(e,t,I.Room);var r=o.storeMap.get(t);r&&(r.unlinkFile(),r.destroy(),o.storeMap.delete(t))}))},Ue.prototype.getMessageList=function(e,t){var r=e.ownerID,o=e.conversationID,n=e.type,i=this.createMessageStore(this.getMessageFileName(r,o,n));return i.getList().then((function(e){t.reverse?e.sort((function(e,t){return t.orderKey-e.orderKey})):e.sort((function(e,t){return e.orderKey-t.orderKey}));var r,s=0,a=(t.nextMessage&&t.nextMessage.messageID&&(r=t.nextMessage.messageID,s=e.findIndex((function(e){return r===e.messageID}))+1),s+t.count),u={},c={start:s,end:a,total:e.length,count:0,convID:o,type:n,flag:u};return(e=e.slice(s,a)).sort((function(e,t){return e.orderKey-t.orderKey})),e.forEach((function(e){u[e.conversationSeq]=e.orderKey})),c.count=e.length,i.writeLog("getMessageList",c),e}))},Ue.prototype.getLastMessage=function(e,t,r){return this.createMessageStore(this.getMessageFileName(e,t,r)).getList().then((function(e){return e.sort((function(e,t){return t.orderKey-e.orderKey})),e[0]}))},Ue.prototype.createMessageStore=function(e){var t=this.storeMap.get(e);return t||(t=new Ne(this.dir,e,"messageID"),this.storeMap.set(e,t)),t},Ue.prototype.getMessageFileName=function(e,t,r){return"".concat(pe.Message,"_").concat(e,"_").concat(r).concat(t)},be(ze,Be=Ne),ze.prototype.destroyUserStore=function(e,t){var r=this;t.forEach((function(t){t=r.getGroupMemberFileName(e,t);var o=r.storeMap.get(t);o&&(o.unlinkFile(),o.destroy(),r.storeMap.delete(t))}))},ze.prototype.addUserList=function(e,t,r,o){this.createUserStore(e,t).addList(r,o)},ze.prototype.deleteUserList=function(e,t,r){this.createUserStore(e,t).deleteList(r)},ze.prototype.getUser=function(e,t,r){return this.createUserStore(e,t).get(r)},ze.prototype.getUserList=function(e,t){return this.createUserStore(e,t).getList()},ze.prototype.createUserStore=function(e,t){return e=this.getGroupMemberFileName(e,t),(t=this.storeMap.get(e))||(t=new Ne(this.dir,e,"userID"),this.storeMap.set(e,t)),t},ze.prototype.getGroupMemberFileName=function(e,t){return"".concat(pe.Member,"_").concat(e,"_").concat(t)},He.prototype.create=function(e){var t=this;return this.close(),this.urls=e,this.urlIndex=0,this.retryCount=0,this.retryTotalTime=0,this.initDelayTask(),new Promise((function(e,r){t.createSocket(),t.bindSocketEvent(e,r)}))},He.prototype.close=function(){this.socket&&(this.socket.onmessage=null,this.socket.onopen=null,this.socket.onclose=null,this.socket.onerror=null,this.socket.close(1e3),this.socket=null)},He.prototype.destroy=function(){this.close(),this.logger=null,this.settings=null},He.prototype.send=function(e){this.socket&&this.socket.send(e)},He.prototype.createSocket=function(){try{this.socket=new WebSocket(this.urls[this.urlIndex]),this.socket.binaryType="arraybuffer"}catch(e){}},He.prototype.bindSocketEvent=function(e,t){function r(r){!o.isConnecting&&o.socket&&(o.isConnecting=!0,o.reconnect(r,e,t))}var o=this;this.socket.onmessage=this.onmessage,this.socket.onopen=function(){var t={event:"onconnected",url:o.urls[o.urlIndex]};o.logger.warn([he.Connection],de.Reconnection,t),o.isConnecting=!1,o.retryCount=0,o.retryTotalTime=0,o.urlIndex=0,o.initDelayTask(),o.onconnected(!e),e&&e(),e=void 0},this.socket.onclose=r,this.socket.onerror=r},He.prototype.reconnect=function(e,t,r){var o,n=this,i=(this.close(),this.delayTaskList.shift());if(!i)return o={event:"ondisconnected",url:this.urls[this.urlIndex]},this.logger.warn([he.Connection],de.Reconnection,o),this.isConnecting=!1,this.retryCount=0,this.retryTotalTime=0,this.urlIndex=0,this.ondisconnected(!0),r&&r(),void(r=void 0);this.ondisconnected(!1),setTimeout((function(){n.isConnecting=!1,n.retryCount++,n.retryTotalTime+=i,n.urlIndex=(n.urlIndex+1)%n.urls.length;var o=n.urls[n.urlIndex],s={delay:i,count:n.retryCount,time:n.retryTotalTime,event:e,url:o};n.logger.warn([he.Connection],de.Reconnection,s),Ut.getInstance().dataReport.report("reconnect",{domain:o}),n.createSocket(),n.bindSocketEvent(t,r)}),i)},He.prototype.initDelayTask=function(){for(var e=(o=this.settings.cloudSetting.login_config).login_retry_interval,t=o.login_retry_max_interval,r=o.login_retry_count,o=1e3+Math.floor(Math.random()*(e-1e3)),n=(this.delayTaskList=[o,e],o+e),i=r-1;1<i;i--)this.delayTaskList.push(e),n+=e;for(i=0;i<r&&!(n>=this.settings.connectionTimeout);i++){var s=Math.min(2*e,t);this.delayTaskList.push(s),n+=s}for(i=0;i<r&&!(n>=this.settings.connectionTimeout);i++)s=Math.min(4*e,t),this.delayTaskList.push(s),n+=s;for(i=0;i<r&&!(n>=this.settings.connectionTimeout);i++)s=Math.min(8*e,t),this.delayTaskList.push(s),n+=s;for(var a=this.delayTaskList[this.delayTaskList.length-1];n<this.settings.connectionTimeout;)n+=a,this.delayTaskList.push(a)};var Fe=He;function He(){this.logger=Ut.getInstance().logger,this.settings=Ut.getInstance().settings,this.urls=[],this.urlIndex=0,this.isConnecting=!1,this.retryCount=0,this.retryTotalTime=0,this.delayTaskList=[]}var Ke=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return s},Ve=(Ze.prototype.initEvent=function(e,t,r){this.onConnectedEvent=e,this.onDisConnectedEvent=t,this.onPushEvent=r},Ze.prototype.create=function(e){var t=this;this.streamID++,this.close(),e=e.map((function(e,r){var o=new Fe;return o.onconnected=t.onConnectedEvent,o.ondisconnected=t.onDisConnectedEvent,o.onmessage=t.onmessage,(t.connections[r]=o).create(e)}));return Promise.all(e)},Ze.prototype.close=function(){this.connections.length&&this.logger.warn([he.Connection],de.CloseConnection),this.connections.forEach((function(e){return e.destroy()})),this.connections.length=0},Ze.prototype.destroy=function(){this.requestMap.clear(),this.requestTimeoutMap.clear(),this.pushCmdMap.clear(),this.close(),this.logger=null,this.settings=null,this.dataReport=null,this.protobuf=null,this.engineConfig=null},Ze.prototype.getUrls=function(){var e=localStorage.getItem(this.urlKey);return e?Ut.getInstance().crypto.decryptString(e).split(","):["wss://accesshub-wss.zego.im/accesshub"]},Ze.prototype.sendDispatchRequest=function(){var e=++this.seq,t=this.protobuf.encodeAccesshubDispatchRequest(this.streamID,e,this.engineConfig),r=(this.connections.forEach((function(e){return e.send(t)})),{time:Date.now(),seq:e,size:t.length,cmd:"AccesshubDispatchRequest"});return this.createRequest(e,this.settings.requestTimeout,r)},Ze.prototype.sendHttpRequest=function(e,t){var r=++this.seq,o=this.protobuf.encodeAccesshubHTTPRequest(this.streamID,r,this.engineConfig,e,t);this.connections.forEach((function(e){return e.send(o)})),e={time:Date.now(),seq:r,size:o.length,cmd:"AccesshubHTTPRequest",http:e,body:t};return this.createRequest(r,this.settings.requestTimeout,e)},Ze.prototype.sendRequest=function(e,t,r,o){return void 0===r&&(r=Q.API),this.sendRequestInner(e,t,r,o=void 0!==o&&o)},Ze.prototype.sendRequestWithHook=function(e,t,r,o){return void 0===r&&(r=Q.API),this.sendRequestInner(e,t,r,!1,!0,this.settings.requestTimeout,o)},Ze.prototype.sendRequestWithHeartbeat=function(e,t,r,o){return this.sendRequestInner(e,t,Q.SDK,!1,r,o)},Ze.prototype.sendRequestWithNoRsp=function(e,t){e=this.generateHeader(e,Q.SDK);var r=Ke(this.protobuf.encodeRequest(e,t,this.streamID),1)[0];this.connections.forEach((function(e){return e.send(r)}))},Ze.prototype.responseRequest=function(e,t){var r;return void 0===t&&(t=!0),this.requestMap.has(e)?((r=this.requestTimeoutMap.get(e))&&clearTimeout(r),this.requestTimeoutMap.delete(e),t&&(r=this.requestMap.get(e).resolve,this.requestMap.delete(e),r({code:v.Success})),e):0},Ze.prototype.sendRequestInner=function(e,t,r,o,n,i,s){void 0===o&&(o=!1),void 0===n&&(n=!0),void 0===i&&(i=this.settings.requestTimeout);var a=(r=this.generateHeader(e,r)).seq,u=this.dataReport.beginNetworkRequest(e,a,t),c=(s=(s&&s(r,u),Ke(this.protobuf.encodeRequest(r,t,this.streamID),3)))[0];u=s[1],s=s[2],this.connections.forEach((function(e){return e.send(c)})),n=n?{time:Date.now(),seq:a,caller:r.caller_type||void 0,cmd:e,rsp_cmd:"",size:c.length,osize:u,esize:s,rsp_size:-1,rsp_osize:-1,rsp_dsize:-1,body:t}:null;return this.createRequest(a,i,n,e,o)},Ze.prototype.createRequest=function(e,t,r,o,n){var i=this;return new Promise((function(s){i.requestMap.set(e,{resolve:s,log:r,isShortLog:n});var a=setTimeout((function(){i.requestMap.delete(e);var a={seq:e,code:v.NetworkModuleNetworkError,message:"Network error."};r&&(r.time=t,r.timeout=t,i.logger.warn([he.Connection],de.SendCMD,r,n)),o&&i.dataReport.endNetworkRequest(o,e,a),s(a)}),t);i.requestTimeoutMap.set(e,a)}))},Ze.prototype.handleAccesshubPCDownwardMessage=function(e){var t,r,o,n,i,s,a=(u=Ke(this.protobuf.decodeResponseHeader(e),2))[0],u=u[1],c=a.cmd,l=a.seq;this.requestMap.has(l)?(i=(n=Ke(this.protobuf.decodeResponseBody(e,c,u),3))[0],r=n[1],n=n[2],t=(o=this.requestMap.get(l)).resolve,s=o.log,o=o.isShortLog,(s||i.code)&&(r={rsp_cmd:c,rsp_size:e.byteLength,rsp_osize:r,rsp_dsize:n,rsp_body:i},s&&(s.time=Date.now()-s.time,Object.assign(s,r)),this.logger.info([he.Connection],de.SendCMD,s||r,o)),this.requestMap.delete(l),(n=this.requestTimeoutMap.get(l))&&clearTimeout(n),this.requestTimeoutMap.delete(l),this.dataReport.endNetworkRequest(c,l,i),c===J.sw_login_rsp&&(i.rspHeader=a),t(i)):-1==this.swPushCmdList.indexOf(c)||this.pushCmdMap.has(l)||(o=(r=Ke(this.protobuf.decodeResponseBody(e,c,u),3))[0],n=r[1],a=r[2],u=(i=o.send_time||(null==(t=o.head)?void 0:t.send_time))?Date.now()+this.settings.serverOffsetTime-i.toString():void 0,s={time:o.send_time_consumed=u,seq:l,cmd:o.subCmds||c,size:e.byteLength,osize:n,dsize:a,body:o},this.logger.info([he.Connection],de.PushCMD,s),this.pushCmdMap.set(l,1),l>this.seq&&(this.seq=l),o.subCmds||this.onPushEvent(c,o))},Ze.prototype.handleAccesshubHTTPResponse=function(e){var t=+(null==(t=e.txid)?void 0:t.toString());if(this.requestMap.has(t)){var r=(n=this.requestMap.get(t)).resolve,o=n.log,n=n.isShortLog,i={};if(e.body)try{i=JSON.parse(oe(e.body))}catch(e){}this.requestMap.delete(t);var s=this.requestTimeoutMap.get(t);s&&clearTimeout(s),this.requestTimeoutMap.delete(t),o.time=Date.now()-o.time,o.code=e.status_code,o.result=i,this.logger.info([he.Connection],de.SendCMD,o,n),r(i)}},Ze.prototype.handleAccesshubDispatchResponse=function(e){var t,r,o,n=+(null==(n=null==(n=e.data)?void 0:n.txid)?void 0:n.toString());this.requestMap.has(n)&&(t=(r=this.requestMap.get(n)).log,r=r.isShortLog,this.requestMap.delete(n),(o=this.requestTimeoutMap.get(n))&&clearTimeout(o),this.requestTimeoutMap.delete(n),t.time=Date.now()-t.time,t.result=e,this.logger.info([he.Connection],de.SendCMD,t,r),n=null==(o=e.data.wss_groups)?void 0:o.map((function(e){return"wss://".concat(e.host,"/accesshub")})),this.setUrls(n))},Ze.prototype.handleAccesshubRedirect=function(e,t){this.handleAccesshubLog(e,t,"Redirect"),(e=null==(t=null==(e=t.data)?void 0:e.wss_groups)?void 0:t.map((function(e){return"wss://".concat(e.host,"/accesshub")})))&&e.length&&this.onPushEvent(J.sw_push_redirect,{redirect_server:e})},Ze.prototype.handleAccesshubCloseConnection=function(e,t){this.handleAccesshubLog(e,t),this.onDisConnectedEvent(!0)},Ze.prototype.handleAccesshubLog=function(e,t,r){this.logger.info([he.Connection],de.PushCMD,{type:e,cmd:"Accesshub"+(r=void 0===r?"":r),res:t})},Ze.prototype.generateHeader=function(e,t){return{cmd:e,seq:++this.seq,timestamp:Date.now(),product:2,app_id:this.engineConfig.appID,user_id:this.engineConfig.userID,flags:[1],caller_type:t,session_id:this.engineConfig.sessionID,user_nid:this.engineConfig.serverUserID,controls:this.engineConfig.controls}},Ze.prototype.setUrls=function(e){e&&e.length&&(e=Ut.getInstance().crypto.encryptString(e.join(",")),localStorage.setItem(this.urlKey,e))},Ze);function Ze(e){var t=this;this.seq=0,this.streamID=0,this.urlKey="",this.requestMap=new Map,this.requestTimeoutMap=new Map,this.pushCmdMap=new Map,this.swPushCmdList=Object.freeze([J.sw_push,J.sw_push_list,J.sw_push_kickout,J.sw_push_redirect]),this.logger=Ut.getInstance().logger,this.dataReport=Ut.getInstance().dataReport,this.protobuf=Ut.getInstance().protobuf,this.settings=Ut.getInstance().settings,this.connections=[],this.onmessage=function(e){var r=((e=new Uint8Array(e.data))[2]<<8)+e[3],o=t.protobuf.decodeAccesshubResponse(r,e);switch(r){case 21:t.handleAccesshubPCDownwardMessage(o);break;case 5:t.handleAccesshubHTTPResponse(o);break;case 27:t.handleAccesshubDispatchResponse(o);break;case 3:t.handleAccesshubCloseConnection(r,o);break;case 22:t.handleAccesshubRedirect(r,o);break;default:t.handleAccesshubLog(r,o)}},this.engineConfig=this.settings.getEngineConfig(e),this.urlKey="z_AccesshubURL_".concat(this.engineConfig.appID),Ut.getInstance().crypto.generateAppIDKey(this.engineConfig.appID)}var We=function(){return(We=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},Qe=(Je.prototype.destroy=function(){this.dbMgr=null,this.connMgr=null,this.eventBus=null,this.logger=null,this.engineConfig=null},Je.prototype.setDBConv=function(e){Object.assign(e,this.dbConv),this.dbConv=e},Je.prototype.setDBUser=function(e){e&&this.convType==I.Peer&&(this.dbUser=e)},Je.prototype.clearUnreadMessageCount=function(){var e=this,t=this.dbConv.msgSeq||this.dbConv.readMsgSeq,r={time:Date.now(),convID:this.convID,type:this.convType,seq:t};return this.updateServerReadMsgSeq(t,Q.API).then((function(o){return o&&o.code?(o=ye(v.ConversationModuleServerError,o.message,o.code),r.time=Date.now()-r.time,r.error=o,e.logger.warn([he.Conversation],de.ClearConversationUnreadMessageCount,r),Promise.reject(o)):(e.dbConv.sendMsgCount=0,e.dbConv.deletedMsgCount=0,e.dbConv.unreadMessageCount=0,e.dbConv.readMsgSeq=t,o="clearUnreadMessageCount",e.emitConversationUpdated(o),e.emitUnreadMessageCount(o),r.time=Date.now()-r.time,e.logger.info([he.Conversation],de.ClearConversationUnreadMessageCount,r),e.dbMgr.addConversationList([e.dbConv],o))})).then((function(){return{conversationID:e.convID,conversationType:e.convType}}))},Je.prototype.sendMessage=function(e,t,r){var o=this,n=e.type>=R.Image&&e.type<=R.Video,i=n?de.SendMediaMessage:this.convTypeMap.sendLogAction,s=Date.now();if(!n&&s-this.lastSendTime<this.settings.cloudSetting.app_config.request_control)return a=ye(v.CommonModuleTriggerSDKFrequencyLimit),this.logger.warn([he.Conversation],i,a),Promise.reject(a);r=r||{time:s,type:e.type,config:t},this.lastSendTime=s;var a=e.type;s=e.message,n||this.emitSendingMessage(e),a=We(We({},this.getSendMessageReqBody()),{msg_info:{msg_type:a,priority_type:t.priority,msg:"string"==typeof s?re(s):s,conv_id:this.convID,msg_client_info:{conv_sid:f.a.fromString(""+this.convSid),client_msg_seq:f.a.fromString(String(++this.clientMsgSeq))}}});return this.convType!=I.Peer||this.dbUser||this.dbConv.maxOrderKey||(a.fetch_peer_user_info=1),this.convType!==I.Room&&t.pushConfig&&t.pushConfig.title&&t.pushConfig.content&&(a.msg_info.offline_push={enable_push:1,title:String(t.pushConfig.title),content:String(t.pushConfig.content),payload:String(t.pushConfig.extendedData||"")}),this.connMgr.sendRequest(this.convTypeMap.textMsgCmd,a).then((function(t){if(t.peer_user_name&&(o.dbConv.conversationName=oe(t.peer_user_name)),t.peer_user_avatar&&(o.dbConv.conversationAvatarUrl=oe(t.peer_user_avatar)),t.code){var s=o.checkConversationDisable(t.conv_disable);s=(r.result=o.saveFailedMessage(e,s),o.withSendMessageErrorCode(t));if(n)throw s;return r.time=Date.now()-r.time,r.error=s,o.logger.warn([he.Conversation],i,r),Promise.reject(s)}t.send_count_after_read&&(o.dbConv.sendMsgCount=+t.send_count_after_read.toString());t=(s=t.msg_svr_info).conv_msg_seq;var a=s.msg_id,u=s.msg_time;s=s.msg_rsp,t=+t.toString(),e.sentStatus=A.Success,e.messageID=a.toString(),e.timestamp=+u.toString(),e.conversationSeq=t,n&&(e.message=oe(s),le(e)),a=We(We({},e),{clientSeq:o.clientMsgSeq,clientSid:""+o.convSid});return e.orderKey=o.calculateMessageOrderKey(a),o.saveMessageList([a],t,W.Send),r.time=Date.now()-r.time,r.result=t,o.logger.info([he.Conversation],i),{message:Object.freeze(e)}}))},Je.prototype.sendCommand=function(e,t){var r=this,o=Date.now(),n=o-this.lastSendTime<this.settings.cloudSetting.app_config.request_control;if(e.type!=R.Barrage&&n)return n=ye(v.CommonModuleTriggerSDKFrequencyLimit),this.logger.warn([he.Conversation],this.convTypeMap.sendLogAction,n),Promise.reject(n);var i={time:o},s=(n=(e.type!=R.Barrage&&(this.lastSendTime=o),e.type),e.message);e.conversationID=this.convID,e.conversationType=this.convType,e.senderUserID=this.engineConfig.userID,e.direction=O.Send,e.sentStatus=A.Sending,e.conversationSeq=0,e.orderKey=0,e.localMessageID=te(),n={msg_type:n,priority_type:t.priority,msg:"string"==typeof s?re(s):s,conv_id:this.convID},t=this.convType===I.Room?"msg_info":"command_msg_info",t=We(We({},this.getSendMessageReqBody()),((s={})[t]=n,s));return this.connMgr.sendRequest(this.convTypeMap.commandMsgCmd,t).then((function(t){if(o+=r.settings.serverOffsetTime,t.code)return e.sentStatus=A.Failed,e.messageID=e.localMessageID,e.timestamp=o,Object.freeze(e),n=r.withSendMessageErrorCode(t),i.time=Date.now()-i.time,i.error=n,r.logger.warn([he.Conversation],r.convTypeMap.sendLogAction,i),Promise.reject(n);var n=t.msg_id;t=t.command_svr_info;return e.sentStatus=A.Success,e.messageID=(n||t.msg_id).toString(),e.timestamp=t&&t.msg_time?+t.msg_time.toString():o,i.time=Date.now()-i.time,r.logger.info([he.Conversation],r.convTypeMap.sendLogAction),{message:Object.freeze(e)}}))},Je.prototype.sendMediaMessage=function(e,t,r){var o=this,n=e,i={time:Date.now(),type:n.type,message:n,config:t},s=me[n.type];return this.emitSendingMessage(n),n.fileDownloadUrl&&"string"==typeof n.fileDownloadUrl?(n.message=this.createMediaMessageJSON(s,n.fileDownloadUrl,n,!0),this.sendMessage(n,t,i)):function(e){return t=e,new Promise((function(e,r){try{var o=t.size,n=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,i=1048576,s=Math.ceil(o/i),a=new ve.a.ArrayBuffer,u=new FileReader,c=0,l=(u.onload=function(){var n=u.result||u.content;n?(a.append(n),++c<s?l():e({md5:a.end(),name:t.name,size:o})):r(ye(v.MessageModuleFileSizeInvalid))},u.onerror=function(){r(ye(v.MessageModuleFileNotExist))},function(){var e=c*i,r=Math.min(e+i,o);e=n.call(t,e,r);u.readAsArrayBuffer(e)});l()}catch(e){r(e)}}));var t}(n.fileLocalPath).then((function(e){return n.fileUID=e.md5,n.fileName=n.fileName||e.name,n.fileSize=n.fileSize||e.size,e={md5:n.fileUID,name:n.fileName,size:n.fileSize,file_type:s,duration:o.getMediaMessageDuration(n)},o.connMgr.sendRequest(J.im_file_upload,e)})).then((function(e){if(e.code)throw ye(v.MessageModuleFileServerError,e.message,e.code);function a(e){var t=e.loaded||e.totalBytesSent||0;e=e.total||e.totalBytesExpectedToSend||1;r&&r(n,t,e)}return a({loaded:0,total:n.fileSize}),1==e.state?(a({loaded:n.fileSize,total:n.fileSize}),o.fetchFileProcess(s,n,t,i)):function(e,t,r){return o=e,n=t,i=r,new Promise((function(e,t){var r=new XMLHttpRequest,s=(r.onreadystatechange=function(){if(4==r.readyState){if(200!=r.status)return t();e()}},r.upload.addEventListener("progress",i),r.onerror=t,r.ontimeout=t,r.open(o.method,o.url,!0),r.timeout=6e5,o.headers);s&&(delete s["User-Agent"],delete s["user-agent"],Object.keys(s).forEach((function(e){return r.setRequestHeader(e,s[e])}))),r.send(n)}));var o,n,i}(e.upload_req,n.fileLocalPath,a).then((function(){return o.fetchFileProcess(s,n,t,i)}))})).catch((function(e){var t=e&&(e.stack||e.message);e=e&&e.code?e:ye(v.MessageModuleSendMessageFailed,t);throw n.sentStatus==A.Sending&&(i.result=o.saveFailedMessage(n,!1)),i.time=Date.now()-i.time,i.error=e,o.logger.warn([he.Conversation],de.SendMediaMessage,i),e}))},Je.prototype.deleteMessages=function(e,t){var r={time:Date.now(),convID:this.convID,type:this.convType,config:t};return t&&t.isAlsoDeleteServerMessage?this.deleteServerMessages(e,r):this.deleteLocalMessages(e,r)},Je.prototype.deleteAllMessage=function(e){var t={time:Date.now(),convID:this.convID,type:this.convType,config:e};return e&&e.isAlsoDeleteServerMessage?this.deleteServerAllMessage(t):this.deleteLocalAllMessage(t)},Je.prototype.queryHistoryMessage=function(e){var t=this;return new Promise((function(r){function o(p){var h,d,f;t.dbMgr&&(h=t.dbConv.deletedMsgSeqs||[],d=Math.max(n,t.dbConv.deletedMsgMaxSeq||0),p.list.forEach((function(e){var r=e.msg_svr_info.msg_id.toString(),o=+e.msg_svr_info.conv_msg_seq.toString();-1==h.indexOf(o)&&d<o&&!c.has(r)&&(s<o&&(s=o),c.set(r,t.transform2Message(e)))})),p.nextFlag?t.fetchServerPageMessage(p.nextFlag,++a,l,u).then(o):(f=Array.from(c.values()),t.saveMessageList(f,s,W.Fetch).then((function(){t.mergeMsgTimer&&clearTimeout(t.mergeMsgTimer),t.mergeMsgTimer=0;var r=-1==t.loginedMsgEmit.seq?n:t.loginedMsgEmit.seq,o=(t.loginedMsgEmit.seq=-1,(t.loginedMsgEmit.list=f).filter((function(e){return e.conversationSeq>r})));return t.emitReceiveMessage(o,"apicall"),t.dbMgr.getMessageList(t.dbConv,e)})).then((function(e){e.forEach(le);var o=Date.now()-i.time;Object.assign(i,{time:o,maxSeq:s,startSeq:d,delSeqs:h,count:e.length}),t.logger.info([he.Conversation],de.QueryHistoryMessage,i),r({conversationID:t.convID,conversationType:t.convType,messageList:e})}))))}var n=t.dbConv.localMsgSeq||0,i={time:Date.now(),convID:t.convID,type:t.convType,dbSeq:n,config:e},s=0,a=1,u=!1,c=new Map,l=Z.Biz,p=t.dbConv.deletedMsgMaxSeq||0;n||p?(u=!1,t.fetchServerPageMessage(Math.max(n,p),a,l,u).then(o)):(u=!0,t.fetchServerPageMessage(-1,a,l,u).then(o))}))},Je.prototype.setNotificationStatus=function(e){var t=this,r={time:Date.now(),convID:this.convID},o={group_id:this.convID,enable:e===D.DoNotDisturb};return this.connMgr.sendRequest(J.im_group_mute,o).then((function(o){var n;return o.code?(n=108044==o.code||106011==o.code?v.ConversationModuleConversationDoesNotExist:v.ConversationModuleServerError,n=ye(n,o.message,o.code),r.time=Date.now()-r.time,r.error=n,t.logger.warn([he.Conversation],de.SetConversationNotificationStatus,r),Promise.reject(n)):(t.dbConv.notificationStatus=e,o="setNotificationStatus",t.dbMgr.addConversationList([t.dbConv],o),t.emitConversationUpdated(o),r.time=Date.now()-r.time,t.logger.info([he.Conversation],de.SetConversationNotificationStatus,r),{conversationID:t.convID,conversationType:t.convType})}))},Je.prototype.onPushMessage=function(e){this.waitingMergeMsg(this.transform2Message(e))},Je.prototype.isOnlineMsg=function(e){return e===R.Command||e===R.Barrage},Je.prototype.deleteLocalMessages=function(e,t){var r=this;return this.dbMgr.deleteMessageList(this.convID,this.convType,e).then((function(o){var n=e.map((function(e){return e.conversationSeq})),i=(n=(r.dbConv.deletedMsgSeqs=n.concat(r.dbConv.deletedMsgSeqs||[]),(r.dbConv.lastMessage=o)&&(r.dbConv.orderKey=o.orderKey),r.dbConv.readMsgSeq||0),o=r.dbConv.msgSeq||n,r.dbConv.sendMsgCount||0);r.calculateDeletedMsgCount(e,n),r.dbConv.unreadMessageCount=Math.max(o-n-i-r.dbConv.deletedMsgCount,0),n="deleteLocalMessages";return r.dbMgr.addConversationList([r.dbConv],n),r.emitConversationUpdated(n),r.emitUnreadMessageCount(n),r.updateServerReadMsgSeq(o,Q.SDK),t.time=Date.now()-t.time,r.logger.info([he.Conversation],de.DeleteMessages,t),{conversationID:r.convID,conversationType:r.convType}}))},Je.prototype.deleteServerMessages=function(e,t){var r=this;return this.connMgr.sendRequest(this.convTypeMap.delMsg,this.getDelMessageReqBody(e)).then((function(o){return o.code?(o=ye(v.ConversationModuleServerError,o.message,o.code),t.time=Date.now()-t.time,t.error=o,r.logger.warn([he.Conversation],de.DeleteMessages,t),Promise.reject(o)):r.deleteLocalMessages(e,t)}))},Je.prototype.deleteLocalAllMessage=function(e){var t=this,r=(this.dbMgr.deleteAllMessage(this.convID,this.convType),this.dbConv.msgSeq||this.dbConv.readMsgSeq),o=(this.dbConv.sendMsgCount=0,this.dbConv.deletedMsgCount=0,this.dbConv.unreadMessageCount=0,this.dbConv.readMsgSeq=r,this.dbConv.deletedMsgMaxSeq=r,this.dbConv.lastMessage=void 0,"deleteLocalAllMessage");return this.emitConversationUpdated(o),this.emitUnreadMessageCount(o),this.updateServerReadMsgSeq(r,Q.SDK),e.time=Date.now()-e.time,this.logger.info([he.Conversation],de.DeleteAllMessage,e),this.dbMgr.addConversationList([this.dbConv],o).then((function(){return{conversationID:t.convID,conversationType:t.convType}}))},Je.prototype.deleteServerAllMessage=function(e){var t=this;return this.connMgr.sendRequest(this.convTypeMap.delAllMsg,this.getDelAllMessageReqBody()).then((function(r){return r.code?(r=ye(v.ConversationModuleServerError,r.message,r.code),e.time=Date.now()-e.time,e.error=r,t.logger.warn([he.Conversation],de.DeleteAllMessage,e),Promise.reject(r)):t.deleteLocalAllMessage(e)}))},Je.prototype.updateServerReadMsgSeq=function(e,t){return this.dbConv.state?Promise.resolve():this.connMgr.sendRequest(J.im_usermail_update_read_seq,{conv_id:this.convID,conv_type:this.convType,read_seq:f.a.fromString(""+e)},t)},Je.prototype.fetchServerPageMessage=function(e,t,r,o){var n=this,i=this.getFetchMessageReqBody(e,r,o?1:0);if(this.convType==I.Room&&!i)return Promise.resolve({nextFlag:0,list:[]});i.degree=t;var s=(i.how=r)==Z.Biz?Q.API:Q.SDK;return this.connMgr.sendRequest(this.convTypeMap.fetchMsgList,i,s,!0).then((function(i){if(i.code)return{list:[]};i=n.getFetchMessageRspBody(e,i);var s={},a=(i.list.forEach((function(e){var t;s[null==(t=e.msg_svr_info.conv_msg_seq)?void 0:t.toString()]=e.msg_info.msg})),{convID:n.convID,type:n.convType,seq:e,degree:t,how:r,reverse:o,flag:s});return n.logger.info([he.Conversation],"fetchServerPageMessage",a),r==Z.SDKLogin&&(i.nextFlag=0),i}))},Je.prototype.saveFailedMessage=function(e,t){var r=this.dbConv.msgSeq||this.dbConv.readMsgSeq||0,o=(e.sentStatus=A.Failed,e.messageID||(e.messageID=e.localMessageID),e.timestamp=Date.now()+this.settings.serverOffsetTime,e.conversationSeq=r+1,e.orderKey=(this.dbConv.maxOrderKey||0)+1,We(We({},e),{clientSeq:this.clientMsgSeq,clientSid:""+this.convSid}));return Object.freeze(e),this.saveMessageList([o],r,W.Send,t),e.conversationSeq},Je.prototype.saveMessageList=function(e,t,r,o){if(0==e.length)return Promise.resolve();e.sort((function(e,t){return e.orderKey-t.orderKey}));var n,i,s,a=this.dbConv.state,u=this.dbConv.msgSeq||0,c=this.dbConv.maxOrderKey||0,l=this.dbConv.lastMessage||{messageID:""},p=(l.orderKey=l.orderKey||0,e[e.length-1]);t=Math.max(u,t),o||a==z.Delete&&r==W.Fetch||(this.dbConv.state=z.Normal),this.dbConv.msgSeq=t,this.dbConv.localMsgSeq=t,(!this.dbConv.minOrderKey||this.dbConv.minOrderKey<1)&&(this.dbConv.minOrderKey=e[0].orderKey),this.dbConv.maxOrderKey=Math.max(c,p.orderKey),o="saveMessageList_".concat(r,"_").concat(c,",").concat(this.dbConv.maxOrderKey,"_").concat(u,",").concat(t,"_").concat(l.orderKey,",").concat(p.orderKey);return r!=W.Send&&(n=this.dbConv.readMsgSeq||0,i=this.dbConv.sendMsgCount||0,s=this.dbConv.deletedMsgCount||0,r!=W.Push||u||(this.dbConv.readMsgSeq=n=t-1),(u=Math.max(t-n-i-s,0))!=this.dbConv.unreadMessageCount&&(this.dbConv.unreadMessageCount=u,this.emitUnreadMessageCount(o))),l.messageID!=p.messageID&&(l.sentStatus==A.Failed||p.orderKey>=l.orderKey||r==W.Push)&&(this.dbConv.orderKey=p.timestamp,this.dbConv.lastMessage=p,t=r==W.Send||c&&a!=z.Delete?this.dbConv.state==z.Disable?S.Disabled:S.Updated:S.Added,this.emitConversationChangedByMessage(p,t,o)),this.dbMgr.addConversationList([this.dbConv],o),this.dbMgr.addMessageList(this.convID,this.convType,e)},Je.prototype.transform2Message=function(e){var t=e.msg_info,r=(e=e.msg_svr_info).sender_user_id;return le(t={localMessageID:te(),messageID:e.msg_id.toString(),timestamp:+e.msg_time.toString(),type:t.msg_type,message:oe(t.msg),conversationID:this.convID,conversationType:this.convType,senderUserID:r,sentStatus:A.Success,direction:r===this.engineConfig.userID?O.Send:O.Receive,conversationSeq:+e.conv_msg_seq.toString(),orderKey:0,clientSeq:+(null==(e=null==(r=t.msg_client_info)?void 0:r.client_msg_seq)?void 0:e.toString())||0,clientSid:(null==(e=null==(r=t.msg_client_info)?void 0:r.conv_sid)?void 0:e.toString())||""}),this.calculateMessageOrderKey(t),t},Je.prototype.checkConversationDisable=function(e){return this.convType==I.Peer&&(this.dbConv.state=e?z.Disable:z.Normal,!0)},Je.prototype.withSendMessageErrorCode=function(e){return e=ye(v.MessageModuleSendMessageFailed,e.message,e.code),this.convType==I.Group&&-1==this.auditErrorCodes.indexOf(e.code)&&(e.code=v.MessageModuleSendMessageFailed),e},Je.prototype.calculateDeletedMsgCount=function(e,t){e=e.reduce((function(e,r){return r.direction===O.Receive&&r.conversationSeq>t&&e++,e}),0),e+=this.dbConv.deletedMsgCount||0,this.dbConv.deletedMsgCount=e},Je.prototype.initGroupUnreadMsgCount=function(e,t){this.dbConv.localMsgSeq=e,this.dbConv.msgSeq=e,this.dbConv.readMsgSeq=t==Z.SDKPush?e-1:e,this.dbConv.sendMsgCount=0,this.dbConv.deletedMsgCount=0,this.dbConv.unreadMessageCount=0,this.dbMgr.addConversationList([this.dbConv],"initGroupUnreadMsgCount_"+t)},Je.prototype.calculateMessageOrderKey=function(e){var t=100,r=e.clientSeq,o=e.clientSid,n=e.orderKey;if(n)return n;if(!r||!o)return e.orderKey=e.conversationSeq*t,e.orderKey;if(!(n=this.msgCaches[e.senderUserID]))return e.orderKey=e.conversationSeq*t,this.msgCaches[e.senderUserID]=n=[e],e.orderKey;var i=0,s=0,a=0,u=0,c=(n.forEach((function(e){var n=e.clientSeq;e.clientSid==o&&n&&(r<n&&(!s||n<s)?(s=n,u=e.conversationSeq*t):n<r&&(!i||i<n)&&(i=n,a=e.conversationSeq*t))})),e.conversationSeq*t);return i&&s?(c<=a||u<=c)&&(c=a+Math.floor(Math.random()*(u-a+1))):c<a?c=a+r-i:s&&u<c&&(c=u+r-s),e.orderKey=c,n.push(e),100<n.length&&(n.sort((function(e,t){return e.orderKey-t.orderKey})),n.splice(0,90)),e.orderKey},Je.prototype.mergeServerMessageList=function(e,t,r){var o,n,i,s,a,u,c,l,p=this;this.isFetchMessageWhenLogin(e)&&(o=0,n=1,i=this.dbConv.localMsgSeq||0,s=this.dbConv.msgSeq||0,a=new Map,u={time:Date.now(),convID:this.convID,type:this.convType,dbSeq:i,msgSeq:s,how:e,action:t},c=function(s){var l,h,d;p.dbMgr&&(l=p.dbConv.deletedMsgSeqs||[],h=Math.max(i,p.dbConv.deletedMsgMaxSeq||0),s.list.forEach((function(e){var t=e.msg_svr_info.msg_id.toString(),r=+e.msg_svr_info.conv_msg_seq.toString();-1==l.indexOf(r)&&h<r&&!a.has(t)&&(o<r&&(o=r),a.set(t,p.transform2Message(e)))})),s.nextFlag?p.fetchServerPageMessage(s.nextFlag,++n,e,!1).then(c):(r&&p.initGroupUnreadMsgCount(s.maxSeq,e),s=Array.from(a.values()),p.saveMessageList(s,o,W.Fetch),e==Z.SDKLogin&&-1==p.loginedMsgEmit.seq&&(p.loginedMsgEmit.seq=o),e==Z.SDKLogin&&p.loginedMsgEmit.list.length?(d=p.loginedMsgEmit.list.filter((function(e){return e.conversationSeq>i})),p.emitReceiveMessage(d,t),p.loginedMsgEmit.list=[]):(d=s.filter((function(t){return t.conversationSeq>i&&(e!=Z.SDKHb||e==Z.SDKHb&&t.direction==O.Receive)})),p.emitReceiveMessage(d,t)),e===Z.SDKPush&&(p.mergeMsgTimer&&clearTimeout(p.mergeMsgTimer),p.mergeMsgTimer=0),u.time=Date.now()-u.time,Object.assign(u,{maxSeq:o,startSeq:h,delSeqs:l,count:s.length}),p.logger.info([he.Conversation],"mergeServerMessageList",u)))},(l=e==Z.SDKLogin)&&s&&i!=s?this.fetchServerPageMessage(s+1,n,e,!0).then(c):l||this.fetchServerPageMessage(i,n,e,!1).then(c))},Je.prototype.waitingMergeMsg=function(e){var t,r=this,o=e.conversationSeq,n=this.dbConv.localMsgSeq;!n||o<=n||o==n+1&&!this.mergeMsgTimer?(this.saveMessageList([e],o,W.Push),this.emitReceiveMessage([e],"continuousMerge"),t={convID:this.convID,type:this.convType,seq:o,dbSeq:n,action:"continuousMerge"},this.logger.info([he.Conversation],"mergeMessage",t)):(this.mergeMsgList.push(e),this.mergeSeqList.some((function(e){return e==o}))||this.mergeSeqList.push(o),this.mergeMsgTimer||(this.mergeMsgTimer=setTimeout((function(){r.mergeSeqList.sort((function(e,t){return t-e}));var e=r.mergeSeqList.length-1,t=(e=r.mergeSeqList[0]-r.mergeSeqList[e]==e,{convID:r.convID,type:r.convType,seq:o,dbSeq:n,action:"waitingPush",time:r.settings.mailHBFetchConfig.msg_to,dbSeq_:r.dbConv.localMsgSeq,continuous:e,mergeSeqList:r.mergeSeqList});r.logger.info([he.Conversation],"mergeMessage",t),e?(t=r.mergeMsgList.slice(),r.saveMessageList(t,r.mergeSeqList[0],W.Push),r.emitReceiveMessage(t,"waitingPush"),r.mergeMsgTimer=0,r.mergeSeqList.length=0,r.mergeMsgList.length=0):(r.mergeSeqList.length=0,r.mergeMsgList.length=0,(e=Date.now()-r.lastMergeMsgTime)>r.settings.mailHBFetchConfig.msg_itvl?(r.lastMergeMsgTime+=e,r.mergeServerMessageList(Z.SDKPush,"onPushTimeout")):setTimeout((function(){r.lastMergeMsgTime=Date.now(),r.mergeServerMessageList(Z.SDKPush,"onPushTimeoutDelay")}),r.settings.mailHBFetchConfig.msg_itvl-e))}),this.settings.mailHBFetchConfig.msg_to)))},Je.prototype.fetchFileProcess=function(e,t,r,o){var n=this,i={md5:t.fileUID,file_type:e,file_name:t.fileName};return this.connMgr.sendRequest(J.im_file_process,i).then((function(i){if(i.code)throw ye(v.MessageModuleSendMessageFailed,i.message,i.code);return t.message=n.createMediaMessageJSON(e,i.download_url,t),n.sendMessage(t,r,o)}))},Je.prototype.emitUnreadMessageCount=function(e){this.convType!=I.Room&&this.eventBus.exec(Y.InnerUnreadMessageCount,e)},Je.prototype.emitConversationChangedByMessage=function(e,t,r){e.conversationType==I.Room||this.dbConv.state==z.Delete||this.isOnlineMsg(e.type)||(t={infoList:[{event:t,conversation:{conversationID:this.dbConv.conversationID,conversationName:this.dbConv.conversationName,conversationAvatarUrl:this.dbConv.conversationAvatarUrl,type:this.dbConv.type,unreadMessageCount:this.dbConv.unreadMessageCount,notificationStatus:this.dbConv.notificationStatus,orderKey:e.timestamp,lastMessage:e}}]},this.eventBus.emit(Y.ConversationChanged,t,r))},Je.prototype.emitConversationUpdated=function(e){var t;this.convType!=I.Room&&this.dbConv.state!=z.Delete&&(t={infoList:[{event:S.Updated,conversation:{conversationID:this.dbConv.conversationID,conversationName:this.dbConv.conversationName,conversationAvatarUrl:this.dbConv.conversationAvatarUrl,type:this.dbConv.type,unreadMessageCount:this.dbConv.unreadMessageCount,notificationStatus:this.dbConv.notificationStatus,orderKey:this.dbConv.orderKey,lastMessage:this.dbConv.lastMessage}}]},this.eventBus.emit(Y.ConversationChanged,t,e))},Je.prototype.emitSendingMessage=function(e){e.conversationID=this.convID,e.conversationType=this.convType,e.senderUserID=this.engineConfig.userID,e.direction=O.Send,e.sentStatus=A.Sending,e.localMessageID||(e.localMessageID=te()),e.timestamp=Date.now()+this.settings.serverOffsetTime,this.dbUser&&(this.dbConv.conversationName=this.dbUser.userName,this.dbConv.conversationAvatarUrl=this.dbUser.userAvatarUrl);var t=S.Added;this.dbConv.state==z.Delete?this.dbConv.state=z.Normal:this.dbConv.maxOrderKey&&(t=this.dbConv.state==z.Disable?S.Disabled:S.Updated),this.emitConversationChangedByMessage(e,t,"sendingMessage_"+this.dbConv.maxOrderKey)},Je.prototype.emitReceiveMessage=function(e,t){var r;e.length&&(r=this.convType===I.Peer?Y.ReceivePeerMessage:this.convType===I.Group?Y.ReceiveGroupMessage:Y.ReceiveRoomMessage,e={messageList:e,fromConversationID:this.convID},this.eventBus.emit(r,e,t))},Je.prototype.getMediaMessageDuration=function(e){var t=0;return e.type==R.Audio?t=e.audioDuration||0:e.type==R.Video&&(t=e.videoDuration||0),t},Je.prototype.createMediaMessageJSON=function(e,t,r,o){var n;e={version:"1",file_type:e,file_download_url:t};return(t=(!o&&r.fileUID&&(e.file_uid=r.fileUID),r.fileName&&(e.file_name=r.fileName),r.fileSize&&(e.file_size=r.fileSize+""),r.type))==R.Image&&o?(o=r.thumbnailDownloadUrl,n=r.largeImageDownloadUrl,o&&(e.thumbnail_download_url=o),n&&(e.large_image_download_url=n)):t==R.Audio?(o=r.audioDuration,e.media_duration=String(o||0)):t==R.Video&&(n=r.videoDuration,o=r.videoFirstFrameDownloadUrl,e.media_duration=String(n||0),o&&(e.video_first_frame_download_url=o)),JSON.stringify(e)},Je);function Je(e,t,r,o,n){this.logger=Ut.getInstance().logger,this.settings=Ut.getInstance().settings,this.protobuf=Ut.getInstance().protobuf,this.lastSendTime=0,this.convSid=Date.now(),this.clientMsgSeq=0,this.dbConv={},this.mergeMsgTimer=0,this.lastMergeMsgTime=0,this.mergeSeqList=[],this.mergeMsgList=[],this.msgCaches={},this.loginedMsgEmit={seq:-1,list:[]},this.auditErrorCodes=[v.NetworkModuleNetworkError,v.MessageModuleAuditRejected,v.MessageModuleAuditFailed],this.dbConv.conversationID=e,this.convID=e,this.engineConfig=t,this.eventBus=r,this.dbMgr=o,this.connMgr=n}Ye=function(e,t){return(Ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Ye(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(et,Xe=Qe),et.prototype.setAssociatedGroup=function(){},et.prototype.isFetchMessageWhenLogin=function(e){return!(e===Z.SDKLogin&&!this.settings.mailHBFetchConfig.fetch_c2c_msg_count)},et.prototype.getSendMessageReqBody=function(){return{peer_user_id:this.convID}},et.prototype.getFetchMessageReqBody=function(e,t,r){var o=this.settings.mailHBFetchConfig.fetch_c2c_msg_count||100;return o<0&&(o=100),o=t===Z.SDKLogin?o:100,{conv_id:this.convID,conv_type:this.convType,conv_msg_seq:f.a.fromString(""+e),count:o,mode:r,login_fetch:r&&-1==e?1:0}},et.prototype.getFetchMessageRspBody=function(e,t){var r=+(null==(r=t.conv_msg_seq)?void 0:r.toString());return{maxSeq:0,nextFlag:t.fetch_end||r&&r<=e?0:r,list:this.protobuf.decodeMsgBody(t.msg_info)}},et.prototype.getDelMessageReqBody=function(e){return{conv_id:this.convID,conv_type:this.convType,msg_ids:e.map((function(e){return f.a.fromString(e.messageID)}))}},et.prototype.getDelAllMessageReqBody=function(){return{conv_id:this.convID,conv_type:this.convType}};var Ye,Xe,$e=et;function et(e,t,r,o,n){return(e=Xe.call(this,e,t,r,o,n)||this).dbConv.type=I.Peer,e.convType=I.Peer,e.convTypeMap={sendLogAction:de.SendPeerMessage,textMsgCmd:J.im_c2c_msg,commandMsgCmd:J.im_c2c_command,fetchMsgList:J.im_c2c_msglist,delMsg:J.im_c2c_del_msg,delAllMsg:J.im_c2c_del_all_msg},e}tt=function(e,t){return(tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}tt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(nt,rt=Qe),nt.prototype.setAssociatedGroup=function(){},nt.prototype.isFetchMessageWhenLogin=function(e){return!(e===Z.SDKLogin&&!this.settings.mailHBFetchConfig.fetch_group_msg_count)},nt.prototype.getSendMessageReqBody=function(){return{group_id:this.convID}},nt.prototype.getFetchMessageReqBody=function(e,t,r){var o=this.settings.mailHBFetchConfig.fetch_group_msg_count||100;o=t===Z.SDKLogin?o:100;return{group_id:this.convID,conv_msg_seq:f.a.fromString(""+e),count:o,sort_type:r}},nt.prototype.getFetchMessageRspBody=function(e,t){var r=+(null==(r=t.max_conv_msg_seq)?void 0:r.toString()),o=+(null==(o=t.next_conv_msg_seq)?void 0:o.toString());return{maxSeq:r,nextFlag:t.fetch_end||r&&o&&(r<=e||r<=o)?0:o,list:this.protobuf.decodeMsgBody(t.msgs)}},nt.prototype.getDelMessageReqBody=function(e){return{group_id:this.convID,conv_msg_seq:e.map((function(e){return f.a.fromString(""+e.conversationSeq)}))}},nt.prototype.getDelAllMessageReqBody=function(){return{group_id:this.convID}};var tt,rt,ot=nt;function nt(e,t,r,o,n){return(e=rt.call(this,e,t,r,o,n)||this).dbConv.type=I.Group,e.convType=I.Group,e.convTypeMap={sendLogAction:de.SendGroupMessage,textMsgCmd:J.im_group_msg,commandMsgCmd:J.im_group_command,fetchMsgList:J.im_group_msglist,delMsg:J.im_group_del_msg,delAllMsg:J.im_group_del_all_msg},e}it=function(e,t){return(it=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}it(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(ut,st=Qe),ut.prototype.setAssociatedGroup=function(e,t,r){this.roomSessionId=e,this.roomUserSessionId=t,this.subRoomID=r},ut.prototype.isFetchMessageWhenLogin=function(e){return!(e===Z.SDKLogin&&!this.settings.mailHBFetchConfig.fetch_room_msg_count)},ut.prototype.getSendMessageReqBody=function(){return{room_id:this.convID,room_session_id:this.roomSessionId,room_user_session_id:this.roomUserSessionId,sub_room_id:this.subRoomID}},ut.prototype.getFetchMessageReqBody=function(e,t,r){if(!this.roomSessionId)return null;var o=this.settings.mailHBFetchConfig.fetch_room_msg_count||100;o=t===Z.SDKLogin?o:100;return{room_id:this.convID,room_session_id:this.roomSessionId,room_user_session_id:this.roomUserSessionId,sub_room_id:this.subRoomID,conv_msg_seq:f.a.fromString(""+e),count:o,sort_type:r}},ut.prototype.getFetchMessageRspBody=function(e,t){var r=+(null==(r=t.max_conv_msg_seq)?void 0:r.toString()),o=+(null==(o=t.next_conv_msg_seq)?void 0:o.toString());return{maxSeq:r,nextFlag:t.fetch_end||r&&o&&(r<=e||r<=o)?0:o,list:this.protobuf.decodeMsgBody(t.recv_msg_info)}},ut.prototype.getDelMessageReqBody=function(e){},ut.prototype.getDelAllMessageReqBody=function(){};var it,st,at=ut;function ut(e,t,r,o,n){return(e=st.call(this,e,t,r,o,n)||this).subRoomID="",e.dbConv.type=I.Room,e.convType=I.Room,e.convTypeMap={sendLogAction:de.SendRoomMessage,textMsgCmd:J.im_room_msg,commandMsgCmd:J.im_room_command,fetchMsgList:J.im_room_msglist,delMsg:J.im_group_del_msg,delAllMsg:J.im_group_del_all_msg},e}var ct=(lt.prototype.destroy=function(){this.onLogout(),this.connMgr=null,this.groupMgr=null,this.eventBus=null,this.logger=null,this.engineConfig=null},lt.prototype.queryUsersInfo=function(e,t){var r=this;if(!Array.isArray(e)||!e.length)return n=ye(v.CommonModuleParamInvalid),this.logger.warn([he.User],de.QueryUsersInfo,{error:n,userIDs:e}),Promise.reject(n);var o={time:Date.now()},n=e.filter((function(e){return!r.dbUserMap.has(e)}));if(!(0!=n.length||t&&t.isQueryFromServer))return i=e.map((function(e){return{baseInfo:{userID:(e=r.dbUserMap.get(e)).userID,userName:e.userName},userAvatarUrl:e.userAvatarUrl,extendedData:e.extendedData}})),o.time=Date.now()-o.time,this.logger.info([he.User],de.QueryUsersInfo,o),Promise.resolve({userList:i,errorUserList:[]});var i={quey_user_id:t&&t.isQueryFromServer?e:n};return this.connMgr.sendRequest(J.im_account_fetch_user_info,i,Q.API,!0).then((function(t){var n,i=t.code||0,s=(i&&(s=ye(v.CommonModuleIMServerError,t.message,t.code),o.error=s,i=s.code),t.result),a=(t=t.err_list,new Map),u=(t&&t.length&&t.forEach((function(e){a.set(e.user_id,{userID:e.user_id,reason:ee(e.sub_code)})})),new Map),c=(s&&s.length&&(n=[],s.forEach((function(e){var t=e.user_id,o=oe(e.user_name),i=oe(e.avatar);e=oe(e.extra),u.set(t,{baseInfo:{userID:t,userName:o},userAvatarUrl:i,extendedData:e}),o={userID:t,userName:o,userAvatarUrl:i,extendedData:e};(i=r.dbUserMap.get(t))&&Object.assign(i,o),n.push(i||o),r.dbUserMap.set(t,i||o),r.svrConvInfoMap.set(t,i||o)})),r.dbMgr.addUserList(n)),e.forEach((function(e){var t=r.dbUserMap.get(e);u.has(e)||(t?(u.set(e,{baseInfo:{userID:t.userID,userName:t.userName},userAvatarUrl:t.userAvatarUrl,extendedData:t.extendedData}),r.svrConvInfoMap.set(e,t)):a.has(e)||a.set(e,{userID:e,reason:i}))})),[]);return r.convMap.forEach((function(e){var t=r.svrConvInfoMap.get(e.convID);t&&e.convType==I.Peer&&c.push({user:t,dbConv:e.dbConv})})),r.emitConvInfo(c),o.time=Date.now()-o.time,o.count=u.size,r.logger.info([he.User],de.QueryUsersInfo,o),0==u.size?Promise.reject(o.error):{userList:Array.from(u.values()),errorUserList:Array.from(a.values())}}))},lt.prototype.queryList=function(e){var t,r=this;return!e||"number"!=typeof e.count||e.count<0?(t=ye(v.CommonModuleParamInvalid),this.logger.warn([he.Conversation],de.QueryConversationList,{error:t,config:e}),Promise.reject(t)):e.count<1?Promise.resolve({conversationList:[]}):new Promise((function(t){var o={time:Date.now(),logined:r.isLogined};r.isLogined?r.mergeServerConvList(Z.Biz,"apicall",(function(n){n.sort((function(e,t){return t.orderKey-e.orderKey})),r.handleQueryConvsCallback(n,{log:o,config:e,resolve:t})})):r.queryConvsCallbackList.push({log:o,config:e,resolve:t})}))},lt.prototype.delete=function(e,t,r){var o=this,n=this.getConversationKey(e,t),i=null==(s=this.convMap.get(n))?void 0:s.dbConv,s=!ne(e)||t===I.Room||t!==I.Peer&&t!==I.Group?v.CommonModuleParamInvalid:this.isDBConvInvalid(i)?v.ConversationModuleConversationDoesNotExist:0;if(s)return s=ye(s),this.logger.warn([he.Conversation],de.DeleteConversation,{error:s,convID:e,type:t,config:r}),Promise.reject(s);function a(r,s){var a=i.msgSeq||0;i.state=z.Delete,i.sendMsgCount=0,i.deletedMsgCount=0,i.unreadMessageCount=0,i.readMsgSeq=a,i.msgSeq=0,o.dbConvMap.set(n,i),o.convMap.delete(n),s&&o.updateConvSeq(s),s="deleteLocalConv";return o.dbMgr.addConversationList([i],s),o.onUnreadMessageCount(s),u.time=Date.now()-u.time,o.logger.info([he.Conversation],de.DeleteConversation,u),r||o.connMgr.sendRequest(J.im_usermail_update_read_seq,{conv_id:e,conv_type:t,read_seq:f.a.fromString(String(a))},Q.SDK),Promise.resolve({conversationID:e,conversationType:t})}var u={time:Date.now(),convID:e,type:t,config:r};return r&&r.isAlsoDeleteServerConversation?(s={conv_id:e,conv_type:t,read_seq:f.a.fromString(String(i.msgSeq||0))},this.connMgr.sendRequest(J.im_usermail_del_conv,s).then((function(e){var t;return e.code?(t=ye(v.ConversationModuleServerError,e.message,e.code),u.time=Date.now()-u.time,u.error=t,o.logger.warn([he.Conversation],de.DeleteConversation,u),Promise.reject(t)):a(!0,e.conv_list_seq)}))):a()},lt.prototype.setNotificationStatus=function(e,t,r){var o=null==(o=this.convMap.get(this.getConversationKey(t,r)))?void 0:o.dbConv;return(o=!ne(t)||r!==I.Group||e!==D.Notify&&e!==D.DoNotDisturb?v.CommonModuleParamInvalid:this.isDBConvInvalid(o)?v.ConversationModuleConversationDoesNotExist:0)?(o=ye(o),this.logger.warn([he.Conversation],de.SetConversationNotificationStatus,{error:o,convID:t,type:r,status:e}),Promise.reject(o)):this.createConversationInstance(t,r).then((function(t){return t.setNotificationStatus(e)}))},lt.prototype.clearUnreadMessageCount=function(e,t){var r=null==(r=this.convMap.get(this.getConversationKey(e,t)))?void 0:r.dbConv;return(r=!ne(e)||t===I.Room||t!==I.Peer&&t!==I.Group?v.CommonModuleParamInvalid:this.isDBConvInvalid(r)?v.ConversationModuleConversationDoesNotExist:0)?(r=ye(r),this.logger.warn([he.Conversation],de.ClearConversationUnreadMessageCount,{error:r,convID:e,type:t}),Promise.reject(r)):this.createConversationInstance(e,t).then((function(e){return e.clearUnreadMessageCount()}))},lt.prototype.sendMessage=function(e,t,r,o){var n;return ne(t)&&this.checkConvType(r)&&e&&o&&this.checkMesageType(e.type,r)&&this.checkMesagePriority(o.priority)&&this.checkMesageContent(r,e.type,e.message)?r!==I.Room||this.groupMgr.findRoom(t)?this.createConversationInstance(t,r).then((function(t){return t.isOnlineMsg(e.type)?t.sendCommand(e,o):t.sendMessage(e,o)})):(n=ye(v.MessageModuleSendMessageFailed,"Room does not exist or the user is not in the room."),this.logger.warn([he.Conversation],"sendMessage",{error:n,convID:t,type:r}),Promise.reject(n)):(n=ye(v.CommonModuleParamInvalid),this.logger.warn([he.Conversation],"sendMessage",{error:n,convID:t,type:r,message:e,config:o}),Promise.reject(n))},lt.prototype.sendMediaMessage=function(e,t,r,o,n){var i;return ne(t)&&this.checkConvType(r)&&e&&o&&this.checkMediaMesageType(e.type)&&this.checkMesagePriority(o.priority)&&(e.fileLocalPath||e.fileDownloadUrl)?r!==I.Room||this.groupMgr.findRoom(t)?this.createConversationInstance(t,r).then((function(t){return t.sendMediaMessage(e,o,n)})):(i=ye(v.MessageModuleSendMessageFailed,"Room does not exist or the user is not in the room."),this.logger.warn([he.Conversation],de.SendMediaMessage,{error:i,convID:t,type:r}),Promise.reject(i)):(i=ye(v.CommonModuleParamInvalid),this.logger.warn([he.Conversation],de.SendMediaMessage,{error:i,convID:t,type:r,message:e,config:o}),Promise.reject(i))},lt.prototype.deleteMessages=function(e,t,r,o){var n,i;return ne(t)&&r!==I.Room&&(r===I.Peer||r===I.Group)&&Array.isArray(e)&&e.length?(e=e.filter((function(e){return e.conversationID===t&&e.conversationType===r})),this.createConversationInstance(t,r).then((function(t){return t.deleteMessages(e,o)}))):(i={error:n=ye(v.CommonModuleParamInvalid),messageList:e,config:o},this.logger.warn([he.Conversation],de.DeleteMessages,i),Promise.reject(n))},lt.prototype.deleteAllMessage=function(e,t,r){var o;return!ne(e)||t===I.Room||t!==I.Peer&&t!==I.Group?(o=ye(v.CommonModuleParamInvalid),this.logger.warn([he.Conversation],de.DeleteAllMessage,{error:o,convID:e,type:t}),Promise.reject(o)):this.createConversationInstance(e,t).then((function(e){return e.deleteAllMessage(r)}))},lt.prototype.queryHistoryMessage=function(e,t,r){var o;return!ne(e)||!this.checkConvType(t)||!r||"number"!=typeof r.count||r.count<0?(o=ye(v.CommonModuleParamInvalid),this.logger.warn([he.Conversation],de.QueryHistoryMessage,{error:o,convID:e,type:t}),Promise.reject(o)):r.count<1?Promise.resolve({conversationID:e,conversationType:t,messageList:[]}):this.createConversationInstance(e,t).then((function(e){return e.queryHistoryMessage(r)}))},lt.prototype.onPushMessage=function(e,t,r){var o=this,n=e.recv_msg_info.msg_info.conv_id,i=I.Peer,s=void 0;t==J.im_push_group_msg?i=I.Group:t==J.im_push_room_msg?(n=n||e.room_id,i=I.Room):t==J.im_push_c2c_msg&&(n=e.recv_msg_info.msg_svr_info.sender_user_id||n,s=oe(e.recv_msg_info.msg_svr_info.sender_user_name)),n&&(0<r&&(this.msgPushEventMap.msg[i].count++,this.msgPushEventMap.msg[i].times.push(r)),this.createConversationInstance(n,i).then((function(t){i==I.Peer&&o.updateConvNameAndAvatar("onPushMessage",t.dbConv,s),o.syncConvInfoWhenPushMessage(t,e.recv_msg_info,s)}))),this.logger.info([he.Conversation],de.PushCMD,{time:r,cmd:t,convID:n,type:i,name:s})},lt.prototype.onPushCommand=function(e,t,r){var o="",n=I.Peer;t==J.im_push_group_command?(n=I.Group,o=e.recv_command_info.command_msg_info.conv_id):t==J.im_push_room_command?(n=I.Room,o=e.room_id):t==J.im_push_c2c_command&&(o=e.recv_command_info.command_svr_info.sender_user_id),o&&(0<r&&(this.msgPushEventMap.cmd[n].count++,this.msgPushEventMap.cmd[n].times.push(r)),this.emitReceiveMessage(o,n,e)),this.logger.info([he.Conversation],de.PushCMD,{time:r,cmd:t,convID:o,type:n})},lt.prototype.registerInnerEvent=function(){this.eventBus.add(Y.InnerLogined,this.onLogined.bind(this)),this.eventBus.add(Y.InnerLogout,this.onLogout.bind(this)),this.eventBus.add(Y.InnerSyncGroups,this.onSyncGroups.bind(this)),this.eventBus.add(Y.InnerJoinedGroup,this.onJoinedGroup.bind(this)),this.eventBus.add(Y.InnerLeftGroup,this.onLeftGroup.bind(this)),this.eventBus.add(Y.InnerSyncGroupInfo,this.onSyncGroupInfo.bind(this)),this.eventBus.add(Y.InnerUnreadMessageCount,this.onUnreadMessageCount.bind(this)),this.eventBus.add(Y.InnerConnectedRoom,this.onConnectedRoom.bind(this)),this.eventBus.add(Y.InnerConnected,this.onConnected.bind(this)),this.eventBus.add(Y.InnerDisConnected,this.onDisConnected.bind(this))},lt.prototype.onSyncGroups=function(e,t){var r=this;this.isLogined=!1,this.startHB(),this.msgPushTimer||(this.msgPushTimer=setInterval(this.reportMessagePushDelay.bind(this),6e4)),this.mergeServerConvList(Z.SDKLogin,"onLogined",(function(o,n){var i={_action_:!(r.isLogined=!0)},s=o.filter((function(t){var r,o,s,a=e.get(t.conversationID);return t.type==I.Group&&(a?(r=a.notificationStatus,o=a.groupName,s=a.groupAvatarUrl,a=a.tatalMemberCount,t.state=z.Normal,t.notificationStatus=r,"string"==typeof o&&(t.conversationName=o),"string"==typeof s&&(t.conversationAvatarUrl=s),t.conversationName&&t.conversationAvatarUrl||(i._action_=!0,i[t.conversationID]="status=".concat(r,",count=").concat(a))):(i._action_=!0,i[t.conversationID]="state:Disable",t.state=z.Disable,n.set(t.id,{event:S.Disabled,conversation:t})),!0)})),a="onSyncGroups",u=(s.length&&r.dbMgr.addConversationList(s,a),n.size&&(s=Array.from(n.values()).map((function(e){return{event:e.event,conversation:ce(r.convKeys,e.conversation)}})),r.eventBus.emit(Y.ConversationChanged,{infoList:s},a)),r.onUnreadMessageCount(a,o),i._action_&&(r.logger.info([he.Conversation],a,i),i._action_=a,r.dataReport.report("/sdk/log",i)),o.sort((function(e,t){return t.orderKey-e.orderKey})),r.queryConvsCallbackList.forEach((function(e){return r.handleQueryConvsCallback(o,e)})),r.queryConvsCallbackList.length=0,t?Z.SDKHb:Z.SDKLogin),c=t?"onConnected":"onLogined";o.slice(0,30).forEach((function(e){r.createConversationInstance(e.conversationID,e.type).then((function(r){Object.assign(r.dbConv,e),t&&e.type==I.Room||r.mergeServerMessageList(u,c)}))}))}))},lt.prototype.onLogined=function(e,t){var r=this;e.forEach((function(e){return r.dbUserMap.set(e.userID,e)})),t.forEach((function(e){return r.dbConvMap.set(e.id,e)}))},lt.prototype.onLogout=function(){this.convMap.forEach((function(e){return e.destroy()})),this.convMap.clear(),this.dbConvMap.clear(),this.dbUserMap.clear(),this.svrConvInfoMap.clear(),this.stopHB(),this.msgPushTimer&&clearInterval(this.msgPushTimer),this.msgPushTimer=0,this.isLogined=!1},lt.prototype.onJoinedGroup=function(e,t,r,o){var n=this;this.createConversationInstance(e,I.Group).then((function(i){var s="onJoinedGroup",a=(n.updateConvNameAndAvatar(s,i.dbConv,t,r),i.dbConv.state==z.Disable&&(i.dbConv.state=z.Normal),n.dbConvMap.get(n.getConversationKey(e,I.Group)));a&&a.state==z.Disable&&(a.state=z.Normal,n.dbMgr.addConversationList([a],s+o)),o!=P.Created&&i.mergeServerMessageList(Z.SDKHb,s,!0)}))},lt.prototype.onLeftGroup=function(e){var t=this;this.createConversationInstance(e,I.Group).then((function(r){var o;r.dbConv.maxOrderKey&&(o=r.dbConv.msgSeq||r.dbConv.readMsgSeq,r.dbConv.state!=z.Delete&&(r.dbConv.state=z.Disable,t.connMgr.sendRequest(J.im_usermail_update_read_seq,{conv_id:e,conv_type:I.Group,read_seq:f.a.fromString(""+o)},Q.SDK)),r.dbConv.sendMsgCount=0,r.dbConv.deletedMsgCount=0,r.dbConv.unreadMessageCount=0,r.dbConv.readMsgSeq=o,t.dbConvMap.set(r.dbConv.id,r.dbConv),t.dbMgr.addConversationList([r.dbConv],o="onLeftGroup"),r={infoList:[{event:S.Disabled,conversation:ce(t.convKeys,r.dbConv)}]},t.eventBus.emit(Y.ConversationChanged,r,o),t.onUnreadMessageCount(o))}))},lt.prototype.onSyncGroupInfo=function(e,t,r){var o=this;this.createConversationInstance(e,I.Group).then((function(n){o.updateConvNameAndAvatar("onSyncGroupInfo",n.dbConv,t,r),o.emitConvInfo([{user:{userID:e,userName:t,userAvatarUrl:r},dbConv:n.dbConv}])}))},lt.prototype.syncConvInfoWhenPushMessage=function(e,t,r){var o,n=this,i=e.dbConv,s=i.conversationID;i.type==I.Peer?this.svrConvInfoMap.get(s)||this.dbUserMap.has(s)||i.maxOrderKey&&i.state!=z.Delete?(o=this.dbUserMap.get(s),"string"==typeof r&&o&&o.userName!=r&&(o.userName=r,this.dbMgr.setUser(o)),e.onPushMessage(t)):this.connMgr.sendRequest(J.im_account_fetch_user_info,{_ev_:"onPushMessage",quey_user_id:[s]},Q.SDK,!0).then((function(r){var o,a;(r=r.result&&r.result[0])&&(a=n.getConversationKey(r.user_id,I.Peer),o=oe(r.user_name),r=oe(r.avatar),i.conversationName=o,i.conversationAvatarUrl=r,(a=n.dbConvMap.get(a))&&(a.conversationName=o,a.conversationAvatarUrl=r),(a=n.dbUserMap.get(s)||{userID:s,userName:o,userAvatarUrl:r}).userName=o,a.userAvatarUrl=r,n.dbUserMap.set(s,a),n.dbMgr.setUser(a),n.dbMgr.addConversationList([i],"onSyncConvInfo"),n.emitConvInfo([{user:a,dbConv:i}])),e.onPushMessage(t)})):e.onPushMessage(t)},lt.prototype.onUnreadMessageCount=function(e,t){var r=this,o=D.DoNotDisturb,n=0;t?t.forEach((function(e){e.notificationStatus!=o&&(n+=e.unreadMessageCount)})):this.convMap.forEach((function(e){e.dbConv.notificationStatus!=o&&r.filterValidConv(e.dbConv)&&(n+=e.dbConv.unreadMessageCount)})),t={totalUnreadMessageCount:n};this.eventBus.emit(Y.ConversationTotalUnreadMessageCountUpdated,t,e)},lt.prototype.onConnectedRoom=function(e){(e=this.convMap.get(this.getConversationKey(e,I.Room)))&&(this.getAssociatedGroupInfo(e,e.convID,e.convType),e.mergeServerMessageList(Z.SDKHb,"onConnected"))},lt.prototype.onConnected=function(e){e&&this.startHB()},lt.prototype.onDisConnected=function(){this.stopHB()},lt.prototype.getConversationKey=function(e,t){return"".concat(this.engineConfig.userID).concat(t).concat(e)},lt.prototype.getDBConversation=function(e,t,r){return t=this.dbConvMap.get(e)||{id:e,ownerID:this.engineConfig.userID,conversationID:t,type:r,conversationName:"",conversationAvatarUrl:"",state:z.Normal,minOrderKey:0,maxOrderKey:0,localMsgSeq:0,unreadMessageCount:0,msgSeq:0,readMsgSeq:0,sendMsgCount:0,deletedMsgCount:0,notificationStatus:D.Notify,orderKey:0,deletedMsgMaxSeq:0,deletedMsgSeqs:[]},this.dbConvMap.set(e,t),t},lt.prototype.initDBConversationFields=function(e,t){Object.assign(e,{conversationName:"",conversationAvatarUrl:"",minOrderKey:0,maxOrderKey:t,localMsgSeq:0,deletedMsgCount:0,notificationStatus:D.Notify,deletedMsgMaxSeq:0,deletedMsgSeqs:[]})},lt.prototype.createConversationInstance=function(e,t){var r,o=this,n=this.getConversationKey(e,t),i=this.convMap.get(n);return i?(i.setDBUser(this.dbUserMap.get(e)),this.getAssociatedGroupInfo(i,e,t),this.updateConvNameAndAvatar("createConversationInstance",i.dbConv),Promise.resolve(i)):(i=new(t===I.Peer?$e:t===I.Group?ot:at)(e,this.engineConfig,this.eventBus,this.dbMgr,this.connMgr),this.convMap.set(n,i),((r=this.dbConvMap.get(n))?Promise.resolve(r):this.dbMgr.getConversationList().then((function(r){return r.forEach((function(e){e.id!=n||o.dbConvMap.has(n)||o.dbConvMap.set(n,e)})),o.getDBConversation(n,e,t)}))).then((function(r){return t===I.Peer&&o.engineConfig.userID===e&&(r.state=z.Disable,r.conversationName=o.engineConfig.userName,r.conversationAvatarUrl=o.engineConfig.userAvatarUrl),o.getAssociatedGroupInfo(i,e,t),o.updateConvNameAndAvatar("initDBConv",r),i.setDBConv(r),i.setDBUser(o.dbUserMap.get(e)),o.dbMgr.addConversationList([r],"initDBConv"),i})))},lt.prototype.startHB=function(){var e=this,t=this.settings.mailHBFetchConfig.usermail_hb_interval;!t||t<0||(this.stopHB(),this.hbLog=!0,this.hbTimer=setInterval((function(){var r={conv_list_seq:e.localConvSeq};e.connMgr.sendRequestWithHeartbeat(J.im_usermail_hb,r,e.hbLog,t).then((function(t){if(e.hbLog=!1,e.settings)return t.code?(t.code==v.NetworkModuleNetworkError&&e.hbTimeoutCount++,t.timeoutCount=e.hbTimeoutCount,(e.hbTimeoutCount>=e.settings.hbTimeoutMaxCount||-1!=e.settings.needReloginCodeList.indexOf(t.code))&&e.stopHB(),void e.logger.warn([he.Conversation],"usermailHB",t)):void e.updateSettings(t)}))}),t),this.logger.info([he.Conversation],"usermailHB","start "+t))},lt.prototype.stopHB=function(){this.hbTimer&&clearInterval(this.hbTimer),this.hbTimeoutCount=0,this.hbTimer=0},lt.prototype.reportMessagePushDelay=function(){var e=!1,t={};this.msgPushEventMap.msg.forEach((function(r){var o,n,i,s=r.name,a=r.count;r=r.times;0<a&&(e=!0,n=r[o=0],i=0,r.forEach((function(e){o+=e,e<n&&(n=e),i<e&&(i=e)})),t[s+"_msg_count"]=a,t[s+"_msg_ave_time_consumed"]=Math.floor(o/a),t[s+"_msg_max_time_consumed"]=i,t[s+"_msg_min_time_consumed"]=n)})),this.msgPushEventMap.cmd.forEach((function(r){var o,n,i,s=r.name,a=r.count;r=r.times;0<a&&(e=!0,n=r[o=0],i=0,r.forEach((function(e){o+=e,e<n&&(n=e),i<e&&(i=e)})),t[s+"_cmd_count"]=a,t[s+"_cmd_ave_time_consumed"]=Math.floor(o/a),t[s+"_cmd_max_time_consumed"]=i,t[s+"_cmd_min_time_consumed"]=n)})),e&&this.dataReport.report("/sdk/msg/push_delay",t),this.msgPushEventMap.msg.forEach((function(e){e.count=0,e.times.length=0})),this.msgPushEventMap.cmd.forEach((function(e){e.count=0,e.times.length=0}))},lt.prototype.updateSettings=function(e){var t=e.c2c_msg_seq,r=e.conv_list_seq,o=e.group_list_seq;e=function(e,t){var r={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}(e,["c2c_msg_seq","conv_list_seq","group_list_seq"]);Object.assign(this.settings.mailHBFetchConfig,e),t&&(this.settings.mailHBFetchConfig.c2c_msg_seq=t),r&&(this.settings.mailHBFetchConfig.conv_list_seq=r),o&&(this.settings.mailHBFetchConfig.group_list_seq=o)},lt.prototype.emitConvInfo=function(e){var t=this,r=[],o=[];e.forEach((function(e){var n,i,s,a=e.user;(e=e.dbConv)&&e.state==z.Normal&&(i=!1,n=a.userName,a=a.userAvatarUrl,"string"==typeof n&&e.conversationName!=n&&(i=!0,(s=t.dbConvMap.get(e.id))&&(s.conversationName=n),e.conversationName=n,r.push(e)),"string"==typeof a&&e.conversationAvatarUrl!=a&&(i=!0,(s=t.dbConvMap.get(e.id))&&(s.conversationAvatarUrl=a),e.conversationAvatarUrl=a,r.push(e)),i&&e.maxOrderKey&&o.push({event:S.Updated,conversation:ce(t.convKeys,e)}))})),e="onSyncConvInfo";r.length&&this.dbMgr.addConversationList(r,e),o.length&&this.eventBus.emit(Y.ConversationChanged,{infoList:o},e)},lt.prototype.emitReceiveMessage=function(e,t,r){r=t===I.Room?this.transform2RoomCommand(e,t,r.msg_info):this.transform2Command(e,t,r.recv_command_info),t=t===I.Peer?Y.ReceivePeerMessage:t===I.Group?Y.ReceiveGroupMessage:Y.ReceiveRoomMessage,this.eventBus.emit(t,{messageList:[r],fromConversationID:e})},lt.prototype.handleQueryConvsCallback=function(e,t){var r,o=this,n=t.log,i=t.config,s=t.resolve,a=e.length,u=(t=i.count,i.nextConversation),c=0,l=(u&&u.conversationID&&(r=this.getConversationKey(u.conversationID,u.type),c=e.findIndex((function(e){return e.id==r}))+1),Math.floor(c+t)),p=(e=e.slice(c,l),{}),h=[];u=e.map((function(e){return p[e.conversationID]=e.orderKey,h.push(ce(o.convKeys,e)),o.createConversationInstance(e.conversationID,e.type)}));Promise.all(u).then((function(){Object.assign(n,{time:Date.now()-n.time,start:c,end:l,total:a,count:e.length,config:i,flag:p}),o.logger.info([he.Conversation],de.QueryConversationList,n),s({conversationList:h})}))},lt.prototype.mergeServerConvList=function(e,t,r){var o,n,i,s=this,a=f.a.fromString(String(this.settings.getDBUser().convSeq)||"0"),u=this.settings.mailHBFetchConfig.conv_list_seq,c=this.settings.mailHBFetchConfig.fetch_conv_list,l={time:Date.now(),dbSeq:a,hbSeq:u,how:e,action:t,fetch:c};!c||!a.lessThan(u)&&Number(a.toString())?r&&(l.logined=this.isLogined,(this.isLogined?Promise.resolve(Array.from(this.dbConvMap.values())):this.dbMgr.getConversationList().then((function(e){return e.forEach((function(e){s.dbConvMap.set(e.id,e)})),e}))).then((function(e){e=e.filter((function(e){return s.filterValidConv(e)})),l.time=Date.now()-l.time,l.count=e.length,s.logger.info([he.Conversation],"mergeServerConvList",l),r(e,new Map)}))):(o=1,n=new Map,i=function(t){t.list.forEach((function(e){e.type!=I.Room&&n.set(e.id,e)})),t.nextFlag&&s.engineConfig.token?s.fetchServerPageConv(t.nextFlag,++o,e,1).then(i):(s.updateConvSeq(t.max||s.settings.mailHBFetchConfig.conv_list_seq),l.logined=s.isLogined,s.isLogined?s.saveConversationList(n,r,l):s.dbMgr.getConversationList().then((function(e){e.forEach((function(e){s.dbConvMap.set(e.id,e)})),s.saveConversationList(n,r,l)})))},this.fetchServerPageConv(a,o,e,0).then(i))},lt.prototype.fetchServerPageConv=function(e,t,r,o){var n=this,i=r==Z.Biz?Q.API:Q.SDK;return this.connMgr.sendRequest(J.im_usermail_convlist,{conv_list_seq:e,count:100,full_pull:o,degree:t,how:r},i,!0).then((function(e){if(e.code)return{max:0,list:[]};var t=e.conv_list_seq,r=e.max_list_seq,o=(t=e.fetch_end||t&&r&&t.greaterThanOrEqual(r)?0:t,{_action_:!1});e=e.conv_list.map((function(e){var t=n.transform2DBConv(e),r=e.is_del,i=e.last_msg_del,s=e.last_msg;return!r&&!i&&t.orderKey||(o[e.conv_id]={orderKey:t.orderKey,is_del:r,last_msg_del:i,last_msg:s},o._action_=!0),t}));return o._action_&&n.logger.info([he.Conversation],"fetchServerPageConv",o),{nextFlag:t,max:r,list:e}}))},lt.prototype.updateConvSeq=function(e){this.localConvSeq=e;var t=this.settings.getDBUser();t.convSeq!=e.toString()&&(t.convSeq=e.toString(),this.dbMgr.setUser(t))},lt.prototype.updateConvNameAndAvatar=function(e,t,r,o){var n=((n=t.type==I.Peer?this.svrConvInfoMap.get(t.conversationID)||this.dbUserMap.get(t.conversationID):void 0)&&void 0===r&&(r=n.userName),n&&void 0===o&&(o=n.userAvatarUrl),"string"==typeof r&&r!=t.conversationName&&(t.conversationName=r),"string"==typeof o&&o!=t.conversationAvatarUrl&&(t.conversationAvatarUrl=o),!1);(t=this.dbConvMap.get(this.getConversationKey(t.conversationID,t.type)))&&"string"==typeof r&&r!=t.conversationName&&(n=!0,t.conversationName=r),t&&"string"==typeof o&&o!=t.conversationAvatarUrl&&(n=!0,t.conversationAvatarUrl=o),n&&t&&this.dbMgr.addConversationList([t],e)},lt.prototype.getAssociatedGroupInfo=function(e,t,r){r===I.Group?this.groupMgr.findGroup(t,!0):r===I.Room&&((r=this.groupMgr.findRoom(t))?e.setAssociatedGroup(r.sessionId,r.userSessionId,r.subRoomID):e.setAssociatedGroup())},lt.prototype.saveConversationList=function(e,t,r){var o=this,n=[],i=[],s=new Map;if(e.forEach((function(e,t){var r,a,u,c=e.state==z.Delete,l=e.msgSeq||e.readMsgSeq,p=o.dbConvMap.get(t),h=!p||!p.maxOrderKey;p?(r=e.orderKey,a=p.orderKey,u=p.msgSeq||p.readMsgSeq||0,h&&o.initDBConversationFields(p,100*l),u<l&&(p.msgSeq=e.msgSeq,p.readMsgSeq=e.readMsgSeq,p.sendMsgCount=e.sendMsgCount,p.unreadMessageCount=e.unreadMessageCount,p.orderKey=e.orderKey,p.lastMessage=e.lastMessage,i.push(p),u=c||h?S.Added:S.Updated,s.set(t,{event:u,conversation:p})),r<a&&(p.orderKey=a)):(o.initDBConversationFields(e,100*l),o.dbConvMap.set(t,e),i.push(e)),c||(e.type!=I.Peer||e.state==z.Delete||o.dbUserMap.has(e.conversationID)||n.push(e.conversationID),0<l&&h&&s.set(t,{event:S.Added,conversation:o.dbConvMap.get(t)}))})),n.length){for(var a="mergeServerConvList_syncpeer",u=[],c=0;c<n.length;c+=10){var l=this.connMgr.sendRequest(J.im_account_fetch_user_info,{_ev_:a,quey_user_id:n.slice(c,c+10)},Q.SDK,!0);u.push(l)}Promise.all(u).then((function(e){var n=[];e.forEach((function(e){(e=e.result)&&e.length&&e.forEach((function(e){var t=o.getConversationKey(e.user_id,I.Peer),r=oe(e.user_name),i=oe(e.avatar);(t=((t=o.dbConvMap.get(t))&&(t.conversationName=r,t.conversationAvatarUrl=i),o.dbUserMap.get(e.user_id)||{userID:e.user_id,userName:r,userAvatarUrl:i})).userName=r,t.userAvatarUrl=i,n.push(t)}))})),o.dbMgr.addUserList(n),o.dbMgr.addConversationList(i,a),e=Array.from(o.dbConvMap.values()).filter(o.filterValidConv);r.time=Date.now()-r.time,r.count=e.length,o.logger.info([he.Conversation],a,r),t(e,s)}))}else{e="mergeServerConvList_sync";var p=(this.dbMgr.addConversationList(i,e),Array.from(this.dbConvMap.values()).filter(this.filterValidConv));r.time=Date.now()-r.time,r.count=p.length,this.logger.info([he.Conversation],e,r),t(p,s)}},lt.prototype.isDBConvInvalid=function(e){return!e||e.state==z.Delete||!e.maxOrderKey},lt.prototype.filterValidConv=function(e){return e.state!=z.Delete&&!!e.maxOrderKey&&e.type!=I.Room&&"number"==typeof e.type},lt.prototype.transform2DBConv=function(e){var t=e.conv_type||I.Peer,r=e.last_msg_del?void 0:this.transform2Message(e.last_msg,e.conv_id,t),o=+(null==(o=e.conv_msg_seq)?void 0:o.toString())||0,n=+(null==(n=e.read_seq)?void 0:n.toString())||0,i=+(null==(i=e.send_count_after_read)?void 0:i.toString())||0,s=(null==r?void 0:r.timestamp)||+(null==(s=e.update_time)?void 0:s.toString())||0,a=this.getConversationKey(e.conv_id,t),u=this.dbConvMap.get(a);a={id:a,ownerID:this.engineConfig.userID,conversationID:e.conv_id,type:t,msgSeq:o,readMsgSeq:n,sendMsgCount:i,unreadMessageCount:Math.max(o-n-i,0),orderKey:s,lastMessage:r};return e.is_del?(a.state=z.Delete,u&&Object.assign(u,a)):a.state=(null==u?void 0:u.state)||z.Normal,a},lt.prototype.transform2Message=function(e,t,r){var o,n;if(e&&e.msg_info&&e.msg_info.msg_type&&e.msg_svr_info)return o=e.msg_info,n=(e=e.msg_svr_info).sender_user_id,le(e={type:o.msg_type,message:oe(o.msg),messageID:null==(o=e.msg_id)?void 0:o.toString(),timestamp:+(null==(o=e.msg_time)?void 0:o.toString())||0,conversationSeq:null==(o=e.conv_msg_seq)?void 0:o.toString(),conversationID:t,conversationType:r,senderUserID:n,sentStatus:A.Success,direction:n===this.engineConfig.userID?O.Send:O.Receive}),e},lt.prototype.transform2Command=function(e,t,r){var o=r.command_msg_info,n=(r=r.command_svr_info).sender_user_id;return{localMessageID:te(),messageID:r.msg_id.toString(),timestamp:+r.msg_time.toString(),type:o.msg_type,message:o.msg,conversationID:e,conversationType:t,senderUserID:n,sentStatus:A.Success,direction:n===this.engineConfig.userID?O.Send:O.Receive}},lt.prototype.transform2RoomCommand=function(e,t,r){var o=r.sender_user_id;return{localMessageID:te(),messageID:r.msg_id.toString(),timestamp:+r.msg_time.toString(),type:r.msg_type,message:r.msg_type==R.Barrage?oe(r.msg):r.msg,conversationID:e,conversationType:t,senderUserID:o,sentStatus:A.Success,direction:o===this.engineConfig.userID?O.Send:O.Receive}},lt.prototype.checkConvType=function(e){return e===I.Peer||e===I.Room||e===I.Group},lt.prototype.checkMesageContent=function(e,t,r){return!((t===R.Text||t===R.Barrage&&e===I.Room)&&"string"!=typeof r||!(t!==R.Command||r instanceof Uint8Array)||"string"==typeof r&&(!r||!r.trim()||re(r).length>49152)||r instanceof Uint8Array&&(!r.length||r.length>49152||!oe(r).trim()))},lt.prototype.checkMesagePriority=function(e){return e===C.Low||e===C.Medium||e===C.High},lt.prototype.checkMesageType=function(e,t){return e===R.Text||e===R.Command||t===I.Room&&e===R.Barrage},lt.prototype.checkMediaMesageType=function(e){return e===R.Image||e===R.File||e===R.Audio||e===R.Video},lt);function lt(e,t,r,o,n){this.logger=Ut.getInstance().logger,this.settings=Ut.getInstance().settings,this.dataReport=Ut.getInstance().dataReport,this.localConvSeq=f.a.fromString("0"),this.hbTimer=0,this.hbTimeoutCount=0,this.hbLog=!1,this.msgPushTimer=0,this.msgPushEventMap={msg:[{name:"peer",count:0,times:[]},{name:"room",count:0,times:[]},{name:"group",count:0,times:[]}],cmd:[{name:"peer",count:0,times:[]},{name:"room",count:0,times:[]},{name:"group",count:0,times:[]}]},this.isLogined=!1,this.queryConvsCallbackList=[],this.convKeys=["conversationID","conversationName","conversationAvatarUrl","type","unreadMessageCount","notificationStatus","orderKey","lastMessage"],this.engineConfig=this.settings.getEngineConfig(e),this.convMap=new Map,this.dbConvMap=new Map,this.dbUserMap=new Map,this.svrConvInfoMap=new Map,this.eventBus=t,this.dbMgr=r,this.connMgr=o,this.groupMgr=n,this.registerInnerEvent()}var pt=function(){return(pt=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},ht=(dt.prototype.destroy=function(e){this.stopHB(),this.reset(),e&&this.state!==G.Disconnected&&this.emitRoomStateChanged(G.Disconnected,N.Success),this.dbMgr=null,this.connMgr=null,this.eventBus=null,this.settings=null,this.engineConfig=null},dt.prototype.create=function(e,t,r){var o=this,n={time:Date.now(),groupID:this.groupID,groupName:e,state:this.state,config:t},i=(this.state==G.Disconnected&&this.emitRoomStateChanged(G.Connecting,N.ActiveCreate),{room_id:this.groupID,room_name:re(e)});return r&&(i.create_if_not_exist=!0),this.addRoomAttributes(i,t),this.connMgr.sendRequest(r?J.im_room_enter:J.im_room_create,i).then((function(i){var s,a,u,c=i.code;return c?(s=ye(v.RoomModuleCreateRoomError,i.message,c),a=o.state==G.Connected&&103032==c?G.Connected:G.Disconnected,u=c===v.NetworkModuleNetworkError?N.NetworkDisconnected:N.CreateFailed,o.emitRoomStateChanged(a,a==G.Connected?N.ActiveCreate:u),n.state_=o.state,n.time=Date.now()-n.time,n.error=s,o.logger.warn([he.Room],r?de.EnterRoom:de.CreateRoom,n),51011==c&&(o.stopHB(),o.reset()),Promise.reject(s)):(o.groupName=e,o.sessionId=i.room_session_id,o.userSessionId=i.room_user_session_id,o.subRoomID=i.sub_room_id,o.emitRoomStateChanged(G.Connected,N.Success),r||(o.localSeq=1),o.tatalMemberCount=i.user_count||1,o.startHB(i.room_info_interval),o.mergeConfig.listPullInterval=i.userlist_interval,o.mergeConfig.listMergeTimeout=i.userlist_merge_timeout,o.mergeConfig.attrPullInterval=i.attributes_pull_interval,o.mergeConfig.attrMergeTimeout=i.attributes_merge_timeout,o.isMergeUser=1==i.userlist_enable,o.destroyDelay=i.destroy_delay||0,o.isMergeUser&&(r&&i.userlist_seq!=o.localSeq?o.fetchAllUser():(a={userID:o.engineConfig.userID,userName:o.engineConfig.userName},o.userMap.set(a.userID,a),u={roomID:o.groupID,memberList:[pt({},a)]},o.eventBus.emit(Y.RoomMemberJoined,u))),o.emitRoomAttributesUpdated(i.attributes,!0,t),n.state_=o.state,n.time=Date.now()-n.time,o.logger.info([he.Room],r?de.EnterRoom:de.CreateRoom,n),{roomInfo:{baseInfo:{roomID:o.groupID,roomName:e}}})}))},dt.prototype.enter=function(){var e=this;if(this.state===G.Connected)return r={groupID:this.groupID,groupName:this.groupName,state:this.state},this.logger.info([he.Room],de.JoinRoom,r),Promise.resolve({roomInfo:{baseInfo:{roomID:this.groupID,roomName:this.groupName}}});this.state!==G.Connecting&&this.emitRoomStateChanged(G.Connecting,N.ActiveEnter);var t={time:Date.now(),groupID:this.groupID,state:this.state},r={room_id:this.groupID,room_user_session_id:this.userSessionId||0};return this.connMgr.sendRequest(J.im_room_enter,r).then((function(r){var o;return r.code?(o=ye(v.RoomModuleJoinRoomError,r.message,r.code),e.emitRoomStateChanged(G.Disconnected,r.code===v.NetworkModuleNetworkError?N.NetworkDisconnected:N.EnterFailed),t.state_=e.state,t.time=Date.now()-t.time,t.error=o,e.logger.warn([he.Room],de.JoinRoom,t),51011==r.code&&(e.stopHB(),e.reset()),Promise.reject(o)):(e.groupName=oe(r.room_name),e.sessionId=r.room_session_id,e.userSessionId=r.room_user_session_id,e.subRoomID=r.sub_room_id,e.emitRoomStateChanged(G.Connected,N.Success),e.tatalMemberCount=r.user_count,e.startHB(r.room_info_interval),e.mergeConfig.listPullInterval=r.userlist_interval,e.mergeConfig.listMergeTimeout=r.userlist_merge_timeout,e.mergeConfig.attrPullInterval=r.attributes_pull_interval,e.mergeConfig.attrMergeTimeout=r.attributes_merge_timeout,e.isMergeUser=1==r.userlist_enable,e.destroyDelay=r.destroy_delay||0,e.isMergeUser&&r.userlist_seq!=e.localSeq&&e.fetchAllUser(),e.emitRoomAttributesUpdated(r.attributes),t.state_=e.state,t.time=Date.now()-t.time,t.groupName=e.groupName,e.logger.info([he.Room],de.JoinRoom,t),{roomInfo:{baseInfo:{roomID:e.groupID,roomName:e.groupName}}})}))},dt.prototype.quit=function(){var e=this,t={time:Date.now(),groupID:this.groupID,state:this.state};if(this.state===G.Disconnected)return this.logger.info([he.Room],de.LeaveRoom,t),this.destroy(!1),Promise.resolve();var r={room_id:this.groupID,room_session_id:this.sessionId,room_user_session_id:this.userSessionId,sub_room_id:this.subRoomID};return this.connMgr.sendRequest(J.im_room_quit,r).then((function(r){if(r.code)return r=ye(v.RoomModuleLeaveRoomError,r.message,r.code),t.state_=e.state,t.time=Date.now()-t.time,t.error=r,e.logger.warn([he.Room],de.LeaveRoom,t),Promise.reject(r);e.emitRoomStateChanged(G.Disconnected,N.Success),t.state_=e.state,t.time=Date.now()-t.time,e.logger.info([he.Room],de.LeaveRoom,t),e.destroy(!1)}))},dt.prototype.queryPageMember=function(e){var t=this,r=pt({time:Date.now(),groupID:this.groupID},e);return this.fetchServerPageUser(0|e.count,e.nextFlag,Q.API).then((function(e){r.time=Date.now()-r.time,t.logger.info([he.Room],de.QueryRoomMemberList,r);var o=t.createUserList(e.users);return{roomID:t.groupID,memberList:o,nextFlag:e.pos_flag}}))},dt.prototype.queryMemberCount=function(){var e={roomID:this.groupID,count:this.tatalMemberCount};return this.logger.info([he.Room],de.QueryRoomOnlineMemberCount,e),Promise.resolve(e)},dt.prototype.queryRoomAllAttributes=function(e){var t=this,r=(void 0===e&&(e=!1),{time:Date.now(),groupID:this.groupID}),o=(this.queryAttrFlag=!0,(new Date).getTime()),n=0,i=(this.queryAttrTask.length&&(i=this.queryAttrTask[this.queryAttrTask.length-1],o-i<this.mergeConfig.attrPullInterval&&(n=this.mergeConfig.attrPullInterval-(o-i)+10)),this.queryAttrTask.push(o),{room_id:this.groupID,room_session_id:this.sessionId,attributes:{attribute_seq:this.stRoomAttributes.attribute_seq||0,attributes:[]},sub_room_id:this.subRoomID||""}),s=this.connMgr.sendRequest(J.im_room_attributes,i).then((function(n){var i;return n.code?(i=ye(v.RoomModuleRoomAttributesQueryFailed,n.message,n.code),r.time=Date.now()-r.time,r.error=i,t.logger.warn([he.Room],de.QueryRoomAllAttributes,r),Promise.reject(i)):(t.queryAttrTask=t.queryAttrTask.filter((function(e){return e!==o})),t.queryRoomAllAttributesRspHandle(n,e))}));return n?new Promise((function(e){setTimeout((function(){s.then(e)}),n)})):s},dt.prototype.setRoomAttributes=function(e,t){var r=this;if(this.batchFlag)return new Promise((function(t,o){return r.batchRoomAttributesHandle(e,[],t,o)}));var o,n,i=[];for(o in e)o&&(n={action:0,attribute:{key:o,value:e[o].toString(),seq:this.attrItemSeq++,auto_delete:t.isDeleteAfterOwnerLeft?1:0}},this.localAttrKeySeqMap[o]=n.attribute.seq,i.push(n));var s={room_id:this.groupID,room_session_id:this.sessionId,force_modify:t.isForce?1:0,set_member:t.isUpdateOwner?1:0,attributes_seq:this.stRoomAttributes.attribute_seq||0,op_fail_fast:0,attributes:i,sub_room_id:this.subRoomID};return this.modifyRoomAttributes(e,s)},dt.prototype.deleteRoomAttributes=function(e,t){var r=this;if(this.batchFlag)return new Promise((function(t,o){return r.batchRoomAttributesHandle({},e,t,o)}));var o=[];e.forEach((function(e){var t=r.stRoomAttributes.attributes.find((function(t){return t.key==e}));t={action:1,attribute:{key:e,value:(null==t?void 0:t.value)||"",seq:r.attrItemSeq++,auto_delete:1}};r.localAttrKeySeqMap[e]=t.attribute.seq,o.push(t)})),t={room_id:this.groupID,room_session_id:this.sessionId,force_modify:t.isForce?1:0,set_member:1,attributes_seq:this.stRoomAttributes.attribute_seq||0,op_fail_fast:0,attributes:o,sub_room_id:this.subRoomID};return this.modifyRoomAttributes({},t)},dt.prototype.beginRoomAttributesBatchOperation=function(e){this.batchFlag=!0,this.batchOperationConfig=e,this.batchRoomAttributes.length=0},dt.prototype.endRoomAttributesBatchOperation=function(){var e,t=this,r={time:Date.now(),groupID:this.groupID,attributes:this.batchRoomAttributes},o=(this.batchFlag=!1,[]),n={};return this.batchRoomAttributes.length?(this.batchRoomAttributes.forEach((function(e){var r={action:e.action,attribute:{key:e.key,value:e.value.toString(),seq:t.attrItemSeq++,auto_delete:t.batchOperationConfig.isDeleteAfterOwnerLeft?1:0}};e.action||(n[e.key]=e.value),t.localAttrKeySeqMap[r.attribute.key]=r.attribute.seq,o.push(r)})),r={room_id:this.groupID,room_session_id:this.sessionId,force_modify:this.batchOperationConfig.isForce?1:0,set_member:this.batchOperationConfig.isUpdateOwner?1:0,attributes_seq:this.stRoomAttributes.attribute_seq||0,op_fail_fast:1,attributes:o,sub_room_id:this.subRoomID},this.modifyRoomAttributes(n,r,!0).then((function(){return t.batchOperationConfig=null,t.batchRoomAttributes.length=0,t.batchAttributesMap.clear(),t.batchIndex=0,{roomID:t.groupID}}))):(e=ye(v.RoomModuleRoomAttributesOperationFailedCompletely),r.error=e,this.logger.warn([he.Room],de.EndRoomAttributesBatchOperation,r),Promise.reject(e))},dt.prototype.onConnected=function(){var e=this;this.enter().then((function(){return e.eventBus.exec(Y.InnerConnectedRoom,e.groupID)}))},dt.prototype.onDisConnected=function(){this.stopHB(),this.emitRoomStateChanged(G.Disconnected,N.NetworkDisconnected)},dt.prototype.onPushKickout=function(e){this.emitRoomStateChanged(G.Disconnected,N.KickedOut,JSON.stringify(e)),this.destroy(!1)},dt.prototype.onPushEnter=function(e){this.tatalMemberCount=e.user_count;var t={userID:e.user_id,userName:oe(e.user_name)};this.isMergeUser?this.waitingMergeUser(e.userlist_seq,t,"enter"):(e={roomID:e.room_id,memberList:[t]},this.eventBus.emit(Y.RoomMemberJoined,e))},dt.prototype.onPushQuit=function(e){this.tatalMemberCount=e.user_count;var t={userID:e.user_id,userName:oe(e.user_name)};this.isMergeUser?this.waitingMergeUser(e.userlist_seq,t,"quit"):(e={roomID:e.room_id,memberList:[t]},this.eventBus.emit(Y.RoomMemberLeft,e))},dt.prototype.onPushRoomAttributesModify=function(e){var t,r,o,n=this,i=(this.logger.info([he.Room],"onPushRoomAttributesModify",this.stRoomAttributes),e.attributes),s=e.attributes_seq;this.queryAttrFlag?this.batchPushQueue.push(e):(t=(null==(e=this.stRoomAttributes)?void 0:e.attribute_seq)||0,s&&(r={delete:{},set:{}},1<s-t?this.queryRoomAllAttributes(!0):(i.forEach((function(e){var o;t++,e.seq?((o=n.stRoomAttributes.attributes.find((function(t){return t.key==e.key})))?(o.value=e.value,o.seq=e.seq):n.stRoomAttributes.attributes.push(e),r.set[e.key]=e.value):n.stRoomAttributes.attributes.length&&(n.stRoomAttributes.attributes=n.stRoomAttributes.attributes.filter((function(t){return t.key!==e.key||(r.delete[e.key]=e.value,!1)})))})),this.stRoomAttributes.attribute_seq=s,e=[],Object.keys(r.set).length&&(o={action:j.Set,roomAttributes:r.set},e.push(o)),Object.keys(r.delete).length&&(o={action:j.Delete,roomAttributes:r.delete},e.push(o)),i.length&&(s={roomID:this.groupID,infos:e},o=1<e.length?Y.RoomAttributesBatchUpdated:Y.RoomAttributesUpdated,this.eventBus.emit(o,s)))))},dt.prototype.modifyRoomAttributes=function(e,t,r){var o=this;return void 0===r&&(r=!1),this.connMgr.sendRequest(J.im_room_attributes_modify,t).then((function(n){function i(e){r&&(o.batchAttributesMap.forEach((function(t){t.reject&&t.reject(e)})),o.batchOperationConfig=null,o.batchRoomAttributes.length=0,o.batchAttributesMap.clear(),o.batchIndex=0);var t={error:e,local:o.stRoomAttributes};return o.logger.warn([he.Room],"modifyRoomAttributes",t),Promise.reject(e)}if(n.code)return i(ye(v.RoomModuleRoomAttributesOperationFailedCompletely,n.message,n.code));if(n.err_list.length&&n.err_list.length==t.attributes.length)return i(ye(v.RoomModuleRoomAttributesOperationFailedCompletely));var s,a,u=n.attributes.attributes,c=(r&&(s=[],u.forEach((function(e){var t=s.findIndex((function(t){return t.key==e.key}));e.seq?(-1!=t&&s.splice(t,1),s.push(e)):-1!==t&&s.splice(t,1)})),u=s),o.stRoomAttributes.attribute_seq=n.attributes.attribute_seq,{delete:{},set:{}}),l=(u.forEach((function(t){t=pt({},t);var r=o.stRoomAttributes.attributes.find((function(e){return e.key==t.key})),n=o.stRoomAttributes.attributes.findIndex((function(e){return e.key==t.key}));r?t.seq?(r.value=e[r.key].toString(),r.seq=t.seq,void 0!==c.delete[r.key]&&delete c.delete[r.key],c.set[r.key]=r.value):(o.stRoomAttributes.attributes.splice(n,1),c.delete[r.key]=""):t.seq&&(t.value=e[t.key].toString(),o.stRoomAttributes.attributes.push(t),void 0!==c.delete[t.key]&&delete c.delete[t.key],c.set[t.key]=t.value)})),o.logger.info([he.Room],"operaRoomAttributes",{local:o.stRoomAttributes}),[]),p=(Object.keys(c.set).length&&(a={action:j.Set,roomAttributes:c.set},l.push(a)),Object.keys(c.delete).length&&(a={action:j.Delete,roomAttributes:c.delete},l.push(a)),n.err_list.map((function(e){return e.key})));return r&&o.batchAttributesMap.forEach((function(e){var t,r,n,i,s,a;p.length?(t=p[0],n=!1,r={},!Array.isArray(e.data)&&t in e.data&&!u.some((function(r){return r.value==e.data[t]}))||Array.isArray(e.data)&&-1!=e.data.indexOf(t)?(n=!0,i=[],e.action==j.Delete&&-1!==(s=e.data.findIndex((function(e){return e==t})))&&(i=e.data.slice(s)),e.action==j.Set&&(i=Object.keys(e.data)),e.resolve&&e.resolve({roomID:o.groupID,errorKeys:i}),r={attributeList:u,data:e.data}):n?(e.action==j.Delete&&(a=e.data.slice()),e.action==j.Set&&(a=Object.keys(e.data)),e.resolve&&e.resolve({roomID:o.groupID,errorKeys:a})):(r.error=!1,e.resolve&&e.resolve({roomID:o.groupID,errorKeys:p})),o.logger.info([he.Room],"operaRoomAttributes",r)):e.resolve&&e.resolve({roomID:o.groupID,errorKeys:[]})})),u.length&&(a=r?Y.RoomAttributesBatchUpdated:Y.RoomAttributesUpdated,n={roomID:o.groupID,infos:l},o.eventBus.emit(a,n)),{roomID:o.groupID,errorKeys:p}}))},dt.prototype.queryRoomAllAttributesRspHandle=function(e,t){var r={isSeqUpdate:t=void 0!==t&&t,local:this.stRoomAttributes,batchPushQueue:this.batchPushQueue};if(this.logger.info([he.Room],de.QueryRoomAllAttributes,r),this.queryAttrFlag=!1,this.batchPushQueue.length)try{this.mergeStAttributeHandle(e.attributes)}catch(e){r={error:!0,message:e.message,stack:e.stack,action:"catch mergeStAttributeHandle"},this.logger.info([he.Room],de.QueryRoomAllAttributes,r)}else{var o,n,i={delete:{},set:{}};r=(this.stRoomAttributes.attribute_seq=e.attributes.attribute_seq,e.attributes.attributes.length?((o=this.stRoomAttributes.attributes).map((function(e){e.seq=0})),e.attributes.attributes.forEach((function(e){var t=o.findIndex((function(t){return t.key==e.key}));-1!==t?e.seq&&(o[t].seq=e.seq,o[t].value!==e.value&&(i.set[e.key]=e.value||"",o[t].value=e.value)):e.key&&(i.set[e.key]=e.value||"",o.push(pt(pt({},e),{value:e.value||""})))})),this.stRoomAttributes.attributes=o.filter((function(e){return 0==e.seq&&(i.delete[e.key]=""),0!==e.seq}))):(this.stRoomAttributes.attributes.forEach((function(e){i.delete[e.key]=""})),this.stRoomAttributes.attributes=[]),[]),e=(Object.keys(i.set).length&&(n={action:j.Set,roomAttributes:i.set},r.push(n)),Object.keys(i.delete).length&&(n={action:j.Delete,roomAttributes:i.delete},r.push(n)),{isSeqUpdate:t,local:this.stRoomAttributes,infoList:r});this.logger.info([he.Room],de.QueryRoomAllAttributes,e),t&&r.length&&(this.logger.info([he.Room],"roomAttributesUpdated",i),n=1<r.length?Y.RoomAttributesBatchUpdated:Y.RoomAttributesUpdated,e={roomID:this.groupID,infos:r},this.eventBus.emit(n,e))}return{roomID:this.groupID,roomAttributes:this.getRecordFromStRoomAttributes()}},dt.prototype.addRoomAttributes=function(e,t){if(t&&"[object Object]"==Object.prototype.toString.call(t.roomAttributes)){var r,o,n=[];for(r in t.roomAttributes)r&&(o={key:r,value:t.roomAttributes[r].toString(),seq:this.attrItemSeq++,auto_delete:1},n.push(o),this.localAttrKeySeqMap[r]=o.seq);n.length&&(e.attributes=n)}t&&t.roomDestroyDelayTime&&(e.destroy_delay=+t.roomDestroyDelayTime)},dt.prototype.batchRoomAttributesHandle=function(e,t,r,o){var n,i=this,s={batchRoomAttributes:this.batchRoomAttributes,roomAttributes:e,delKeys:t=void 0===t?[]:t};for(n in this.logger.info([he.Room],"modifyRoomAttributes",s),this.batchRoomAttributes||(this.batchRoomAttributes=[]),t.length?this.batchAttributesMap.set(this.batchIndex,{action:j.Delete,data:t,resolve:r,reject:o}):this.batchAttributesMap.set(this.batchIndex,{action:j.Set,data:e,resolve:r,reject:o}),e){var a={action:j.Set,key:n,value:e[n]};this.batchRoomAttributes.push(a)}t.forEach((function(e){e={action:j.Delete,key:e,value:""},i.batchRoomAttributes.push(e)})),this.batchIndex++},dt.prototype.mergeStAttributeHandle=function(e){this.batchPushQueue.sort((function(e,t){return e.attribute_seq-t.attribute_seq}));var t=this.batchPushQueue.findIndex((function(t){return t.attribute_seq>=e.attribute_seq})),r=(this.batchPushQueue=this.batchPushQueue.slice(t),this.batchPushQueue.unshift(e),this.batchPushQueue[this.batchPushQueue.length-1].attribute_seq),o={delete:{},set:{}},n=this.stRoomAttributes.attributes;n.map((function(e){e.seq=0})),t={localAttributes:n,batchPushQueue:this.batchPushQueue};for(this.logger.info([he.Room],"mergeStAttributeHandle",t);this.batchPushQueue.length;){var i=(s=this.batchPushQueue.shift()).attributes,s=s.attribute_seq;r&&s&&s<r||i.forEach((function(e){var t;e&&(t=n.find((function(t){return t.key==e.key})),-1!==n.findIndex((function(t){return t.key==e.key}))?e.seq&&(t.seq=e.seq,t.value!==e.value&&(o.set[null==t?void 0:t.key]=e.value||"",t.value=e.value)):e.key&&e.seq&&(o.set[e.key]=e.value||"",n.push(pt(pt({},e),{value:e.value||""}))))}))}var a,u=[];this.stRoomAttributes.attributes=n.filter((function(e){return 0==e.seq&&(o.delete[e.key]=""),0!==e.seq})),Object.keys(o.set).length&&(a={action:j.Set,roomAttributes:o.set},u.push(a)),Object.keys(o.delete).length&&(a={action:j.Delete,roomAttributes:o.delete},u.push(a)),t={local:this.stRoomAttributes,infoList:u},this.logger.info([he.Room],"mergeStAttributeHandle",t),u.length&&(a={roomID:this.groupID,infos:u},this.eventBus.emit(Y.RoomAttributesUpdated,a)),this.stRoomAttributes.attribute_seq=r},dt.prototype.getRecordFromStRoomAttributes=function(){if(!this.stRoomAttributes.attributes.length)return{};var e={};return this.stRoomAttributes.attributes.forEach((function(t){e[t.key]=t.value})),e},dt.prototype.checkRoomAttributesUpdateByHb=function(e){var t=this;this.stRoomAttributes&&e.attribute_seq>this.stRoomAttributes.attribute_seq+1&&(this.attrTimer=setTimeout((function(){t.logger.info([he.Room],"checkRoomAttributesUpdateByHb"),t.queryRoomAllAttributes()}),this.mergeConfig.attrMergeTimeout))},dt.prototype.fetchServerPageUser=function(e,t,r){var o=this;e={room_id:this.groupID,room_session_id:this.sessionId,count:e,pos_flag:t,sub_room_id:this.subRoomID,expect_seq:this.localSeq};return this.connMgr.sendRequest(J.im_room_userlist,e,r,!0).then((function(e){return e.code?{}:(o.tatalMemberCount=e.user_count,o.localSeq=e.userlist_seq,e)}))},dt.prototype.emitRoomStateChanged=function(e,t,r){this.state=e,e={roomID:this.groupID,state:e,event:t,extendedData:r||""},this.eventBus.emit(Y.RoomStateChanged,e)},dt.prototype.emitRoomAttributesUpdated=function(e,t,r){var o;(t=void 0!==t&&t)&&null!=e&&e.attributes&&null!=r&&r.roomAttributes&&(o=r.roomAttributes,e.attributes.forEach((function(e){e.seq&&(e.value=o[e.key])}))),this.stRoomAttributes=e||{attributes:[]},this.stRoomAttributes.attributes.length&&(t={roomID:this.groupID,infos:[{action:j.Set,roomAttributes:this.getRecordFromStRoomAttributes()}]},this.eventBus.emit(Y.RoomAttributesUpdated,t))},dt.prototype.startHB=function(e){var t=this;!e||e<0||(this.stopHB(),this.hbLog=!0,this.hbTimer=setInterval((function(){var r={room_id:t.groupID,room_session_id:t.sessionId,sub_room_id:t.subRoomID};t.connMgr.sendRequestWithHeartbeat(J.im_room_info,r,t.hbLog,e).then((function(r){if(t.hbLog=!1,t.settings)return r.code?(r.code==v.NetworkModuleNetworkError&&t.hbTimeoutCount++,r.timeoutCount=t.hbTimeoutCount,t.hbTimeoutCount>=t.settings.hbTimeoutMaxCount&&(t.stopHB(),t.emitRoomStateChanged(G.Connecting,N.NetworkInterrupted)),-1!=t.settings.needReloginCodeList.indexOf(r.code)&&(t.stopHB(),t.emitRoomStateChanged(G.Disconnected,N.NetworkDisconnected)),r.state=t.state,void t.logger.warn([he.Room],"roomHB",r)):void(r.room_info_interval&&(t.hbTimeoutCount=0,t.tatalMemberCount=r.user_count,r.ulist_to&&(t.mergeConfig.listMergeTimeout=r.ulist_to),r.ulist_itvl&&(t.mergeConfig.listPullInterval=r.ulist_itvl),t.checkRoomAttributesUpdateByHb(r),r.room_info_interval!=e&&t.startHB(r.room_info_interval)))}))}),e),this.hbInterval=e,this.logger.info([he.Room],"roomHB","start "+e))},dt.prototype.stopHB=function(){this.hbTimer&&clearInterval(this.hbTimer),this.hbTimeoutCount=0,this.hbTimer=0},dt.prototype.reset=function(){this.localSeq=0,this.attrItemSeq=0,this.isMergeUser=!1,this.tatalMemberCount=0,this.userMap.clear()},dt.prototype.createUserList=function(e){return e?e.map((function(e){return{userID:e.user_id,userName:oe(e.user_name)}})):[]},dt.prototype.fetchAllUser=function(){var e=this,t={time:Date.now(),event:"fetchAllUser",groupID:this.groupID,localSeq:this.localSeq,tatalMemberCount:this.tatalMemberCount},r=[],o=function(n){r.push.apply(r,function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||((o=o||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}([],function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return s}(e.createUserList(n.users)),!1)),n.pos_flag&&e.connMgr?e.fetchServerPageUser(100,n.pos_flag,Q.SDK).then(o):(e.updateUserList(r),t.time=Date.now()-t.time,t.localSeq_=e.localSeq,t.tatalMemberCount_=e.tatalMemberCount,e.logger.info([he.Room],"mergeRoomUser",t))},n=Date.now(),i=this.lastFetchAllUserTime+this.mergeConfig.listPullInterval;n<i?setTimeout((function(){e.lastFetchAllUserTime=n,e.fetchServerPageUser(100,"",Q.SDK).then(o)}),i-n):(this.lastFetchAllUserTime=n,this.fetchServerPageUser(100,"",Q.SDK).then(o))},dt.prototype.waitingMergeUser=function(e,t,r){var o,n,i,s,a=this;e<=this.localSeq?this.logger.info([he.Room],"mergeRoomUser",{groupID:this.groupID,event:"dropMerge",action:r,seq:e,localSeq:this.localSeq,tatalMemberCount:this.tatalMemberCount}):e!=this.localSeq+1||this.mergeTimer?(-1==this.mergeSeqList.indexOf(e)&&this.mergeSeqList.push(e),o=t.userID,i=this.mergeUserList.findIndex((function(e){return e.userID==o})),"enter"==r&&-1==i?this.mergeUserList.push(t):"quit"==r&&-1!=i&&this.mergeUserList.splice(i,1),this.mergeTimer||(n={groupID:this.groupID,event:"waitingPush",action:r,seq:e,localSeq:this.localSeq,tatalMemberCount:this.tatalMemberCount},-1==this.mergeSeqList.indexOf(this.localSeq)&&this.mergeSeqList.push(this.localSeq),this.mergeTimer=setTimeout((function(){a.mergeSeqList.sort();var e=a.mergeSeqList.length-1;(e=a.mergeSeqList[e]-a.mergeSeqList[0]==e)?a.updateUserList(a.mergeUserList):a.fetchAllUser(),Object.assign(n,{time:a.mergeConfig.listMergeTimeout,localSeq_:a.localSeq,tatalMemberCount_:a.tatalMemberCount,continuous:e,mergeSeqList:a.mergeSeqList}),a.logger.info([he.Room],"mergeRoomUser",n,!0),a.mergeTimer=0,a.mergeSeqList.length=0,a.mergeUserList.length=0}),this.mergeConfig.listMergeTimeout))):(this.localSeq=e,i=this.userMap.has(t.userID),"enter"!=r||i?"quit"==r&&i&&(this.userMap.delete(t.userID),s={roomID:this.groupID,memberList:[pt({},t)]},this.eventBus.emit(Y.RoomMemberLeft,s)):(this.userMap.set(t.userID,t),s={roomID:this.groupID,memberList:[pt({},t)]},this.eventBus.emit(Y.RoomMemberJoined,s)),t={groupID:this.groupID,event:"continuousMerge",action:r,has:i,seq:e,localSeq:this.localSeq,tatalMemberCount:this.tatalMemberCount},this.logger.info([he.Room],"mergeRoomUser",t))},dt.prototype.updateUserList=function(e){var t=this,r=e.map((function(e){return e.userID})),o=Array.from(this.userMap.values()),n=(e=e.filter((function(e){var r=!t.userMap.has(e.userID);return r&&t.userMap.set(e.userID,pt({},e)),r})),o.filter((function(e){var o=-1==r.indexOf(e.userID);return o&&t.userMap.delete(e.userID),o}))),i=(e.length&&(i={roomID:this.groupID,memberList:e},this.eventBus.emit(Y.RoomMemberJoined,i)),n.length&&(i={roomID:this.groupID,memberList:n},this.eventBus.emit(Y.RoomMemberLeft,i)),{groupID:this.groupID,event:"updateRoomMember",localSeq:this.localSeq,tatalMemberCount:this.tatalMemberCount,mergeIds:r,beginLocalIds:o.map((function(e){return e.userID})),endLocalIDs:Array.from(this.userMap.keys()),joinedUserIDs:e.map((function(e){return e.userID})),leftUserIDs:n.map((function(e){return e.userID}))});this.logger.info([he.Room],"mergeRoomUser",i,!0)},dt);function dt(e,t,r,o,n){this.type=I.Room,this.state=G.Disconnected,this.subRoomID="",this.destroyDelay=0,this.userMap=new Map,this.tatalMemberCount=0,this.isMergeUser=!1,this.mergeTimer=0,this.mergeSeqList=[],this.mergeUserList=[],this.mergeConfig={listMergeTimeout:0,listPullInterval:0,attrMergeTimeout:0,attrPullInterval:0},this.lastFetchAllUserTime=0,this.hbInterval=0,this.hbTimer=0,this.hbTimeoutCount=0,this.hbLog=!1,this.localSeq=0,this.attrItemSeq=0,this.stRoomAttributes={attributes:[],attribute_seq:0},this.localAttrKeySeqMap={},this.batchOperationConfig=null,this.batchRoomAttributes=[],this.batchAttributesMap=new Map,this.batchIndex=0,this.batchFlag=!1,this.batchPushQueue=[],this.queryAttrFlag=!1,this.attrTimer=null,this.queryAttrTask=[],this.groupID=e,this.engineConfig=t,this.logger=Ut.getInstance().logger,this.settings=Ut.getInstance().settings,this.eventBus=r,this.dbMgr=o,this.connMgr=n}var ft=function(){return(ft=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},gt=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return s},mt=(_t.prototype.destroy=function(){this.connMgr=null,this.eventBus=null,this.logger=null,this.settings=null,this.engineConfig=null,this.dbMgr=null,this.dbGroupMemberMap=null},_t.prototype.setDBGroup=function(e){var t=this;this.dbGroup=e,this.groupName=e.groupName,this.groupAvatarUrl=e.groupAvatarUrl,this.dbMgr.getGroupMemberList(this.groupID).then((function(r){t.tatalMemberCount=e.tatalMemberCount||r.length,r.forEach((function(e){return t.dbGroupMemberMap.set(e.userID,e)}))}))},_t.prototype.createGroup=function(e,t,r){var o=this,n={time:Date.now(),groupInfo:e,config:r,userIDs:t},i=[],s=(Array.isArray(t)&&(t=t.filter((function(e){return!!ne(e)||(i.push({userID:e,reason:v.CommonModuleParamInvalid}),!1)})),t=Array.from(new Set(t))),r.groupAttributes),a=Object.keys(s).map((function(e){return{key:e,value:s[e],seq:f.a.fromInt(1)}})),u={group_name:e.groupName||"",group_notice:r.groupNotice||"",group_avatar:re(e.groupAvatarUrl||""),user_ids:t,attributes:a},c=(e.groupID&&(u.group_id=e.groupID),10<t.length);return this.connMgr.sendRequest(J.im_group_create,u,Q.API,c).then((function(t){if(t.code)return s=ye(v.GroupModuleCreateGroupError,t.message,t.code),n.time=Date.now()-n.time,n.error=s,o.logger.warn([he.Group],de.CreateGroup,n),Promise.reject(s);o.groupID=t.group_id,o.tatalMemberCount=t.member_count,o.groupMember.memberRole=L.Owner,t.attributes={attributes:a,seq:t.group_attribute_seq},t.group_name=e.groupName,t.group_avatar=u.group_avatar,t.group_notice=r.groupNotice,t.error_users.forEach((function(e){return i.push(o.createErrorUser(e))}));var s=o.createGroupCallback(t);t={groupInfo:o.createGroupFullInfo(),userList:s,errorUserList:i};return n.time=Date.now()-n.time,n.result=t,o.logger.info([he.Group],de.CreateGroup,n,c),t}))},_t.prototype.joinGroup=function(){var e=this,t={time:Date.now(),groupID:this.groupID},r={group_id:this.groupID};return this.connMgr.sendRequest(J.im_group_enter,r).then((function(r){if(r.code)return o=ye(v.GroupModuleJoinGroupError,r.message,r.code),t.time=Date.now()-t.time,t.error=o,e.logger.warn([he.Group],de.JoinGroup,t),Promise.reject(o);e.tatalMemberCount=r.member_count,e.groupMember.memberRole=L.Member,r.member.member_data.user_avatar||(r.member.member_data.user_avatar=e.engineConfig.userAvatarUrl),r.op_user=ft(ft({},r.member.member_data),{user_id:r.member.user_id}),r.members=[r.member],e.joinGroupCallback(r,q.Joined,P.Joined);var o={groupInfo:e.createGroupFullInfo()};return t.time=Date.now()-t.time,t.result=o,e.logger.info([he.Group],de.JoinGroup,t),o}))},_t.prototype.inviteUsersIntoGroup=function(e){var t=this,r={time:Date.now(),groupID:this.groupID,userIDs:e},o=[],n=(e=e.filter((function(e){return!!ne(e)||(o.push({userID:e,reason:v.CommonModuleParamInvalid}),!1)})),10<(e=Array.from(new Set(e))).length);e={group_id:this.groupID,user_ids:e};return this.connMgr.sendRequest(J.im_group_invite,e,Q.API,n).then((function(e){if(e.code)return i=ye(v.GroupModuleInviteUserIntoGroupError,e.message,e.code),r.time=Date.now()-r.time,r.error=i,t.logger.warn([he.Group],de.InviteUsersIntoGroup,r),Promise.reject(i);t.tatalMemberCount=e.member_count;var i=t.inviteUsersIntoGroupCallback(e);e.error_users.forEach((function(e){return o.push(t.createErrorUser(e))})),e={groupID:t.groupID,userList:i,errorUserList:o};return t.eventBus.emit(Y.GroupMemberStateChanged,{groupID:t.groupID,state:T.Enter,event:q.Invited,operatedInfo:t.createOwnerOperator(),userList:i}),r.time=Date.now()-r.time,r.result=e,t.logger.info([he.Group],de.InviteUsersIntoGroup,r,n),e}))},_t.prototype.kickGroupMembers=function(e){var t=this,r={time:Date.now(),groupID:this.groupID,userIDs:e},o=[],n=(e=e.filter((function(e){return!!ne(e)||(o.push({userID:e,reason:v.CommonModuleParamInvalid}),!1)})),10<(e=Array.from(new Set(e))).length),i={group_id:this.groupID,user_ids:e};return this.connMgr.sendRequest(J.im_group_kickout,i,Q.API,n).then((function(i){if(i.code)return a=ye(v.GroupModuleKickoutGroupMemberError,i.message,i.code),r.time=Date.now()-r.time,r.error=a,t.logger.warn([he.Group],de.KickGroupMembers,r),Promise.reject(a);t.tatalMemberCount=i.member_count;var s=[],a=(e.forEach((function(e){i.error_users.some((function(t){return t.user_id===e}))||(s.push(ft(ft({},t.dbGroupMemberMap.get(e)),{userID:e})),t.dbGroupMemberMap.delete(e))})),e=s.map((function(e){return e.userID})),i.error_users.forEach((function(e){return o.push(t.createErrorUser(e))})),t.updateMemberSeq(i.member_all_seq),t.dbMgr.deleteGroupMemberList(t.groupID,e),{groupID:t.groupID,kickedUserIDs:e,errorUserList:o});return t.eventBus.emit(Y.GroupMemberStateChanged,{groupID:t.groupID,state:T.Quit,event:q.KickedOut,operatedInfo:t.createOwnerOperator(),userList:s}),r.time=Date.now()-r.time,r.result=a,t.logger.info([he.Group],de.KickGroupMembers,r,n),a}))},_t.prototype.transferGroupOwner=function(e){var t=this,r={time:Date.now(),groupID:this.groupID,userID:e},o={group_id:this.groupID,user_id:e};return this.connMgr.sendRequest(J.im_group_owner_transfer,o).then((function(o){var n;return o.code?(n=ye(v.GroupModuleTransferOwnerError,o.message,o.code),r.time=Date.now()-r.time,r.error=n,t.logger.warn([he.Group],de.TransferGroupOwner,r),Promise.reject(n)):(t.groupMember.memberRole=L.Member,t.transferGroupOwnerCallback([{userID:e,dataSeq:+o.new_owner_data_seq.toString()},{userID:t.groupMember.userID,dataSeq:+o.old_owner_data_seq.toString()}]),r.time=Date.now()-r.time,t.logger.info([he.Group],de.TransferGroupOwner,r),{groupID:t.groupID,toUserID:e})}))},_t.prototype.updateGroupInfo=function(e,t){var r,o=this,n={time:Date.now(),value:e},i=t==F.Name?J.im_group_modify_name:J.im_group_modify_notice,s=t==F.Name?de.UpdateGroupName:de.UpdateGroupNotice;return(r={group_id:this.groupID})[t==F.Name?"group_name":"group_notice"]=e,this.connMgr.sendRequest(i,r).then((function(r){var i;return r.code?(i=ye(v.GroupModuleUpdateGroupInfoError,r.message,r.code),n.time=Date.now()-n.time,n.error=i,o.logger.warn([he.Group],s,n),Promise.reject(i)):(o.mergeGroupData(t,+(null==(i=r.group_data_seq)?void 0:i.toString()),e,o.createOwnerOperator()),n.time=Date.now()-n.time,o.logger.info([he.Group],s,n),t==F.Name?{groupID:o.groupID,groupName:e}:{groupID:o.groupID,groupNotice:e})}))},_t.prototype.updateGroupAvatarUrl=function(e){var t=this,r={time:Date.now(),value:e},o={group_id:this.groupID,group_avatar:re(e)};return this.connMgr.sendRequest(J.im_group_modify_avatar,o).then((function(o){var n;return o.code?(n=ye(v.GroupModuleUpdateGroupInfoError,o.message,o.code),r.time=Date.now()-r.time,r.error=n,t.logger.warn([he.Group],r),Promise.reject(n)):(t.mergeGroupData(F.Avatar,+(null==(n=o.group_data_seq)?void 0:n.toString()),e,t.createOwnerOperator()),r.time=Date.now()-r.time,t.logger.info([he.Group],r),{groupID:t.groupID,groupAvatarUrl:e})}))},_t.prototype.queryGroupInfo=function(){var e=this,t={time:Date.now(),groupID:this.groupID},r={group_id:this.groupID};return this.connMgr.sendRequest(J.im_group_data,r).then((function(r){if(r.code)return o=ye(v.GroupModuleQueryGroupInfoError,r.message,r.code),t.time=Date.now()-t.time,t.error=o,e.logger.warn([he.Group],de.QueryGroupInfo,t),Promise.reject(o);e.syncGroupInfo(r.group_name,oe(r.group_avatar)),e.dbGroup.groupNotice=r.group_notice,r.group_data_seq&&(e.dbGroup.dataSeq=+r.group_data_seq.toString()),e.dbMgr.addGroupList([e.dbGroup]);var o={groupInfo:e.createGroupFullInfo()};return t.time=Date.now()-t.time,t.result=o,e.logger.info([he.Group],de.QueryGroupInfo,t),o}))},_t.prototype.updateGroupAttributes=function(e){var t,r=this,o={time:Date.now(),groupID:this.groupID,params:e},n=H.Set,i=Array.isArray(e)?(n=H.Delete,t=de.DeleteGroupAttributes,(e=Array.from(new Set(e))).map((function(e){return{key:e,value:""}}))):(t=de.SetGroupAttributes,Object.keys(e).map((function(t){return{key:t,value:e[t]}})));i={group_id:this.groupID,attributes:{action:n,attributes:i}};return this.connMgr.sendRequest(J.im_group_modify_attributes,i).then((function(e){if(e.code)return i=ye(v.GroupModuleGroupAttributesOperationFailed,e.message,e.code),o.time=Date.now()-o.time,o.error=i,r.logger.warn([he.Group],t,o),Promise.reject(i);r.mergeGroupAttributes(n,e.attributes,r.createOwnerOperator());var i={groupID:r.groupID,errorKeys:e.fail_keys?e.fail_keys.map((function(e){return e.key})):[]};return o.time=Date.now()-o.time,o.result=i,r.logger.info([he.Group],t,o),i}))},_t.prototype.queryGroupAttributes=function(e){var t=this,r={time:Date.now(),groupID:this.groupID,keys:e},o=this.dbGroup.attributes||{},n=(e||Object.keys(o)).map((function(e){return{key:e,seq:f.a.fromInt((null==(e=o[e])?void 0:e.seq)||1)}}));n={group_id:this.groupID,attributes:{seq:f.a.fromInt(this.dbGroup.attributeSeq||0),attributes:n}};return this.connMgr.sendRequest(J.im_group_attributes,n).then((function(o){if(o.code)return n=ye(v.GroupModuleGroupAttributesQueryFailed,o.message,o.code),r.time=Date.now()-r.time,r.error=n,t.logger.warn([he.Group],de.QueryGroupAttributes,r),Promise.reject(n);t.mergeGroupAttributes(H.Query,o.attributes);var n={groupID:t.groupID,groupAttributes:t.createGroupAttributes(e)};return r.time=Date.now()-r.time,r.result=n,t.logger.info([he.Group],de.QueryGroupAttributes,r),n}))},_t.prototype.setGroupMemberInfo=function(e,t,r){var o,n=this,i={time:Date.now(),userID:e,value:t},s=r==V.Nickname?J.im_group_member_nickname_set:J.im_group_member_role_set,a=r==V.Nickname?de.SetGroupMemberNickname:de.SetGroupMemberRole;return(o={group_id:this.groupID,user_id:e})[r==V.Nickname?"member_nickname":"role"]=t,this.connMgr.sendRequest(s,o).then((function(o){var s;return o.code?(s=ye(v.GroupModuleUpdateGroupMemberInfoError,o.message,o.code),i.time=Date.now()-i.time,i.error=s,n.logger.warn([he.Group],a,i),Promise.reject(s)):(n.mergeGroupMemberInfo(r,+o.member_data_seq.toString(),t,e),i.time=Date.now()-i.time,n.logger.info([he.Group],a,i),r==V.Nickname?{groupID:n.groupID,forUserID:e,nickname:t}:{groupID:n.groupID,forUserID:e,role:t})}))},_t.prototype.queryGroupMemberInfo=function(e){var t=this,r={time:Date.now(),groupID:this.groupID,userID:e};e={group_id:this.groupID,user_id:e};return this.connMgr.sendRequest(J.im_group_member_data,e).then((function(e){if(e.code)return o=ye(v.GroupModuleQueryGroupMemberInfoError,e.message,e.code),r.time=Date.now()-r.time,r.error=o,t.logger.warn([he.Group],de.QueryGroupMemberInfo,r),Promise.reject(o);var o=t.createDBMember(e.member);t.dbMgr.addGroupMemberList(t.groupID,[o]),e={groupID:t.groupID,userInfo:o};return r.time=Date.now()-r.time,r.result=e,t.logger.info([he.Group],de.QueryGroupMemberInfo,r),e}))},_t.prototype.queryGroupMemberList=function(e){var t=this;return new Promise((function(r,o){var n={time:Date.now(),groupID:t.groupID,config:e};t.mergeServerMemberList(Z.Biz,"apicall",(function(i){if(i&&i.code)return i=ye(v.GroupModuleQueryGroupMemberListError,i.message,i.code),o(i);t.dbMgr&&t.dbMgr.getGroupMemberList(t.groupID).then((function(o){var i={},s=t.dbGroupMemberMap,a=(t.dbGroupMemberMap=new Map,o.sort((function(e,t){return e.seq-t.seq})),o.forEach((function(e){Object.assign(e,s.get(e.userID)),t.dbGroupMemberMap.set(e.userID,e),i[e.userID]=e.seq})),s.clear(),(null==(a=o[o.length-1])?void 0:a.seq)||0),u=e.nextFlag||0,c=0,l=(0<u&&u<a?c=o.findIndex((function(e){return e.seq==u}))+1:a<=u&&a&&(c=o.length),Math.floor(c+e.count)),p=(o=o.slice(c,l)).length,h=o.map((function(e){return ce(t.memberKeys,e)}));o=p!=t.dbGroupMemberMap.size&&(null==(o=o[p-1])?void 0:o.seq)||0;n.time=Date.now()-n.time,Object.assign(n,{start:c,end:l,max:a,total:t.dbGroupMemberMap.size,count:p,nextFlag:o,flag:i}),t.logger.info([he.Group],de.QueryGroupMemberList,n),r({groupID:t.groupID,userList:h,nextFlag:o})}))}))}))},_t.prototype.queryGroupMemberCount=function(){var e={groupID:this.groupID,count:this.tatalMemberCount};return this.logger.info([he.Room],de.QueryGroupMemberCount,e),Promise.resolve(e)},_t.prototype.onPushGroupCreate=function(e){this.tatalMemberCount=e.member_count,this.groupMember.memberRole=L.Member,this.createGroupCallback(e)},_t.prototype.onPushGroupMemberInvited=function(e){this.tatalMemberCount=e.member_count,this.groupMember.memberRole=L.Member,e.members=[{user_id:this.engineConfig.userID,member_data:{user_name:this.engineConfig.userName,user_avatar:this.engineConfig.userAvatarUrl,role:L.Member}}],this.joinGroupCallback(e,q.Invited,P.Invited)},_t.prototype.onPushGroupDataModify=function(e){var t,r=this.dbGroup.dataSeq||0,o=+(null==(o=e.group_data_seq)?void 0:o.toString())||0;o&&r<=o&&(t=2==e.modify_type?oe(e.group_avatar):1==e.modify_type?e.group_name:e.group_notice,this.mergeGroupData(e.modify_type||0,o,t,this.createOperator(e.op_user))),this.logger.info([he.Group],de.PushCMD,{dbSeq:r,svrSeq:o,type:e.modify_type})},_t.prototype.onPushGroupAttributesModify=function(e){var t=this.dbGroup.attributeSeq||0,r=+(null==(r=e.attributes.seq)?void 0:r.toString())||0;r&&t<=r&&this.mergeGroupAttributes(H.Push,e.attributes,this.createOperator(e.op_user)),this.logger.info([he.Group],de.PushCMD,{dbSeq:t,svrSeq:r})},_t.prototype.onPushGroupOwnerTransfer=function(e){e.user_id==this.groupMember.userID&&(this.groupMember.memberRole=L.Owner),this.transferGroupOwnerCallback([{userID:e.user_id},{userID:e.op_user.user_id}]),this.updateMemberSeq(e.member_all_seq)},_t.prototype.onPushGroupMemberChange=function(e){var t=this,r=(this.tatalMemberCount=e.member_count,this.dbGroup.memberSeq||0),o=+(null==(o=e.member_all_seq)?void 0:o.toString());if(this.logger.info([he.Group],de.PushCMD,{dbSeq:r,svrSeq:o}),o&&!(o<r))switch(e.new_owner_id==this.groupMember.userID&&(this.groupMember.memberRole=L.Owner),e.change_type){case K.Enter:this.joinGroupCallback(e,q.Joined);break;case K.Invited:this.eventBus.emit(Y.GroupMemberStateChanged,{groupID:this.groupID,state:T.Enter,event:q.Invited,operatedInfo:this.createOperator(e.op_user),userList:this.inviteUsersIntoGroupCallback(e)});break;case K.Quit:case K.Kickout:case K.OwnerQuit:var n=this.createOperator(e.op_user);this.eventBus.emit(Y.GroupMemberStateChanged,{groupID:this.groupID,state:T.Quit,event:e.change_type===K.Kickout?q.KickedOut:q.Left,operatedInfo:n,userList:this.kickGroupMemberCallback(e)}),e.change_type==K.OwnerQuit&&this.groupOwnerQuitCallback(e.new_owner_id,n);break;case K.Modify:n=e.members.map((function(e){return(e=t.createDBMember(e)).userID==t.groupMember.userID&&(e.memberNickname&&(t.groupMember.memberNickname=e.memberNickname),e.memberRole&&(t.groupMember.memberRole=e.memberRole)),e})),this.dbMgr.addGroupMemberList(this.groupID,n),this.eventBus.emit(Y.GroupMemberInfoUpdated,{groupID:this.groupID,operatedInfo:this.createOperator(e.op_user),userList:n})}},_t.prototype.onConnected=function(){this.mergeServerMemberList(Z.SDKHb,"onConnected")},_t.prototype.onUpdateSelf=function(){this.groupMember.userName=this.engineConfig.userName,this.groupMember.memberAvatarUrl=this.engineConfig.userAvatarUrl;var e=this.dbGroupMemberMap.get(this.engineConfig.userID);e&&(e.userName=this.engineConfig.userName,e.memberAvatarUrl=this.engineConfig.userAvatarUrl,this.dbMgr.addGroupMemberList(this.groupID,[e]))},_t.prototype.createGroupFullInfo=function(){return{baseInfo:{groupID:this.dbGroup.groupID,groupName:this.dbGroup.groupName,groupAvatarUrl:this.dbGroup.groupAvatarUrl},groupNotice:this.dbGroup.groupNotice,notificationStatus:this.dbGroup.notificationStatus,groupAttributes:this.createGroupAttributes()}},_t.prototype.createOwnerOperator=function(){return ft(ft({},this.groupMember),{operatedUserInfo:ft(ft({},this.groupMember),{memberAvatarUrl:""})})},_t.prototype.createOperator=function(e){var t=e.user_id,r=e.user_name,o=e.group_nick_name;e=e.role,t=ft(ft({},this.dbGroupMemberMap.get(t)),{userID:t,userName:""});return r&&(t.userName="string"==typeof r?r:oe(r)),t.memberNickname=o||"",t.memberRole=e||L.Member,delete t.seq,delete t.dataSeq,ft(ft({},t),{operatedUserInfo:ft(ft({},t),{memberAvatarUrl:""})})},_t.prototype.createMember=function(e){return delete(e=ft({},this.createDBMember(e))).seq,delete e.dataSeq,e},_t.prototype.createDBMember=function(e){var t=e.user_id,r=this.dbGroupMemberMap.get(t)||{userID:t},o=(a=e.member_data).user_name,n=a.user_avatar,i=a.group_nick_name,s=a.role,a=a.member_data_seq;return!(n=(o&&(r.userName=o),n&&n.length&&(r.memberAvatarUrl=oe(n)),i&&(r.memberNickname=i),s&&(r.memberRole=s),a&&(r.dataSeq=+a.toString()),+(null==(o=e.member_seq)?void 0:o.toString())||0))&&r.seq||(r.seq=n),this.dbGroupMemberMap.set(t,r),r},_t.prototype.createErrorUser=function(e){return{userID:e.user_id,reason:ee(e.sub_code)}},_t.prototype.createGroupAttributes=function(e){var t=this;if(!this.dbGroup.attributes)return this.dbGroup.attributes={},{};var r={};return(e=e||Object.keys(this.dbGroup.attributes)).forEach((function(e){var o=t.dbGroup.attributes[e];o&&!o.state&&(r[e]=o.value)})),r},_t.prototype.createDBGroupAttributes=function(e){return(e||[]).reduce((function(e,t){var r;return t.seq=+(null==(r=t.seq)?void 0:r.toString())||0,e[t.key]=t,e}),{})},_t.prototype.mergeMemberList=function(e,t){var r=this,o=[];t&&this.dbGroupMemberMap.clear(),e.forEach((function(e){var n=e.event_type;e=e.member;t||!n||n===K.Enter||n===K.Modify||n===K.Invited?r.createDBMember(e):n!==K.Quit&&n!==K.Kickout&&n!==K.OwnerQuit||(o.push(e.user_id),r.dbGroupMemberMap.delete(e.user_id))})),o.length&&this.dbMgr.deleteGroupMemberList(this.groupID,o),this.dbMgr.addGroupMemberList(this.groupID,Array.from(this.dbGroupMemberMap.values()))},_t.prototype.syncGroupInfo=function(e,t){"string"==typeof e&&(this.groupName=e,this.dbGroup.groupName=e),"string"==typeof t&&(this.groupAvatarUrl=t,this.dbGroup.groupAvatarUrl=t),this.eventBus.exec(Y.InnerSyncGroupInfo,this.groupID,e,t)},_t.prototype.mergeGroupData=function(e,t,r,o){e==F.Name?(this.syncGroupInfo(r,void 0),this.eventBus.emit(Y.GroupNameUpdated,{groupID:this.groupID,groupName:r,operatedInfo:o})):e!=F.Notice&&e?e==F.Avatar&&(this.syncGroupInfo(void 0,r),this.eventBus.emit(Y.GroupAvatarUrlUpdated,{groupID:this.groupID,groupAvatarUrl:r,operatedInfo:o})):(this.dbGroup.groupNotice=r,this.eventBus.emit(Y.GroupNoticeUpdated,{groupID:this.groupID,groupNotice:r,operatedInfo:o})),t&&(this.dbGroup.dataSeq=t),this.dbMgr.addGroupList([this.dbGroup])},_t.prototype.mergeGroupAttributes=function(e,t,r){var o=t.seq,n=(t=t.attributes,this.dbGroup.attributes||{}),i={},s={},a=[],u={action:e,seq:o,attributes:t,setAttrs:i,delAtrrs:s};t.forEach((function(t){var r,o=t.key,a=t.value;t=+(null==(t=t.seq)?void 0:t.toString());e==H.Delete||e==H.Push&&!t?(s[o]=a,n[o]=ft(ft({},n[o]),{key:o,state:1})):t&&(r=(null==(r=n[o])?void 0:r.state)||0,(!n[o]||t>n[o].seq)&&(r=0,i[o]=a),n[o]=ft(ft({},n[o]),{key:o,value:a,seq:t,state:r}))})),Object.keys(i).length&&a.push({action:B.Set,groupAttributes:i}),Object.keys(s).length&&a.push({action:B.Delete,groupAttributes:s}),r&&a.length&&this.eventBus.emit(Y.GroupAttributesUpdated,{groupID:this.groupID,operatedInfo:r,infoList:a}),this.dbGroup.attributes=n,o&&(this.dbGroup.attributeSeq=+o.toString()),this.dbMgr.addGroupList([this.dbGroup]),u.dbSeq=this.dbGroup.attributeSeq,u.dbAttr=n,this.logger.info([he.Group],"mergeGroupAttributes",u)},_t.prototype.mergeGroupMemberInfo=function(e,t,r,o){var n=ft(ft({},this.dbGroupMemberMap.get(o)),{userID:o});t&&(n.dataSeq=t),e===V.Nickname?(n.memberNickname=r,o==this.groupMember.userID&&(this.groupMember.memberNickname=n.memberNickname)):e===V.Role&&(n.memberRole=r,o==this.groupMember.userID&&(this.groupMember.memberRole=n.memberRole)),this.dbGroupMemberMap.set(o,n),this.dbMgr.addGroupMemberList(this.groupID,[n]),this.eventBus.emit(Y.GroupMemberInfoUpdated,{groupID:this.groupID,operatedInfo:this.createOwnerOperator(),userList:[n]})},_t.prototype.fetchServerPageMember=function(e,t,r,o){return e={group_id:this.groupID,count:100,cur_member_seq:f.a.fromString(""+e),full_pull:o,degree:t,how:r},o=r==Z.Biz?Q.API:Q.SDK,this.connMgr.sendRequest(J.im_group_member_list,e,o,!0)},_t.prototype.mergeServerMemberList=function(e,t,r){var o=this,n=this.dbGroup.memberSeq||0,i={time:Date.now(),groupID:this.groupID,dbSeq:n,how:e,action:t,count:0},s=[],a=1,u=function(t){if(t.code||!o.dbMgr)return i.count=s.length,o.logger&&o.logger.info([he.Group],"mergeServerMemberList",i),r&&r(t);o.tatalMemberCount=t.member_count;var c=+(null==(c=t.member_all_seq)?void 0:c.toString())||0;if(c<=n)return r&&r();var l=+(null==(l=t.cur_member_seq)?void 0:l.toString())||0;s.push.apply(s,function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||((o=o||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}([],gt(t.change_list),!1)),l<c&&!t.fetch_end?o.fetchServerPageMember(l,++a,e,1).then(u):(c!=n&&(o.dbGroup.memberSeq=c,o.dbMgr.addGroupList([o.dbGroup])),o.mergeMemberList(s,!!t.full_list),Object.assign({time:Date.now()-i.time,count:s.length,seq:c}),o.logger.info([he.Group],"mergeServerMemberList",i),r&&r())};this.fetchServerPageMember(n,a,e,0).then(u)},_t.prototype.fetchMembersInfo=function(e,t){var r=this,o=[];if(e.forEach((function(e){e.member_data.user_avatar&&e.member_data.user_avatar.length||o.push(e.user_id)})),o.length){for(var n=[],i=0;i<o.length;i+=10){var s=this.connMgr.sendRequest(J.im_account_fetch_user_info,{_ev_:t,quey_user_id:o.slice(i,i+10)},Q.SDK,!0);n.push(s)}Promise.all(n).then((function(t){var o=[];t.forEach((function(t){(t=t.result)&&t.length&&t.forEach((function(t){var n=t.user_id,i=e.find((function(e){return n==e.user_id}));i&&(i.member_data.user_name=oe(t.user_name),i.member_data.user_avatar=t.avatar,o.push(r.createDBMember(i)))}))})),o.length&&r.dbMgr.addGroupMemberList(r.groupID,o)}))}},_t.prototype.createGroupCallback=function(e){return Object.assign(this.dbGroup,{groupID:e.group_id,groupNotice:e.group_notice,notificationStatus:E.Notify,attributes:this.createDBGroupAttributes(e.attributes.attributes)}),e.group_list_seq&&(this.dbGroup.groupSeq=e.group_list_seq.toString()),e.attributes.seq&&(this.dbGroup.attributeSeq=+e.attributes.seq.toString()),e.member_all_seq&&(this.dbGroup.memberSeq=+e.member_all_seq.toString()),this.syncGroupInfo(e.group_name,oe(e.group_avatar)),this.dbMgr.addGroupList([this.dbGroup]),e.group_notice||this.queryGroupInfo(),this.fetchMembersInfo(e.members,"createGroupCallback"),this.handleCreateGroupCallback(e)},_t.prototype.handleCreateGroupCallback=function(e){var t=this,r=e.members.map((function(e){return t.createDBMember(e)})),o=(e=(this.dbMgr.addGroupMemberList(this.groupID,r),e.op_user?this.createOperator(e.op_user):this.createOwnerOperator())).userID,n=(this.eventBus.emit(Y.GroupStateChanged,{state:x.Enter,event:P.Created,operatedInfo:e,groupInfo:this.createGroupFullInfo()}),this.dbGroup.attributes&&0<Object.keys(this.dbGroup.attributes).length&&(n={action:B.Set,groupAttributes:this.createGroupAttributes()},this.eventBus.emit(Y.GroupAttributesUpdated,{groupID:this.groupID,operatedInfo:e,infoList:[n]})),this.eventBus.emit(Y.GroupMemberStateChanged,{groupID:this.groupID,state:T.Enter,event:q.Joined,operatedInfo:e,userList:[e.operatedUserInfo]}),r.filter((function(e){return e.userID!=o})));return n.length&&this.eventBus.emit(Y.GroupMemberStateChanged,{groupID:this.groupID,state:T.Enter,event:q.Invited,operatedInfo:e,userList:n}),r},_t.prototype.handleJoinGroup=function(e,t,r){var o=this,n=e.group_notice,i=e.member_all_seq,s=e.group_data_seq,a=e.group_list_seq,u=e.properties;n&&(this.dbGroup.groupNotice=n),a&&(this.dbGroup.groupSeq=a.toString()),n=e.members.map((function(e){return o.createDBMember(e)})),r?(this.syncGroupInfo(e.group_name,oe(e.group_avatar)),this.dbGroup.notificationStatus=E.Notify,this.mergeServerMemberList(Z.SDKPush,"joinGroup"),this.dbGroup.attributes={},u?(this.dbGroup.attributes=this.createDBGroupAttributes(u.attributes),u.seq&&(this.dbGroup.attributeSeq=+u.seq.toString())):this.queryGroupAttributes([]),this.queryGroupInfo(),s&&(this.dbGroup.dataSeq=+s.toString())):(i&&(this.dbGroup.memberSeq=+i.toString()),this.dbMgr.addGroupMemberList(this.groupID,n)),this.dbMgr.addGroupList([this.dbGroup]),a=this.createOperator(e.op_user);return r&&(this.eventBus.emit(Y.GroupStateChanged,{state:x.Enter,event:r,operatedInfo:a,groupInfo:this.createGroupFullInfo()}),this.dbGroup.attributes&&0<Object.keys(this.dbGroup.attributes).length&&(u={action:B.Set,groupAttributes:this.createGroupAttributes()},this.eventBus.emit(Y.GroupAttributesUpdated,{groupID:this.groupID,operatedInfo:a,infoList:[u]}))),n.length&&this.eventBus.emit(Y.GroupMemberStateChanged,{groupID:this.groupID,state:T.Enter,event:t,operatedInfo:a,userList:n}),n},_t.prototype.joinGroupCallback=function(e,t,r){t!=q.Joined||r||this.fetchMembersInfo(e.members,"joinGroupCallback"),this.handleJoinGroup(e,t,r)},_t.prototype.inviteUsersIntoGroupCallback=function(e){var t=this,r=e.members.map((function(e){return t.createDBMember(e)}));return this.dbMgr.addGroupMemberList(this.groupID,r),this.updateMemberSeq(e.member_all_seq),r},_t.prototype.kickGroupMemberCallback=function(e){var t=this,r=e.members.map((function(e){return e=t.createMember(e),t.dbGroupMemberMap.delete(e.userID),e})),o=r.map((function(e){return e.userID}));return this.updateMemberSeq(e.member_all_seq),this.dbMgr.deleteGroupMemberList(this.groupID,o),r},_t.prototype.transferGroupOwnerCallback=function(e){var t=this;Promise.all([this.dbMgr.getGroupMember(this.groupID,e[0].userID),this.dbMgr.getGroupMember(this.groupID,e[1].userID)]).then((function(r){var o=(r=gt(r,2))[0],n=(r=r[1],o.memberRole=L.Owner,r.memberRole=L.Member,e[0].dataSeq&&(o.dataSeq=e[0].dataSeq),e[1].dataSeq&&(r.dataSeq=e[1].dataSeq),t.dbGroupMemberMap.set(o.userID,o),t.dbGroupMemberMap.set(r.userID,r),t.dbMgr.addGroupMemberList(t.groupID,[o,r]),ft(ft({},r),{operatedUserInfo:r}));t.eventBus.emit(Y.GroupMemberInfoUpdated,{groupID:t.groupID,operatedInfo:n,userList:[o,r]})}))},_t.prototype.groupOwnerQuitCallback=function(e,t){(e=ft(ft({},this.dbGroupMemberMap.get(e)),{userID:e})).memberRole=L.Owner,this.dbMgr.addGroupMemberList(this.groupID,[e]),this.eventBus.emit(Y.GroupMemberInfoUpdated,{groupID:this.groupID,operatedInfo:t,userList:[e]})},_t.prototype.updateMemberSeq=function(e){(e=+(null==e?void 0:e.toString()))&&this.dbGroup&&e!=this.dbGroup.memberSeq&&(this.dbGroup.memberSeq=e,this.dbMgr.addGroupList([this.dbGroup]))},_t);function _t(e,t,r,o,n){this.type=I.Group,this.groupID="",this.groupName=void 0,this.groupAvatarUrl=void 0,this.tatalMemberCount=0,this.dbGroup={},this.dbGroupMemberMap=new Map,this.memberKeys=["userID","userName","memberRole","memberAvatarUrl","memberNickname"],this.dbGroup.groupID=e,this.groupID=e,this.engineConfig=t,this.logger=Ut.getInstance().logger,this.settings=Ut.getInstance().settings,this.eventBus=r,this.dbMgr=o,this.connMgr=n,this.groupMember={userID:this.engineConfig.userID,userName:this.engineConfig.userName,memberAvatarUrl:this.engineConfig.userAvatarUrl,memberNickname:"",memberRole:L.Member}}var yt=function(){return(yt=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},bt=(vt.prototype.destroy=function(){this.onLogout(),this.connMgr=null,this.eventBus=null,this.logger=null,this.engineConfig=null},vt.prototype.findRoom=function(e){return this.roomMap.get(e)},vt.prototype.findGroup=function(e,t){return t&&this.createGroupInstance(e),this.groupMap.get(e)},vt.prototype.clearRoomMessage=function(){this.dbMgr.clearRoomMessage(Array.from(new Set(this.roomIDs))),this.roomIDs.length=0},vt.prototype.createRoom=function(e,t,r){var o,n;return!e||!ne(e.roomID)||!ie(e.roomName)||(n=t)&&n.roomAttributes&&!ae(n.roomAttributes)?(n=ye(v.CommonModuleParamInvalid),o=r?de.EnterRoom:de.CreateRoom,this.logger.warn([he.Room],o,{error:n,roomInfo:e,config:t}),Promise.reject(n)):this.createRoomInstance(e.roomID).create(e.roomName,t,r)},vt.prototype.joinRoom=function(e){var t;return ne(e)?this.createRoomInstance(e).enter():(t=ye(v.CommonModuleParamInvalid),this.logger.warn([he.Room],de.JoinRoom,{error:t,roomID:e}),Promise.reject(t))},vt.prototype.leaveRoom=function(e){var t,r=this;if(!ne(e))return t=ye(v.CommonModuleParamInvalid),this.logger.warn([he.Room],de.LeaveRoom,{error:t,roomID:e}),Promise.reject(t);var o=this.findRoom(e);return o?o.quit().then((function(){return r.clearRoomMessageByID(o.groupID,o.destroyDelay,r.dbMgr),r.roomMap.delete(e),{roomID:e}})):Promise.resolve({roomID:e})},vt.prototype.queryRoomMemberList=function(e,t){var r=!ne(e)||!t||"number"!=typeof t.count||t.count<0?v.CommonModuleParamInvalid:this.findRoom(e)?0:v.RoomModuleUserIsNotInTheRoom;return r?(r=ye(r),this.logger.warn([he.Room],de.QueryRoomMemberList,{error:r,roomID:e,config:t}),Promise.reject(r)):t.count<1?Promise.resolve({roomID:e,memberList:[],nextFlag:t.nextFlag||""}):this.findRoom(e).queryPageMember(t)},vt.prototype.queryRoomAllAttributes=function(e){var t=this.createNoRoomError(e,de.QueryRoomAllAttributes);return t?Promise.reject(t):this.findRoom(e).queryRoomAllAttributes()},vt.prototype.setRoomAttributes=function(e,t,r){var o=ne(t)&&ae(e)?this.findRoom(t)?0:v.RoomModuleUserIsNotInTheRoom:v.CommonModuleParamInvalid;return o?(o=ye(o),this.logger.warn([he.Room],de.SetRoomAttributes,{error:o,roomID:t,roomAttributes:e,config:r}),Promise.reject(o)):this.findRoom(t).setRoomAttributes(e,r)},vt.prototype.deleteRoomAttributes=function(e,t,r){var o=!Array.isArray(e)||!e.length||e.some((function(e){return!e||"string"!=typeof e}));return(o=!ne(t)||o?v.CommonModuleParamInvalid:this.findRoom(t)?0:v.RoomModuleUserIsNotInTheRoom)?(o=ye(o),this.logger.warn([he.Room],de.DeleteRoomAttributes,{error:o,roomID:t,keys:e,config:r}),Promise.reject(o)):this.findRoom(t).deleteRoomAttributes(e,r)},vt.prototype.beginRoomAttributesBatchOperation=function(e,t){this.createRoomInstance(e).beginRoomAttributesBatchOperation(t)},vt.prototype.endRoomAttributesBatchOperation=function(e){var t=this.createNoRoomError(e,de.EndRoomAttributesBatchOperation);return t?Promise.reject(t):this.findRoom(e).endRoomAttributesBatchOperation()},vt.prototype.queryRoomOnlineMemberCount=function(e){var t=this.createNoRoomError(e,de.QueryRoomOnlineMemberCount);return t?Promise.reject(t):this.findRoom(e).queryMemberCount()},vt.prototype.clearRoomMessageByID=function(e,t,r){var o=this;t?setTimeout((function(){var t=o.findRoom(e);t&&t.state!=G.Disconnected||r.clearRoomMessage([e])}),1e3*t):r.clearRoomMessage([e])},vt.prototype.onPushRoomKickout=function(e){var t=this.findRoom(e.room_id);t&&(t.onPushKickout(e),this.clearRoomMessageByID(t.groupID,t.destroyDelay,this.dbMgr),this.roomMap.delete(t.groupID))},vt.prototype.onPushRoomEnter=function(e){var t=this.findRoom(e.room_id);t&&t.onPushEnter(e)},vt.prototype.onPushRoomQuit=function(e){var t=this.findRoom(e.room_id);t&&t.onPushQuit(e)},vt.prototype.onPushRoomAttributesModify=function(e){var t=this.findRoom(e.room_id);t&&t.onPushRoomAttributesModify(e)},vt.prototype.createGroup=function(e,t,r){var o,n,i=this,s=(e=Object.assign({},e),r=Object.assign({groupAttributes:{},groupNotice:""},r),String(e.groupID||"").trim());return s&&!ne(s,!0)||!ie(e.groupName)||!ie(e.groupAvatarUrl)||!ie(r.groupNotice)||t&&!Array.isArray(t)||!se(r.groupAttributes,!0)?(n={error:o=ye(v.CommonModuleParamInvalid),groupInfo:e,config:r,userIDs:t},this.logger.warn([he.Group],de.CreateGroup,n),Promise.reject(o)):(s=s||te(),this.createGroupInstance(s).then((function(o){return o.createGroup(e,t,r).then((function(e){return i.groupMap.delete(s),i.groupDelIDMap.delete(s),i.groupDelIDMap.delete(o.groupID),i.groupMap.set(o.groupID,o),i.groupEventMap.delete(s),i.groupEventMap.set(o.groupID,P.Created),i.updateGroupSeq(o.dbGroup.groupSeq),i.eventBus.exec(Y.InnerJoinedGroup,o.groupID,o.groupName,o.groupAvatarUrl,P.Created),e})).catch((function(e){var t;throw e&&e.code&&e.code!=v.GroupModuleGroupAlreadyExists&&(t=o.groupID,i.groupMap.delete(s),i.groupMap.delete(t),o.destroy()),e}))})))},vt.prototype.joinGroup=function(e){var t,r=this;return ne(e)?this.createGroupInstance(e).then((function(t){return t.joinGroup().then((function(o){return r.groupEventMap.set(e,P.Created),r.groupDelIDMap.delete(e),r.updateGroupSeq(t.dbGroup.groupSeq),r.eventBus.exec(Y.InnerJoinedGroup,t.groupID,t.groupName,t.groupAvatarUrl,P.Joined),o})).catch((function(o){throw o&&o.code&&o.code!=v.GroupModuleMemberIsAlreadyInTheGroup&&(r.groupMap.delete(e),t.destroy()),o}))})):(t=ye(v.CommonModuleParamInvalid),this.logger.warn([he.Group],de.JoinGroup,{error:t,groupID:e}),Promise.reject(t))},vt.prototype.leaveGroup=function(e){return this.quitGroup(e,J.im_group_quit,de.LeaveGroup,v.GroupModuleLeaveGroupError)},vt.prototype.dismissGroup=function(e){return this.quitGroup(e,J.im_group_destroy,de.DismissGroup,v.GroupModuleDismissGroupError)},vt.prototype.queryGroupList=function(){var e=this;return new Promise((function(t){var r={time:Date.now(),logined:e.isLogined,count:0};e.isLogined?e.mergeServerGroupList(Z.Biz,"apicall",(function(o){return e.handleQueryGroupsCallback(o,{log:r,resolve:t})})):e.queryGroupsCallbackList.push({log:r,resolve:t})}))},vt.prototype.updateGroupName=function(e,t){var r=this.createNoGroupError(t,!ne(t)||!ie(e));return r?(this.logger.warn([he.Group],de.UpdateGroupName,{error:r,groupID:t,groupName:e}),Promise.reject(r)):this.createGroupInstance(t).then((function(t){return t.updateGroupInfo(e||"",F.Name)}))},vt.prototype.updateGroupNotice=function(e,t){var r=this.createNoGroupError(t,!ne(t)||!ie(e));return r?(this.logger.warn([he.Group],de.UpdateGroupNotice,{error:r,groupID:t,groupNotice:e}),Promise.reject(r)):this.createGroupInstance(t).then((function(t){return t.updateGroupInfo(e||"",F.Notice)}))},vt.prototype.updateGroupAvatarUrl=function(e,t){var r=this.createNoGroupError(t,!ne(t)||!ie(e));return r?(this.logger.warn([he.Group],de.UpdateGroupAvatarUrl,{error:r,groupID:t,groupAvatarUrl:e}),Promise.reject(r)):this.createGroupInstance(t).then((function(t){return t.updateGroupAvatarUrl(e||"")}))},vt.prototype.queryGroupInfo=function(e){var t=this.createNoGroupError(e,!ne(e));return t?(this.logger.warn([he.Group],de.QueryGroupInfo,{error:t,groupID:e}),Promise.reject(t)):this.createGroupInstance(e).then((function(e){return e.queryGroupInfo()}))},vt.prototype.setGroupAttributes=function(e,t){var r=this.createNoGroupError(t,!ne(t)||!se(e));return r?(this.logger.warn([he.Group],de.SetGroupAttributes,{error:r,groupID:t,groupAttributes:e}),Promise.reject(r)):this.createGroupInstance(t).then((function(t){return t.updateGroupAttributes(e)}))},vt.prototype.deleteGroupAttributes=function(e,t){var r=!ne(t)||!Array.isArray(e)||!e.length||e.some((function(e){return!e||"string"!=typeof e}));return(r=this.createNoGroupError(t,r))?(this.logger.warn([he.Group],de.DeleteGroupAttributes,{error:r,groupID:t,keys:e}),Promise.reject(r)):this.createGroupInstance(t).then((function(t){return t.updateGroupAttributes(e)}))},vt.prototype.queryGroupAttributes=function(e,t){var r=!ne(e)||!Array.isArray(t)&&void 0!==t||Array.isArray(t)&&(!t.length||t.some((function(e){return!e||"string"!=typeof e})));return(r=this.createNoGroupError(e,r))?(this.logger.warn([he.Group],de.QueryGroupAttributes,{error:r,groupID:e,keys:t}),Promise.reject(r)):this.createGroupInstance(e).then((function(e){return e.queryGroupAttributes(t)}))},vt.prototype.setGroupMemberNickname=function(e,t,r){var o=this.createNoGroupError(r,!ne(r)||!ne(t)||"string"!=typeof e);return o?(this.logger.warn([he.Group],de.SetGroupMemberNickname,{error:o,groupID:r,forUserID:t,nickname:e}),Promise.reject(o)):this.createGroupInstance(r).then((function(r){return r.setGroupMemberInfo(t,e,V.Nickname)}))},vt.prototype.setGroupMemberRole=function(e,t,r){var o=this.createNoGroupError(r,!ne(r)||!ne(t)||"number"!=typeof e);return o?(this.logger.warn([he.Group],de.SetGroupMemberRole,{error:o,groupID:r,forUserID:t,role:e}),Promise.reject(o)):this.createGroupInstance(r).then((function(r){return r.setGroupMemberInfo(t,e,V.Role)}))},vt.prototype.transferGroupOwner=function(e,t){var r=this.createNoGroupError(t,!ne(t)||!ne(e));return r?(this.logger.warn([he.Group],de.TransferGroupOwner,{error:r,groupID:t,toUserID:e}),Promise.reject(r)):this.createGroupInstance(t).then((function(t){return t.transferGroupOwner(e)}))},vt.prototype.queryGroupMemberInfo=function(e,t){var r=this.createNoGroupError(t,!ne(t)||!ne(e));return r?(this.logger.warn([he.Group],de.QueryGroupMemberInfo,{error:r,groupID:t,userID:e}),Promise.reject(r)):this.createGroupInstance(t).then((function(t){return t.queryGroupMemberInfo(e)}))},vt.prototype.inviteUsersIntoGroup=function(e,t){var r=this.createNoGroupError(t,!ne(t)||!Array.isArray(e)||!e.length);return r?(this.logger.warn([he.Group],de.InviteUsersIntoGroup,{error:r,groupID:t,userIDs:e}),Promise.reject(r)):this.createGroupInstance(t).then((function(t){return t.inviteUsersIntoGroup(e)}))},vt.prototype.kickGroupMembers=function(e,t){var r=this.createNoGroupError(t,!ne(t)||!Array.isArray(e)||!e.length);return r?(this.logger.warn([he.Group],de.KickGroupMembers,{error:r,groupID:t,userIDs:e}),Promise.reject(r)):this.createGroupInstance(t).then((function(t){return t.kickGroupMembers(e)}))},vt.prototype.queryGroupMemberList=function(e,t){var r,o=this.createNoGroupError(e,!ne(e));return o?(r={error:o,groupID:e,config:t},this.logger.warn([he.Group],de.QueryGroupMemberList,r),Promise.reject(o)):(t=Object.assign({count:100,nextFlag:0},t)).count<1?Promise.resolve({groupID:e,userList:[],nextFlag:t.nextFlag}):this.createGroupInstance(e).then((function(e){return e.queryGroupMemberList(t)}))},vt.prototype.queryGroupMemberCount=function(e){var t=this.createNoGroupError(e,!ne(e));return t?(this.logger.warn([he.Group],de.QueryGroupMemberCount,{error:t,groupID:e}),Promise.reject(t)):this.createGroupInstance(e).then((function(e){return e.queryGroupMemberCount()}))},vt.prototype.onPushGroupCreate=function(e){var t=this;this.groupDelIDMap.delete(e.group_id),this.createGroupInstance(e.group_id,e.group_name).then((function(r){r.onPushGroupCreate(e),t.eventBus.exec(Y.InnerJoinedGroup,r.groupID,r.groupName,r.groupAvatarUrl,P.Invited)}))},vt.prototype.onPushGroupMemberInvited=function(e){var t=this;this.groupDelIDMap.delete(e.group_id),this.createGroupInstance(e.group_id,e.group_name).then((function(r){r.onPushGroupMemberInvited(e),t.eventBus.exec(Y.InnerJoinedGroup,r.groupID,r.groupName,r.groupAvatarUrl,P.Invited)}))},vt.prototype.onPushGroupDestroy=function(e,t){t=t===J.im_push_group_destroy?P.Dismissed:P.KickedOut,this.deleteGroup(e,t)},vt.prototype.onPushGroupDataModify=function(e){this.groupDelIDMap.delete(e.group_id),this.createGroupInstance(e.group_id).then((function(t){t.onPushGroupDataModify(e)}))},vt.prototype.onPushGroupAttributesModify=function(e){this.groupDelIDMap.delete(e.group_id),this.createGroupInstance(e.group_id).then((function(t){t.onPushGroupAttributesModify(e)}))},vt.prototype.onPushGroupOwnerTransfer=function(e){this.groupDelIDMap.delete(e.group_id),this.createGroupInstance(e.group_id).then((function(t){t.onPushGroupOwnerTransfer(e)}))},vt.prototype.onPushGroupMemberChange=function(e){this.groupDelIDMap.delete(e.group_id),this.createGroupInstance(e.group_id).then((function(t){t.onPushGroupMemberChange(e)}))},vt.prototype.onLogined=function(){var e=this;this.isLogined=!1,this.mergeServerGroupList(Z.SDKLogin,"onLogined",(function(t){e.isLogined=!0,e.queryGroupsCallbackList.forEach((function(r){return e.handleQueryGroupsCallback(t,r)})),e.queryGroupsCallbackList.length=0;var r=new Map;t.forEach((function(e){return r.set(e.groupID,e)})),e.eventBus.exec(Y.InnerSyncGroups,r,!1)}))},vt.prototype.onLogout=function(){var e=this;this.roomMap.forEach((function(t){e.clearRoomMessageByID(t.groupID,t.destroyDelay,e.dbMgr),t.destroy(!0)})),this.groupMap.forEach((function(e){return e.destroy()})),this.roomMap.clear(),this.groupMap.clear(),this.groupEventMap.clear(),this.groupDelIDMap.clear(),this.roomIDs.length=0,this.isLogined=!1},vt.prototype.onUpdateSelf=function(){this.groupMap.forEach((function(e){return e.onUpdateSelf()}))},vt.prototype.onConnected=function(e){var t=this;e&&(this.mergeServerGroupList(Z.SDKHb,"onConnected",(function(e){var r=new Map;e.forEach((function(e){return r.set(e.groupID,e)})),t.eventBus.exec(Y.InnerSyncGroups,r,!0)})),this.roomMap.forEach((function(e){return e.onConnected()})),this.groupMap.forEach((function(e){return e.onConnected()})))},vt.prototype.onDisConnected=function(){this.roomMap.forEach((function(e){return e.onDisConnected()}))},vt.prototype.handleQueryGroupsCallback=function(e,t){var r=this,o=t.log,n=t.resolve,i=[],s=[];e.forEach((function(e){r.groupDelIDMap.get(e.groupID)||(i.push({baseInfo:{groupID:e.groupID,groupName:e.groupName,groupAvatarUrl:e.groupAvatarUrl},notificationStatus:e.notificationStatus}),s.push(r.createGroupInstance(e.groupID)))})),Promise.all(s).then((function(){o.time=Date.now()-o.time,o.count=i.length,r.logger.info([he.Group],de.QueryGroupList,o),n({groupList:i})}))},vt.prototype.registerInnerEvent=function(){this.eventBus.add(Y.InnerLogined,this.onLogined.bind(this)),this.eventBus.add(Y.InnerLogout,this.onLogout.bind(this)),this.eventBus.add(Y.InnerUpdateSelf,this.onUpdateSelf.bind(this)),this.eventBus.add(Y.InnerConnected,this.onConnected.bind(this)),this.eventBus.add(Y.InnerDisConnected,this.onDisConnected.bind(this))},vt.prototype.createRoomInstance=function(e){var t=this.findRoom(e);return t||(t=new ht(e,this.engineConfig,this.eventBus,this.dbMgr,this.connMgr),this.roomMap.set(e,t),this.roomIDs.every((function(t){return t!=e}))&&this.roomIDs.push(e)),t},vt.prototype.createGroupInstance=function(e,t){var r=this.groupMap.get(e);return r?Promise.resolve(r):(r=new mt(e,this.engineConfig,this.eventBus,this.dbMgr,this.connMgr),t&&(r.groupName=t),this.groupMap.set(e,r),this.groupEventMap.set(e,P.Created),this.dbMgr.getGroup(e).then((function(t){return(t=yt(yt({},t),{groupID:e})).dataSeq||(t.dataSeq=0),t.attributeSeq||(t.attributeSeq=0),t.memberSeq||(t.memberSeq=0),t.groupSeq||(t.groupSeq="0"),r.setDBGroup(t),r})))},vt.prototype.deleteGroup=function(e,t){var r,o,n,i,s=e.group_id,a=(this.groupEventMap.set(s,t),this.findGroup(s));a&&(this.groupMap.delete(s),r=(i=e.op_user).user_id,o=i.user_name,n=i.group_nick_name,i=i.role,r={userID:r},o&&(r.userName="string"==typeof o?o:oe(o)),n&&(r.memberNickname=n),i&&(r.memberRole=i),o=yt(yt({},r),{operatedUserInfo:r}),n={groupID:s,state:T.Quit,event:t===P.KickedOut?q.KickedOut:q.Left,operatedInfo:o,userList:[yt({},a.groupMember)]},this.eventBus.emit(Y.GroupMemberStateChanged,n),i={state:x.Quit,event:t,operatedInfo:o,groupInfo:a.createGroupFullInfo()},this.eventBus.emit(Y.GroupStateChanged,i),a.destroy()),this.dbMgr.deleteGroupList([s]),this.groupDelIDMap.set(s,!0),this.updateGroupSeq(null==(r=e.group_list_seq)?void 0:r.toString()),this.eventBus.exec(Y.InnerLeftGroup,s)},vt.prototype.quitGroup=function(e,t,r,o){var n,i=this;if(!ne(e))return n=ye(v.CommonModuleParamInvalid),this.logger.warn([he.Group],r,{error:n,groupID:e}),Promise.reject(n);var s={time:Date.now(),groupID:e};return this.connMgr.sendRequest(t,{group_id:e}).then((function(n){if(n.code)return a=ye(o,n.message,n.code),s.time=Date.now()-s.time,s.error=a,i.logger.warn([he.Group],r,s),Promise.reject(a);n.group_id=e,n.op_user={user_id:i.engineConfig.userID,user_name:i.engineConfig.userName};var a=i.findGroup(e);return a&&(n.op_user.group_nick_name=a.groupMember.memberNickname,n.op_user.role=a.groupMember.memberRole),i.deleteGroup(n,t===J.im_group_destroy?P.Dismissed:P.Left),s.time=Date.now()-s.time,i.logger.info([he.Group],r,s),{groupID:e}}))},vt.prototype.fetchServerPageGroup=function(e,t,r,o){var n=r==Z.Biz?Q.API:Q.SDK;return this.connMgr.sendRequest(J.im_group_list,{cur_list_seq:e,count:100,full_pull:o,degree:t,how:r},n,!0).then((function(e){if(e.code)return{max:0,list:[]};var t=e.cur_list_seq,r=e.max_list_seq;return{nextFlag:e.fetch_end||t&&r&&t.greaterThanOrEqual(r)?0:t,max:r,list:e.groups}}))},vt.prototype.mergeServerGroupList=function(e,t,r){var o=this,n=f.a.fromString(String(this.settings.getDBUser().groupSeq)||"0"),i=this.settings.mailHBFetchConfig.group_list_seq,s=this.settings.mailHBFetchConfig.fetch_group_list,a={time:Date.now(),dbSeq:n,hbSeq:i,how:e,action:t,fetch:s};s&&(n.lessThan(i)||e!=Z.SDKHb&&!Number(n.toString()))?this.dbMgr.getGroupList().then((function(t){var i=new Map,s=(t.forEach((function(e){return i.set(e.groupID,e)})),1),u=[];o.fetchServerPageGroup(n,s,e,0).then((function t(n){var c;n.list.forEach((function(e){var t,r,n,s,a,c,l=(p=e.info).group_id,p=p.group_name,h=oe(e.info.group_avatar);e.type?(o.groupDelIDMap.set(l,!0),i.has(l)&&(i.delete(l),u.push({state:x.Quit,event:P.Dismissed,operatedInfo:{},groupInfo:{baseInfo:{groupID:l,groupName:p,groupAvatarUrl:h}}}),o.eventBus.exec(Y.InnerLeftGroup,l))):(t=(a=e.info).member_count,r=a.all_member_seq,n=a.group_data_seq,s=a.attribute_seq,a=a.group_list_seq,e=e.info.not_notify?E.Disturb:E.Notify,(c=i.get(l))?(c.tatalMemberCount=t,c.notificationStatus=e):(c={groupID:l,groupName:p,groupAvatarUrl:h,tatalMemberCount:t,notificationStatus:e},r&&(c.memberSeq=+r.toString()),n&&(c.dataSeq=+n.toString()),s&&(c.attributeSeq=+s.toString()),a&&(c.groupSeq=a.toString()),c.attributes||(c.attributes={}),i.set(l,c),u.push({state:x.Enter,event:P.Invited,operatedInfo:{},groupInfo:{baseInfo:{groupID:l,groupName:p,groupAvatarUrl:h},notificationStatus:e}})))})),n.nextFlag&&o.engineConfig.token?o.fetchServerPageGroup(n.nextFlag,++s,e,1).then(t):(o.groupDelIDMap.size&&((c=Array.from(o.groupDelIDMap.keys())).forEach((function(e){return i.delete(e)})),o.dbMgr.deleteGroupList(c)),c=(n.max||o.settings.mailHBFetchConfig.group_list_seq).toString(),o.updateGroupSeq(c),n=Array.from(i.values()),o.dbMgr.addGroupList(n),n.forEach((function(e){return o.createGroupInstance(e.groupID,e.groupName)})),u.forEach((function(e){return o.eventBus.emit(Y.GroupStateChanged,e)})),a.time=Date.now()-a.time,a.count=n.length,a.changeList=u,o.logger.info([he.Group],"mergeServerGroupList",a,!0),r&&r(n))}))})):r&&(this.logger.info([he.Group],"mergeServerGroupList",a),this.dbMgr.getGroupList().then(r))},vt.prototype.updateGroupSeq=function(e){var t=this.settings.getDBUser();e&&t.groupSeq!=e&&(t.groupSeq=e,this.dbMgr.setUser(t))},vt.prototype.createNoRoomError=function(e,t){var r=ne(e)?this.findRoom(e)?0:v.RoomModuleUserIsNotInTheRoom:v.CommonModuleParamInvalid;return r?(r=ye(r),this.logger.warn([he.Group],t,{error:r,roomID:e}),r):null},vt.prototype.createNoGroupError=function(e,t){return t?ye(v.CommonModuleParamInvalid):this.findGroup(e)?null:(t=this.groupEventMap.get(e)==P.Dismissed?v.GroupModuleGroupDoesNotExist:v.GroupModuleUserIsNotInTheGroup,ye(t))},vt);function vt(e,t,r,o){this.isLogined=!1,this.queryGroupsCallbackList=[];var n=Ut.getInstance().settings;this.logger=Ut.getInstance().logger,this.settings=n,this.eventBus=t,this.engineConfig=n.getEngineConfig(e),this.dbMgr=r,this.connMgr=o,this.roomIDs=[],this.roomMap=new Map,this.groupMap=new Map,this.groupEventMap=new Map,this.groupDelIDMap=new Map,this.registerInnerEvent()}var wt=function(){return(wt=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},kt=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return s},Mt=(Object.defineProperty(It.prototype,"renewTokenTimeout",{get:function(){return 30},enumerable:!1,configurable:!0}),It.prototype.destroy=function(){this.stopHB(!0),this.logger.stop(),this.connMgr=null,this.eventBus=null,this.logger=null,this.settings=null,this.dataReport=null,this.crypto=null,this.engineConfig=null},It.prototype.login=function(e,t){var r=this;if(!e||!ne(e.userID)||!ie(e.userName))return o=ye(v.CommonModuleParamInvalid),this.logger.warn([he.User],de.Login,{error:o,userInfo:e}),Promise.reject(o);var o,n=kt(ue(t,0),2),i=n[0],s=n[1];if(i)return o=ye(i),this.logger.warn([he.User],de.Login,{error:o,expireTime:s,token:t}),Promise.reject(o);if(this.loginState==w.Connected)return this.engineConfig.userID!==e.userID?(n={error:o=ye(v.NetworkModuleUserHasAlreadyLogged),userID:e.userID,oldUserID:this.engineConfig.userID},this.logger.warn([he.User],de.Login,n),Promise.reject(o)):(this.engineConfig.tokenExpireTime<s&&this.updateToken(t,s),this.emitConnectionStateChanged(w.Connected,k.Success),Promise.resolve());this.engineConfig.userID=e.userID,e.userName&&(this.engineConfig.userName=e.userName),this.redirectTempLoginInfo.token=t,this.redirectTempLoginInfo.tokenExpireTime=s,this.dbMgr.setUserID(e.userID),this.logger.init(this.settings,this.engineConfig.appID+"",e),this.dataReport.begin("/sdk/init",0,null),this.connectUrls=this.connMgr.getUrls();var a={time:Date.now(),userInfo:e,expireTime:s};return this.connMgr.create([this.connectUrls]).then((function(){return r.connMgr.sendDispatchRequest(),r.settings.fetchConfig(r.connMgr,r.engineConfig.handle,t).then((function(e){return r.initDataReport(t,e)})),r.sendLoginRequest(t,s,Q.API,a,!0)}))},It.prototype.logout=function(e){var t=this,r=(this.logger.info([he.User],de.Logout,{state:this.loginState,reason:e}),{logout_reason:0,logout_check:this.k1SignLogoutBuffer});this.connMgr.sendRequest(J.sw_logout,r,e?Q.SDK:Q.API).then((function(){return t.connMgr.close()})).catch((function(){return t.connMgr.close()})),this.logger.stop(),this.stopHB(!0),this.resetEngineConfig(),this.updateToken("",0),this.eventBus.exec(Y.InnerLogout),this.loginState!==w.Disconnected&&this.emitConnectionStateChanged(w.Disconnected,k.Success)},It.prototype.renewToken=function(e){var t,r,o=this,n=(r=kt(ue(e,this.engineConfig.tokenExpireTime),2))[0],i=r[1];if(n)return t=ye(n),this.logger.warn([he.User],de.RenewToken,{error:t,expireTime:i,token:e}),Promise.reject(t);if((r=Date.now())-this.lastRenewTokenTime<500)return t=ye(v.CommonModuleTriggerSDKFrequencyLimit),this.logger.warn([he.User],de.RenewToken,t),Promise.reject(t);var s={time:this.lastRenewTokenTime=r};n={third_token:re(e)};return this.connMgr.sendRequestWithHook(J.sw_renew_token,n,Q.API,(function(e,t){t&&(t.sdk_duration=i-Math.floor(Date.now()/1e3))})).then((function(t){return t.code?(t=ye(v.NetworkModuleTokenInvalid,t.message,t.code),s.time=Date.now()-s.time,s.error=t,o.logger.warn([he.User],de.RenewToken,s),Promise.reject(t)):(o.updateToken(e,i),o.startCheckTokenExpireTime(i),s.time=Date.now()-s.time,o.logger.info([he.User],de.RenewToken,s),{token:e})}))},It.prototype.updateUserName=function(e){var t=this;if(!ie(e))return o=ye(v.CommonModuleParamInvalid),this.logger.warn([he.User],de.UpdateUserName,{error:o,userName:e}),Promise.reject(o);var r={time:Date.now(),userName:e},o={user_name:re(e),set_flag:1};return this.connMgr.sendRequest(J.im_account_modify_user_info,o).then((function(o){return o.code?(o=ye(v.CommonModuleIMServerError,o.message,o.code),r.time=Date.now()-r.time,r.error=o,t.logger.warn([he.User],de.UpdateUserName,r),Promise.reject(o)):(t.engineConfig.userName=e,(o=t.settings.getDBUser()).userName=e,t.dbMgr.setUser(o),t.eventBus.exec(Y.InnerUpdateSelf),r.time=Date.now()-r.time,t.logger.info([he.User],de.UpdateUserName,r),{userName:e})}))},It.prototype.updateUserExtendedData=function(e){var t=this;if(!ie(e))return o=ye(v.CommonModuleParamInvalid),this.logger.warn([he.User],de.UpdateUserExtendedData,{error:o,extendedData:e}),Promise.reject(o);var r={time:Date.now(),extendedData:e},o={extra:re(e),set_flag:10};return this.connMgr.sendRequest(J.im_account_modify_user_info,o).then((function(o){return o.code?(o=ye(v.CommonModuleIMServerError,o.message,o.code),r.time=Date.now()-r.time,r.error=o,t.logger.warn([he.User],de.UpdateUserExtendedData,r),Promise.reject(o)):(t.engineConfig.userExtendedData=e,(o=t.settings.getDBUser()).extendedData=e,t.dbMgr.setUser(o),r.time=Date.now()-r.time,t.logger.info([he.User],de.UpdateUserExtendedData,r),{extendedData:e})}))},It.prototype.updateUserAvatarUrl=function(e){var t=this;if(!ie(e))return o=ye(v.CommonModuleParamInvalid),this.logger.warn([he.User],de.UpdateUserAvatarUrl,{error:o,userAvatarUrl:e}),Promise.reject(o);var r={time:Date.now(),userAvatarUrl:e},o={user_avatar:re(e),set_flag:16};return this.connMgr.sendRequest(J.im_account_modify_user_info,o).then((function(o){return o.code?(o=ye(v.CommonModuleIMServerError,o.message,o.code),r.time=Date.now()-r.time,r.error=o,t.logger.warn([he.User],de.UpdateUserAvatarUrl,r),Promise.reject(o)):(t.engineConfig.userAvatarUrl=e,(o=t.settings.getDBUser()).userAvatarUrl=e,t.dbMgr.setUser(o),t.eventBus.exec(Y.InnerUpdateSelf),r.time=Date.now()-r.time,t.logger.info([he.User],de.UpdateUserAvatarUrl,r),{userAvatarUrl:e})}))},It.prototype.reportZPNs=function(){var e=this.engineConfig.ZPNsPushID;e&&this.loginState==w.Connected&&this.connMgr.sendRequest(J.im_userstate_zpns_report,{zpns_push_id:e},Q.SDK)},It.prototype.onPushRedirect=function(e){e&&e.length&&(this.redirectTempLoginInfo.push=!0,this.createConnection(e,this.redirectTempLoginInfo.token,this.redirectTempLoginInfo.tokenExpireTime,J.sw_push_redirect))},It.prototype.onConnected=function(e){var t,r,o,n=this;return e||this.needRelogin?(t={isReconnect:e,action:"onConnected"},this.needRelogin&&(this.needRelogin=!1,t.cmd=J.sw_push_kickout),r=(o=this.engineConfig).token,o=o.tokenExpireTime,r&&o?this.sendLoginRequest(r,o,Q.SDK,t).then((function(){n.eventBus.exec(Y.InnerConnected,e)})):(t.error="token is null",this.logger.warn([he.User],de.Login,t),Promise.reject())):(this.eventBus.exec(Y.InnerConnected,e),Promise.resolve())},It.prototype.onDisConnected=function(e){this.stopHB(e),e&&this.logger.stop(),this.emitConnectionStateChanged(w.Disconnected,k.LoginTimeout),this.eventBus.exec(Y.InnerDisConnected)},It.prototype.onPushKickout=function(e){1==e.need_relogin?this.needRelogin=!0:this.closeConnection(k.KickedOut,JSON.stringify(e))},It.prototype.initDataReport=function(e,t){this.logger.setUploadURL(t[0]),this.dataReport.init(this.engineConfig.appID,t[1]),this.dataReport.start(this.engineConfig.userID,e),e={urls:this.connectUrls.join().replaceAll("wss://",""),logger:t[0].replace("https://",""),report:t[1].replace("wss://","")},this.dataReport.end("/sdk/init",0,{sdk_config:e}),this.logger.info([he.Connection],"fetchSetting",e)},It.prototype.createConnection=function(e,t,r,o){var n=this,i={time:Date.now(),action:o,serveres:e};return this.connectUrls=0==e[0].indexOf("wss://")?e:this.connMgr.getUrls(),this.dataReport.report("/sdk/reconnect",{domain:e}),this.handleLoginRedirectRequest(!1),this.connMgr.create([this.connectUrls]).then((function(){return n.sendLoginRequest(t,r,Q.SDK,i)})).catch((function(e){throw n.handleLoginRedirectRequest(!0),e}))},It.prototype.sendHandshakeRequest=function(){this.connMgr.sendRequestWithNoRsp(J.sw_handshake_req,wt({},this.settings.deviceInfo))},It.prototype.sendLoginRequest=function(e,t,r,o,n){var i=this,s=(this.sendHandshakeRequest(),n?w.Connecting:w.Reconnecting),a=(this.emitConnectionStateChanged(s,k.ActiveLogin),wt(wt({},this.settings.deviceInfo),{user_name:re(this.engineConfig.userName),client_stamp:re(this.crypto.generateNonce()),k1_sign:this.crypto.generateK1Sign(),login_token:re(e)}));return this.reloginTokenBuffer&&(a.relogin_token=this.reloginTokenBuffer),this.engineConfig.ZPNsPushID&&(a.zpns_push_id=this.engineConfig.ZPNsPushID),this.connMgr.sendRequestWithHook(J.sw_login,a,r,(function(e,r){n&&(i.redirectTempLoginInfo.seq=e.seq),r&&(r.sdk_duration=t-Math.floor(Date.now()/1e3),r.server_ip=i.connectUrls[0])})).then((function(r){var n=r.code;if(n){if((s=r.redirect_server)&&s.length)return c="redirect login error code: ".concat(n),i.createConnection(s,e,t,c);if(n==v.NetworkModuleNetworkError&&i.redirectTempLoginInfo.push)return;var s=1e3*t,u=(50111==n&&s&&s<Date.now()&&i.closeConnection(k.LoginInterrupted,"Token expire"),i.redirectTempLoginInfo.push=!1,ye(v.NetworkModuleServerError,r.message,n));return o.time=Date.now()-o.time,o.error=u,i.logger.warn([he.User],de.Login,o),Promise.reject(u)}if(n!=v.Success){i.userNameBuffer.user_name=a.user_name,i.reloginTokenBuffer=r.relogin_token,i.k1SignLogoutBuffer=i.crypto.md5Bytes(a.k1_sign),i.engineConfig.sessionID=r.rspHeader.session_id,i.engineConfig.serverUserID=r.rspHeader.user_nid,i.engineConfig.controls=r.rspHeader.controls,i.settings.serverOffsetTime=r.server_timestamp.toString()-Date.now(),i.dataReport.setServerUserID(r.rspHeader.user_nid.toString()),i.crypto.decryptK2Sign(r.k2_sign),i.redirectTempLoginInfo.push=!1,i.startHB(r.hb_interval,r.hb_timeout),i.updateToken(e,t),i.startCheckTokenExpireTime(t);try{i.setMailHBFetchConfig(JSON.parse(r.im_conf_json))}catch(u){}i.logger.start(),i.emitConnectionStateChanged(w.Connected,k.Success),i.reportZPNs();var c=i.handleLoginRedirectRequest(!0);return o.time=Date.now()-o.time,o.seq=c,i.logger.info([he.User],de.Login,o),Promise.all([i.dbMgr.getUserList().then((function(e){var t=i.setDBUser(i.engineConfig.userID,e);t={conv_list_seq:f.a.fromString(String(t.convSeq))};return i.connMgr.sendRequest(J.im_usermail_hb,t,Q.SDK).then((function(t){return i.setMailHBFetchConfig(t),e}))})),i.dbMgr.getConversationList()]).then((function(e){var t;(t=i.eventBus).exec.apply(t,function(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||((o=o||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}([Y.InnerLogined],kt(e),!1))}))}}))},It.prototype.updateToken=function(e,t){this.engineConfig.token=e,this.engineConfig.tokenExpireTime=t,this.dataReport.start(this.engineConfig.userID,e),this.logger.renewToken(e)},It.prototype.resetEngineConfig=function(){this.engineConfig.sessionID=void 0,this.engineConfig.serverUserID=void 0,this.engineConfig.controls=void 0},It.prototype.startHB=function(e,t){var r=this;!e||e<0||(this.stopHB(!1),this.hbLog=!0,this.settings.hbTimeoutMaxCount=Math.ceil((t||3e4)/e),this.hbTimer=setInterval((function(){r.connMgr.sendRequestWithHeartbeat(J.sw_hb,r.userNameBuffer,r.hbLog,e).then((function(t){if(r.hbLog=!1,r.settings)return t.code?(t.code==v.NetworkModuleNetworkError&&r.hbTimeoutCount++,t.timeoutCount=r.hbTimeoutCount,(r.hbTimeoutCount>=r.settings.hbTimeoutMaxCount||1==t.code)&&(r.stopHB(!1),r.onConnected(!0)),-1!=r.settings.needReloginCodeList.indexOf(t.code)&&r.closeConnection(k.LoginInterrupted,"Session id invalid"),t.state=r.loginState,void r.logger.warn([he.User],"userHB",t)):void(t.server_timestamp&&(r.hbTimeoutCount=0,r.settings.serverOffsetTime=t.server_timestamp.toString()-Date.now(),t.heartbeat_interval!=e&&r.startHB(t.heartbeat_interval,t.hb_timeout)))}))}),e),this.logger.info([he.User],"userHB","start "+e))},It.prototype.stopHB=function(e){this.hbTimer&&clearInterval(this.hbTimer),this.hbTimeoutCount=0,this.hbTimer=0,e&&(this.renewTokenTimer&&clearTimeout(this.renewTokenTimer),this.expireTokenTimer&&clearTimeout(this.expireTokenTimer),this.renewTokenTimer=0,this.expireTokenTimer=0)},It.prototype.startCheckTokenExpireTime=function(e){var t=this;(e=(this.renewTokenTimer&&clearTimeout(this.renewTokenTimer),this.expireTokenTimer&&clearTimeout(this.expireTokenTimer),e-Math.floor(Date.now()/1e3)))<this.renewTokenTimeout?(this.logger.info([he.User],"tokenWillExpire","token will expire"),this.eventBus.emit(Y.TokenWillExpire,{second:e})):this.renewTokenTimer=setTimeout((function(){t.logger.info([he.User],"tokenWillExpire","token will expire");var e={second:t.renewTokenTimeout};t.eventBus.emit(Y.TokenWillExpire,e)}),1e3*(e-this.renewTokenTimeout)),this.expireTokenTimer=setTimeout((function(){return t.logout("token expire")}),1e3*(e-2))},It.prototype.emitConnectionStateChanged=function(e,t,r){this.loginState=e,this.eventBus.emit(Y.ConnectionStateChanged,{state:e,event:t,extendedData:r||""})},It.prototype.handleLoginRedirectRequest=function(e){var t=0;return this.redirectTempLoginInfo.seq&&(t=this.connMgr.responseRequest(this.redirectTempLoginInfo.seq,e)),e&&(this.redirectTempLoginInfo.seq=0,this.redirectTempLoginInfo.token="",this.redirectTempLoginInfo.tokenExpireTime=0),t},It.prototype.closeConnection=function(e,t){this.stopHB(!0),this.logger.stop(),this.logger.upload(),this.updateToken("",0),this.resetEngineConfig(),this.eventBus.exec(Y.InnerLogout),this.connMgr.close(),this.emitConnectionStateChanged(w.Disconnected,e,t)},It.prototype.setMailHBFetchConfig=function(e){var t=e.c2c_msg_seq,r=e.conv_list_seq,o=e.group_list_seq;e=function(e,t){var r={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}(e,["c2c_msg_seq","conv_list_seq","group_list_seq"]);Object.assign(this.settings.mailHBFetchConfig,e),t&&(this.settings.mailHBFetchConfig.c2c_msg_seq=t),r&&(this.settings.mailHBFetchConfig.conv_list_seq=r),o&&(this.settings.mailHBFetchConfig.group_list_seq=o)},It.prototype.setDBUser=function(e,t){return(t=t.find((function(t){return t.userID==e})))?t.nid=this.engineConfig.serverUserID.toString():t={userID:e,userName:this.engineConfig.userName,userAvatarUrl:"",nid:this.engineConfig.serverUserID.toString(),c2cSeq:"0",convSeq:"0",groupSeq:"0"},this.engineConfig.userName?t.userName=this.engineConfig.userName:t.userName&&(this.engineConfig.userName=t.userName),this.engineConfig.userAvatarUrl=t.userAvatarUrl,this.settings.setDBUser(t),this.dbMgr.setUser(t),t},It);function It(e,t,r,o){this.userNameBuffer={user_name:new Uint8Array},this.hbTimer=0,this.hbTimeoutCount=0,this.hbLog=!1,this.loginState=w.Disconnected,this.connectUrls=[],this.needRelogin=!1,this.redirectTempLoginInfo={seq:0,token:"",tokenExpireTime:0,push:!1},this.lastRenewTokenTime=0,this.logger=Ut.getInstance().logger,this.dataReport=Ut.getInstance().dataReport,this.settings=Ut.getInstance().settings,this.crypto=Ut.getInstance().crypto,this.engineConfig=this.settings.getEngineConfig(e),this.eventBus=t,this.dbMgr=r,this.connMgr=o}Dt.prototype.destroy=function(){this.clearCallTimeout(),this.connMgr=null,this.eventBus=null,this.logger=null,this.engineConfig=null},Dt.prototype.callInvite=function(e,t){var r=this,o={time:Date.now(),invitees:e,config:t},n=(e=Array.from(new Set(e.filter((function(e){return ne(e)})))),{call_id:this.callID,user_ids:e,timeout:+t.timeout||90,payload:t.extendedData?re(t.extendedData):void 0});return this.isCaller=!0,this.connMgr.sendRequest(J.im_call_create,n).then((function(n){if(n.code)return i=ye(v.MessageModuleCallError,n.message,n.code),o.time=Date.now()-o.time,o.error=i,r.logger.warn([he.Call],de.CallInvite,o),Promise.reject(i);var i=[].concat(n.err_list.map((function(e){return{userID:e.user_id,userState:e.user_state}})));r.checkCallTimeout(e,1e3*(n.timeout||+t.timeout)),n={callID:n.call_id,timeout:n.timeout,errorInvitees:i};return o.time=Date.now()-o.time,o.result=n,r.logger.info([he.Call],de.CallInvite,o),n}))},Dt.prototype.callCancel=function(e,t,r,o){var n=this,i=(void 0===o&&(o=U.Cancel),{time:Date.now(),callID:t,invitees:e,config:r,state:o});e={user_ids:e=Array.from(new Set(e.filter((function(e){return ne(e)})))),call_id:t,state:o,extended_data:this.encodeExtendedData(r)};return this.connMgr.sendRequest(J.im_call_cancel,e).then((function(e){if(n.clearCallTimeout(),e.code)return r=ye(v.MessageModuleCallError,e.message,e.code),i.time=Date.now()-i.time,i.error=r,n.logger.warn([he.Call],de.CallCancel,i),Promise.reject(r);var r=[].concat(e.err_list.map((function(e){return e.user_id})));e={callID:t,errorInvitees:r};return i.time=Date.now()-i.time,i.result=e,n.logger.info([he.Call],de.CallCancel,i),e}))},Dt.prototype.callAccept=function(e,t){var r=this,o={time:Date.now(),callID:e,config:t};t={call_id:e,extended_data:this.encodeExtendedData(t)};return this.connMgr.sendRequest(J.im_call_accept,t).then((function(t){return t.code?(t=ye(v.MessageModuleCallError,t.message,t.code),o.time=Date.now()-o.time,o.error=t,r.logger.warn([he.Call],de.CallAccept,o),Promise.reject(t)):(o.time=Date.now()-o.time,r.logger.info([he.Call],de.CallAccept,o),{callID:e})}))},Dt.prototype.callReject=function(e,t){var r=this,o={time:Date.now(),callID:e,config:t};t={call_id:e,extended_data:this.encodeExtendedData(t)};return this.connMgr.sendRequest(J.im_call_refuse,t).then((function(t){return t.code?(t=ye(v.MessageModuleCallError,t.message,t.code),o.time=Date.now()-o.time,o.error=t,r.logger.warn([he.Call],de.CallReject,o),Promise.reject(t)):(o.time=Date.now()-o.time,r.logger.info([he.Call],de.CallReject,o),{callID:e})}))},Dt.prototype.checkCallInfo=function(){var e,t=this;this.isCaller&&(e={call_id:this.callID},this.connMgr.sendRequest(J.im_call_info,e,Q.SDK).then((function(e){e.code||e.user_list.map((function(e){var r=e.user_id,o=e.user_state;r={invitee:r,extended_data:e.extended_data};o==M.Accepted?t.onCallInvitationAccepted(r):o==M.Rejected&&t.onCallInvitationRejected(r)}))})))},Dt.prototype.onCallInvitationReceived=function(e,t){var r=this;this.connMgr.sendRequest(J.im_call_ack,{call_id:e},Q.SDK).then((function(){var o={callID:e,timeout:t.timeout,inviter:t.caller,extendedData:oe(t.payload)};r.eventBus.emit(Y.CallInvitationReceived,o)}))},Dt.prototype.onCallInvitationCancelled=function(e){var t={callID:e.call_id,inviter:e.caller,extendedData:oe(e.extended_data)};if(this.clearCallTimeout(),e.state==U.Timeout)return this.onCallInvitationTimeout();this.answeredInvitees.length=0,this.eventBus.emit(Y.CallInvitationCancelled,t)},Dt.prototype.onCallInvitationAccepted=function(e){var t={callID:e.call_id,invitee:e.invitee,extendedData:oe(e.extended_data)};this.answeredInvitees.push(e.invitee),this.eventBus.emit(Y.CallInvitationAccepted,t)},Dt.prototype.onCallInvitationRejected=function(e){var t={callID:e.call_id,invitee:e.invitee,extendedData:oe(e.extended_data)};this.answeredInvitees.push(e.invitee),this.eventBus.emit(Y.CallInvitationRejected,t)},Dt.prototype.onCallInvitationTimeout=function(){var e={callID:this.callID};this.eventBus.emit(Y.CallInvitationTimeout,e)},Dt.prototype.checkCallTimeout=function(e,t){var r=this;this.clearCallTimeout(),this.timer=setTimeout((function(){var t=U.Timeout,o=e.filter((function(e){return-1==r.answeredInvitees.indexOf(e)}));r.callCancel(o,r.callID,void 0,t).then((function(){var t={callID:r.callID,invitees:e};r.eventBus.emit(Y.CallInviteesAnsweredTimeout,t),r.timer=null,r.answeredInvitees.length=0}))}),t)},Dt.prototype.clearCallTimeout=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},Dt.prototype.encodeExtendedData=function(e){return(e=(null==e?void 0:e.extendedData)||"")?re(e):void 0};var St=Dt;function Dt(e,t,r,o){this.answeredInvitees=[],this.isCaller=!1,this.timer=null,this.logger=Ut.getInstance().logger,this.callID=e,this.engineConfig=t,this.eventBus=r,this.connMgr=o}Rt.prototype.registerInnerEvent=function(){this.eventBus.add(Y.InnerLogined,this.onLogined.bind(this)),this.eventBus.add(Y.InnerConnected,this.onConnected.bind(this))},Rt.prototype.destroy=function(){this.callKitMap.clear(),this.connMgr=null,this.eventBus=null,this.logger=null,this.engineConfig=null},Rt.prototype.callInvite=function(e,t){var r,o;return Array.isArray(e)&&e.length&&"number"==typeof t.timeout&&t.timeout%1==0&&t.timeout>=this.timeoutRules.MIN&&t.timeout<=this.timeoutRules.MAX?this.getCallKitInstance(te()).callInvite(e,t):(o={error:r=ye(v.CommonModuleParamInvalid),invitees:e,config:t},this.logger.warn([he.Call],de.CallInvite,o),Promise.reject(r))},Rt.prototype.callCancel=function(e,t,r){var o;return ne(t)&&Array.isArray(e)&&e.length?this.getCallKitInstance(t).callCancel(e,t,r):(o=ye(v.CommonModuleParamInvalid),this.logger.warn([he.Call],de.CallCancel,{error:o,callID:t,invitees:e,config:r}),Promise.reject(o))},Rt.prototype.callAccept=function(e,t){var r;return ne(e)?this.getCallKitInstance(e).callAccept(e,t):(r=ye(v.CommonModuleParamInvalid),this.logger.warn([he.Call],de.CallAccept,{error:r,callID:e,config:t}),Promise.reject(r))},Rt.prototype.callReject=function(e,t){var r;return ne(e)?this.getCallKitInstance(e).callReject(e,t):(r=ye(v.CommonModuleParamInvalid),this.logger.warn([he.Call],de.CallReject,{error:r,callID:e,config:t}),Promise.reject(r))},Rt.prototype.onPushCallInvited=function(e){var t=e.call_id;this.getCallKitInstance(t).onCallInvitationReceived(t,e)},Rt.prototype.onPushCallCancel=function(e){var t=e.call_id;this.getCallKitInstance(t).onCallInvitationCancelled(e),this.destroyCallKit(t)},Rt.prototype.onPushCallAccept=function(e){var t=e.call_id;this.getCallKitInstance(t).onCallInvitationAccepted(e),this.destroyCallKit(t)},Rt.prototype.onPushCallReject=function(e){var t=e.call_id;this.getCallKitInstance(t).onCallInvitationRejected(e),this.destroyCallKit(t)},Rt.prototype.getCallKitInstance=function(e){var t=this.callKitMap.get(e);return t||(t=new St(e,this.engineConfig,this.eventBus,this.connMgr),this.callKitMap.set(e,t)),t},Rt.prototype.destroyCallKit=function(e){var t=this.callKitMap.get(e);null!=t&&t.destroy(),this.callKitMap.delete(e)},Rt.prototype.onLogined=function(){this.checkCallInfo()},Rt.prototype.onConnected=function(e){e&&this.checkCallInfo()},Rt.prototype.checkCallInfo=function(){this.callKitMap.forEach((function(e){e.checkCallInfo()}))};var Ct=Rt;function Rt(e,t,r){this.timeoutRules={MIN:1,MAX:600},this.callKitMap=new Map,this.engineConfig=Ut.getInstance().settings.getEngineConfig(e),this.logger=Ut.getInstance().logger,this.eventBus=t,this.connMgr=r,this.registerInnerEvent()}n=function(e,t,r,o){var n,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;0<=a;a--)(n=e[a])&&(s=(i<3?n(s):3<i?n(t,r,s):n(t,r))||s);return 3<i&&s&&Object.defineProperty(t,r,s),s};var At=(Ot.prototype.handlePushEvent=function(e,t,r){switch(e){case J.im_push_c2c_msg:case J.im_push_group_msg:case J.im_push_room_msg:this.convMgr.onPushMessage(t,e,r);break;case J.im_push_c2c_command:case J.im_push_group_command:case J.im_push_room_command:this.convMgr.onPushCommand(t,e,r);break;case J.im_push_room_enter:this.groupMgr.onPushRoomEnter(t);break;case J.im_push_room_quit:this.groupMgr.onPushRoomQuit(t);break;case J.im_push_room_kickout:this.groupMgr.onPushRoomKickout(t);break;case J.im_push_room_attrs:this.groupMgr.onPushRoomAttributesModify(t);break;case J.im_push_group_create:this.groupMgr.onPushGroupCreate(t);break;case J.im_push_group_invite:this.groupMgr.onPushGroupMemberInvited(t);break;case J.im_push_group_member_kickout:case J.im_push_group_destroy:this.groupMgr.onPushGroupDestroy(t,e);break;case J.im_push_group_modify_data:this.groupMgr.onPushGroupDataModify(t);break;case J.im_push_group_modify_attributes:this.groupMgr.onPushGroupAttributesModify(t);break;case J.im_push_group_owner_transfer:this.groupMgr.onPushGroupOwnerTransfer(t);break;case J.im_push_group_member_change:this.groupMgr.onPushGroupMemberChange(t);break;case J.im_push_call_invite:this.callMgr.onPushCallInvited(t);break;case J.im_push_call_cancel:this.callMgr.onPushCallCancel(t);break;case J.im_push_call_accept:this.callMgr.onPushCallAccept(t);break;case J.im_push_call_refuse:this.callMgr.onPushCallReject(t);break;case J.sw_push_kickout:this.userMgr.onPushKickout(t);break;case J.sw_push_redirect:this.userMgr.onPushRedirect(t.redirect_server)}},Ot.prototype.createNotLoggedError=function(e,t){var r;return this.engineConfig.userID&&this.engineConfig.token?null:(r=ye(v.NetworkModuleUserIsNotLogged),this.logger.warn([e],t,r),r)},Ot.prototype.setContext=function(e){this.eventBus.setContext(e)},Ot.prototype.setZPNsContext=function(e){var t=e.pushSDKVersion.length,r=e.pushID.length,n=new Uint8Array(9+t+r);n[0]=175,n[1]=0,n[2]=1,n[3]=1,n[4]=7,n[5]=0,n[6]=t,n[7]=r>>8,n[8]=r-(n[7]<<8),n.set(re(e.pushSDKVersion),9),n.set(re(e.pushID),9+t),r=o.Base64.fromUint8Array(n);e.base64=r,this.engineConfig&&(this.engineConfig.ZPNsPushID=r),this.userMgr&&this.userMgr.reportZPNs(),this.logger.info([he.Manager],"reportZPNs",e)},Ot.prototype.destroy=function(){this.eventBus&&this.eventBus.off(),this.eventBus=null,this.connMgr.destroy(),this.connMgr=null,this.groupMgr.destroy(),this.groupMgr=null,this.convMgr.destroy(),this.convMgr=null,this.userMgr.destroy(),this.userMgr=null,this.callMgr.destroy(),this.callMgr=null,this.logger=null,this.engineConfig=null},Ot.prototype.uploadLog=function(){return this.logger.info([he.Manager],de.UploadLog),this.logger.upload(!0)},Ot.prototype.on=function(e,t){this.logger.info([he.Manager],"API.on",e+("function"==typeof t?":1":":0")),this.eventBus.on(e,t)},Ot.prototype.off=function(e){this.logger.info([he.Manager],"API.off",e),this.eventBus.off(e)},Ot.prototype.login=function(e,t){return this.userMgr.login(e,t)},Ot.prototype.logout=function(){this.groupMgr.clearRoomMessage(),this.userMgr.logout(),Ut.getInstance().settings.unInit(this.handle)},Ot.prototype.renewToken=function(e){return this.userMgr.renewToken(e)},Ot.prototype.queryUsersInfo=function(e,t){return this.convMgr.queryUsersInfo(e,t)},Ot.prototype.updateUserName=function(e){return this.userMgr.updateUserName(e)},Ot.prototype.updateUserAvatarUrl=function(e){return this.userMgr.updateUserAvatarUrl(e)},Ot.prototype.updateUserExtendedData=function(e){return this.userMgr.updateUserExtendedData(e)},Ot.prototype.queryConversationList=function(e){return this.convMgr.queryList(e)},Ot.prototype.deleteConversation=function(e,t,r){return this.convMgr.delete(e,t,r)},Ot.prototype.setConversationNotificationStatus=function(e,t,r){return this.convMgr.setNotificationStatus(e,t,r)},Ot.prototype.clearConversationUnreadMessageCount=function(e,t){return this.convMgr.clearUnreadMessageCount(e,t)},Ot.prototype.sendMessage=function(e,t,r,o){return this.convMgr.sendMessage(e,t,r,o)},Ot.prototype.sendMediaMessage=function(e,t,r,o,n){return this.convMgr.sendMediaMessage(e,t,r,o,n)},Ot.prototype.deleteMessages=function(e,t,r,o){return this.convMgr.deleteMessages(e,t,r,o)},Ot.prototype.deleteAllMessage=function(e,t,r){return this.convMgr.deleteAllMessage(e,t,r)},Ot.prototype.queryHistoryMessage=function(e,t,r){return this.convMgr.queryHistoryMessage(e,t,r)},Ot.prototype.createRoom=function(e,t){return this.groupMgr.createRoom(e,t)},Ot.prototype.enterRoom=function(e,t){return this.groupMgr.createRoom(e,t,!0)},Ot.prototype.joinRoom=function(e){return this.groupMgr.joinRoom(e)},Ot.prototype.leaveRoom=function(e){return this.groupMgr.leaveRoom(e)},Ot.prototype.queryRoomMemberList=function(e,t){return this.groupMgr.queryRoomMemberList(e,t)},Ot.prototype.queryRoomOnlineMemberCount=function(e){return this.groupMgr.queryRoomOnlineMemberCount(e)},Ot.prototype.queryRoomAllAttributes=function(e){return this.groupMgr.queryRoomAllAttributes(e)},Ot.prototype.setRoomAttributes=function(e,t,r){return this.groupMgr.setRoomAttributes(e,t,r)},Ot.prototype.deleteRoomAttributes=function(e,t,r){return this.groupMgr.deleteRoomAttributes(e,t,r)},Ot.prototype.beginRoomAttributesBatchOperation=function(e,t){this.groupMgr.beginRoomAttributesBatchOperation(e,t)},Ot.prototype.endRoomAttributesBatchOperation=function(e){return this.groupMgr.endRoomAttributesBatchOperation(e)},Ot.prototype.createGroup=function(e,t,r){return this.groupMgr.createGroup(e,t,r)},Ot.prototype.joinGroup=function(e){return this.groupMgr.joinGroup(e)},Ot.prototype.leaveGroup=function(e){return this.groupMgr.leaveGroup(e)},Ot.prototype.dismissGroup=function(e){return this.groupMgr.dismissGroup(e)},Ot.prototype.queryGroupList=function(){return this.groupMgr.queryGroupList()},Ot.prototype.updateGroupName=function(e,t){return this.groupMgr.updateGroupName(e,t)},Ot.prototype.updateGroupNotice=function(e,t){return this.groupMgr.updateGroupNotice(e,t)},Ot.prototype.updateGroupAvatarUrl=function(e,t){return this.groupMgr.updateGroupAvatarUrl(e,t)},Ot.prototype.queryGroupInfo=function(e){return this.groupMgr.queryGroupInfo(e)},Ot.prototype.setGroupAttributes=function(e,t){return this.groupMgr.setGroupAttributes(e,t)},Ot.prototype.deleteGroupAttributes=function(e,t){return this.groupMgr.deleteGroupAttributes(e,t)},Ot.prototype.queryGroupAttributes=function(e,t){return this.groupMgr.queryGroupAttributes(e,t)},Ot.prototype.setGroupMemberNickname=function(e,t,r){return this.groupMgr.setGroupMemberNickname(e,t,r)},Ot.prototype.setGroupMemberRole=function(e,t,r){return this.groupMgr.setGroupMemberRole(e,t,r)},Ot.prototype.transferGroupOwner=function(e,t){return this.groupMgr.transferGroupOwner(e,t)},Ot.prototype.queryGroupMemberInfo=function(e,t){return this.groupMgr.queryGroupMemberInfo(e,t)},Ot.prototype.inviteUsersIntoGroup=function(e,t){return this.groupMgr.inviteUsersIntoGroup(e,t)},Ot.prototype.kickGroupMembers=function(e,t){return this.groupMgr.kickGroupMembers(e,t)},Ot.prototype.queryGroupMemberList=function(e,t){return this.groupMgr.queryGroupMemberList(e,t)},Ot.prototype.queryGroupMemberCount=function(e){return this.groupMgr.queryGroupMemberCount(e)},Ot.prototype.callInvite=function(e,t){return this.callMgr.callInvite(e,t)},Ot.prototype.callCancel=function(e,t,r){return this.callMgr.callCancel(e,t,r)},Ot.prototype.callAccept=function(e,t){return this.callMgr.callAccept(e,t)},Ot.prototype.callReject=function(e,t){return this.callMgr.callReject(e,t)},n([b(he.User,de.RenewToken)],Ot.prototype,"renewToken",null),n([b(he.User,de.QueryUsersInfo)],Ot.prototype,"queryUsersInfo",null),n([b(he.User,de.UpdateUserName)],Ot.prototype,"updateUserName",null),n([b(he.User,de.UpdateUserAvatarUrl)],Ot.prototype,"updateUserAvatarUrl",null),n([b(he.User,de.UpdateUserExtendedData)],Ot.prototype,"updateUserExtendedData",null),n([b(he.Conversation,de.QueryConversationList)],Ot.prototype,"queryConversationList",null),n([b(he.Conversation,de.DeleteConversation)],Ot.prototype,"deleteConversation",null),n([b(he.Conversation,de.SetConversationNotificationStatus)],Ot.prototype,"setConversationNotificationStatus",null),n([b(he.Conversation,de.ClearConversationUnreadMessageCount)],Ot.prototype,"clearConversationUnreadMessageCount",null),n([b(he.Conversation,"sendMessage")],Ot.prototype,"sendMessage",null),n([b(he.Conversation,de.SendMediaMessage)],Ot.prototype,"sendMediaMessage",null),n([b(he.Conversation,de.DeleteMessages)],Ot.prototype,"deleteMessages",null),n([b(he.Conversation,de.DeleteAllMessage)],Ot.prototype,"deleteAllMessage",null),n([b(he.Conversation,de.QueryHistoryMessage)],Ot.prototype,"queryHistoryMessage",null),n([b(he.Group,de.CreateRoom)],Ot.prototype,"createRoom",null),n([b(he.Group,de.EnterRoom)],Ot.prototype,"enterRoom",null),n([b(he.Group,de.JoinRoom)],Ot.prototype,"joinRoom",null),n([b(he.Group,de.LeaveRoom)],Ot.prototype,"leaveRoom",null),n([b(he.Group,de.QueryRoomMemberList)],Ot.prototype,"queryRoomMemberList",null),n([b(he.Group,de.QueryRoomOnlineMemberCount)],Ot.prototype,"queryRoomOnlineMemberCount",null),n([b(he.Group,de.QueryRoomAllAttributes)],Ot.prototype,"queryRoomAllAttributes",null),n([b(he.Group,de.SetRoomAttributes)],Ot.prototype,"setRoomAttributes",null),n([b(he.Group,de.DeleteRoomAttributes)],Ot.prototype,"deleteRoomAttributes",null),n([b(he.Group,de.EndRoomAttributesBatchOperation)],Ot.prototype,"endRoomAttributesBatchOperation",null),n([b(he.Group,de.CreateGroup)],Ot.prototype,"createGroup",null),n([b(he.Group,de.JoinGroup)],Ot.prototype,"joinGroup",null),n([b(he.Group,de.LeaveGroup)],Ot.prototype,"leaveGroup",null),n([b(he.Group,de.DismissGroup)],Ot.prototype,"dismissGroup",null),n([b(he.Group,de.QueryGroupList)],Ot.prototype,"queryGroupList",null),n([b(he.Group,de.UpdateGroupName)],Ot.prototype,"updateGroupName",null),n([b(he.Group,de.UpdateGroupNotice)],Ot.prototype,"updateGroupNotice",null),n([b(he.Group,de.UpdateGroupAvatarUrl)],Ot.prototype,"updateGroupAvatarUrl",null),n([b(he.Group,de.QueryGroupInfo)],Ot.prototype,"queryGroupInfo",null),n([b(he.Group,de.SetGroupAttributes)],Ot.prototype,"setGroupAttributes",null),n([b(he.Group,de.DeleteGroupAttributes)],Ot.prototype,"deleteGroupAttributes",null),n([b(he.Group,de.QueryGroupAttributes)],Ot.prototype,"queryGroupAttributes",null),n([b(he.Group,de.SetGroupMemberNickname)],Ot.prototype,"setGroupMemberNickname",null),n([b(he.Group,de.SetGroupMemberRole)],Ot.prototype,"setGroupMemberRole",null),n([b(he.Group,de.TransferGroupOwner)],Ot.prototype,"transferGroupOwner",null),n([b(he.Group,de.QueryGroupMemberInfo)],Ot.prototype,"queryGroupMemberInfo",null),n([b(he.Group,de.InviteUsersIntoGroup)],Ot.prototype,"inviteUsersIntoGroup",null),n([b(he.Group,de.KickGroupMembers)],Ot.prototype,"kickGroupMembers",null),n([b(he.Group,de.QueryGroupMemberList)],Ot.prototype,"queryGroupMemberList",null),n([b(he.Group,de.QueryGroupMemberCount)],Ot.prototype,"queryGroupMemberCount",null),n([b(he.Call,de.CallInvite)],Ot.prototype,"callInvite",null),n([b(he.Call,de.CallCancel)],Ot.prototype,"callCancel",null),n([b(he.Call,de.CallAccept)],Ot.prototype,"callAccept",null),n([b(he.Call,de.CallReject)],Ot.prototype,"callReject",null),Ot);function Ot(e,t){var r=this,o=(this.onConnectedEvent=function(e){r.userMgr.onConnected(e)},this.onDisConnectedEvent=function(e){r.userMgr.onDisConnected(e),r.eventBus.emit(Y.Error,ye(v.NetworkModuleNetworkError))},this.onPushEvent=function(e,t){var o,n,i=t.send_time_consumed;e===J.sw_push?(o=t.head.sub_cmd,1==t.head.qos_flag&&(n={code:0,message:"",sub_cmd:o,msg_id:t.head.msg_id,server_send_time:t.head.send_time},Object.assign(t,n),r.connMgr.sendRequestWithNoRsp(J.sw_push_rsp,n)),r.dataReport.reportNetworkRequest(e,t,i),r.handlePushEvent(o,t.msg_body,i)):e===J.sw_push_list?(1==t.qos_flag&&(n={code:0,message:"",server_send_time:t.send_time,push_responses:t.push_requests.map((function(e){return{sub_cmd:e.sub_cmd,msg_id:e.msg_id}}))},Object.assign(t,n),r.connMgr.sendRequestWithNoRsp(J.sw_push_list_rsp,n)),r.dataReport.reportNetworkRequest(e,t,i),t.push_requests.forEach((function(e){r.handlePushEvent(e.sub_cmd,e.msg_body,i)}))):(r.dataReport.reportNetworkRequest(e,t,0),r.handlePushEvent(e,t,i))},Ut.getInstance().settings);o.init(e,t),this.handle=e,this.eventBus=new Ee,this.engineConfig=o.getEngineConfig(e),this.logger=Ut.getInstance().logger,this.logger.setEventBus(this.eventBus),this.dataReport=Ut.getInstance().dataReport,this.dbMgr=new Pe(t),this.connMgr=new Ve(e),this.connMgr.initEvent(this.onConnectedEvent,this.onDisConnectedEvent,this.onPushEvent),this.groupMgr=new bt(e,this.eventBus,this.dbMgr,this.connMgr),this.convMgr=new ct(e,this.eventBus,this.dbMgr,this.connMgr,this.groupMgr),this.userMgr=new Mt(e,this.eventBus,this.dbMgr,this.connMgr),this.callMgr=new Ct(e,this.eventBus,this.connMgr)}var Et=r(18),xt=function(){return(xt=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},Pt=(Tt.prototype.setEventBus=function(e){this.eventBus=e},Tt.prototype.setLogConfig=function(e){this.logger.setLogLevel(e.logLevel),this.logger.setRemoteLogLevel("info")},Tt.prototype.init=function(e,t,r){(this.config.appID&&this.config.appID!=t||this.config.userID&&this.config.userID!=r.userID)&&this.upload(),this.config.appID=t,this.config.userID=r.userID,this.config.deviceID=e.deviceInfo.device_id,e={tag:this.config.tag,version:this.config.version,appID:t,deviceID:this.config.deviceID,userID:this.config.userID,userName:r.userName,origin:location.origin,device:Se},this.emitLog([he.Manager],"initLogger",e),this.logger.setHeaderInfo(JSON.stringify(e)),this.logger.setCommonField(new Map([["userID",this.config.userID]])),this.start()},Tt.prototype.start=function(){var e=this;this.timer||(this.timer=setInterval((function(){return e.upload()}),36e5))},Tt.prototype.stop=function(){this.timer&&clearInterval(this.timer),this.timer=0},Tt.prototype.renewToken=function(e){this.config.token=e},Tt.prototype.setUploadURL=function(e){this.config.uploadURL=e},Tt.prototype.upload=function(e){var t=this;return this.config.uploadURL&&this.config.token?this.logger.upload(xt({},this.config)).then((function(e){t.info(["ZegoLoggerSDK"],"upload",e)}),(function(e){return t.warn(["ZegoLoggerSDK"],"upload",e),Promise.reject(ye(v.CommonModuleUploadLogError))})):e?Promise.reject(ye(v.NetworkModuleUserIsNotLogged)):Promise.resolve()},Tt.prototype.report=function(e,t,r,o){this.emitLog(e,t,r,"report",o=void 0!==o&&o)},Tt.prototype.debug=function(e,t,r,o){this.emitLog(e,t,r,"debug",o=void 0!==o&&o)},Tt.prototype.info=function(e,t,r,o){this.emitLog(e,t,r,"info",o=void 0!==o&&o)},Tt.prototype.warn=function(e,t,r,o){this.emitLog(e,t,r,"warn",o=void 0!==o&&o)},Tt.prototype.error=function(e,t,r,o){this.emitLog(e,t,r,"error",o=void 0!==o&&o)},Tt.prototype.emitLog=function(e,t,r,o,n){n=r&&"object"==typeof r?this.stringify(r,n):r||"",o&&this.logger.write(e,o,t,n)},Tt.prototype.stringify=function(e,t){return void 0===t&&(t=!1),JSON.stringify(e,(function(e,r){return r instanceof Uint8Array?"b="+r.length:r instanceof Array&&2<r.length&&t?[o=r.length,r[0],r[o-1]]:"string"==typeof r&&t&&128<r.length?"s="+r.length:r instanceof f.a?r.toString():r;var o})).replace(/\"/g,"'")},Tt);function Tt(e){this.timer=0,this.config={product:"ZIM",appID:"",userID:"",token:"",uploadURL:"",deviceID:"",version:"",tag:"Fri, 12 Aug 2022 03:41:53 GMT"},this.logger=new Et.ZegoLogger(0,"ZIM"),this.logger.setDebugVerbose(!1),this.config.version=e}Object.defineProperty(Lt.prototype,"requestTimeout",{get:function(){return 3e4},enumerable:!1,configurable:!0}),Object.defineProperty(Lt.prototype,"connectionTimeout",{get:function(){return 3e5},enumerable:!1,configurable:!0}),Lt.prototype.init=function(e,t){this.engineConfigMap.set(e,{handle:e,appID:t,userID:"",userName:"",userExtendedData:"",token:"",tokenExpireTime:0})},Lt.prototype.unInit=function(e){var t=this.getEngineConfig(e);t.cloudTimer&&(t.cloudTimer&&clearInterval(t.cloudTimer),t.cloudTimer=0),this.engineConfigMap.delete(e)},Lt.prototype.getEngineConfig=function(e){return this.engineConfigMap.get(e)||{}},Lt.prototype.setDBUser=function(e){this.curDBUser=e},Lt.prototype.getDBUser=function(){return this.curDBUser},Lt.prototype.fetchConfig=function(e,t,r){var o=this,n=this.getEngineConfig(t),i=(r=(t=(this.syncRemoteConfig(e,n,r),n.cloudTimer||(n.cloudTimer=setInterval((function(){o.syncRemoteConfig(e,n)}),36e5)),this.cloudSetting.app_config)).main_domain_url,t.data_reporter_url);t=t.log_uploader_url,t="https://".concat(this.appendBackupDomain(t,r),"/zglog/zip"),i="wss://".concat(this.appendBackupDomain(i,r),"/zglog/web");return Promise.resolve([t,i])},Lt.prototype.syncRemoteConfig=function(e,t,r){var o=this;r={appid:t.appID,id_name:t.userID,product:"ZIM",files:["config"],param:{platform:"1"},timestamp:Date.now(),biztype:0,deviceid:Me,compress:!1,mode:"online",token:r||t.token};e.sendHttpRequest({url:"/cloud-setting/get",method:"POST"},r).then((function(e){var t;e&&e.data&&e.data.config&&e.data.config.data&&(t=(e=e.data.config.data).app_config,e=e.login_config,t&&e&&(o.cloudSetting=Object.freeze({app_config:t,login_config:e})))}))},Lt.prototype.appendBackupDomain=function(e,t){return-1==e.indexOf(".")?"".concat(e,".").concat(t):e},Lt.prototype.onNetworkStatusChange=function(){var e,t=this,r={wifi:2,"2g":3,"3g":4,"4g":5,unknown:32},o=navigator.connection||navigator.mozConnection||navigator.webkitConnection;o&&(e=o.type||o.effectiveType,this.netType=e,this.deviceInfo.net_type=r[e]||r.unknown,o.addEventListener("change",(function(){var e=o.type||o.effectiveType;t.netType=e,t.deviceInfo.net_type=r[e]||r.unknown})))};var qt=Lt;function Lt(e){this.engineConfigMap=new Map,this.curDBUser={},this.cloudSetting=Object.freeze({app_config:{main_domain_url:"zego.im",data_reporter_url:"webzim-report.zego.im",log_uploader_url:"webzim-detaillog.zego.im",request_control:100},login_config:{login_retry_interval:4e3,login_retry_count:2,login_retry_max_interval:32e3}}),this.netType="",this.serverOffsetTime=0,this.hbTimeoutMaxCount=3,this.needReloginCodeList=Object.freeze([50107,103015]),this.mailHBFetchConfig={conv_list_seq:f.a.fromString("0"),group_list_seq:f.a.fromString("0"),c2c_msg_seq:f.a.fromString("0"),fetch_c2c_msg_count:0,fetch_group_msg_count:0,fetch_room_msg_count:0,fetch_conv_list:0,fetch_group_list:0,usermail_hb_interval:1e4,seq_fallback_timeout:1e4,msg_to:1e4,msg_itvl:3e4,list_to:1e4,list_itvl:3e4,conv_to:0,conv_itvl:0,group_to:0,group_itvl:0,gmemb_to:0,gmemb_itvl:0,gattr_to:0,gattr_itvl:0,ulist_to:0,ulist_itvl:0,rattr_to:0,rattr_itvl:0},this.deviceInfo={sdk_ver:e.split(".").reverse().reduce((function(e,t,r){return e+ +t*Math.pow(100,r)}),0),term_type:6,device_id:Me,net_type:32},this.onNetworkStatusChange()}var Bt=r(19),Gt=function(){return(Gt=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},Nt=(jt.prototype.init=function(e,t){this.isInited||(this.isInited=!0,this.dataReport.init({appID:e,deviceID:this.commonFields.device_id,env:0,serverUrl:t,importantLevel:0,levels:[0,10]}))},jt.prototype.start=function(e,t){this.commonFields.user_id=e;var r=new Map;r.set("userID",e),r.set("token",t),this.dataReport.startReport(r),t?this.dataReport.resume():this.dataReport.pause()},jt.prototype.begin=function(e,t,r){return r=this.createDateEvent(e,r),this.evenDatatMap.set(e+t,r),r},jt.prototype.end=function(e,t,r){var o=this.evenDatatMap.get(e+t);o&&(Object.assign(o,r),this.upload(o),this.evenDatatMap.delete(e+t))},jt.prototype.report=function(e,t){e=this.createDateEvent(e,t),this.upload(e)},jt.prototype.beginNetworkRequest=function(e,t,r){return r=this.flatNestedData(r),e=this.getNameByCMD(e),r=this.createDateEvent(e,r),this.evenDatatMap.set(e+t,r),r},jt.prototype.endNetworkRequest=function(e,t,r){e=this.getNameByCMD(e);var o=this.evenDatatMap.get(e+t);o&&((r=r||{}).code?(o.error=r.code,o.error_message=r.message||""):this.formatRspAttribute(o,r),this.upload(o),this.evenDatatMap.delete(e+t))},jt.prototype.reportNetworkRequest=function(e,t,r){e=this.getNameByCMD(e),(e=this.createDateEvent(e,this.flatNestedData(t))).time_consumed=r,this.upload(e)},jt.prototype.setServerUserID=function(e){this.commonFields.usernid=e},jt.prototype.getNameByCMD=function(e){return e.replace("_rsp","")},jt.prototype.createDateEvent=function(e,t){return Gt(Gt({event:e,event_time:Date.now()+this.settings.serverOffsetTime},this.commonFields),t)},jt.prototype.upload=function(e){e.net_type=this.settings.netType,e.time_consumed||(e.time_consumed=Date.now()+this.settings.serverOffsetTime-e.event_time),this.hookEvent(e),this.dataReport.report(JSON.stringify(e),0)},jt.prototype.flatNestedData=function(e){var t={};return function e(r,o){var n;Object(r)!==r?t[o]=r:r instanceof Uint8Array||r instanceof Array?t[o+"_len"]=r.length:r instanceof f.a?t[o]=r.toString():(n=!0,Object.keys(r).forEach((function(t){n=!1,e(r[t],o?"".concat(o,"_").concat(t):t)})),n&&o&&(t[o]={}))}(e,""),t},jt.prototype.formatRspAttribute=function(e,t){t=this.flatNestedData(t);var r=Object.keys(e);Object.keys(t).forEach((function(o){-1==r.indexOf(o)?e[o]=t[o]:e["rsp_"+o]=t[o]}))},jt.prototype.hookEvent=function(e){var t;switch(e.event){case J.sw_login:e.server_timestamp=+(null==(t=e.server_timestamp)?void 0:t.toString())||0;break;case J.im_room_create:case J.im_room_enter:e.conv_msg_seq=+(null==(t=e.conv_msg_seq)?void 0:t.toString())||0;break;case J.im_c2c_msg:case J.im_room_msg:case J.im_group_msg:e.send_count_after_read=+(null==(t=e.send_count_after_read)?void 0:t.toString())||0,e.msg_svr_info_conv_msg_seq=+(null==(t=e.msg_svr_info_conv_msg_seq)?void 0:t.toString())||0,e.msg_svr_info_c2c_msg_seq=+(null==(t=e.msg_svr_info_c2c_msg_seq)?void 0:t.toString())||0,e.msg_svr_info_msg_time=+(null==(t=e.msg_svr_info_msg_time)?void 0:t.toString())||0;break;case J.im_c2c_command:case J.im_group_command:e.command_svr_info_msg_time=+(null==(t=e.command_svr_info_msg_time)?void 0:t.toString())||0}},jt);function jt(e){this.settings=e,this.dataReport=Bt.ZegoDataReportWeb.getDataReporter("zim"),this.evenDatatMap=new Map,this.isInited=!1,this.commonFields={error:0,error_message:"",product:"zim",device_id:"",sdk_version:"",user_id:"",usernid:"",os_type:Ie,net_type:"",term_typ:""};var t=(e=this.settings.deviceInfo).device_id,r=e.sdk_ver;e=e.term_type;this.commonFields.device_id=t,this.commonFields.sdk_version=r+"",this.commonFields.term_typ=7==e?"miniprogram":"web"}zt.getInstance=function(){return this.instance||(this.instance=new zt)},zt.prototype.getVersion=function(){return"2.3.0"},zt.prototype.createEngine=function(e){if(!e||"number"!=typeof e)throw new Error(JSON.stringify(ye(v.CommonModuleInvalidAppID)));var t,r=this.handle;return this.enginMap.get(r)?(this.logger.info([he.Manager],de.CreateEngine,{appID:e,msg:"had created"}),null):(t=new At(r,e),this.enginMap.set(r,t),this.logger.info([he.Manager],de.CreateEngine,{appID:e,msg:"first create"}),t)},zt.prototype.destroyEngine=function(e){this.logger.info([he.Manager],de.DestroyEngine),e&&(this.enginMap.delete(e.handle),e.destroy())},zt.prototype.setLogConfig=function(e){this.logger.info([he.Manager],de.SetLogConfig,e),this.logger.setLogConfig(Object.assign({logLevel:"info"},e))};var Ut=zt;function zt(){if(this.handle=Symbol(),this.enginMap=new Map,zt.instance)return zt.instance;this.crypto=new h,this.protobuf=new Ce(this.crypto),this.logger=new Pt(this.getVersion()),this.settings=new qt(this.getVersion()),this.dataReport=new Nt(this.settings),zt.instance=this}Ht.getVersion=function(){return Ut.getInstance().getVersion()},Ht.create=function(e){return e="object"==typeof e?e.appID:e,(e=Ut.getInstance().createEngine(e))?Ht._instatance=new Ht(e):null},Ht.getInstance=function(){return Ht._instatance},Ht.prototype.destroy=function(){Ut.getInstance().destroyEngine(this.engine),this.engine=null},Ht.prototype.setLogConfig=function(e){Ut.getInstance().setLogConfig(e)},Ht.prototype.uploadLog=function(){return this.engine?this.engine.uploadLog():Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.on=function(e,t){this.engine&&this.engine.on(e,t)},Ht.prototype.off=function(e){this.engine&&this.engine.off(e)},Ht.prototype.login=function(e,t){return this.engine?this.engine.login(e,t):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.logout=function(){this.engine&&this.engine.logout()},Ht.prototype.renewToken=function(e){return this.engine?this.engine.renewToken(e):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.queryUsersInfo=function(e,t){return this.engine?this.engine.queryUsersInfo(e,t):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.updateUserName=function(e){return this.engine?this.engine.updateUserName(e):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.updateUserAvatarUrl=function(e){return this.engine?this.engine.updateUserAvatarUrl(e):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.updateUserExtendedData=function(e){return this.engine?this.engine.updateUserExtendedData(e):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.queryConversationList=function(e){return this.engine?this.engine.queryConversationList(e):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.deleteConversation=function(e,t,r){return this.engine?this.engine.deleteConversation(e,t,r):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.setConversationNotificationStatus=function(e,t,r){return this.engine?this.engine.setConversationNotificationStatus(e,t,r):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.clearConversationUnreadMessageCount=function(e,t){return this.engine?this.engine.clearConversationUnreadMessageCount(e,t):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.sendPeerMessage=function(e,t,r){return this.engine?this.engine.sendMessage(e,t,I.Peer,r):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.sendGroupMessage=function(e,t,r){return this.engine?this.engine.sendMessage(e,t,I.Group,r):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.sendRoomMessage=function(e,t,r){return this.engine?this.engine.sendMessage(e,t,I.Room,r):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.sendMediaMessage=function(e,t,r,o,n){return this.engine?this.engine.sendMediaMessage(e,t,r,o,n):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.deleteMessages=function(e,t,r,o){return this.engine?this.engine.deleteMessages(e,t,r,o):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.deleteAllMessage=function(e,t,r){return this.engine?this.engine.deleteAllMessage(e,t,r):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.queryHistoryMessage=function(e,t,r){return this.engine?this.engine.queryHistoryMessage(e,t,r):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.createRoom=function(e,t){return this.engine?this.engine.createRoom(e,t):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.enterRoom=function(e,t){return this.engine?this.engine.enterRoom(e,t):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.joinRoom=function(e){return this.engine?this.engine.joinRoom(e):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.leaveRoom=function(e){return this.engine?this.engine.leaveRoom(e):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.queryRoomMemberList=function(e,t){return this.engine?this.engine.queryRoomMemberList(e,t):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.queryRoomOnlineMemberCount=function(e){return this.engine?this.engine.queryRoomOnlineMemberCount(e):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.queryRoomAllAttributes=function(e){return this.engine?this.engine.queryRoomAllAttributes(e):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.setRoomAttributes=function(e,t,r){return this.engine?this.engine.setRoomAttributes(e,t,r):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.deleteRoomAttributes=function(e,t,r){return this.engine?this.engine.deleteRoomAttributes(e,t,r):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.beginRoomAttributesBatchOperation=function(e,t){this.engine&&this.engine.beginRoomAttributesBatchOperation(e,t)},Ht.prototype.endRoomAttributesBatchOperation=function(e){return this.engine?this.engine.endRoomAttributesBatchOperation(e):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.createGroup=function(e,t,r){return this.engine?this.engine.createGroup(e,t,r):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.joinGroup=function(e){return this.engine?this.engine.joinGroup(e):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.leaveGroup=function(e){return this.engine?this.engine.leaveGroup(e):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.dismissGroup=function(e){return this.engine?this.engine.dismissGroup(e):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.queryGroupList=function(){return this.engine?this.engine.queryGroupList():Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.updateGroupNotice=function(e,t){return this.engine?this.engine.updateGroupNotice(e,t):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.updateGroupName=function(e,t){return this.engine?this.engine.updateGroupName(e,t):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.updateGroupAvatarUrl=function(e,t){return this.engine?this.engine.updateGroupAvatarUrl(e,t):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.queryGroupInfo=function(e){return this.engine?this.engine.queryGroupInfo(e):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.setGroupAttributes=function(e,t){return this.engine?this.engine.setGroupAttributes(e,t):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.deleteGroupAttributes=function(e,t){return this.engine?this.engine.deleteGroupAttributes(e,t):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.queryGroupAttributes=function(e,t){return this.engine?this.engine.queryGroupAttributes(t,e):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.queryGroupAllAttributes=function(e){return this.engine?this.engine.queryGroupAttributes(e):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.setGroupMemberNickname=function(e,t,r){return this.engine?this.engine.setGroupMemberNickname(e,t,r):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.setGroupMemberRole=function(e,t,r){return this.engine?this.engine.setGroupMemberRole(e,t,r):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.transferGroupOwner=function(e,t){return this.engine?this.engine.transferGroupOwner(e,t):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.queryGroupMemberInfo=function(e,t){return this.engine?this.engine.queryGroupMemberInfo(e,t):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.inviteUsersIntoGroup=function(e,t){return this.engine?this.engine.inviteUsersIntoGroup(e,t):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.kickGroupMembers=function(e,t){return this.engine?this.engine.kickGroupMembers(e,t):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.queryGroupMemberList=function(e,t){return this.engine?this.engine.queryGroupMemberList(e,t):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.queryGroupMemberCount=function(e){return this.engine?this.engine.queryGroupMemberCount(e):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.callInvite=function(e,t){return this.engine?this.engine.callInvite(e,t):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.callCancel=function(e,t,r){return this.engine?this.engine.callCancel(e,t,r):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.callAccept=function(e,t){return this.engine?this.engine.callAccept(e,t):Promise.reject(ye(v.CommonModuleNotInit))},Ht.prototype.callReject=function(e,t){return this.engine?this.engine.callReject(e,t):Promise.reject(ye(v.CommonModuleNotInit))},Ht._instatance=null,Ht.TAG="Fri, 12 Aug 2022 03:41:53 GMT";var Ft=Ht;function Ht(e){if(!e||!e.setContext)throw new Error("Can not be use new.");(this.engine=e).setContext(this)}t.default=Ft}])}));